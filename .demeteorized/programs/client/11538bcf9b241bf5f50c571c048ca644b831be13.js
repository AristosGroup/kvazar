!function(){var e,t;(function(){t={}}).call(this),function(){(function(){var e=this,n=e._,i={},r=Array.prototype,o=Object.prototype,s=Function.prototype,a=r.push,l=r.slice,c=r.concat,u=o.toString,d=o.hasOwnProperty,h=r.forEach,f=r.map,p=r.reduce,m=r.reduceRight,g=r.filter,v=r.every,y=r.some,b=r.indexOf,w=r.lastIndexOf,_=Array.isArray,C=Object.keys,k=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=x),t._=x):e._=x,x.VERSION="1.5.2";var S=x.each=x.forEach=function(e,t,n){if(null!=e)if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var s=x.keys(e),r=0,o=s.length;o>r;r++)if(t.call(n,e[s[r]],s[r],e)===i)return};x.map=x.collect=function(e,t,n){var i=[];return null==e?i:f&&e.map===f?e.map(t,n):(S(e,function(e,r,o){i.push(t.call(n,e,r,o))}),i)};var T="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=x.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(S(e,function(e,o,s){r?n=t.call(i,n,e,o,s):(n=e,r=!0)}),!r)throw new TypeError(T);return n},x.reduceRight=x.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return i&&(t=x.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var s=x.keys(e);o=s.length}if(S(e,function(a,l,c){l=s?s[--o]:--o,r?n=t.call(i,n,e[l],l,c):(n=e[l],r=!0)}),!r)throw new TypeError(T);return n},x.find=x.detect=function(e,t,n){var i;return E(e,function(e,r,o){return t.call(n,e,r,o)?(i=e,!0):void 0}),i},x.filter=x.select=function(e,t,n){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,n):(S(e,function(e,r,o){t.call(n,e,r,o)&&i.push(e)}),i)},x.reject=function(e,t,n){return x.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},x.every=x.all=function(e,t,n){t||(t=x.identity);var r=!0;return null==e?r:v&&e.every===v?e.every(t,n):(S(e,function(e,o,s){return(r=r&&t.call(n,e,o,s))?void 0:i}),!!r)};var E=x.some=x.any=function(e,t,n){t||(t=x.identity);var r=!1;return null==e?r:y&&e.some===y?e.some(t,n):(S(e,function(e,o,s){return r||(r=t.call(n,e,o,s))?i:void 0}),!!r)};x.contains=x.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):E(e,function(e){return e===t})},x.invoke=function(e,t){var n=l.call(arguments,2),i=x.isFunction(t);return x.map(e,function(e){return(i?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return S(e,function(e,r,o){var s=t?t.call(n,e,r,o):e;s>i.computed&&(i={value:e,computed:s})}),i.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return S(e,function(e,r,o){var s=t?t.call(n,e,r,o):e;s<i.computed&&(i={value:e,computed:s})}),i.value},x.shuffle=function(e){var t,n=0,i=[];return S(e,function(e){t=x.random(n++),i[n-1]=i[t],i[t]=e}),i},x.sample=function(e,t,n){return arguments.length<2||n?e[x.random(e.length-1)]:x.shuffle(e).slice(0,Math.max(0,t))};var D=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var i=D(t);return x.pluck(x.map(e,function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var N=function(e){return function(t,n,i){var r={},o=null==n?x.identity:D(n);return S(t,function(n,s){var a=o.call(i,n,s,t);e(r,a,n)}),r}};x.groupBy=N(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)}),x.indexBy=N(function(e,t,n){e[t]=n}),x.countBy=N(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,i){n=null==n?x.identity:D(n);for(var r=n.call(i,t),o=0,s=e.length;s>o;){var a=o+s>>>1;n.call(i,e[a])<r?o=a+1:s=a}return o},x.toArray=function(e){return e?x.isArray(e)?l.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:l.call(e,0,t)},x.initial=function(e,t,n){return l.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?c.apply(n,e):(S(e,function(e){x.isArray(e)||x.isArguments(e)?t?a.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,l.call(arguments,1))},x.uniq=x.unique=function(e,t,n,i){x.isFunction(t)&&(i=n,n=t,t=!1);var r=n?x.map(e,n,i):e,o=[],s=[];return S(r,function(n,i){(t?i&&s[s.length-1]===n:x.contains(s,n))||(s.push(n),o.push(e[i]))}),o},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=l.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=c.apply(r,l.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=x.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(w&&e.lastIndexOf===w)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,o=new Array(i);i>r;)o[r++]=e,e+=n;return o};var O=function(){};x.bind=function(e,t){var n,i;if(k&&e.bind===k)return k.apply(e,l.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=l.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(l.call(arguments)));O.prototype=e.prototype;var r=new O;O.prototype=null;var o=e.apply(r,n.concat(l.call(arguments)));return Object(o)===o?o:r}},x.partial=function(e){var t=l.call(arguments,1);return function(){return e.apply(this,t.concat(l.call(arguments)))}},x.bindAll=function(e){var t=l.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return S(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var i=t.apply(this,arguments);return x.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},x.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(l.call(arguments,1)))},x.throttle=function(e,t,n){var i,r,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:new Date,s=null,o=e.apply(i,r)};return function(){var c=new Date;a||n.leading!==!1||(a=c);var u=t-(c-a);return i=this,r=arguments,0>=u?(clearTimeout(s),s=null,a=c,o=e.apply(i,r)):s||n.trailing===!1||(s=setTimeout(l,u)),o}},x.debounce=function(e,t,n){var i,r,o,s,a;return function(){o=this,r=arguments,s=new Date;var l=function(){var c=new Date-s;t>c?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(o,r)))},c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(o,r)),a}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=C||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},x.pairs=function(e){for(var t=x.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},x.invert=function(e){for(var t={},n=x.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return S(l.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=c.apply(r,l.call(arguments,1));return S(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=c.apply(r,l.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return S(l.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var r=u.call(e);if(r!=u.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!(x.isFunction(s)&&s instanceof s&&x.isFunction(a)&&a instanceof a))return!1;n.push(e),i.push(t);var l=0,c=!0;if("[object Array]"==r){if(l=e.length,c=l==t.length)for(;l--&&(c=M(e[l],t[l],n,i)););}else{for(var d in e)if(x.has(e,d)&&(l++,!(c=x.has(t,d)&&M(e[d],t[d],n,i))))break;if(c){for(d in t)if(x.has(t,d)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=_||function(e){return"[object Array]"==u.call(e)},x.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return d.call(e,t)},x.noConflict=function(){return e._=n,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;e>r;r++)i[r]=t.call(n,r);return i},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=x.invert(P.escape);var I={escape:new RegExp("["+x.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(P.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(I[e],function(t){return P[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){S(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),F.call(this,n.apply(x,e))}})};var $=0;x.uniqueId=function(e){var t=++$+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var i;n=x.defaults({},n,x.templateSettings);var r=new RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(r,function(t,n,i,r,a){return s+=e.slice(o,a).replace(j,function(e){return"\\"+L[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(t)return i(t,x);var l=function(e){return i.call(this,e,x)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),S(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){e=t._}.call(this),"undefined"==typeof Package&&(Package={}),Package.underscore={_:e}}(),function(){var e,t=Package.underscore._;(function(){e={isClient:!0,isServer:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(e.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}).call(this),function(){if(e.isServer)var n=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(e.release=__meteor_runtime_config__.meteorRelease),t.extend(e,{_get:function(e){for(var t=1;t<arguments.length;t++){if(!(arguments[t]in e))return void 0;e=e[arguments[t]]}return e},_ensure:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];n in e||(e[n]={}),e=e[n]}return e},_delete:function(e){for(var t=[e],n=!0,i=1;i<arguments.length-1;i++){var r=arguments[i];if(!(r in e)){n=!1;break}if(e=e[r],"object"!=typeof e)break;t.push(e)}for(var i=t.length-1;i>=0;i--){var r=arguments[i+1];if(n)n=!1;else for(var o in t[i][r])return;delete t[i][r]}},_wrapAsync:function(i){return function(){for(var r,o,s=this,a=t.toArray(arguments),l=function(t){return t?e._debug("Exception in callback of async function",t.stack?t.stack:t):void 0};a.length>0&&"undefined"==typeof a[a.length-1];)a.pop();a.length>0&&a[a.length-1]instanceof Function?r=a.pop():e.isClient?r=l:(o=new n,r=o.resolver()),a.push(e.bindEnvironment(r));var c=i.apply(s,a);return o?o.wait():c}}})}.call(this),function(){"use strict";function t(){if(r.setImmediate){var e=function(e){r.setImmediate(e)};return e.implementation="setImmediate",e}return null}function n(){function e(e,t){return"string"==typeof e&&e.substring(0,t.length)===t}function t(t){if(t.source===r&&e(t.data,a)){var n=t.data.substring(a.length);try{s[n]&&s[n]()}finally{delete s[n]}}}if(!r.postMessage||r.importScripts)return null;var n=!0,i=r.onmessage;if(r.onmessage=function(){n=!1},r.postMessage("","*"),r.onmessage=i,!n)return null;var o=0,s={},a="Meteor._setImmediate."+Math.random()+".";r.addEventListener?r.addEventListener("message",t,!1):r.attachEvent("onmessage",t);var l=function(e){++o,s[o]=e,r.postMessage(a+o,"*")};return l.implementation="postMessage",l}function i(){var e=function(e){r.setTimeout(e,0)};return e.implementation="setTimeout",e}var r=this;e._setImmediate=t()||n()||i()}.call(this),function(){var n=function(e){if(Package.livedata){var t=Package.livedata.DDP._CurrentInvocation;if(t.get()&&t.get().isSimulation)throw new Error("Can't set timers inside simulations");return function(){t.withValue(null,e)}}return e},i=function(t,i){return e.bindEnvironment(n(i),t)};t.extend(e,{setTimeout:function(e,t){return setTimeout(i("setTimeout callback",e),t)},setInterval:function(e,t){return setInterval(i("setInterval callback",e),t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},defer:function(t){e._setImmediate(i("defer callback",t))}})}.call(this),function(){var t=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};e.makeErrorType=function(e,n){var i=function(){var t=this;if(Error.captureStackTrace)Error.captureStackTrace(t,i);else{var r=new Error;r.__proto__=i.prototype,r instanceof i&&(t=r)}return n.apply(t,arguments),t.errorType=e,t};return t(i,Error),i},e.Error=e.makeErrorType("Meteor.Error",function(e,t,n){var i=this;i.error=e,i.reason=t,i.details=n,i.message=i.reason?i.reason+" ["+i.error+"]":"["+i.error+"]"}),e.Error.prototype.clone=function(){var t=this;return new e.Error(t.error,t.reason,t.details)}}.call(this),function(){e._noYieldsAllowed=function(e){return e()},e._SynchronousQueue=function(){var e=this;e._tasks=[],e._running=!1},t.extend(e._SynchronousQueue.prototype,{runTask:function(n){var i=this;if(!i.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");i._tasks.push(n);var r=i._tasks;i._tasks=[],i._running=!0;try{for(;!t.isEmpty(r);){var o=r.shift();try{o()}catch(s){if(t.isEmpty(r))throw s;e._debug("Exception in queued task: "+s.stack)}}}finally{i._running=!1}},queueTask:function(e){var n=this,i=t.isEmpty(n._tasks);n._tasks.push(e),i&&setTimeout(t.bind(n.flush,n),0)},flush:function(){var e=this;e.runTask(function(){})},drain:function(){var e=this;if(e.safeToRunTask())for(;!t.isEmpty(e._tasks);)e.flush()},safeToRunTask:function(){var e=this;return!e._running}})}.call(this),function(){var t=[],n="loaded"===document.readyState||"complete"==document.readyState,i=function(){for(n=!0;t.length;)t.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("load",i)),e.startup=function(i){var r=!document.addEventListener&&document.documentElement.doScroll;if(r&&window===top){try{r("left")}catch(o){return setTimeout(function(){e.startup(i)},50),void 0}i()}else n?i():t.push(i)}}.call(this),function(){var t=0;e._debug=function(){if(t)return t--,void 0;if("undefined"!=typeof console&&"undefined"!=typeof console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var e=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(e=!1);e?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var i=Function.prototype.bind.call(console.log,console);i.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},e._suppress_log=function(e){t+=e}}.call(this),function(){var n=0,i=[];e.EnvironmentVariable=function(){this.slot=n++},t.extend(e.EnvironmentVariable.prototype,{get:function(){return i[this.slot]},withValue:function(e,t){var n=i[this.slot];try{i[this.slot]=e;var r=t()}finally{i[this.slot]=n}return r}}),e.bindEnvironment=function(n,r,o){var s=t.clone(i);if(!r||"string"==typeof r){var a=r||"callback of async function";r=function(t){e._debug("Exception in "+a+":",t&&t.stack||t)}}return function(){var e=i;try{i=s;var a=n.apply(o,t.toArray(arguments))}catch(l){r(l)}finally{i=e}return a}}}.call(this),function(){e.absoluteUrl=function(n,i){i||"object"!=typeof n||(i=n,n=void 0),i=t.extend({},e.absoluteUrl.defaultOptions,i||{});var r=i.rootUrl;if(!r)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(r)||(r="http://"+r),/\/$/.test(r)||(r+="/"),n&&(r+=n),i.secure&&/^http:/.test(r)&&!/http:\/\/localhost[:\/]/.test(r)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(r)&&(r=r.replace(/^http:/,"https:")),i.replaceLocalhost&&(r=r.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),r},e.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(e.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),e._relativeToSiteRootUrl=function(e){return"object"==typeof __meteor_runtime_config__&&"/"===e.substr(0,1)&&(e=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+e),e}}.call(this),"undefined"==typeof Package&&(Package={}),Package.meteor={Meteor:e}}(),function(){var Meteor=Package.meteor.Meteor,JSON;(function(){window.JSON&&(JSON=window.JSON)}).call(this),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,o,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;o>n;n+=1)s[n]=str(n,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.json={JSON:JSON}}(),function(){var e,t,n,i,r=(Package.meteor.Meteor,Package.json.JSON),o=Package.underscore._;(function(){e={},t={};var s={};e.addType=function(e,t){if(o.has(s,e))throw new Error("Type "+e+" already present");s[e]=t};var a=function(e){return o.isNaN(e)||1/0===e||e===-1/0},l=[{matchJSONValue:function(e){return o.has(e,"$date")&&1===o.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return o.has(e,"$InfNaN")&&1===o.size(e)},matchObject:a,toJSONValue:function(e){var t;return t=o.isNaN(e)?0:1/0===e?1:-1,{$InfNaN:t}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return o.has(e,"$binary")&&1===o.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&o.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:n(e)}},fromJSONValue:function(e){return i(e.$binary)}},{matchJSONValue:function(e){return o.has(e,"$escape")&&1===o.size(e)},matchObject:function(e){return o.isEmpty(e)||o.size(e)>2?!1:o.any(l,function(t){return t.matchJSONValue(e)})},toJSONValue:function(t){var n={};return o.each(t,function(t,i){n[i]=e.toJSONValue(t)}),{$escape:n}},fromJSONValue:function(t){var n={};return o.each(t.$escape,function(t,i){n[i]=e.fromJSONValue(t)}),n}},{matchJSONValue:function(e){return o.has(e,"$type")&&o.has(e,"$value")&&2===o.size(e)},matchObject:function(t){return e._isCustomType(t)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(e){var t=e.$type,n=s[t];return n(e.$value)}}];e._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&o.has(s,e.typeName())};var c=e._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=u(e);return void 0!==t?t:"object"!=typeof e?e:(o.each(e,function(t,n){if("object"==typeof t||void 0===t||a(t)){var i=u(t);return i?(e[n]=i,void 0):(c(t),void 0)}}),e)},u=function(e){for(var t=0;t<l.length;t++){var n=l[t];if(n.matchObject(e))return n.toJSONValue(e)}return void 0};e.toJSONValue=function(t){var n=u(t);return void 0!==n?n:("object"==typeof t&&(t=e.clone(t),c(t)),t)};var d=e._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=h(e);return t!==e?t:"object"!=typeof e?e:(o.each(e,function(t,n){if("object"==typeof t){var i=h(t);if(t!==i)return e[n]=i,void 0;d(t)}}),e)},h=function(e){if("object"==typeof e&&null!==e&&o.size(e)<=2&&o.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var t=0;t<l.length;t++){var n=l[t];if(n.matchJSONValue(e))return n.fromJSONValue(e)}return e};e.fromJSONValue=function(t){var n=h(t);return n===t&&"object"==typeof t?(t=e.clone(t),d(t),t):n},e.stringify=function(t,n){var i=e.toJSONValue(t);return n&&(n.canonical||n.indent)?e._canonicalStringify(i,n):r.stringify(i)},e.parse=function(t){if("string"!=typeof t)throw new Error("EJSON.parse argument should be a string");return e.fromJSONValue(r.parse(t))},e.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},e.equals=function(t,n,i){var r,s=!(!i||!i.keyOrderSensitive);if(t===n)return!0;if(o.isNaN(t)&&o.isNaN(n))return!0;if(!t||!n)return!1;if("object"!=typeof t||"object"!=typeof n)return!1;if(t instanceof Date&&n instanceof Date)return t.valueOf()===n.valueOf();if(e.isBinary(t)&&e.isBinary(n)){if(t.length!==n.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}if("function"==typeof t.equals)return t.equals(n,i);if(t instanceof Array){if(!(n instanceof Array))return!1;if(t.length!==n.length)return!1;for(r=0;r<t.length;r++)if(!e.equals(t[r],n[r],i))return!1;return!0}var a;if(s){var l=[];return o.each(n,function(e,t){l.push(t)}),r=0,a=o.all(t,function(t,o){return r>=l.length?!1:o!==l[r]?!1:e.equals(t,n[l[r]],i)?(r++,!0):!1}),a&&r===l.length}return r=0,a=o.all(t,function(t,s){return o.has(n,s)?e.equals(t,n[s],i)?(r++,!0):!1:!1}),a&&o.size(n)===r},e.clone=function(t){var n;if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Date)return new Date(t.getTime());if(e.isBinary(t)){n=e.newBinary(t.length);for(var i=0;i<t.length;i++)n[i]=t[i];return n}if(o.isArray(t)||o.isArguments(t)){for(n=[],i=0;i<t.length;i++)n[i]=e.clone(t[i]);return n}return"function"==typeof t.clone?t.clone():(n={},o.each(t,function(t,i){n[i]=e.clone(t)}),n)}}).call(this),function(){function t(e){return r.stringify(e)}var n=function(e,i,r,s,a){var l,c,u,d,h=s,f=i[e];switch(typeof f){case"string":return t(f);case"number":return isFinite(f)?String(f):"null";case"boolean":return String(f);case"object":if(!f)return"null";if(h=s+r,d=[],o.isArray(f)||o.isArguments(f)){for(u=f.length,l=0;u>l;l+=1)d[l]=n(l,f,r,h,a)||"null";return c=0===d.length?"[]":h?"[\n"+h+d.join(",\n"+h)+"\n"+s+"]":"["+d.join(",")+"]"}var p=o.keys(f);return a&&(p=p.sort()),o.each(p,function(e){c=n(e,f,r,h,a),c&&d.push(t(e)+(h?": ":":")+c)}),c=0===d.length?"{}":h?"{\n"+h+d.join(",\n"+h)+"\n"+s+"}":"{"+d.join(",")+"}"}};e._canonicalStringify=function(e,t){if(t=o.extend({indent:"",canonical:!1},t),t.indent===!0)t.indent="  ";else if("number"==typeof t.indent){for(var i="",r=0;r<t.indent;r++)i+=" ";t.indent=i}return n("",{"":e},t.indent,"",t.canonical)}}.call(this),function(){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={},s=0;s<r.length;s++)o[r.charAt(s)]=s;n=function(e){for(var t=[],n=null,i=null,r=null,o=null,s=0;s<e.length;s++)switch(s%3){case 0:n=e[s]>>2&63,i=(3&e[s])<<4;break;case 1:i|=e[s]>>4&15,r=(15&e[s])<<2;break;case 2:r|=e[s]>>6&3,o=63&e[s],t.push(a(n)),t.push(a(i)),t.push(a(r)),t.push(a(o)),n=null,i=null,r=null,o=null}return null!=n&&(t.push(a(n)),t.push(a(i)),null==r?t.push("="):t.push(a(r)),null==o&&t.push("=")),t.join("")};var a=function(e){return r.charAt(e)},l=function(e){return"="===e?-1:o[e]};e.newBinary=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;e>n;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},i=function(t){var n=Math.floor(3*t.length/4);"="==t.charAt(t.length-1)&&(n--,"="==t.charAt(t.length-2)&&n--);for(var i=e.newBinary(n),r=null,o=null,s=null,a=0,c=0;c<t.length;c++){var u=t.charAt(c),d=l(u);switch(c%4){case 0:if(0>d)throw new Error("invalid base64 string");r=d<<2;break;case 1:if(0>d)throw new Error("invalid base64 string");r|=d>>4,i[a++]=r,o=(15&d)<<4;break;case 2:d>=0&&(o|=d>>2,i[a++]=o,s=(3&d)<<6);break;case 3:d>=0&&(i[a++]=s|d)}}return i},t.base64Encode=n,t.base64Decode=i}.call(this),"undefined"==typeof Package&&(Package={}),Package.ejson={EJSON:e,EJSONTest:t}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=Package.ejson.EJSON;(function(){e=function(){return e.info.apply(this,arguments)};var r=0,o=[],s=0;e._intercept=function(e){r+=e},e._suppress=function(e){s+=e},e._intercepted=function(){var e=o;return o=[],r=0,e},e.outputFormat="json";var a={debug:"green",warn:"magenta",error:"red"},l="blue",c=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],u=c.concat(["app","message"]),d=function(n){var i=e.format(n),r=n.level;"undefined"!=typeof console&&console[r]?console[r](i):t._debug(i)};e._getCallerDetails=function(){var e=function(){var e=new Error,t=e.stack;return t},t=e();if(!t)return{};for(var n,i=t.split("\n"),r=1;r<i.length;++r){if(n=i[r],n.match(/^\s*at eval \(eval/))return{file:"eval"};
if(!n.match(/packages\/logging(?:\/|(?::tests)?\.js)/))break}var o={},s=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(n);return s?(o.line=s[2].split(":")[0],o.file=s[1].split("/").slice(-1)[0].split("?")[0],o):o},n.each(["debug","info","warn","error"],function(a){e[a]=function(l){if(s)return s--,void 0;var u=!1;r&&(r--,u=!0);var h=!n.isObject(l)||n.isRegExp(l)||n.isDate(l)?{message:new String(l).toString()}:l;if(n.each(c,function(e){if(h[e])throw new Error("Can't set '"+e+"' in log message")}),n.has(h,"message")&&!n.isString(h.message))throw new Error("The 'message' field in log objects must be a string");if(h=n.extend(e._getCallerDetails(),h),h.time=new Date,h.level=a,"debug"!==a)if(u)o.push(i.stringify(h));else if(t.isServer)if("colored-text"===e.outputFormat)console.log(e.format(h,{color:!0}));else{if("json"!==e.outputFormat)throw new Error("Unknown logging output format: "+e.outputFormat);console.log(i.stringify(h))}else d(h)}}),e.parse=function(e){var t=null;if(e&&"{"===e.charAt(0))try{t=i.parse(e)}catch(n){}return t&&t.time&&t.time instanceof Date?t:null},e.format=function(e,r){e=i.clone(e),r=r||{};var o=e.time;if(!(o instanceof Date))throw new Error("'time' must be a Date object");var s=e.timeInexact,c=e.level||"info",d=e.file,h=e.line,f=e.app||"",p=e.originApp,m=e.message||"",g=e.program||"",v=e.satellite,y=e.stderr||"";n.each(u,function(t){delete e[t]}),n.isEmpty(e)||(m&&(m+=" "),m+=i.stringify(e));var b=function(e){return 10>e?"0"+e:e.toString()},w=function(e){return 100>e?"0"+b(e):e.toString()},_=o.getFullYear().toString()+b(o.getMonth()+1)+b(o.getDate()),C=b(o.getHours())+":"+b(o.getMinutes())+":"+b(o.getSeconds())+"."+w(o.getMilliseconds()),k="("+-((new Date).getTimezoneOffset()/60)+")",x="";f&&(x+=f),p&&p!==f&&(x+=" via "+p),x&&(x="["+x+"] ");var S=d&&h?["(",g?g+":":"",d,":",h,") "].join(""):"";v&&(S+=["[",v,"]"].join(""));var T=y?"(STDERR) ":"",E=[c.charAt(0).toUpperCase(),_,"-",C,k,s?"? ":" ",x,S,T].join(""),D=function(e,n){return r.color&&t.isServer&&n?Npm.require("cli-color")[n](e):e};return D(E,l)+D(m,a[c])},e.objFromText=function(e,t){var i={message:e,level:"info",time:new Date,timeInexact:!0};return n.extend(i,t)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.logging={Log:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=(Package.logging.Log,Package.json.JSON);(function(){var r,o="Meteor_Reload",s=3e4,a={};"undefined"!=typeof sessionStorage&&sessionStorage&&(r=sessionStorage.getItem(o),sessionStorage.removeItem(o)),r||(r="{}");var l={};try{l=i.parse(r),"object"!=typeof l&&(t._debug("Got bad data on reload. Ignoring."),l={})}catch(c){t._debug("Got invalid JSON on reload. Ignoring.")}l.reload&&"object"==typeof l.data&&l.time+s>(new Date).getTime()&&(a=l.data);var u=[];e={},e._onMigrate=function(e,t){t||(t=e,e=void 0),u.push({name:e,callback:t})},e._migrationData=function(e){return a[e]};var d=!1;e._reload=function(){if(!d){d=!0;var e=function(){n.defer(function(){for(var r={},s=n.clone(u);s.length;){var a=s.shift(),l=a.callback(e);if(!l[0])return;l.length>1&&a.name&&(r[a.name]=l[1])}try{var c=i.stringify({time:(new Date).getTime(),data:r,reload:!0})}catch(d){throw t._debug("Couldn't serialize data for migration",r),d}"undefined"!=typeof sessionStorage&&sessionStorage?sessionStorage.setItem(o,c):t._debug("Browser does not support sessionStorage. Not saving migration state."),window.location.reload()})};e()}}}).call(this),function(){t._reload={onMigrate:e._onMigrate,migrationData:e._migrationData,reload:e._reload}}.call(this),"undefined"==typeof Package&&(Package={}),Package.reload={Reload:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._;(function(){e={},e.active=!1,e.currentComputation=null;var i=function(t){e.currentComputation=t,e.active=!!t},r=function(){return"undefined"!=typeof t?t._debug:"undefined"!=typeof console&&console.log?console.log:function(){}},o=1,s=[],a=!1,l=!1,c=!1,u=[],d=function(){a||(setTimeout(e.flush,0),a=!0)},h=!1;e.Computation=function(e,t){if(!h)throw new Error("Deps.Computation constructor is private; use Deps.autorun");h=!1;var n=this;n.stopped=!1,n.invalidated=!1,n.firstRun=!0,n._id=o++,n._onInvalidateCallbacks=[],n._parent=t,n._func=e,n._recomputing=!1;var i=!0;try{n._compute(),i=!1}finally{n.firstRun=!1,i&&n.stop()}},n.extend(e.Computation.prototype,{onInvalidate:function(t){var n=this;if("function"!=typeof t)throw new Error("onInvalidate requires a function");var i=function(){e.nonreactive(function(){t(n)})};n.invalidated?i():n._onInvalidateCallbacks.push(i)},invalidate:function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(d(),s.push(this)),e.invalidated=!0;for(var t,n=0;t=e._onInvalidateCallbacks[n];n++)t();e._onInvalidateCallbacks=[]}},stop:function(){this.stopped||(this.stopped=!0,this.invalidate())},_compute:function(){var t=this;t.invalidated=!1;var n=e.currentComputation;i(t);c=!0;try{t._func(t)}finally{i(n),c=!1}},_recompute:function(){var e=this;for(e._recomputing=!0;e.invalidated&&!e.stopped;)try{e._compute()}catch(t){r()("Exception from Deps recompute:",t.stack||t.message)}e._recomputing=!1}}),e.Dependency=function(){this._dependentsById={}},n.extend(e.Dependency.prototype,{depend:function(t){if(!t){if(!e.active)return!1;t=e.currentComputation}var n=this,i=t._id;return i in n._dependentsById?!1:(n._dependentsById[i]=t,t.onInvalidate(function(){delete n._dependentsById[i]}),!0)},changed:function(){var e=this;for(var t in e._dependentsById)e._dependentsById[t].invalidate()},hasDependents:function(){var e=this;for(var t in e._dependentsById)return!0;return!1}}),n.extend(e,{flush:function(){if(l)throw new Error("Can't call Deps.flush while flushing");if(c)throw new Error("Can't flush inside Deps.autorun");for(l=!0,a=!0;s.length||u.length;){var e=s;s=[];for(var t,n=0;t=e[n];n++)t._recompute();if(u.length){var i=u.shift();try{i()}catch(o){r()("Exception from Deps afterFlush function:",o.stack||o.message)}}}l=!1,a=!1},autorun:function(t){if("function"!=typeof t)throw new Error("Deps.autorun requires a function argument");h=!0;var n=new e.Computation(t,e.currentComputation);return e.active&&e.onInvalidate(function(){n.stop()}),n},nonreactive:function(t){var n=e.currentComputation;i(null);try{return t()}finally{i(n)}},_makeNonreactive:function(t){if(t.$isNonreactive)return t;var i=function(){var i,r=this,o=n.toArray(arguments);return e.nonreactive(function(){i=t.apply(r,o)}),i};return i.$isNonreactive=!0,i},onInvalidate:function(t){if(!e.active)throw new Error("Deps.onInvalidate requires a currentComputation");e.currentComputation.onInvalidate(t)},afterFlush:function(e){u.push(e),d()}})}).call(this),function(){t.flush=e.flush,t.autorun=e.autorun,t.autosubscribe=e.autorun,e.depend=function(e){return e.depend()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.deps={Deps:e}}(),function(){var e,t,n=Package.meteor.Meteor,i=Package.underscore._,r=Package.ejson.EJSON;(function(){var o=new n.EnvironmentVariable;e=function(e,n){var i=o.get();i&&i.checking(e);try{d(e,n)}catch(r){throw r instanceof t.Error&&r.path&&(r.message+=" in field "+r.path),r}},t={Optional:function(e){return new s(e)},OneOf:function(){return new a(i.toArray(arguments))},Any:["__any__"],Where:function(e){return new l(e)},ObjectIncluding:function(e){return new c(e)},Integer:["__integer__"],Error:n.makeErrorType("Match.Error",function(e){this.message="Match error: "+e,this.path="",this.sanitizedError=new n.Error(400,"Match failed")}),test:function(e,n){try{return d(e,n),!0}catch(i){if(i instanceof t.Error)return!1;throw i}},_failIfArgumentsAreNotAllChecked:function(e,t,n,i){var r=new h(n,i),s=o.withValue(r,function(){return e.apply(t,n)});return r.throwUnlessAllArgumentsHaveBeenChecked(),s}};var s=function(e){this.pattern=e},a=function(e){if(i.isEmpty(e))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=e},l=function(e){this.condition=e},c=function(e){this.pattern=e},u=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[void 0,"undefined"]],d=function(e,n){if(n!==t.Any){for(var o=0;o<u.length;++o)if(n===u[o][0]){if(typeof e===u[o][1])return;throw new t.Error("Expected "+u[o][1]+", got "+typeof e)}if(null===n){if(null===e)return;throw new t.Error("Expected null, got "+r.stringify(e))}if(n===t.Integer){if("number"==typeof e&&(0|e)===e)return;throw new t.Error("Expected Integer, got "+(e instanceof Object?r.stringify(e):e))}if(n===Object&&(n=t.ObjectIncluding({})),n instanceof Array){if(1!==n.length)throw Error("Bad pattern: arrays must have one type element"+r.stringify(n));if(!i.isArray(e)&&!i.isArguments(e))throw new t.Error("Expected array, got "+r.stringify(e));return i.each(e,function(e,i){try{d(e,n[0])}catch(r){throw r instanceof t.Error&&(r.path=p(i,r.path)),r}}),void 0}if(n instanceof l){if(n.condition(e))return;throw new t.Error("Failed Match.Where validation")}if(n instanceof s&&(n=t.OneOf(void 0,n.pattern)),n instanceof a){for(var o=0;o<n.choices.length;++o)try{return d(e,n.choices[o]),void 0}catch(h){if(!(h instanceof t.Error))throw h}throw new t.Error("Failed Match.OneOf or Match.Optional validation")}if(n instanceof Function){if(e instanceof n)return;throw new t.Error("Expected "+n.name)}var f=!1;if(n instanceof c&&(f=!0,n=n.pattern),"object"!=typeof n)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof e)throw new t.Error("Expected object, got "+typeof e);if(null===e)throw new t.Error("Expected object, got null");if(e.constructor!==Object)throw new t.Error("Expected plain object");var m={},g={};i.each(n,function(e,t){e instanceof s?g[t]=e.pattern:m[t]=e}),i.each(e,function(e,n){try{if(i.has(m,n))d(e,m[n]),delete m[n];else if(i.has(g,n))d(e,g[n]);else if(!f)throw new t.Error("Unknown key")}catch(r){throw r instanceof t.Error&&(r.path=p(n,r.path)),r}}),i.each(m,function(e,n){throw new t.Error("Missing key '"+n+"'")})}},h=function(e,t){var n=this;n.args=i.clone(e),n.args.reverse(),n.description=t};i.extend(h.prototype,{checking:function(e){var t=this;t._checkingOneValue(e)||(i.isArray(e)||i.isArguments(e))&&i.each(e,i.bind(t._checkingOneValue,t))},_checkingOneValue:function(e){for(var t=this,n=0;n<t.args.length;++n)if(e===t.args[n])return t.args.splice(n,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var e=this;if(!i.isEmpty(e.args))throw new Error("Did not check() all arguments during "+e.description)}});var f=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],p=function(e,t){return"number"==typeof e||e.match(/^[0-9]+$/)?e="["+e+"]":(!e.match(/^[a-z_$][0-9a-z_$]*$/i)||i.contains(f,e))&&(e=JSON.stringify([e])),t&&"["!==t[0]?e+"."+t:e+t}}).call(this),"undefined"==typeof Package&&(Package={}),Package.check={check:e,Match:t}}(),function(){{var e,t=Package.meteor.Meteor;Package.underscore._}(function(){if(t.isServer)var n=Npm.require("crypto");var i=function(){function e(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=4294967296*i}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}return function(t){var n=0,i=0,r=0,o=1;0==t.length&&(t=[+new Date]);var s=e();n=s(" "),i=s(" "),r=s(" ");for(var a=0;a<t.length;a++)n-=s(t[a]),0>n&&(n+=1),i-=s(t[a]),0>i&&(i+=1),r-=s(t[a]),0>r&&(r+=1);s=null;var l=function(){var e=2091639*n+2.3283064365386963e-10*o;return n=i,i=r,r=e-(o=0|e)};return l.uint32=function(){return 4294967296*l()},l.fract53=function(){return l()+1.1102230246251565e-16*(2097152*l()|0)},l.version="Alea 0.9",l.args=t,l}(Array.prototype.slice.call(arguments))},r="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",o=function(e){var t=this;void 0!==e&&(t.alea=i.apply(null,e))};o.prototype.fraction=function(){var e=this;if(e.alea)return e.alea();if(n){var t=parseInt(e.hexString(8),16);return 2.3283064365386963e-10*t}if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var i=new Uint32Array(1);return window.crypto.getRandomValues(i),2.3283064365386963e-10*i[0]}},o.prototype.hexString=function(e){var t=this;if(n&&!t.alea){var i,r=Math.ceil(e/2);try{i=n.randomBytes(r)}catch(o){i=n.pseudoRandomBytes(r)}var s=i.toString("hex");return s.substring(0,e)}for(var a=[],l=0;e>l;++l)a.push(t.choice("0123456789abcdef"));return a.join("")},o.prototype.id=function(){for(var e=[],t=this,n=0;17>n;n++)e[n]=t.choice(r);return e.join("")},o.prototype.choice=function(e){var t=Math.floor(this.fraction()*e.length);return"string"==typeof e?e.substr(t,1):e[t]};var s="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,a="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,l="undefined"!=typeof navigator&&navigator.userAgent||"";e=n||"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new o:new o([new Date,s,a,l,Math.random()]),e.create=function(){return new o(arguments)}}).call(this),function(){t.uuid=function(){for(var t="0123456789abcdef",n=[],i=0;36>i;i++)n[i]=e.choice(t);n[14]="4",n[19]=t.substr(3&parseInt(n[19],16)|8,1),n[8]=n[13]=n[18]=n[23]="-";var r=n.join("");return r}}.call(this),"undefined"==typeof Package&&(Package={}),Package.random={Random:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);(function(){var n=function(e,t,n,i){return{key:e,value:t,next:n,prev:i}};e=function(){var e=this;e._dict={},e._first=null,e._last=null,e._size=0;var n=t.toArray(arguments);e._stringify=function(e){return e},"function"==typeof n[0]&&(e._stringify=n.shift()),t.each(n,function(t){e.putBefore(t[0],t[1],null)})},t.extend(e.prototype,{_k:function(e){return" "+this._stringify(e)},empty:function(){var e=this;return!e._first},size:function(){var e=this;return e._size},_linkEltIn:function(e){var t=this;e.next?(e.prev=e.next.prev,e.next.prev=e,e.prev&&(e.prev.next=e)):(e.prev=t._last,t._last&&(t._last.next=e),t._last=e),(null===t._first||t._first===e.next)&&(t._first=e)},_linkEltOut:function(e){var t=this;e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===t._last&&(t._last=e.prev),e===t._first&&(t._first=e.next)},putBefore:function(e,t,i){var r=this;if(r._dict[r._k(e)])throw new Error("Item "+e+" already present in OrderedDict");var o=i?n(e,t,r._dict[r._k(i)]):n(e,t,null);if(void 0===o.next)throw new Error("could not find item to put this one before");r._linkEltIn(o),r._dict[r._k(e)]=o,r._size++},append:function(e,t){var n=this;n.putBefore(e,t,null)},remove:function(e){var t=this,n=t._dict[t._k(e)];if(void 0===n)throw new Error("Item "+e+" not present in OrderedDict");return t._linkEltOut(n),t._size--,delete t._dict[t._k(e)],n.value},get:function(e){var t=this;return t.has(e)?t._dict[t._k(e)].value:void 0},has:function(e){var n=this;return t.has(n._dict,n._k(e))},forEach:function(t){for(var n=this,i=0,r=n._first;null!==r;){var o=t(r.value,r.key,i);if(o===e.BREAK)return;r=r.next,i++}},first:function(){var e=this;return e.empty()?void 0:e._first.key},firstValue:function(){var e=this;return e.empty()?void 0:e._first.value},last:function(){var e=this;return e.empty()?void 0:e._last.key},lastValue:function(){var e=this;return e.empty()?void 0:e._last.value},prev:function(e){var t=this;if(t.has(e)){var n=t._dict[t._k(e)];if(n.prev)return n.prev.key}return null},next:function(e){var t=this;if(t.has(e)){var n=t._dict[t._k(e)];if(n.next)return n.next.key}return null},moveBefore:function(e,t){var n=this,i=n._dict[n._k(e)],r=t?n._dict[n._k(t)]:null;if(void 0===i)throw new Error("Item to move is not present");if(void 0===r)throw new Error("Could not find element to move this one before");r!==i.next&&(n._linkEltOut(i),i.next=r,n._linkEltIn(i))},indexOf:function(t){var n=this,i=null;return n.forEach(function(r,o,s){return n._k(o)===n._k(t)?(i=s,e.BREAK):void 0}),i},_checkRep:function(){var e=this;t.each(e._dict,function(e,t){if(t.next===t)throw new Error("Next is a loop");if(t.prev===t)throw new Error("Prev is a loop")})}}),e.BREAK={"break":!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ordered-dict"]={OrderedDict:e}}(),function(){{var e,t;Package.meteor.Meteor}(function(){t={exports:{}}}).call(this),function(){!function(){function e(e){for(var t=[],n=[],i=0;i<e[0].length;i++)t.push(e[0][i][1]),n.push(e[0][i][0]);return t=t.sort(function(e,t){return e-t}),n=n.sort(function(e,t){return e-t}),[[t[0],n[0]],[t[t.length-1],n[n.length-1]]]}function n(e,t,n){for(var i=[[0,0]],r=0;r<n.length;r++){for(var o=0;o<n[r].length;o++)i.push(n[r][o]);i.push([0,0])}for(var s=!1,r=0,o=i.length-1;r<i.length;o=r++)i[r][0]>t!=i[o][0]>t&&e<(i[o][1]-i[r][1])*(t-i[r][0])/(i[o][0]-i[r][0])+i[r][1]&&(s=!s);return s}var i={};"undefined"!=typeof t&&t.exports&&(t.exports=i),i.lineStringsIntersect=function(e,t){for(var n=[],i=0;i<=e.coordinates.length-2;++i)for(var r=0;r<=t.coordinates.length-2;++r){var o={x:e.coordinates[i][1],y:e.coordinates[i][0]},s={x:e.coordinates[i+1][1],y:e.coordinates[i+1][0]},a={x:t.coordinates[r][1],y:t.coordinates[r][0]},l={x:t.coordinates[r+1][1],y:t.coordinates[r+1][0]},c=(l.x-a.x)*(o.y-a.y)-(l.y-a.y)*(o.x-a.x),u=(s.x-o.x)*(o.y-a.y)-(s.y-o.y)*(o.x-a.x),d=(l.y-a.y)*(s.x-o.x)-(l.x-a.x)*(s.y-o.y);if(0!=d){var h=c/d,f=u/d;h>=0&&1>=h&&f>=0&&1>=f&&n.push({type:"Point",coordinates:[o.x+h*(s.x-o.x),o.y+h*(s.y-o.y)]})}}return 0==n.length&&(n=!1),n},i.pointInBoundingBox=function(e,t){return!(e.coordinates[1]<t[0][0]||e.coordinates[1]>t[1][0]||e.coordinates[0]<t[0][1]||e.coordinates[0]>t[1][1])},i.pointInPolygon=function(t,r){for(var o="Polygon"==r.type?[r.coordinates]:r.coordinates,s=!1,a=0;a<o.length;a++)i.pointInBoundingBox(t,e(o[a]))&&(s=!0);if(!s)return!1;for(var l=!1,a=0;a<o.length;a++)n(t.coordinates[1],t.coordinates[0],o[a])&&(l=!0);return l},i.numberToRadius=function(e){return e*Math.PI/180},i.numberToDegree=function(e){return 180*e/Math.PI},i.drawCircle=function(e,t,n){for(var r=[t.coordinates[1],t.coordinates[0]],o=e/1e3/6371,s=[i.numberToRadius(r[0]),i.numberToRadius(r[1])],n=n||15,a=[[r[0],r[1]]],l=0;n>l;l++){var c=2*Math.PI*l/n,u=Math.asin(Math.sin(s[0])*Math.cos(o)+Math.cos(s[0])*Math.sin(o)*Math.cos(c)),d=s[1]+Math.atan2(Math.sin(c)*Math.sin(o)*Math.cos(s[0]),Math.cos(o)-Math.sin(s[0])*Math.sin(u));a[l]=[],a[l][1]=i.numberToDegree(u),a[l][0]=i.numberToDegree(d)}return{type:"Polygon",coordinates:[a]}},i.rectangleCentroid=function(e){var t=e.coordinates[0],n=t[0][0],i=t[0][1],r=t[2][0],o=t[2][1],s=r-n,a=o-i;return{type:"Point",coordinates:[n+s/2,i+a/2]}},i.pointDistance=function(e,t){var n=e.coordinates[0],r=e.coordinates[1],o=t.coordinates[0],s=t.coordinates[1],a=i.numberToRadius(s-r),l=i.numberToRadius(o-n),c=Math.pow(Math.sin(a/2),2)+Math.cos(i.numberToRadius(r))*Math.cos(i.numberToRadius(s))*Math.pow(Math.sin(l/2),2),u=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return 6371*u*1e3},i.geometryWithinRadius=function(e,t,n){if("Point"==e.type)return i.pointDistance(e,t)<=n;if("LineString"==e.type||"Polygon"==e.type){var r,o={};r="Polygon"==e.type?e.coordinates[0]:e.coordinates;for(var s in r)if(o.coordinates=r[s],i.pointDistance(o,t)>n)return!1}return!0},i.area=function(e){for(var t,n,i=0,r=e.coordinates[0],o=r.length-1,s=0;s<r.length;o=s++){var t={x:r[s][1],y:r[s][0]},n={x:r[o][1],y:r[o][0]};i+=t.x*n.y,i-=t.y*n.x}return i/=2},i.centroid=function(e){for(var t,n,r,o=0,s=0,a=e.coordinates[0],l=a.length-1,c=0;c<a.length;l=c++){var n={x:a[c][1],y:a[c][0]},r={x:a[l][1],y:a[l][0]};t=n.x*r.y-r.x*n.y,o+=(n.x+r.x)*t,s+=(n.y+r.y)*t}return t=6*i.area(e),{type:"Point",coordinates:[s/t,o/t]}},i.simplify=function(e,t){t=t||20,e=e.map(function(e){return{lng:e.coordinates[0],lat:e.coordinates[1]}});var n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_=Math.PI/180*.5,C=new Array,k=new Array,x=new Array;if(e.length<3)return e;for(n=e.length,d=360*t/(2*Math.PI*6378137),d*=d,r=0,k[0]=0,x[0]=n-1,i=1;i>0;)if(o=k[i-1],s=x[i-1],i--,s-o>1){for(h=e[s].lng()-e[o].lng(),f=e[s].lat()-e[o].lat(),Math.abs(h)>180&&(h=360-Math.abs(h)),h*=Math.cos(_*(e[s].lat()+e[o].lat())),p=h*h+f*f,a=o+1,l=o,u=-1;s>a;a++)m=e[a].lng()-e[o].lng(),g=e[a].lat()-e[o].lat(),Math.abs(m)>180&&(m=360-Math.abs(m)),m*=Math.cos(_*(e[a].lat()+e[o].lat())),v=m*m+g*g,y=e[a].lng()-e[s].lng(),b=e[a].lat()-e[s].lat(),Math.abs(y)>180&&(y=360-Math.abs(y)),y*=Math.cos(_*(e[a].lat()+e[s].lat())),w=y*y+b*b,c=v>=p+w?w:w>=p+v?v:(m*f-g*h)*(m*f-g*h)/p,c>u&&(l=a,u=c);d>u?(C[r]=o,r++):(i++,k[i-1]=l,x[i-1]=s,i++,k[i-1]=o,x[i-1]=l)}else C[r]=o,r++;C[r]=n-1,r++;for(var S=new Array,a=0;r>a;a++)S.push(e[C[a]]);return S.map(function(e){return{type:"Point",coordinates:[e.lng,e.lat]}})},i.destinationPoint=function(e,t,n){n/=6371,t=i.numberToRadius(t);var r=i.numberToRadius(e.coordinates[0]),o=i.numberToRadius(e.coordinates[1]),s=Math.asin(Math.sin(r)*Math.cos(n)+Math.cos(r)*Math.sin(n)*Math.cos(t)),a=o+Math.atan2(Math.sin(t)*Math.sin(n)*Math.cos(r),Math.cos(n)-Math.sin(r)*Math.sin(s));return a=(a+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[i.numberToDegree(s),i.numberToDegree(a)]}}}()}.call(this),function(){e=t.exports}.call(this),"undefined"==typeof Package&&(Package={}),Package["geojson-utils"]={GeoJSON:e}}(),function(){var e,t,n,i,r,o=Package.meteor.Meteor,s=Package.underscore._,a=Package.json.JSON,l=Package.ejson.EJSON,c=Package["ordered-dict"].OrderedDict,u=Package.deps.Deps,d=Package.random.Random,h=Package["geojson-utils"].GeoJSON;(function(){e=function(e){this.name=e,this.docs={},this._observeQueue=new o._SynchronousQueue,this.next_qid=1,this.queries={},this._savedOriginals=null,this.paused=!1},t={},e._applyChanges=function(e,t){s.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})},n=function(e){var t=new Error(e);return t.name="MinimongoError",t},e.prototype.find=function(t,n){return 0===arguments.length&&(t={}),new e.Cursor(this,t,n)},e.Cursor=function(t,n,o){var s=this;if(o||(o={}),this.collection=t,e._selectorIsId(n))s.selector_id=e._idStringify(n),s.selector_f=e._compileSelector(n,s),s.sort_f=void 0;else{if(r(n))throw new Error("$near can't be inside $or/$and/$nor/$not");s.selector_id=void 0,s.selector_f=e._compileSelector(n,s),s.sort_f=i(n)||o.sort?e._compileSort(o.sort||[],s):null}s.skip=o.skip,s.limit=o.limit,s.fields=o.fields,s.fields&&(s.projection_f=e._compileProjection(s.fields)),s._transform=o.transform&&"undefined"!=typeof u?u._makeNonreactive(o.transform):o.transform,s.db_objects=null,s.cursor_pos=0,"undefined"!=typeof u&&(s.reactive=void 0===o.reactive?!0:o.reactive)},e.Cursor.prototype.rewind=function(){var e=this;e.db_objects=null,e.cursor_pos=0},e.prototype.findOne=function(e,t){return 0===arguments.length&&(e={}),t=t||{},t.limit=1,this.find(e,t).fetch()[0]},e.Cursor.prototype.forEach=function(e,t){var n=this;for(null===n.db_objects&&(n.db_objects=n._getRawObjects(!0)),n.reactive&&n._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0});n.cursor_pos<n.db_objects.length;){var i=l.clone(n.db_objects[n.cursor_pos]);n.projection_f&&(i=n.projection_f(i)),n._transform&&(i=n._transform(i)),e.call(t,i,n.cursor_pos,n),++n.cursor_pos}},e.Cursor.prototype.getTransform=function(){var e=this;return e._transform},e.Cursor.prototype.map=function(e,t){var n=this,i=[];return n.forEach(function(r,o){i.push(e.call(t,r,o,n))}),i},e.Cursor.prototype.fetch=function(){var e=this,t=[];return e.forEach(function(e){t.push(e)}),t},e.Cursor.prototype.count=function(){var e=this;return e.reactive&&e._depend({added:!0,removed:!0},!0),null===e.db_objects&&(e.db_objects=e._getRawObjects(!0)),e.db_objects.length},e.Cursor.prototype._publishCursor=function(e){var t=this;if(!t.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var n=t.collection.name;return o.Collection._publishCursor(t,e,n)},e._observeChangesCallbacksAreOrdered=function(e){if(e.added&&e.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!e.addedBefore&&!e.movedBefore)},e._observeCallbacksAreOrdered=function(e){if(e.addedAt&&e.added)throw new Error("Please specify only one of added() and addedAt()");if(e.changedAt&&e.changed)throw new Error("Please specify only one of changed() and changedAt()");if(e.removed&&e.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(e.addedAt||e.movedTo||e.changedAt||e.removedAt)},e.ObserveHandle=function(){},s.extend(e.Cursor.prototype,{observe:function(t){var n=this;return e._observeFromObserveChanges(n,t)},observeChanges:function(t){var n=this,i=e._observeChangesCallbacksAreOrdered(t);if(!t._allow_unordered&&!i&&(n.skip||n.limit))throw new Error("must use ordered observe with skip or limit");var r,o={selector_f:n.selector_f,sort_f:i&&n.sort_f,results_snapshot:null,ordered:i,cursor:n,observeChanges:t.observeChanges,fields:n.fields,projection_f:n.projection_f};n.reactive&&(r=n.collection.next_qid++,n.collection.queries[r]=o),o.results=n._getRawObjects(i),n.collection.paused&&(o.results_snapshot=i?[]:{});var a=function(e,t,i){return e?function(){var r=this,o=arguments;void 0!==t&&n.projection_f&&(o[t]=n.projection_f(o[t]),i&&s.isEmpty(o[t]))||n.collection.paused||n.collection._observeQueue.queueTask(function(){e.apply(r,o)})}:function(){}};o.added=a(t.added,1),o.changed=a(t.changed,1,!0),o.removed=a(t.removed),i&&(o.addedBefore=a(t.addedBefore,1),o.movedBefore=a(t.movedBefore)),t._suppress_initial||n.collection.paused||s.each(o.results,function(e){var t=l.clone(e);delete t._id,i&&o.addedBefore(e._id,t,null),o.added(e._id,t)});var c=new e.ObserveHandle;return s.extend(c,{collection:n.collection,stop:function(){n.reactive&&delete n.collection.queries[r]}}),n.reactive&&u.active&&u.onInvalidate(function(){c.stop()}),n.collection._observeQueue.drain(),c}}),e.Cursor.prototype._getRawObjects=function(e){var t=this,n=e?[]:{};if(t.selector_id){if(t.skip)return n;if(s.has(t.collection.docs,t.selector_id)){var i=t.collection.docs[t.selector_id];e?n.push(i):n[t.selector_id]=i}return n}for(var r in t.collection.docs){var o=t.collection.docs[r];if(t.selector_f(o)&&(e?n.push(o):n[r]=o),t.limit&&!t.skip&&!t.sort_f&&n.length===t.limit)return n}if(!e)return n;t.sort_f&&n.sort(t.sort_f);var a=t.skip||0,l=t.limit?t.limit+a:n.length;return n.slice(a,l)},e.Cursor.prototype._depend=function(e,t){var n=this;if(u.active){var i=new u.Dependency;i.depend();var r=s.bind(i.changed,i),o={_suppress_initial:!0,_allow_unordered:t};s.each(["added","changed","removed","addedBefore","movedBefore"],function(t){e[t]&&(o[t]=r)}),n.observeChanges(o)}},e.prototype.insert=function(t,i){var r=this;t=l.clone(t),s.has(t,"_id")||(t._id=e._useOID?new e._ObjectID:d.id());var a=e._idStringify(t._id);if(s.has(r.docs,a))throw n("Duplicate _id '"+t._id+"'");r._saveOriginal(a,void 0),r.docs[a]=t;var c=[];for(var u in r.queries){var h=r.queries[u];h.selector_f(t)&&(h.cursor.skip||h.cursor.limit?c.push(u):e._insertInResults(h,t))}return s.each(c,function(t){r.queries[t]&&e._recomputeResults(r.queries[t])}),r._observeQueue.drain(),i&&o.defer(function(){i(null,t._id)}),t._id},e.prototype.remove=function(t,n){var i=this,r=[],a=[],l=e._compileSelector(t,i),c=e._idsMatchedBySelector(t);if(c)s.each(c,function(t){var n=e._idStringify(t);s.has(i.docs,n)&&l(i.docs[n])&&r.push(n)});else for(var u in i.docs){var d=i.docs[u];l(d)&&r.push(u)}for(var h=[],f=0;f<r.length;f++){var p=r[f],m=i.docs[p];s.each(i.queries,function(e,t){e.selector_f(m)&&(e.cursor.skip||e.cursor.limit?a.push(t):h.push({qid:t,doc:m}))}),i._saveOriginal(p,m),delete i.docs[p]}s.each(h,function(t){var n=i.queries[t.qid];n&&e._removeFromResults(n,t.doc)}),s.each(a,function(t){var n=i.queries[t];n&&e._recomputeResults(n)}),i._observeQueue.drain();var g=r.length;return n&&o.defer(function(){n(null,g)}),g},e.prototype.update=function(t,n,i,r){var a=this;!r&&i instanceof Function&&(r=i,i=null),i||(i={});var c=e._compileSelector(t,a),u={};s.each(a.queries,function(e,t){!e.cursor.skip&&!e.cursor.limit||e.paused||(u[t]=l.clone(e.results))});var d={},h=0;for(var f in a.docs){var p=a.docs[f];if(c(p)&&(a._saveOriginal(f,p),a._modifyAndNotify(p,n,d),++h,!i.multi))break}s.each(d,function(t,n){var i=a.queries[n];i&&e._recomputeResults(i,u[n])}),a._observeQueue.drain();var m;if(0===h&&i.upsert){var g=e._removeDollarOperators(t);e._modify(g,n,!0),!g._id&&i.insertedId&&(g._id=i.insertedId),m=a.insert(g),h=1}var v;return i._returnObject?(v={numberAffected:h},void 0!==m&&(v.insertedId=m)):v=h,r&&o.defer(function(){r(null,v)}),v},e.prototype.upsert=function(e,t,n,i){var r=this;return i||"function"!=typeof n||(i=n,n={}),r.update(e,t,s.extend({},n,{upsert:!0,_returnObject:!0}),i)},e.prototype._modifyAndNotify=function(t,n,i){var r=this,o={};for(var a in r.queries){var c=r.queries[a];o[a]=c.ordered?c.selector_f(t):s.has(c.results,e._idStringify(t._id))}var u=l.clone(t);e._modify(t,n);for(a in r.queries){c=r.queries[a];var d=o[a],h=c.selector_f(t);c.cursor.skip||c.cursor.limit?(d||h)&&(i[a]=!0):d&&!h?e._removeFromResults(c,t):!d&&h?e._insertInResults(c,t):d&&h&&e._updateInResults(c,t,u)}},e._insertInResults=function(t,n){var i=l.clone(n);if(delete i._id,t.ordered){if(t.sort_f){var r=e._insertInSortedList(t.sort_f,t.results,n),o=t.results[r+1];o=o?o._id:null,t.addedBefore(n._id,i,o)}else t.addedBefore(n._id,i,null),t.results.push(n);t.added(n._id,i)}else t.added(n._id,i),t.results[e._idStringify(n._id)]=n},e._removeFromResults=function(t,n){if(t.ordered){var i=e._findInOrderedResults(t,n);t.removed(n._id),t.results.splice(i,1)}else{var r=e._idStringify(n._id);t.removed(n._id),delete t.results[r]}},e._updateInResults=function(t,n,i){if(!l.equals(n._id,i._id))throw new Error("Can't change a doc's _id while updating");var r=e._makeChangedFields(n,i);if(!t.ordered)return s.isEmpty(r)||(t.changed(n._id,r),t.results[e._idStringify(n._id)]=n),void 0;var o=e._findInOrderedResults(t,n);if(s.isEmpty(r)||t.changed(n._id,r),t.sort_f){t.results.splice(o,1);var a=e._insertInSortedList(t.sort_f,t.results,n);if(o!==a){var c=t.results[a+1];c=c?c._id:null,t.movedBefore&&t.movedBefore(n._id,c)}}},e._recomputeResults=function(t,n){n||(n=t.results),t.results=t.cursor._getRawObjects(t.ordered),t.paused||e._diffQueryChanges(t.ordered,n,t.results,t)},e._findInOrderedResults=function(e,t){if(!e.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var n=0;n<e.results.length;n++)if(e.results[n]===t)return n;throw Error("object missing from query")},e._binarySearch=function(e,t,n){for(var i=0,r=t.length;r>0;){var o=Math.floor(r/2);e(n,t[i+o])>=0?(i+=o+1,r-=o+1):r=o}return i},e._insertInSortedList=function(t,n,i){if(0===n.length)return n.push(i),0;var r=e._binarySearch(t,n,i);return n.splice(r,0,i),r},e.prototype.saveOriginals=function(){var e=this;if(e._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");e._savedOriginals={}},e.prototype.retrieveOriginals=function(){var e=this;if(!e._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var t=e._savedOriginals;return e._savedOriginals=null,t},e.prototype._saveOriginal=function(e,t){var n=this;n._savedOriginals&&(s.has(n._savedOriginals,e)||(n._savedOriginals[e]=l.clone(t)))},e.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var e in this.queries){var t=this.queries[e];t.results_snapshot=l.clone(t.results)}}},e.prototype.resumeObservers=function(){var t=this;if(this.paused){this.paused=!1;for(var n in this.queries){var i=t.queries[n];e._diffQueryChanges(i.ordered,i.results_snapshot,i.results,i),i.results_snapshot=null}t._observeQueue.drain()
}},e._idStringify=function(t){if(t instanceof e._ObjectID)return t.valueOf();if("string"==typeof t)return""===t?t:"-"===t.substr(0,1)||"~"===t.substr(0,1)||e._looksLikeObjectID(t)||"{"===t.substr(0,1)?"-"+t:t;if(void 0===t)return"-";if("object"==typeof t&&null!==t)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+a.stringify(t)},e._idParse=function(t){return""===t?t:"-"===t?void 0:"-"===t.substr(0,1)?t.substr(1):"~"===t.substr(0,1)?a.parse(t.substr(1)):e._looksLikeObjectID(t)?new e._ObjectID(t):t},e._makeChangedFields=function(t,n){var i={};return e._diffObjects(n,t,{leftOnly:function(e){i[e]=void 0},rightOnly:function(e,t){i[e]=t},both:function(e,t,n){l.equals(t,n)||(i[e]=n)}}),i};var i=function(e){return s.any(e,function(e,t){return"$near"===t||s.isObject(e)&&i(e)})},r=function(e){return s.any(e,function(e,t){return s.contains(["$or","$and","$nor","$not"],t)?i(e):s.isObject(e)&&r(e)})}}).call(this),function(){var n=function(e){return s.isArray(e)&&!l.isBinary(e)},i=function(e,t){return n(e)?s.any(e,t):t(e)},r=function(e,t){return t(e)?!0:n(e)&&s.any(e,t)},o=function(e){var t=void 0;for(var n in e){var i="$"===n.substr(0,1);if(void 0===t)t=i;else if(t!==i)throw new Error("Inconsistent selector: "+e)}return!!t},c=function(t,a,l){if(null==t)return function(e){return i(e,function(e){return null==e})};if(!s.isObject(t))return function(e){return i(e,function(e){return e===t})};if(t instanceof RegExp)return function(e){return void 0===e?!1:i(e,function(e){return t.test(e)})};if(n(t))return function(i){return n(i)?r(i,function(n){return e._f._equal(t,n)}):!1};if(o(t)){var c=[];return s.each(t,function(e,n){if(!s.has(d,n))throw new Error("Unrecognized operator: "+n);c.push(d[n](e,t,l))}),function(e,t){return s.all(c,function(n){return n(e,t)})}}return function(n){return i(n,function(n){return e._f._equal(t,n)})}},u={$and:function(e,t,i){if(!n(e)||s.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var r=s.map(e,function(e){return f(e,i)});return function(e,t){return s.all(r,function(n){return n(e,t)})}},$or:function(e,t,i){if(!n(e)||s.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var r=s.map(e,function(e){return f(e,i)});return function(e,t){return s.any(r,function(n){return n(e,t)})}},$nor:function(e,t,i){if(!n(e)||s.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var r=s.map(e,function(e){return f(e,i)});return function(e,t){return s.all(r,function(n){return!n(e,t)})}},$where:function(e){return e instanceof Function||(e=Function("return "+e)),function(t){return e.call(t)}}},d={$in:function(t){if(!n(t))throw new Error("Argument to $in must be array");return function(n){return r(n,function(n){return s.any(t,function(t){return e._f._equal(t,n)})})}},$all:function(t){if(!n(t))throw new Error("Argument to $all must be array");return function(i){return n(i)?s.all(t,function(t){return s.any(i,function(n){return e._f._equal(t,n)})}):!1}},$lt:function(t){return function(n){return i(n,function(n){return e._f._cmp(n,t)<0})}},$lte:function(t){return function(n){return i(n,function(n){return e._f._cmp(n,t)<=0})}},$gt:function(t){return function(n){return i(n,function(n){return e._f._cmp(n,t)>0})}},$gte:function(t){return function(n){return i(n,function(n){return e._f._cmp(n,t)>=0})}},$ne:function(t){return function(n){return!r(n,function(n){return e._f._equal(n,t)})}},$nin:function(e){if(!n(e))throw new Error("Argument to $nin must be array");var t=d.$in(e);return function(e,n){return void 0===e?!0:!t(e,n)}},$exists:function(e){return function(t){return e===(void 0!==t)}},$mod:function(e){var t=e[0],n=e[1];return function(e){return i(e,function(e){return e%t===n})}},$size:function(e){return function(t){return n(t)&&e===t.length}},$type:function(t){return function(n){return void 0===n?!1:i(n,function(n){return e._f._type(n)===t})}},$regex:function(e,t){var n=t.$options;if(void 0!==n){if(/[^gim]/.test(n))throw new Error("Only the i, m, and g regexp options are supported");var r=e instanceof RegExp?e.source:e;e=new RegExp(r,n)}else e instanceof RegExp||(e=new RegExp(e));return function(t){return void 0===t?!1:i(t,function(t){return e.test(t)})}},$options:function(){return function(){return!0}},$elemMatch:function(e,t,i){var r=f(e,i);return function(e,t){return n(e)?s.any(e,function(e){return r(e,t)}):!1}},$not:function(e,t,n){var i=c(e,t,n);return function(e,t){return!i(e,t)}},$near:function(e,t,n){function i(e,t){e=r(e),t=r(t);var n=e[0]-t[0],i=e[1]-t[1];return s.isNaN(n)||s.isNaN(i)?null:Math.sqrt(n*n+i*i)}function r(e){return s.map(e,s.identity)}var o=s.isObject(e)&&s.has(e,"$geometry")?"2dsphere":"2d",a="2d"===o?t.$maxDistance:e.$maxDistance,l="2d"===o?e:e.$geometry;return function(e,t){var r=null;switch(o){case"2d":r=i(l,e);break;case"2dsphere":r="Point"===e.type?h.pointDistance(l,e):h.geometryWithinRadius(e,l,a)?0:a+1}return n&&(n._distance||(n._distance={}),n._distance[t._id]=r),null===r?!1:void 0===a?!0:a>=r}},$maxDistance:function(){return function(){return!0}}};e._f={_type:function(t){return"number"==typeof t?1:"string"==typeof t?2:"boolean"==typeof t?8:n(t)?4:null===t?10:t instanceof RegExp?11:"function"==typeof t?13:t instanceof Date?9:l.isBinary(t)?5:t instanceof e._ObjectID?7:3},_equal:function(e,t){return l.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(t,n){if(void 0===t)return void 0===n?0:-1;if(void 0===n)return 1;var i=e._f._type(t),r=e._f._type(n),o=e._f._typeorder(i),s=e._f._typeorder(r);if(o!==s)return s>o?-1:1;if(i!==r)throw Error("Missing type coercion logic in _cmp");if(7===i&&(i=r=2,t=t.toHexString(),n=n.toHexString()),9===i&&(i=r=1,t=t.getTime(),n=n.getTime()),1===i)return t-n;if(2===r)return n>t?-1:t===n?0:1;if(3===i){var a=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return e._f._cmp(a(t),a(n))}if(4===i)for(var l=0;;l++){if(l===t.length)return l===n.length?0:-1;if(l===n.length)return 1;var c=e._f._cmp(t[l],n[l]);if(0!==c)return c}if(5===i){if(t.length!==n.length)return t.length-n.length;for(l=0;l<t.length;l++){if(t[l]<n[l])return-1;if(t[l]>n[l])return 1}return 0}if(8===i)return t?n?0:1:n?-1:0;if(10===i)return 0;if(11===i)throw Error("Sorting not supported on regular expression");if(13===i)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},t.matches=function(t,n){return e._compileSelector(t)(n)},e._makeLookupFunction=function(t){var i,r,o,a=t.indexOf(".");if(-1===a)i=t;else{i=t.substr(0,a);var l=t.substr(a+1);r=e._makeLookupFunction(l),o=/^\d+(\.|$)/.test(l)}return function(e){if(null==e)return[void 0];var t=e[i];return r?n(t)&&0===t.length?[void 0]:((!n(t)||o)&&(t=[t]),Array.prototype.concat.apply([],s.map(t,r))):[t]}};var f=function(t,n){var i=[];return s.each(t,function(r,o){if("$"===o.substr(0,1)){if(!s.has(u,o))throw new Error("Unrecognized logical operator: "+o);i.push(u[o](r,t,n))}else{var a=e._makeLookupFunction(o),l=c(r,t,n);i.push(function(e,t){var n=a(e),i=r&&(r.$not||r.$ne||r.$nin)?s.all:s.any;return i(n,function(e){return l(e,t)})})}}),function(e,t){return void 0===t&&(t=e),s.all(i,function(n){return n(e,t)})}};e._compileSelector=function(t,i){if(t instanceof Function)return function(e){return t.call(e)};if(e._selectorIsId(t))return function(e){return l.equals(e._id,t)};if(!t||"_id"in t&&!t._id)return function(){return!1};if("boolean"==typeof t||n(t)||l.isBinary(t))throw new Error("Invalid selector: "+t);return f(t,i)},e._compileSort=function(t,i){var r=[];if(t instanceof Array)for(var o=0;o<t.length;o++)"string"==typeof t[o]?r.push({lookup:e._makeLookupFunction(t[o]),ascending:!0}):r.push({lookup:e._makeLookupFunction(t[o][0]),ascending:"desc"!==t[o][1]});else{if("object"!=typeof t)throw Error("Bad sort specification: ",a.stringify(t));for(var l in t)r.push({lookup:e._makeLookupFunction(l),ascending:t[l]>=0})}if(0===r.length)return function(e,t){return i&&i._distance?i._distance[e._id]-i._distance[t._id]:0};var c=function(t,i){var r,o=!0;return s.each(t,function(t){n(t)||(t=[t]),n(t)&&0===t.length&&(t=[void 0]),s.each(t,function(t){if(o)r=t,o=!1;else{var n=e._f._cmp(r,t);(i&&n>0||!i&&0>n)&&(r=t)}})}),r};return function(t,n){for(var i=0;i<r.length;++i){var o=r[i],s=c(o.lookup(t),o.ascending),a=c(o.lookup(n),o.ascending),l=e._f._cmp(s,a);if(0!==l)return o.ascending?l:-l}return 0}}}.call(this),function(){e._compileProjection=function(t){e._checkSupportedProjection(t);var n=s.isUndefined(t._id)?!0:t._id,r=i(t),o=function(e,t){if(s.isArray(e))return s.map(e,function(e){return o(e,t)});var n=r.including?{}:l.clone(e);return s.each(t,function(t,i){s.has(e,i)&&(s.isObject(t)?s.isObject(e[i])&&(n[i]=o(e[i],t)):r.including?n[i]=l.clone(e[i]):delete n[i])}),n};return function(e){var t=o(e,r.tree);return n&&s.has(e,"_id")&&(t._id=e._id),!n&&s.has(t,"_id")&&delete t._id,t}},i=function(e){var t=s.keys(e).sort();t.length>0&&(1!==t.length||"_id"!==t[0])&&(t=s.reject(t,function(e){return"_id"===e}));var i=null;s.each(t,function(t){var r=!!e[t];if(null===i&&(i=r),i!==r)throw n("You cannot currently mix including and excluding fields.")});var o=r(t,function(){return i},function(e,t,i){var r=i,o=t;throw n("both "+r+" and "+o+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:o,including:i}},r=function(e,t,n,i){return i=i||{},s.each(e,function(e){var r=i,o=e.split("."),a=s.all(o.slice(0,-1),function(t,i){if(s.has(r,t)){if(!s.isObject(r[t])&&(r[t]=n(r[t],o.slice(0,i+1).join("."),e),!s.isObject(r[t])))return!1}else r[t]={};return r=r[t],!0});if(a){var l=s.last(o);r[l]=s.has(r,l)?n(r[l],e,e):t(e)}}),i},e._checkSupportedProjection=function(e){if(!s.isObject(e)||s.isArray(e))throw n("fields option must be an object");s.each(e,function(e,t){if(s.contains(t.split("."),"$"))throw n("Minimongo doesn't support $ operator in projections yet.");if(-1===s.indexOf([1,0,!0,!1],e))throw n("Projection values should be one of 1, 0, true, or false")})}}.call(this),function(){e._modify=function(t,i,r){var o=!1;for(var a in i){o="$"===a.substr(0,1);break}var c;if(o){var c=l.clone(t);for(var u in i){var d=e._modifiers[u];if(r&&"$setOnInsert"===u&&(d=e._modifiers.$set),!d)throw n("Invalid modifier specified "+u);for(var h in i[u]){if(h.length&&"."===h[h.length-1])throw n("Invalid mod field name, may not end in a period");var f=i[u][h],p=h.split("."),m=!!e._noCreateModifiers[u],g="$rename"===u,v=e._findModTarget(c,p,m,g),y=p.pop();d(v,y,f,h,c)}}}else{if(i._id&&!l.equals(t._id,i._id))throw n("Cannot change the _id of a document");for(var a in i){if("$"===a.substr(0,1))throw n("When replacing document, field name may not start with '$'");if(/\./.test(a))throw n("When replacing document, field name may not contain '.'")}c=i}s.each(s.keys(t),function(e){("_id"!==e||r)&&delete t[e]});for(var a in c)t[a]=c[a]},e._findModTarget=function(e,t,i,r){for(var o=0;o<t.length;o++){var s=o===t.length-1,l=t[o],c=/^[0-9]+$/.test(l);if(!(!i||"object"==typeof e&&l in e))return void 0;if(e instanceof Array){if(r)return null;if(!c)throw n("can't append to array using string field name ["+l+"]");for(l=parseInt(l),s&&(t[o]=l);e.length<l;)e.push(null);if(!s)if(e.length===l)e.push({});else if("object"!=typeof e[l])throw n("can't modify field '"+t[o+1]+"' of list value "+a.stringify(e[l]))}else s||l in e||(e[l]={});if(s)return e;e=e[l]}},e._noCreateModifiers={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},e._modifiers={$inc:function(e,t,i){if("number"!=typeof i)throw n("Modifier $inc allowed for numbers only");if(t in e){if("number"!=typeof e[t])throw n("Cannot apply $inc modifier to non-number");e[t]+=i}else e[t]=i},$set:function(e,t,i){if(!s.isObject(e)){var r=n("Cannot set property on non-object field");throw r.setPropertyError=!0,r}if(null===e){var r=n("Cannot set property on null");throw r.setPropertyError=!0,r}if("_id"===t&&!l.equals(i,e._id))throw n("Cannot change the _id of a document");e[t]=l.clone(i)},$setOnInsert:function(){},$unset:function(e,t){void 0!==e&&(e instanceof Array?t in e&&(e[t]=null):delete e[t])},$push:function(t,i,r){if(void 0===t[i]&&(t[i]=[]),!(t[i]instanceof Array))throw n("Cannot apply $push modifier to non-array");if(!r||!r.$each)return t[i].push(l.clone(r)),void 0;var o=r.$each;if(!(o instanceof Array))throw n("$each must be an array");var s=void 0;if("$slice"in r){if("number"!=typeof r.$slice)throw n("$slice must be a numeric value");if(r.$slice>0)throw n("$slice in $push must be zero or negative");s=r.$slice}var a=void 0;if(r.$sort){if(void 0===s)throw n("$sort requires $slice to be present");a=e._compileSort(r.$sort);for(var c=0;c<o.length;c++)if(3!==e._f._type(o[c]))throw n("$push like modifiers using $sort require all elements to be objects")}for(var u=0;u<o.length;u++)t[i].push(l.clone(o[u]));a&&t[i].sort(a),void 0!==s&&(t[i]=0===s?[]:t[i].slice(s))},$pushAll:function(e,t,i){if(!("object"==typeof i&&i instanceof Array))throw n("Modifier $pushAll/pullAll allowed for arrays only");var r=e[t];if(void 0===r)e[t]=i;else{if(!(r instanceof Array))throw n("Cannot apply $pushAll modifier to non-array");for(var o=0;o<i.length;o++)r.push(i[o])}},$addToSet:function(t,i,r){var o=t[i];if(void 0===o)t[i]=[r];else{if(!(o instanceof Array))throw n("Cannot apply $addToSet modifier to non-array");var a=!1;if("object"==typeof r)for(var c in r){"$each"===c&&(a=!0);break}var u=a?r.$each:[r];s.each(u,function(t){for(var n=0;n<o.length;n++)if(e._f._equal(t,o[n]))return;o.push(l.clone(t))})}},$pop:function(e,t,i){if(void 0!==e){var r=e[t];if(void 0!==r){if(!(r instanceof Array))throw n("Cannot apply $pop modifier to non-array");"number"==typeof i&&0>i?r.splice(0,1):r.pop()}}},$pull:function(t,i,r){if(void 0!==t){var o=t[i];if(void 0!==o){if(!(o instanceof Array))throw n("Cannot apply $pull/pullAll modifier to non-array");var s=[];if("object"!=typeof r||r instanceof Array)for(var a=0;a<o.length;a++)e._f._equal(o[a],r)||s.push(o[a]);else for(var l=e._compileSelector(r),a=0;a<o.length;a++)l(o[a])||s.push(o[a]);t[i]=s}}},$pullAll:function(t,i,r){if(!("object"==typeof r&&r instanceof Array))throw n("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==t){var o=t[i];if(void 0!==o){if(!(o instanceof Array))throw n("Cannot apply $pull/pullAll modifier to non-array");for(var s=[],a=0;a<o.length;a++){for(var l=!1,c=0;c<r.length;c++)if(e._f._equal(o[a],r[c])){l=!0;break}l||s.push(o[a])}t[i]=s}}},$rename:function(t,i,r,o,s){if(o===r)throw n("$rename source must differ from target");if(null===t)throw n("$rename source field invalid");if("string"!=typeof r)throw n("$rename target must be a string");if(void 0!==t){var a=t[i];delete t[i];var l=r.split("."),c=e._findModTarget(s,l,!1,!0);if(null===c)throw n("$rename target field invalid");var u=l.pop();c[u]=a}},$bit:function(){throw n("$bit is not supported")}},e._removeDollarOperators=function(e){var t={};for(var n in e)"$"!==n.substr(0,1)&&(t[n]=e[n]);return t}}.call(this),function(){e._diffQueryChanges=function(t,n,i,r){t?e._diffQueryOrderedChanges(n,i,r):e._diffQueryUnorderedChanges(n,i,r)},e._diffQueryUnorderedChanges=function(t,n,i){if(i.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");s.each(n,function(n){if(s.has(t,n._id)){var r=t[n._id];i.changed&&!l.equals(r,n)&&i.changed(n._id,e._makeChangedFields(n,r))}else{var o=l.clone(n);delete o._id,i.added&&i.added(n._id,o)}}),i.removed&&s.each(t,function(e){s.has(n,e._id)||i.removed(e._id)})},e._diffQueryOrderedChanges=function(t,n,i){var r={};s.each(n,function(e){r[e._id]&&o._debug("Duplicate _id in new_results"),r[e._id]=!0});var a={};s.each(t,function(e,t){e._id in a&&o._debug("Duplicate _id in old_results"),a[e._id]=t});for(var c=[],u=0,d=n.length,h=new Array(d),f=new Array(d),p=function(e){return a[n[e]._id]},m=0;d>m;m++)if(void 0!==a[n[m]._id]){for(var g=u;g>0&&!(p(h[g-1])<p(m));)g--;f[m]=0===g?-1:h[g-1],h[g]=m,g+1>u&&(u=g+1)}for(var v=0===u?-1:h[u-1];v>=0;)c.push(v),v=f[v];c.reverse(),c.push(n.length),s.each(t,function(e){r[e._id]||i.removed&&i.removed(e._id)});var y=0;s.each(c,function(r){for(var o,c,u,d=n[r]?n[r]._id:null,h=y;r>h;h++)c=n[h],s.has(a,c._id)?(o=t[a[c._id]],u=e._makeChangedFields(c,o),s.isEmpty(u)||i.changed&&i.changed(c._id,u),i.movedBefore&&i.movedBefore(c._id,d)):(u=l.clone(c),delete u._id,i.addedBefore&&i.addedBefore(c._id,u,d),i.added&&i.added(c._id,u));d&&(c=n[r],o=t[a[c._id]],u=e._makeChangedFields(c,o),s.isEmpty(u)||i.changed&&i.changed(c._id,u)),y=r+1})},e._diffObjects=function(e,t,n){s.each(e,function(e,i){s.has(t,i)?n.both&&n.both(i,e,t[i]):n.leftOnly&&n.leftOnly(i,e)}),n.rightOnly&&s.each(t,function(t,i){s.has(e,i)||n.rightOnly(i,t)})}}.call(this),function(){e._IdMap=function(){var e=this;e._map={}},s.extend(e._IdMap.prototype,{get:function(t){var n=this,i=e._idStringify(t);return n._map[i]},set:function(t,n){var i=this,r=e._idStringify(t);i._map[r]=n},remove:function(t){var n=this,i=e._idStringify(t);delete n._map[i]},has:function(t){var n=this,i=e._idStringify(t);return s.has(n._map,i)},empty:function(){var e=this;return s.isEmpty(e._map)},clear:function(){var e=this;e._map={}},forEach:function(t){var n=this;s.each(n._map,function(n,i,r){var o=this;t.call(o,n,e._idParse(i),r)})},setDefault:function(t,n){var i=this,r=e._idStringify(t);return s.has(i._map,r)?i._map[r]:(i._map[r]=n,n)}})}.call(this),function(){e._CachingChangeObserver=function(t){var n=this;t=t||{};var i=t.callbacks&&e._observeChangesCallbacksAreOrdered(t.callbacks);if(s.has(t,"ordered")){if(n.ordered=t.ordered,t.callbacks&&t.ordered!==i)throw Error("ordered option doesn't match callbacks")}else{if(!t.callbacks)throw Error("must provide ordered or callbacks");n.ordered=i}var r=t.callbacks||{};n.ordered?(n.docs=new c(e._idStringify),n.applyChange={addedBefore:function(e,t,i){var o=l.clone(t);o._id=e,r.addedBefore&&r.addedBefore.call(n,e,t,i),r.added&&r.added.call(n,e,t),n.docs.putBefore(e,o,i||null)},movedBefore:function(e,t){n.docs.get(e);r.movedBefore&&r.movedBefore.call(n,e,t),n.docs.moveBefore(e,t||null)}}):(n.docs=new e._IdMap,n.applyChange={added:function(e,t){var i=l.clone(t);r.added&&r.added.call(n,e,t),i._id=e,n.docs.set(e,i)}}),n.applyChange.changed=function(t,i){var o=n.docs.get(t);if(!o)throw new Error("Unknown id for changed: "+t);r.changed&&r.changed.call(n,t,l.clone(i)),e._applyChanges(o,i)},n.applyChange.removed=function(e){r.removed&&r.removed.call(n,e),n.docs.remove(e)}},e._observeFromObserveChanges=function(t,n){var i,r=t.getTransform()||function(e){return e},o=!!n._suppress_initial;if(e._observeCallbacksAreOrdered(n)){var a=!n._no_indices;i={addedBefore:function(e,t,i){var l=this;if(!o&&(n.addedAt||n.added)){var c=r(s.extend(t,{_id:e}));if(n.addedAt){var u=a?i?l.docs.indexOf(i):l.docs.size():-1;n.addedAt(c,u,i)}else n.added(c)}},changed:function(t,i){var o=this;if(n.changedAt||n.changed){var s=l.clone(o.docs.get(t));if(!s)throw new Error("Unknown id for changed: "+t);var c=r(l.clone(s));if(e._applyChanges(s,i),s=r(s),n.changedAt){var u=a?o.docs.indexOf(t):-1;n.changedAt(s,c,u)}else n.changed(s,c)}},movedBefore:function(e,t){var i=this;if(n.movedTo){var o=a?i.docs.indexOf(e):-1,s=a?t?i.docs.indexOf(t):i.docs.size():-1;s>o&&--s,n.movedTo(r(l.clone(i.docs.get(e))),o,s,t||null)}},removed:function(e){var t=this;if(n.removedAt||n.removed){var i=r(t.docs.get(e));if(n.removedAt){var o=a?t.docs.indexOf(e):-1;n.removedAt(i,o)}else n.removed(i)}}}}else i={added:function(e,t){if(!o&&n.added){var i=s.extend(t,{_id:e});n.added(r(i))}},changed:function(t,i){var o=this;if(n.changed){var s=o.docs.get(t),a=l.clone(s);e._applyChanges(a,i),n.changed(r(a),r(s))}},removed:function(e){var t=this;n.removed&&n.removed(r(t.docs.get(e)))}};var c=new e._CachingChangeObserver({callbacks:i}),u=t.observeChanges(c.applyChange);return o=!1,u}}.call(this),function(){e._looksLikeObjectID=function(e){return 24===e.length&&e.match(/^[0-9a-f]*$/)},e._ObjectID=function(t){var n=this;if(t){if(t=t.toLowerCase(),!e._looksLikeObjectID(t))throw new Error("Invalid hexadecimal string for creating an ObjectID");n._str=t}else n._str=d.hexString(24)},e._ObjectID.prototype.toString=function(){var e=this;return'ObjectID("'+e._str+'")'},e._ObjectID.prototype.equals=function(t){var n=this;return t instanceof e._ObjectID&&n.valueOf()===t.valueOf()},e._ObjectID.prototype.clone=function(){var t=this;return new e._ObjectID(t._str)},e._ObjectID.prototype.typeName=function(){return"oid"},e._ObjectID.prototype.getTimestamp=function(){var e=this;return parseInt(e._str.substr(0,8),16)},e._ObjectID.prototype.valueOf=e._ObjectID.prototype.toJSONValue=e._ObjectID.prototype.toHexString=function(){return this._str},e._selectorIsId=function(t){return"string"==typeof t||"number"==typeof t||t instanceof e._ObjectID},e._selectorIsIdPerhapsAsObject=function(t){return e._selectorIsId(t)||t&&"object"==typeof t&&t._id&&e._selectorIsId(t._id)&&1===s.size(t)},e._idsMatchedBySelector=function(t){if(e._selectorIsId(t))return[t];if(!t)return null;if(s.has(t,"_id"))return e._selectorIsId(t._id)?[t._id]:t._id&&t._id.$in&&s.isArray(t._id.$in)&&!s.isEmpty(t._id.$in)&&s.all(t._id.$in,e._selectorIsId)?t._id.$in:null;if(t.$and&&s.isArray(t.$and))for(var n=0;n<t.$and.length;++n){var i=e._idsMatchedBySelector(t.$and[n]);if(i)return i}return null},l.addType("oid",function(t){return new e._ObjectID(t)})}.call(this),"undefined"==typeof Package&&(Package={}),Package.minimongo={LocalCollection:e,MinimongoTest:t}}(),function(){var e,t,n,i,r,o,s,a,l,c,u,d=Package.meteor.Meteor,h=(Package.check.check,Package.check.Match,Package.random.Random),f=Package.ejson.EJSON,p=Package.json.JSON,m=Package.underscore._,g=Package.deps.Deps,v=(Package.logging.Log,Package.minimongo.LocalCollection);(function(){t={}}).call(this),function(){n=function(e){var t=this;m.extend(t,m.defaults(m.clone(e||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),t.retryTimer=null},m.extend(n.prototype,{clear:function(){var e=this;e.retryTimer&&clearTimeout(e.retryTimer),e.retryTimer=null},_timeout:function(e){var t=this;if(e<t.minCount)return t.minTimeout;var n=Math.min(t.maxTimeout,t.baseTimeout*Math.pow(t.exponent,e));return n*=h.fraction()*t.fuzz+(1-t.fuzz/2)},retryLater:function(e,t){var n=this,i=n._timeout(e);return n.retryTimer&&clearTimeout(n.retryTimer),n.retryTimer=setTimeout(t,i),i}})}.call(this),function(){i=function(){var e=document,t=window,n={},i=function(){};i.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];-1===n.arrIndexOf(i,t)&&i.push(t)},i.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var i=this._listeners[e],r=n.arrIndexOf(i,t);return-1!==r?(i.length>1?this._listeners[e]=i.slice(0,r).concat(i.slice(r+1)):delete this._listeners[e],void 0):void 0}},i.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].apply(this,n)};var r=function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};r.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var o=function(e){var t=this;t._events=e||[],t._listeners={}};o.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var i=0;i<t._listeners[e].length;i++)t._listeners[e][i].apply(t,n)}},o.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},o.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+p.stringify(e)+" not listed "+p.stringify(t._events)+" in "+t)},o.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var s="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||s.length;var n,i=[];for(n=0;e>n;n++)i.push(s.substr(Math.floor(Math.random()*t),1));return i.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,i=Array(t+1).join("0");return(i+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var a="_jp";n.polluteGlobalNamespace=function(){a in t||(t[a]={})},n.closeFrame=function(e,t){return"c"+p.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t){var i=e.location;if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");0===t.indexOf("//")&&(t=i.protocol+t),0===t.indexOf("/")&&(t=i.protocol+"//"+i.host+t),t=t.replace(/[/]+$/,"");var r=t.split("/");return("http:"===r[0]&&/:80$/.test(r[2])||"https:"===r[0]&&/:443$/.test(r[2]))&&(r[2]=r[2].replace(/:(80|443)$/,"")),t=r.join("/")},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var i=n.arrIndexOf(e,t);if(-1===i)return e.slice();var r=e.slice(0,i);return r.concat(e.slice(i+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var l,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067","":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,h=p&&p.stringify||function(e){return c.lastIndex=0,c.test(e)&&(e=e.replace(c,function(e){return u[e]})),'"'+e+'"'},f=function(e){var t,n={},i=[];for(t=0;65536>t;t++)i.push(String.fromCharCode(t));return e.lastIndex=0,i.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=h(e);return d.lastIndex=0,d.test(t)?(l||(l=f(d)),t.replace(d,function(e){return l[e]})):t};var m=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<m.length;t++){var n=m[t];e[n]=S[n]&&S[n].enabled()}return e},n.detectProtocols=function(e,t,n){var i={},r=[];t||(t=m);for(var o=0;o<t.length;o++){var s=t[o];i[s]=e[s]}var a=function(e){var t=e.shift();i[t]?r.push(t):e.length>0&&a(e)};return n.websocket!==!1&&a(["websocket"]),i["xhr-streaming"]&&!n.null_origin?r.push("xhr-streaming"):!i["xdr-streaming"]||n.cookie_needed||n.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):r.push("xdr-streaming"),i["xhr-polling"]&&!n.null_origin?r.push("xhr-polling"):!i["xdr-polling"]||n.cookie_needed||n.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):r.push("xdr-polling"),r};var g="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(g in t)){var i={};t[g]=function(e){return e in i||(i[e]={id:e,del:function(){delete i[e]}}),i[e]}}return t[g](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,i){"undefined"!=typeof t.addEventListener?t.addEventListener(n,i,!1):(e.attachEvent("on"+n,i),t.attachEvent("on"+n,i))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,i){"undefined"!=typeof t.addEventListener?t.removeEventListener(n,i,!1):(e.detachEvent("on"+n,i),t.detachEvent("on"+n,i))};var v={},y=!1,b=function(){for(var e in v)v[e](),delete v[e]},w=function(){y||(y=!0,b())};n.attachEvent("unload",w),n.unload_add=function(e){var t=n.random_string(8);return v[t]=e,y&&n.delay(b),t},n.unload_del=function(e){e in v&&delete v[e]},n.createIframe=function(t,i){var r,o,s=e.createElement("iframe"),a=function(){clearTimeout(r);try{s.onload=null}catch(e){}s.onerror=null},l=function(){s&&(a(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),n.unload_del(o))},c=function(e){s&&(l(),i(e))},u=function(e,t){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(n){}};return s.src=t,s.style.display="none",s.style.position="absolute",s.onerror=function(){c("onerror")},s.onload=function(){clearTimeout(r),r=setTimeout(function(){c("onload timeout")},2e3)},e.body.appendChild(s),r=setTimeout(function(){c("timeout")},15e3),o=n.unload_add(l),{post:u,cleanup:l,loaded:a}
},n.createHtmlfile=function(e,i){var r,o,s,l=new ActiveXObject("htmlfile"),c=function(){clearTimeout(r)},u=function(){l&&(c(),n.unload_del(o),s.parentNode.removeChild(s),s=l=null,CollectGarbage())},d=function(e){l&&(u(),i(e))},h=function(e,t){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(n){}};l.open(),l.write('<html><script>document.domain="'+document.domain+'";</script></html>'),l.close(),l.parentWindow[a]=t[a];var f=l.createElement("div");return l.body.appendChild(f),s=l.createElement("iframe"),f.appendChild(s),s.src=e,r=setTimeout(function(){d("timeout")},15e3),o=n.unload_add(u),{post:h,cleanup:u,loaded:c}};var _=function(){};_.prototype=new o(["chunk","finish"]),_.prototype._start=function(e,i,r,o){var s=this;try{s.xhr=new XMLHttpRequest}catch(a){}if(!s.xhr)try{s.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(t.ActiveXObject||t.XDomainRequest)&&(i+=(-1===i.indexOf("?")?"?":"&")+"t="+ +new Date),s.unload_ref=n.unload_add(function(){s._cleanup(!0)});try{s.xhr.open(e,i,!0)}catch(l){return s.emit("finish",0,""),s._cleanup(),void 0}if(o&&o.no_credentials||(s.xhr.withCredentials="true"),o&&o.headers)for(var c in o.headers)s.xhr.setRequestHeader(c,o.headers[c]);s.xhr.onreadystatechange=function(){if(s.xhr){var e=s.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&s.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),s.emit("finish",t,e.responseText),s._cleanup(!1)}}},s.xhr.send(r)},_.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(i){}t.unload_ref=t.xhr=null}},_.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var C=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};C.prototype=new _;var k=n.XHRLocalObject=function(e,t,i){var r=this;n.delay(function(){r._start(e,t,i,{no_credentials:!0})})};k.prototype=new _;var x=n.XDRObject=function(e,t,i){var r=this;n.delay(function(){r._start(e,t,i)})};x.prototype=new o(["chunk","finish"]),x.prototype._start=function(e,t,i){var r=this,o=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var s=o.ontimeout=o.onerror=function(){r.emit("finish",0,""),r._cleanup(!1)};o.onprogress=function(){r.emit("chunk",200,o.responseText)},o.onload=function(){r.emit("finish",200,o.responseText),r._cleanup(!1)},r.xdr=o,r.unload_ref=n.unload_add(function(){r._cleanup(!0)});try{r.xdr.open(e,t),r.xdr.send(i)}catch(a){s()}},x.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(i){}t.unload_ref=t.xdr=null}},x.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:j.enabled()?3:4};var S=function(e,t,i){if(!(this instanceof S))return new S(e,t,i);var r,o=this;o._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},i&&n.objectExtend(o._options,i),o._base_url=n.amendUrl(e),o._server=o._options.server||n.random_number_string(1e3),o._options.protocols_whitelist&&o._options.protocols_whitelist.length?r=o._options.protocols_whitelist:(r="string"==typeof t&&t.length>0?[t]:n.isArray(t)?t:null,r&&o._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),o._protocols=[],o.protocol=null,o.readyState=S.CONNECTING,o._ir=V(o._base_url),o._ir.onfinish=function(e,t){o._ir=null,e?(o._options.info&&(e=n.objectExtend(e,o._options.info)),o._options.rtt&&(t=o._options.rtt),o._applyInfo(e,t,r),o._didClose()):o._didClose(1002,"Can't connect to server",!0)}};S.prototype=new i,S.version="0.3.4",S.CONNECTING=0,S.OPEN=1,S.CLOSING=2,S.CLOSED=3,S.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},S.prototype._dispatchOpen=function(){var e=this;e.readyState===S.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=S.OPEN,e.dispatchEvent(new r("open"))):e._didClose(1006,"Server lost session")},S.prototype._dispatchMessage=function(e){var t=this;t.readyState===S.OPEN&&t.dispatchEvent(new r("message",{data:e}))},S.prototype._dispatchHeartbeat=function(){var e=this;e.readyState===S.OPEN&&e.dispatchEvent(new r("heartbeat",{}))},S.prototype._didClose=function(e,t,i){var o=this;if(o.readyState!==S.CONNECTING&&o.readyState!==S.OPEN&&o.readyState!==S.CLOSING)throw new Error("INVALID_STATE_ERR");o._ir&&(o._ir.nuke(),o._ir=null),o._transport&&(o._transport.doCleanup(),o._transport=null);var s=new r("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&o.readyState===S.CONNECTING&&!i){if(o._try_next_protocol(s))return;s=new r("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:s})}o.readyState=S.CLOSED,n.delay(function(){o.dispatchEvent(s)})},S.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var i=p.parse(e.slice(1)||"[]"),r=0;r<i.length;r++)t._dispatchMessage(i[r]);break;case"m":var i=p.parse(e.slice(1)||"null");t._dispatchMessage(i);break;case"c":var i=p.parse(e.slice(1)||"[]");t._didClose(i[0],i[1]);break;case"h":t._dispatchHeartbeat()}},S.prototype._try_next_protocol=function(t){var i=this;for(i.protocol&&(i._debug("Closed transport:",i.protocol,""+t),i.protocol=null),i._transport_tref&&(clearTimeout(i._transport_tref),i._transport_tref=null);;){var r=i.protocol=i._protocols.shift();if(!r)return!1;if(S[r]&&S[r].need_body===!0&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return i._protocols.unshift(r),i.protocol="waiting-for-load",n.attachEvent("load",function(){i._try_next_protocol()}),!0;if(S[r]&&S[r].enabled(i._options)){var o=S[r].roundTrips||1,s=(i._options.rto||0)*o||5e3;i._transport_tref=n.delay(s,function(){i.readyState===S.CONNECTING&&i._didClose(2007,"Transport timeouted")});var a=n.random_string(8),l=i._base_url+"/"+i._server+"/"+a;return i._debug("Opening transport:",r," url:"+l," RTO:"+i._options.rto),i._transport=new S[r](i,l,i._base_url),!0}i._debug("Skipping transport:",r)}},S.prototype.close=function(e,t){var i=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return i.readyState!==S.CONNECTING&&i.readyState!==S.OPEN?!1:(i.readyState=S.CLOSING,i._didClose(e||1e3,t||"Normal closure"),!0)},S.prototype.send=function(e){var t=this;if(t.readyState===S.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===S.OPEN&&t._transport.doSend(n.quote(""+e)),!0},S.prototype._applyInfo=function(t,i,r){var o=this;o._options.info=t,o._options.rtt=i,o._options.rto=n.countRTO(i),o._options.info.null_origin=!e.domain,t.base_url&&(o._base_url=n.amendUrl(t.base_url));var s=n.probeProtocols();o._protocols=n.detectProtocols(s,r,t),n.isSameOriginScheme(o._base_url)||2!==n.isXHRCorsCapable()||(o._protocols=["jsonp-polling"])};var T=S.websocket=function(e,i){var r=this,o=i+"/websocket";o="https"===o.slice(0,5)?"wss"+o.slice(5):"ws"+o.slice(4),r.ri=e,r.url=o;var s=t.WebSocket||t.MozWebSocket;r.ws=new s(r.url),r.ws.onmessage=function(e){r.ri._didMessage(e.data)},r.unload_ref=n.unload_add(function(){r.ws.close()}),r.ws.onclose=function(){r.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};T.prototype.doSend=function(e){this.ws.send("["+e+"]")},T.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},T.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},T.roundTrips=2;var E=function(){};E.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},E.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},E.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},E.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},E.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var D=function(t,i,r){var o=this;if(!("_send_form"in o)){var s=o._send_form=e.createElement("form"),a=o._send_area=e.createElement("textarea");a.name="d",s.style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",s.appendChild(a),e.body.appendChild(s)}var s=o._send_form,a=o._send_area,l="a"+n.random_string(8);s.target=l,s.action=t+"/jsonp_send?i="+l;var c;try{c=e.createElement('<iframe name="'+l+'">')}catch(u){c=e.createElement("iframe"),c.name=l}c.id=l,s.appendChild(c),c.style.display="none";try{a.value=i}catch(d){n.log("Your browser is seriously broken. Go home! "+d.message)}s.submit();var h=function(){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,n.delay(500,function(){c.parentNode.removeChild(c),c=null}),a.value="",r(!0))};return c.onerror=c.onload=h,c.onreadystatechange=function(){"complete"==c.readyState&&h()},h},N=function(e){return function(t,n,i){var r=new e("POST",t+"/xhr_send",n);return r.onfinish=function(e){i(200===e||204===e,"http status "+e)},function(e){i(!1,e)}}},A=function(t,i){var r,o,s=e.createElement("script"),a=function(e){o&&(o.parentNode.removeChild(o),o=null),s&&(clearTimeout(r),s.parentNode.removeChild(s),s.onreadystatechange=s.onerror=s.onload=s.onclick=null,s=null,i(e),i=null)},l=!1,c=null;if(s.id="a"+n.random_string(8),s.src=t,s.type="text/javascript",s.charset="UTF-8",s.onerror=function(){c||(c=setTimeout(function(){l||a(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},s.onload=function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){l=!0;try{s.onclick()}catch(e){}}s&&a(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof s.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))o=e.createElement("script"),o.text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=o.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(u){}s.async=!0}"undefined"!=typeof s.async&&(s.async=!0),r=setTimeout(function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=e.getElementsByTagName("head")[0];return d.insertBefore(s,d.firstChild),o&&d.insertBefore(o,d.firstChild),a},O=S["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var i=this;i.ri=e,i.trans_url=t,i.send_constructor(D),i._schedule_recv()};O.prototype=new E,O.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=M(e.trans_url+"/jsonp",A,t)},O.enabled=function(){return!0},O.need_body=!0,O.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var M=function(e,i,r){var o="a"+n.random_string(6),s=e+"?c="+escape(a+"."+o),l=0,c=function(e){switch(l){case 0:delete t[a][o],r(e);break;case 1:r(e),l=2;break;case 2:delete t[a][o]}},u=i(s,c);t[a][o]=u;var d=function(){t[a][o]&&(l=1,t[a][o](n.closeFrame(1e3,"JSONP user aborted read")))};return d},P=function(){};P.prototype=new E,P.prototype.run=function(e,t,n,i,r){var o=this;o.ri=e,o.trans_url=t,o.send_constructor(N(r)),o.poll=new Z(e,i,t+n,r)},P.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var I=S["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",rt,n.XHRCorsObject)};I.prototype=new P,I.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},I.roundTrips=2,I.need_body=!0;var $=S["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",rt,n.XDRObject)};$.prototype=new P,$.enabled=function(){return!!t.XDomainRequest},$.roundTrips=2;var R=S["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XHRCorsObject)};R.prototype=new P,R.enabled=I.enabled,R.roundTrips=2;var L=S["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XDRObject)};L.prototype=new P,L.enabled=$.enabled,L.roundTrips=2;var j=function(){};j.prototype.i_constructor=function(e,t,i){var r=this;r.ri=e,r.origin=n.getOrigin(i),r.base_url=i,r.trans_url=t;var o=i+"/iframe.html";r.ri._options.devel&&(o+="?t="+ +new Date),r.window_id=n.random_string(8),o+="#"+r.window_id,r.iframeObj=n.createIframe(o,function(e){r.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),r.onmessage_cb=n.bind(r.onmessage,r),n.attachMessage(r.onmessage_cb)},j.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},j.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),i=e.data.slice(8,9),r=e.data.slice(9);if(n===t.window_id)switch(i){case"s":t.iframeObj.loaded(),t.postMessage("s",p.stringify([S.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(r)}}},j.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},j.prototype.doSend=function(e){this.postMessage("m",e)},j.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var F,B=function(e,i){parent!==t?parent.postMessage(F+e+(i||""),"*"):n.log("Can't postMessage, no parent window.",e,i)},H=function(){};H.prototype._didClose=function(e,t){B("t",n.closeFrame(e,t))},H.prototype._didMessage=function(e){B("t",e)},H.prototype._doSend=function(e){this._transport.doSend(e)},H.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,S.bootstrap_iframe=function(){var i;F=e.location.hash.slice(1);var r=function(e){if(e.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var r=e.data.slice(0,8),o=e.data.slice(8,9),s=e.data.slice(9);if(r===F)switch(o){case"s":var a=p.parse(s),l=a[0],c=a[1],u=a[2],d=a[3];if(l!==S.version&&n.log('Incompatibile SockJS! Main site uses: "'+l+'", the iframe: "'+S.version+'".'),!n.flatUrl(u)||!n.flatUrl(d))return n.log("Only basic urls are supported in SockJS"),void 0;if(!n.isSameOriginUrl(u)||!n.isSameOriginUrl(d))return n.log("Can't connect to different domain from within an iframe. ("+p.stringify([t.location.href,u,d])+")"),void 0;i=new H,i._transport=new H[c](i,u,d);break;case"m":i._doSend(s);break;case"c":i&&i._doCleanup(),i=null}}};n.attachMessage(r),B("s")};var U=function(e,t){var i=this;n.delay(function(){i.doXhr(e,t)})};U.prototype=new o(["finish"]),U.prototype.doXhr=function(e,t){var i=this,r=(new Date).getTime(),o=new t("GET",e+"/info?cb="+n.random_string(10)),s=n.delay(8e3,function(){o.ontimeout()});o.onfinish=function(e,t){if(clearTimeout(s),s=null,200===e){var n=(new Date).getTime()-r,o=p.parse(t);"object"!=typeof o&&(o={}),i.emit("finish",o,n)}else i.emit("finish")},o.ontimeout=function(){o.close(),i.emit("finish")}};var z=function(t){var i=this,r=function(){var e=new j;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=p.parse(t.substr(1)),r=n[0],o=n[1];i.emit("finish",r,o)}else i.emit("finish");e.doCleanup(),e=null},r={_options:{},_didClose:n,_didMessage:n};e.i_constructor(r,t,t)};e.body?r():n.attachEvent("load",r)};z.prototype=new o(["finish"]);var q=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};q.prototype=new o(["finish"]);var V=function(e){if(n.isSameOriginUrl(e))return new U(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new U(e,n.XHRLocalObject);case 2:return n.isSameOriginScheme(e)?new U(e,n.XDRObject):new q;case 3:return new z(e);default:return new q}},W=H["w-iframe-info-receiver"]=function(e,t,i){var r=new U(i,n.XHRLocalObject);r.onfinish=function(t,n){e._didMessage("m"+p.stringify([t,n])),e._didClose()}};W.prototype.doCleanup=function(){};var Y=S["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};Y.prototype=new j,Y.enabled=function(){return"EventSource"in t&&j.enabled()},Y.need_body=!0,Y.roundTrips=3;var K=H["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",et,n.XHRLocalObject)};K.prototype=new P;var G=S["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};G.prototype=new j,G.enabled=function(){return t.XMLHttpRequest&&j.enabled()},G.need_body=!0,G.roundTrips=3;var J=H["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XHRLocalObject)};J.prototype=new P;var Q=S["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};Q.prototype=new j,Q.enabled=function(){return j.enabled()},Q.need_body=!0,Q.roundTrips=3;var X=H["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",it,n.XHRLocalObject)};X.prototype=new P;var Z=function(e,t,n,i){var r=this;r.ri=e,r.Receiver=t,r.recv_url=n,r.AjaxObject=i,r._scheduleRecv()};Z.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},Z.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var et=function(e){var t=this,i=new EventSource(e);i.onmessage=function(e){t.dispatchEvent(new r("message",{data:unescape(e.data)}))},t.es_close=i.onerror=function(e,o){var s=o?"user":2!==i.readyState?"network":"permanent";t.es_close=i.onmessage=i.onerror=null,i.close(),i=null,n.delay(200,function(){t.dispatchEvent(new r("close",{reason:s}))})}};et.prototype=new i,et.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var tt,nt=function(){if(void 0===tt)if("ActiveXObject"in t)try{tt=!!new ActiveXObject("htmlfile")}catch(e){}else tt=!1;return tt},it=function(e){var i=this;n.polluteGlobalNamespace(),i.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(a+"."+i.id);var o,s=nt()?n.createHtmlfile:n.createIframe;t[a][i.id]={start:function(){o.loaded()},message:function(e){i.dispatchEvent(new r("message",{data:e}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(e,n){o.cleanup(),i.iframe_close=o=null,delete t[a][i.id],i.dispatchEvent(new r("close",{reason:n}))},o=s(e,function(){i.iframe_close({},"permanent")})};it.prototype=new i,it.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var rt=function(e,t){var n=this,i=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var o=t.slice(i),s=o.indexOf("\n");if(-1===s)break;i+=s+1;var a=o.slice(0,s);n.dispatchEvent(new r("message",{data:a}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var i=200===e?"network":"permanent";n.dispatchEvent(new r("close",{reason:i}))}};return rt.prototype=new i,rt.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new r("close",{reason:"user"})),e.xo=null)},S.getUtils=function(){return n},S.getIframeTransport=function(){return j},S}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return i})}.call(this),function(){t.ClientStream=function(e,t){var n=this;n.options=m.extend({retry:!0},t),n._initCommon(),n.HEARTBEAT_TIMEOUT=6e4,n.rawUrl=e,n.socket=null,n.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",m.bind(n._online,n),!1),n._launchConnection()},m.extend(t.ClientStream.prototype,{send:function(e){var t=this;t.currentStatus.connected&&t.socket.send(e)},_changeUrl:function(e){var t=this;t.rawUrl=e},_connected:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.currentStatus.connected||(e.currentStatus.status="connected",e.currentStatus.connected=!0,e.currentStatus.retryCount=0,e.statusChanged(),m.each(e.eventCallbacks.reset,function(e){e()}))},_cleanup:function(){var e=this;e._clearConnectionAndHeartbeatTimers(),e.socket&&(e.socket.onmessage=e.socket.onclose=e.socket.onerror=e.socket.onheartbeat=function(){},e.socket.close(),e.socket=null)},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},_heartbeat_timeout:function(){var e=this;d._debug("Connection timeout. No heartbeat received."),e._lostConnection()},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeatTimer&&clearTimeout(e.heartbeatTimer),e.heartbeatTimer=setTimeout(m.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_sockjsProtocolsWhitelist:function(){var e=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],t=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);return t||(e=["websocket"].concat(e)),e},_launchConnection:function(){var e=this;e._cleanup(),e.socket=new i(r(e.rawUrl),void 0,{debug:!1,protocols_whitelist:e._sockjsProtocolsWhitelist()}),e.socket.onopen=function(){e._connected()},e.socket.onmessage=function(t){e._heartbeat_received(),e.currentStatus.connected&&m.each(e.eventCallbacks.message,function(e){e(t.data)})},e.socket.onclose=function(){e._lostConnection()},e.socket.onerror=function(){d._debug("stream error",m.toArray(arguments),(new Date).toDateString())},e.socket.onheartbeat=function(){e._heartbeat_received()},e.connectionTimer&&clearTimeout(e.connectionTimer),e.connectionTimer=setTimeout(m.bind(e._lostConnection,e),e.CONNECT_TIMEOUT)}})}.call(this),function(){var e=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},i=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},s=function(t,n,r){n||(n="http");var o,s=t.match(/^ddp(i?)\+sockjs:\/\//),a=t.match(/^http(s?):\/\//);if(s){var l=t.substr(s[0].length);o="i"===s[1]?n:n+"s";var c=l.indexOf("/"),u=-1===c?l:l.substr(0,c),f=-1===c?"":l.substr(c);return u=u.replace(/\*/g,function(){return Math.floor(10*h.fraction())}),o+"://"+u+f}if(a){o=a[1]?n+"s":n;var p=t.substr(a[0].length);t=o+"://"+p}return-1!==t.indexOf("://")||e(t,"/")||(t=n+"://"+t),t=d._relativeToSiteRootUrl(t),i(t,"/")?t+r:t+"/"+r};r=function(e){return s(e,"http","sockjs")},o=function(e){var t=s(e,"ws","websocket");return t},t.toSockjsUrl=r,m.extend(t.ClientStream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e)throw new Error("unknown event type: "+e);n.eventCallbacks[e]||(n.eventCallbacks[e]=[]),n.eventCallbacks[e].push(t)},_initCommon:function(){var e=this;e.CONNECT_TIMEOUT=1e4,e.eventCallbacks={},e._forcedToDisconnect=!1,e.currentStatus={status:"connecting",connected:!1,retryCount:0},e.statusListeners="undefined"!=typeof g&&new g.Dependency,e.statusChanged=function(){e.statusListeners&&e.statusListeners.changed()},e._retry=new n,e.connectionTimer=null},reconnect:function(e){var t=this;return e=e||{},e.url&&t._changeUrl(e.url),t.currentStatus.connected?((e._force||e.url)&&t._lostConnection(),void 0):("connecting"===t.currentStatus.status&&t._lostConnection(),t._retry.clear(),t.currentStatus.retryCount-=1,t._retryNow(),void 0)},disconnect:function(e){var t=this;e=e||{},t._forcedToDisconnect||(e._permanent&&(t._forcedToDisconnect=!0),t._cleanup(),t._retry.clear(),t.currentStatus={status:e._permanent?"failed":"offline",connected:!1,retryCount:0},e._permanent&&e._error&&(t.currentStatus.reason=e._error),t.statusChanged())},_lostConnection:function(){var e=this;e._cleanup(),e._retryLater()},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(){var e=this,t=0;e.options.retry&&(t=e._retry.retryLater(e.currentStatus.retryCount,m.bind(e._retryNow,e))),e.currentStatus.status="waiting",e.currentStatus.connected=!1,e.currentStatus.retryTime=(new Date).getTime()+t,e.statusChanged()},_retryNow:function(){var e=this;e._forcedToDisconnect||(e.currentStatus.retryCount+=1,e.currentStatus.status="connecting",e.currentStatus.connected=!1,delete e.currentStatus.retryTime,e.statusChanged(),e._launchConnection())},status:function(){var e=this;return e.statusListeners&&e.statusListeners.depend(),e.currentStatus}})}.call(this),function(){e={},s=["pre1"],t.SUPPORTED_DDP_VERSIONS=s,a=function(e){this.isSimulation=e.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this.connection=e.connection},m.extend(a.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}}),l=function(e){try{var t=p.parse(e)}catch(n){return d._debug("Discarding message with invalid JSON",e),null}return null===t||"object"!=typeof t?(d._debug("Discarding non-object DDP message",e),null):(m.has(t,"cleared")&&(m.has(t,"fields")||(t.fields={}),m.each(t.cleared,function(e){t.fields[e]=void 0}),delete t.cleared),m.each(["fields","params","result"],function(e){m.has(t,e)&&(t[e]=f._adjustTypesFromJSONValue(t[e]))}),t)},c=function(e){var t=f.clone(e);if(m.has(e,"fields")){var n=[];m.each(e.fields,function(e,i){void 0===e&&(n.push(i),delete t.fields[i])}),m.isEmpty(n)||(t.cleared=n),m.isEmpty(t.fields)&&delete t.fields}if(m.each(["fields","params","result"],function(e){m.has(t,e)&&(t[e]=f._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw new Error("Message id is not a string");return p.stringify(t)},e._CurrentInvocation=new d.EnvironmentVariable,e._Retry=n}.call(this),function(){if(d.isServer)var n=Npm.require("path"),i=(Npm.require("fibers"),Npm.require(n.join("fibers","future")));var r=function(e,n){var i=this;n=m.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(e){d._debug(e)},reloadWithOutstanding:!1,supportedDDPVersions:s,retry:!0},n),i.onReconnect=null,i._stream="object"==typeof e?e:new t.ClientStream(e,{retry:n.retry}),i._lastSessionId=null,i._versionSuggestion=null,i._version=null,i._stores={},i._methodHandlers={},i._nextMethodId=1,i._supportedDDPVersions=n.supportedDDPVersions,i._methodInvokers={},i._outstandingMethodBlocks=[],i._documentsWrittenByStub={},i._serverDocuments={},i._afterUpdateCallbacks=[],i._messagesBufferedUntilQuiescence=[],i._methodsBlockingQuiescence={},i._subsBeingRevived={},i._resetStores=!1,i._updatesForUnknownStores={},i._retryMigrate=null,i._subscriptions={},i._userId=null,i._userIdDeps="undefined"!=typeof g&&new g.Dependency,d.isClient&&Package.reload&&!n.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(e){if(i._readyToMigrate())return[!0];if(i._retryMigrate)throw new Error("Two migrations in progress?");return i._retryMigrate=e,!1});var r=function(e){try{var t=l(e)}catch(r){return d._debug("Exception while parsing DDP",r),void 0}if(null===t||!t.msg)return t&&t.server_id||d._debug("discarding invalid livedata message",t),void 0;if("connected"===t.msg)i._version=i._versionSuggestion,n.onConnected(),i._livedata_connected(t);else if("failed"==t.msg)if(m.contains(i._supportedDDPVersions,t.version))i._versionSuggestion=t.version,i._stream.reconnect({_force:!0});else{var o="DDP version negotiation failed; server requested version "+t.version;i._stream.disconnect({_permanent:!0,_error:o}),n.onDDPVersionNegotiationFailure(o)}else m.include(["added","changed","removed","ready","updated"],t.msg)?i._livedata_data(t):"nosub"===t.msg?i._livedata_nosub(t):"result"===t.msg?i._livedata_result(t):"error"===t.msg?i._livedata_error(t):d._debug("discarding unknown livedata message type",t)},o=function(){var e={msg:"connect"};i._lastSessionId&&(e.session=i._lastSessionId),e.version=i._versionSuggestion||i._supportedDDPVersions[0],i._versionSuggestion=e.version,e.support=i._supportedDDPVersions,i._send(e),!m.isEmpty(i._outstandingMethodBlocks)&&m.isEmpty(i._outstandingMethodBlocks[0].methods)&&i._outstandingMethodBlocks.shift(),m.each(i._methodInvokers,function(e){e.sentMessage=!1}),i.onReconnect?i._callOnReconnectAndSendAppropriateOutstandingMethods():i._sendOutstandingMethods(),m.each(i._subscriptions,function(e,t){i._send({msg:"sub",id:t,name:e.name,params:e.params})})};d.isServer?(i._stream.on("message",d.bindEnvironment(r,d._debug)),i._stream.on("reset",d.bindEnvironment(o,d._debug))):(i._stream.on("message",r),i._stream.on("reset",o))},o=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};m.extend(o.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw new Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw new Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){var e=this;return!!e._methodResult}}),m.extend(r.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var i={};m.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(e){i[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=i;var r=n._updatesForUnknownStores[e];return r&&(i.beginUpdate(r.length,!1),m.each(r,function(e){i.update(e)}),i.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),i={};if(n.length){var r=n[n.length-1];"function"==typeof r?i.onReady=n.pop():!r||"function"!=typeof r.onReady&&"function"!=typeof r.onError||(i=n.pop())}var o,s=m.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&f.equals(t.params,n)});s?(o=s.id,s.inactive=!1,i.onReady&&(s.ready||(s.readyCallback=i.onReady)),i.onError&&(s.errorCallback=i.onError)):(o=h.id(),t._subscriptions[o]={id:o,name:e,params:n,inactive:!1,ready:!1,readyDeps:"undefined"!=typeof g&&new g.Dependency,readyCallback:i.onReady,errorCallback:i.onError},t._send({msg:"sub",id:o,name:e,params:n}));var a={stop:function(){m.has(t._subscriptions,o)&&(t._send({msg:"unsub",id:o}),delete t._subscriptions[o])},ready:function(){if(!m.has(t._subscriptions,o))return!1;var e=t._subscriptions[o];return e.readyDeps&&e.readyDeps.depend(),e.ready}};return g.active&&g.onInvalidate(function(){m.has(t._subscriptions,o)&&(t._subscriptions[o].inactive=!0),g.afterFlush(function(){m.has(t._subscriptions,o)&&t._subscriptions[o].inactive&&a.stop()})}),a},_subscribeAndWait:function(e,t,n){var r=this,o=new i,s=!1;t=t||[],t.push({onReady:function(){s=!0,o["return"]()},onError:function(e){s?n&&n.onLateError&&n.onLateError(e):o["throw"](e)}}),r.subscribe.apply(r,[e].concat(t)),o.wait()
},methods:function(e){var t=this;m.each(e,function(e,n){if(t._methodHandlers[n])throw new Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(t,n,r,s){var l=this;s||"function"!=typeof r||(s=r,r={}),r=r||{},s&&(s=d.bindEnvironment(s,"delivering result of invoking '"+t+"'"));var c=function(){var e;return function(){return void 0===e&&(e=""+l._nextMethodId++),e}}(),u=e._CurrentInvocation.get(),h=u&&u.isSimulation,p=l._methodHandlers[t];if(p){var g=function(e){l.setUserId(e)},v=new a({isSimulation:!0,userId:l.userId(),setUserId:g});h||l._saveOriginals();try{var y=e._CurrentInvocation.withValue(v,function(){return d.isServer?d._noYieldsAllowed(function(){return p.apply(v,f.clone(n))}):p.apply(v,f.clone(n))})}catch(b){var w=b}h||l._retrieveAndStoreOriginals(c())}if(h){if(s)return s(w,y),void 0;if(w)throw w;return y}if(w&&!w.expected&&d._debug("Exception while simulating the effect of invoking '"+t+"'",w,w.stack),!s)if(d.isClient)s=function(){};else{var _=new i;s=_.resolver()}var C=new o({methodId:c(),callback:s,connection:l,onResultReceived:r.onResultReceived,wait:!!r.wait,message:{msg:"method",method:t,params:n,id:c()}});return r.wait?l._outstandingMethodBlocks.push({wait:!0,methods:[C]}):((m.isEmpty(l._outstandingMethodBlocks)||m.last(l._outstandingMethodBlocks).wait)&&l._outstandingMethodBlocks.push({wait:!1,methods:[]}),m.last(l._outstandingMethodBlocks).methods.push(C)),1===l._outstandingMethodBlocks.length&&C.sendMessage(),_?_.wait():void 0},_saveOriginals:function(){var e=this;m.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];m.each(t._stores,function(i,r){var o=i.retrieveOriginals();m.each(o,function(i,o){if("string"!=typeof o)throw new Error("id is not a string");n.push({collection:r,id:o});var s=d._ensure(t._serverDocuments,r,o);s.writtenByStubs?s.writtenByStubs[e]=!0:(s.document=i,s.flushCallbacks=[],s.writtenByStubs={},s.writtenByStubs[e]=!0)})}),m.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;m.each(m.clone(e._subscriptions),function(t,n){"meteor_autoupdate_clientVersions"!==t.name&&(e._send({msg:"unsub",id:n}),delete e._subscriptions[n])})},_send:function(e){var t=this;t._stream.send(c(e))},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},disconnect:function(){var e=this;return e._stream.disconnect.apply(e._stream,arguments)},close:function(){var e=this;return e._stream.disconnect({_permanent:!0})},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!m.isEmpty(e._subsBeingRevived)||!m.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return m.any(m.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if(t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},m.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&m.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(m.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(m.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){var n=this;n["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this,n={};if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),"nosub"===e.msg&&delete t._subsBeingRevived[e.id],m.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),m.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;m.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,n)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,n);(t._resetStores||!m.isEmpty(n))&&(m.each(t._stores,function(e,i){e.beginUpdate(m.has(n,i)?n[i].length:0,t._resetStores)}),t._resetStores=!1,m.each(n,function(e,n){var i=t._stores[n];i?m.each(e,function(e){i.update(e)}):(m.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),m.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],m.each(t,function(e){e()})},_pushUpdate:function(e,t,n){m.has(e,t)||(e[t]=[]),e[t].push(n)},_process_added:function(e,t){var n=this,i=d._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0!==i.document)throw new Error("It doesn't make sense to be adding something we know exists: "+e.id);i.document=e.fields||{},i.document._id=v._idParse(e.id)}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,i=d._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0===i.document)throw new Error("It doesn't make sense to be changing something we don't think exists: "+e.id);v._applyChanges(i.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,i=d._get(n._serverDocuments,e.collection,e.id);if(i){if(void 0===i.document)throw new Error("It doesn't make sense to be deleting something we don't know exists: "+e.id);i.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;m.each(e.methods,function(e){m.each(n._documentsWrittenByStub[e],function(i){var r=d._get(n._serverDocuments,i.collection,i.id);if(!r)throw new Error("Lost serverDoc for "+p.stringify(i));if(!r.writtenByStubs[e])throw new Error("Doc "+p.stringify(i)+" not written by  method "+e);delete r.writtenByStubs[e],m.isEmpty(r.writtenByStubs)&&(n._pushUpdate(t,i.collection,{msg:"replace",id:i.id,replace:r.document}),m.each(r.flushCallbacks,function(e){e()}),delete n._serverDocuments[i.collection][i.id])}),delete n._documentsWrittenByStub[e];var i=n._methodInvokers[e];if(!i)throw new Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(m.bind(i.dataVisible,i))})},_process_ready:function(e){var t=this;m.each(e.subs,function(e){t._runWhenAllServerDocsAreFlushed(function(){var n=t._subscriptions[e];n&&(n.ready||(n.readyCallback&&n.readyCallback(),n.ready=!0,n.readyDeps&&n.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},i=0,r=function(){--i,0===i&&n()};m.each(t._serverDocuments,function(e){m.each(e,function(e){var n=m.any(e.writtenByStubs,function(e,n){var i=t._methodInvokers[n];return i&&i.sentMessage});n&&(++i,e.flushCallbacks.push(r))})}),0===i&&n()},_livedata_nosub:function(e){var t=this;if(t._livedata_data(e),m.has(t._subscriptions,e.id)){var n=t._subscriptions[e.id].errorCallback;delete t._subscriptions[e.id],n&&e.error&&n(new d.Error(e.error.error,e.error.reason,e.error.details))}},_process_nosub:function(){},_livedata_result:function(e){var t=this;if(m.isEmpty(t._outstandingMethodBlocks))return d._debug("Received method result but no methods outstanding"),void 0;for(var n,i=t._outstandingMethodBlocks[0].methods,r=0;r<i.length&&(n=i[r],n.methodId!==e.id);r++);return n?(i.splice(r,1),m.has(e,"error")?n.receiveResult(new d.Error(e.error.error,e.error.reason,e.error.details)):n.receiveResult(void 0,e.result),void 0):(d._debug("Can't match method response to original method call",e),void 0)},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!m.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!m.isEmpty(t.methods))throw new Error("No methods outstanding but nonempty block: "+p.stringify(t));m.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;m.isEmpty(e._outstandingMethodBlocks)||m.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(e){d._debug("Received error from server: ",e.reason),e.offendingMessage&&d._debug("For: ",e.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect(),!m.isEmpty(t)){if(m.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,e._sendOutstandingMethods(),void 0;m.last(e._outstandingMethodBlocks).wait||t[0].wait||(m.each(t[0].methods,function(t){m.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),m.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return m.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),t.Connection=r,e.connect=function(e,t){var n=new r(e,t);return u.push(n),n},u=[],e._allSubscriptionsReady=function(){return m.all(u,function(e){return m.all(e._subscriptions,function(e){return e.ready})})}}.call(this),function(){if(d.refresh=function(){},d.isClient){var t="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(t=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var i=new n,r=function(e){if(d._debug(e),Package.reload){var t=Package.reload.Reload._migrationData("livedata")||{},n=t.DDPVersionNegotiationFailures||0;++n,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:n}]}),i.retryLater(n,function(){Package.reload.Reload._reload()})}};d.connection=e.connect(t,{onDDPVersionNegotiationFailure:r}),m.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(e){d[e]=m.bind(d.connection[e],d.connection)})}else d.connection=null;d.default_connection=d.connection,d.connect=e.connect}.call(this),"undefined"==typeof Package&&(Package={}),Package.livedata={DDP:e,LivedataTest:t}}(),function(){{var e;Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON}"undefined"==typeof Package&&(Package={}),Package["follower-livedata"]={Follower:e}}(),function(){Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON,Package["follower-livedata"].Follower;"undefined"==typeof Package&&(Package={}),Package["application-configuration"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.insecure={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.random.Random,i=Package.ejson.EJSON,r=(Package.json.JSON,Package.underscore._),o=Package.minimongo.LocalCollection,s=(Package.logging.Log,Package.livedata.DDP),a=Package.deps.Deps,l=Package.check.check,c=Package.check.Match;(function(){e=function(){var e=this;e.noConnCollections={}};var t=function(e,t){return e in t||(t[e]=new o(e)),t[e]};r.extend(e.prototype,{open:function(e,n){var i=this;return e?n?(n._mongo_livedata_collections||(n._mongo_livedata_collections={}),t(e,n._mongo_livedata_collections)):t(e,i.noConnCollections):new o}}),e=new e}).call(this),function(){t.Collection=function(i,s){var l=this;if(!(l instanceof t.Collection))throw new Error('use "new" to construct a Meteor.Collection');switch(s&&s.methods&&(s={connection:s}),s&&s.manager&&!s.connection&&(s.connection=s.manager),s=r.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},s),s.idGeneration){case"MONGO":l._makeNewID=function(){return new t.Collection.ObjectID};break;case"STRING":default:l._makeNewID=function(){return n.id()}}if(l._transform=s.transform?a._makeNonreactive(s.transform):null,i||null===i||t._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),l._connection=i&&null!==s.connection?s.connection?s.connection:t.isClient?t.connection:t.server:null,s._driver||(s._driver=i&&l._connection===t.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?MongoInternals.defaultRemoteCollectionDriver():e),l._collection=s._driver.open(i,l._connection),l._name=i,l._connection&&l._connection.registerStore){var c=l._connection.registerStore(i,{beginUpdate:function(e,t){(e>1||t)&&l._collection.pauseObservers(),t&&l._collection.remove({})},update:function(e){var t=o._idParse(e.id),n=l._collection.findOne(t);if("replace"===e.msg){var i=e.replace;return i?n?l._collection.update(t,i):l._collection.insert(i):n&&l._collection.remove(t),void 0}if("added"===e.msg){if(n)throw new Error("Expected not to find a document already present for an add");l._collection.insert(r.extend({_id:t},e.fields))}else if("removed"===e.msg){if(!n)throw new Error("Expected to find a document already present for removed");l._collection.remove(t)}else{if("changed"!==e.msg)throw new Error("I don't know how to deal with this message");if(!n)throw new Error("Expected to find a document to change");if(!r.isEmpty(e.fields)){var s={};r.each(e.fields,function(e,t){void 0===e?(s.$unset||(s.$unset={}),s.$unset[t]=1):(s.$set||(s.$set={}),s.$set[t]=e)}),l._collection.update(t,s)}}},endUpdate:function(){l._collection.resumeObservers()},saveOriginals:function(){l._collection.saveOriginals()},retrieveOriginals:function(){return l._collection.retrieveOriginals()}});if(!c)throw new Error("There is already a collection named '"+i+"'")}l._defineMutationMethods(),Package.autopublish&&!s._preventAutopublish&&l._connection&&l._connection.publish&&l._connection.publish(null,function(){return l.find()},{is_auto:!0})},r.extend(t.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var t=this;return e.length<2?{transform:t._transform}:r.extend({transform:t._transform},e[1])},find:function(){var e=this,t=r.toArray(arguments);return e._collection.find(e._getFindSelector(t),e._getFindOptions(t))},findOne:function(){var e=this,t=r.toArray(arguments);return e._collection.findOne(e._getFindSelector(t),e._getFindOptions(t))}}),t.Collection._publishCursor=function(e,t,n){var i=e.observeChanges({added:function(e,i){t.added(n,e,i)},changed:function(e,i){t.changed(n,e,i)},removed:function(e){t.removed(n,e)}});t.onStop(function(){i.stop()})},t.Collection._rewriteSelector=function(e){if(o._selectorIsId(e)&&(e={_id:e}),!e||"_id"in e&&!e._id)return{_id:n.id()};var i={};return r.each(e,function(e,n){e instanceof RegExp?i[n]=u(e):e&&e.$regex instanceof RegExp?(i[n]=u(e.$regex),void 0!==e.$options&&(i[n].$options=e.$options)):i[n]=r.contains(["$or","$and","$nor"],n)?r.map(e,function(e){return t.Collection._rewriteSelector(e)}):e}),i};var u=function(e){l(e,RegExp);var t={$regex:e.source},n="";return e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),n&&(t.$options=n),t},d=function(e,n){if(!o._selectorIsIdPerhapsAsObject(e))throw new t.Error(403,"Not permitted. Untrusted code may only "+n+" documents by ID.")};r.each(["insert","update","remove"],function(e){t.Collection.prototype[e]=function(){var n,i,o,a=this,l=r.toArray(arguments);if(l.length&&l[l.length-1]instanceof Function&&(n=l.pop()),"insert"===e){if(!l.length)throw new Error("insert requires an argument");if(l[0]=r.extend({},l[0]),"_id"in l[0]){if(i=l[0]._id,!i||!("string"==typeof i||i instanceof t.Collection.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else i=l[0]._id=a._makeNewID()}else if(l[0]=t.Collection._rewriteSelector(l[0]),"update"===e){var c=l[2]=r.clone(l[2])||{};if(c&&"function"!=typeof c&&c.upsert)if(c.insertedId){if(!("string"==typeof c.insertedId||c.insertedId instanceof t.Collection.ObjectID))throw new Error("insertedId must be string or ObjectID")}else c.insertedId=a._makeNewID()}var u,h=function(t){return"insert"===e?i:t};if(n&&(u=function(e,t){n(e,!e&&h(t))}),a._connection&&a._connection!==t.server){var f=s._CurrentInvocation.get(),p=f&&f.isSimulation;!t.isClient||u||p||(u=function(n){n&&t._debug(e+" failed: "+(n.reason||n.stack))}),p||"insert"===e||d(l[0],e),o=h(a._connection.apply(a._prefix+e,l,u))}else{l.push(u);try{var m=a._collection[e].apply(a._collection,l);o=h(m)}catch(g){if(n)return n(g),null;throw g}}return o}}),t.Collection.prototype.upsert=function(e,t,n,i){var o=this;return i||"function"!=typeof n||(i=n,n={}),o.update(e,t,r.extend({},n,{_returnObject:!0,upsert:!0}),i)},t.Collection.prototype._ensureIndex=function(e,t){var n=this;if(!n._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");n._collection._ensureIndex(e,t)},t.Collection.prototype._dropIndex=function(e){var t=this;if(!t._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");t._collection._dropIndex(e)},t.Collection.prototype._dropCollection=function(){var e=this;if(!e._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");e._collection.dropCollection()},t.Collection.prototype._createCappedCollection=function(e){var t=this;if(!t._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");t._collection._createCappedCollection(e)},t.Collection.ObjectID=o._ObjectID,function(){var e=function(e,t){var n=["insert","update","remove","fetch","transform"];r.each(r.keys(t),function(t){if(!r.contains(n,t))throw new Error(e+": Invalid key: "+t)});var i=this;if(i._restricted=!0,r.each(["insert","update","remove"],function(n){if(t[n]){if(!(t[n]instanceof Function))throw new Error(e+": Value for `"+n+"` must be a function");i._transform&&null!==t.transform&&(t[n].transform=i._transform),t.transform&&(t[n].transform=a._makeNonreactive(t.transform)),i._validators[n][e].push(t[n])}}),t.update||t.remove||t.fetch){if(t.fetch&&!(t.fetch instanceof Array))throw new Error(e+": Value for `fetch` must be an array");i._updateFetch(t.fetch)}};t.Collection.prototype.allow=function(t){e.call(this,"allow",t)},t.Collection.prototype.deny=function(t){e.call(this,"deny",t)}}(),t.Collection.prototype._defineMutationMethods=function(){var e=this;if(e._restricted=!1,e._insecure=void 0,e._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},e._name&&(e._prefix="/"+e._name+"/",e._connection)){var n={};r.each(["insert","update","remove"],function(i){n[e._prefix+i]=function(){l(arguments,[c.Any]);try{if(this.isSimulation)return e._collection[i].apply(e._collection,r.toArray(arguments));if("insert"!==i&&d(arguments[0],i),e._restricted){if(0===e._validators[i].allow.length)throw new t.Error(403,"Access denied. No allow validators set on restricted collection for method '"+i+"'.");var n="_validated"+i.charAt(0).toUpperCase()+i.slice(1),o=[this.userId].concat(r.toArray(arguments));return e[n].apply(e,o)}if(e._isInsecure())return e._collection[i].apply(e._collection,r.toArray(arguments));throw new t.Error(403,"Access denied")}catch(s){throw"MongoError"===s.name||"MinimongoError"===s.name?new t.Error(409,s.toString()):s}}}),(t.isClient||e._connection===t.server)&&e._connection.methods(n)}},t.Collection.prototype._updateFetch=function(e){var t=this;t._validators.fetchAllFields||(e?t._validators.fetch=r.union(t._validators.fetch,e):(t._validators.fetchAllFields=!0,t._validators.fetch=null))},t.Collection.prototype._isInsecure=function(){var e=this;return void 0===e._insecure?!!Package.insecure:e._insecure};var h=function(e,t){var n=t;return e.transform&&(n=e.transform(i.clone(t))),n};t.Collection.prototype._validatedInsert=function(e,n){var i=this;if(r.any(i._validators.insert.deny,function(t){return t(e,h(t,n))}))throw new t.Error(403,"Access denied");if(r.all(i._validators.insert.allow,function(t){return!t(e,h(t,n))}))throw new t.Error(403,"Access denied");i._collection.insert.call(i._collection,n)};var f=function(e,t){return e.transform?e.transform(t):t};t.Collection.prototype._validatedUpdate=function(e,n,i,s){var a=this;if(s=s||{},!o._selectorIsIdPerhapsAsObject(n))throw new Error("validated update should be of a single ID");if(s.upsert)throw new t.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var l=[];r.each(i,function(e,n){if("$"!==n.charAt(0))throw new t.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!r.has(p,n))throw new t.Error(403,"Access denied. Operator "+n+" not allowed in a restricted collection.");r.each(r.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),r.contains(l,e)||l.push(e)})});var c={transform:null};a._validators.fetchAllFields||(c.fields={},r.each(a._validators.fetch,function(e){c.fields[e]=1}));var u=a._collection.findOne(n,c);if(u){var d;if(r.any(a._validators.update.deny,function(t){return d||(d=f(t,u)),t(e,d,l,i)}))throw new t.Error(403,"Access denied");if(r.all(a._validators.update.allow,function(t){return d||(d=f(t,u)),!t(e,d,l,i)}))throw new t.Error(403,"Access denied");a._collection.update.call(a._collection,n,i,s)}};var p={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};t.Collection.prototype._validatedRemove=function(e,n){var i=this,o={transform:null};i._validators.fetchAllFields||(o.fields={},r.each(i._validators.fetch,function(e){o.fields[e]=1}));var s=i._collection.findOne(n,o);if(s){if(r.any(i._validators.remove.deny,function(t){return t(e,f(t,s))}))throw new t.Error(403,"Access denied");if(r.all(i._validators.remove.allow,function(t){return!t(e,f(t,s))}))throw new t.Error(403,"Access denied");i._collection.remove.call(i._collection,n)}}}.call(this),"undefined"==typeof Package&&(Package={}),Package["mongo-livedata"]={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.deps.Deps,i=Package.livedata.DDP;(function(){var r=__meteor_runtime_config__.autoupdateVersion||"unknown",o=new t.Collection("meteor_autoupdate_clientVersions");e={},e.newClientAvailable=function(){return!!o.findOne({$and:[{current:!0},{_id:{$ne:r}}]})};var s=new i._Retry({minCount:0,baseTimeout:3e4}),a=0;e._retrySubscription=function(){t.subscribe("meteor_autoupdate_clientVersions",{onError:function(n){t._debug("autoupdate subscription failed:",n),a++,s.retryLater(a,function(){e._retrySubscription()})},onReady:function(){Package.reload&&n.autorun(function(e){o.findOne({current:!0})&&!o.findOne({_id:r})&&(e.stop(),Package.reload.Reload._reload())})}})},e._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),Package.autoupdate={Autoupdate:e}}(),function(){Package.meteor.Meteor,Package.reload.Reload,Package.autoupdate.Autoupdate;"undefined"==typeof Package&&(Package={}),Package["standard-app-packages"]={}}(),function(){Package.meteor.Meteor;(function(){!function(e,t){function n(e){var t=e.length,n=ut.type(e);return ut.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=St[e]={};return ut.each(e.match(ht)||[],function(e,n){t[n]=!0}),t}function r(e,n,i,r){if(ut.acceptData(e)){var o,s,a=ut.expando,l=e.nodeType,c=l?ut.cache:e,u=l?e[a]:e[a]&&a;if(u&&c[u]&&(r||c[u].data)||i!==t||"string"!=typeof n)return u||(u=l?e[a]=tt.pop()||ut.guid++:a),c[u]||(c[u]=l?{}:{toJSON:ut.noop}),("object"==typeof n||"function"==typeof n)&&(r?c[u]=ut.extend(c[u],n):c[u].data=ut.extend(c[u].data,n)),s=c[u],r||(s.data||(s.data={}),s=s.data),i!==t&&(s[ut.camelCase(n)]=i),"string"==typeof n?(o=s[n],null==o&&(o=s[ut.camelCase(n)])):o=s,o}}function o(e,t,n){if(ut.acceptData(e)){var i,r,o=e.nodeType,s=o?ut.cache:e,l=o?e[ut.expando]:ut.expando;if(s[l]){if(t&&(i=n?s[l]:s[l].data)){ut.isArray(t)?t=t.concat(ut.map(t,ut.camelCase)):t in i?t=[t]:(t=ut.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!a(i):!ut.isEmptyObject(i))return}(n||(delete s[l].data,a(s[l])))&&(o?ut.cleanData([e],!0):ut.support.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}}function s(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(Et,"-$1").toLowerCase();if(i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Tt.test(i)?ut.parseJSON(i):i}catch(o){}ut.data(e,n,i)}else i=t}return i}function a(e){var t;for(t in e)if(("data"!==t||!ut.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function u(){try{return J.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,n){if(ut.isFunction(t))return ut.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ut.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ut.test(t))return ut.filter(t,e,n);t=ut.filter(t,e)}return ut.grep(e,function(e){return ut.inArray(e,t)>=0!==n})}function f(e){var t=Wt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function p(e,t){return ut.nodeName(e,"table")&&ut.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==ut.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=on.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var n,i=0;null!=(n=e[i]);i++)ut._data(n,"globalEval",!t||ut._data(t[i],"globalEval"))}function y(e,t){if(1===t.nodeType&&ut.hasData(e)){var n,i,r,o=ut._data(e),s=ut._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)ut.event.add(t,n,a[n][i])}s.data&&(s.data=ut.extend({},s.data))}}function b(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ut.support.noCloneEvent&&t[ut.expando]){r=ut._data(t);for(i in r.events)ut.removeEvent(t,i,r.handle);t.removeAttribute(ut.expando)}"script"===n&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ut.support.html5Clone&&e.innerHTML&&!ut.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function w(e,n){var i,r,o=0,s=typeof e.getElementsByTagName!==K?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==K?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],i=e.childNodes||e;null!=(r=i[o]);o++)!n||ut.nodeName(r,n)?s.push(r):ut.merge(s,w(r,n));return n===t||n&&ut.nodeName(e,n)?ut.merge([e],s):s}function _(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function C(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=Sn.length;r--;)if(t=Sn[r]+n,t in e)return t;return i}function k(e,t){return e=t||e,"none"===ut.css(e,"display")||!ut.contains(e.ownerDocument,e)}function x(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=ut._data(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&k(i)&&(o[s]=ut._data(i,"olddisplay",D(i.nodeName)))):o[s]||(r=k(i),(n&&"none"!==n||!r)&&ut._data(i,"olddisplay",r?n:ut.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function S(e,t,n){var i=yn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function T(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=ut.css(e,n+xn[o],!0,r)),i?("content"===n&&(s-=ut.css(e,"padding"+xn[o],!0,r)),"margin"!==n&&(s-=ut.css(e,"border"+xn[o]+"Width",!0,r))):(s+=ut.css(e,"padding"+xn[o],!0,r),"padding"!==n&&(s+=ut.css(e,"border"+xn[o]+"Width",!0,r)));return s}function E(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=dn(e),s=ut.support.boxSizing&&"border-box"===ut.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=hn(e,t,o),(0>r||null==r)&&(r=e.style[t]),bn.test(r))return r;i=s&&(ut.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+T(e,t,n||(s?"border":"content"),i,o)+"px"}function D(e){var t=J,n=_n[e];return n||(n=N(e,t),"none"!==n&&n||(un=(un||ut("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(un[0].contentWindow||un[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=N(e,t),un.detach()),_n[e]=n),n}function N(e,t){var n=ut(t.createElement(e)).appendTo(t.body),i=ut.css(n[0],"display");return n.remove(),i}function A(e,t,n,i){var r;if(ut.isArray(t))ut.each(t,function(t,r){n||En.test(e)?i(e,r):A(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==ut.type(t))i(e,t);else for(r in t)A(e+"["+r+"]",t[r],n,i)}function O(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(ht)||[];if(ut.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function M(e,t,n,i){function r(a){var l;return o[a]=!0,ut.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=e===qn;return r(t.dataTypes[0])||!o["*"]&&r("*")}function P(e,n){var i,r,o=ut.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);return i&&ut.extend(!0,e,i),e}function I(e,n,i){for(var r,o,s,a,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(a in l)if(l[a]&&l[a].test(o)){c.unshift(a);break}if(c[0]in i)s=c[0];else{for(a in i){if(!c[0]||e.converters[a+" "+c[0]]){s=a;break}r||(r=a)}s=s||r}return s?(s!==c[0]&&c.unshift(s),i[s]):void 0}function $(e,t,n,i){var r,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function R(){try{return new e.XMLHttpRequest}catch(t){}}function L(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function j(){return setTimeout(function(){Zn=t}),Zn=ut.now()}function F(e,t,n){for(var i,r=(oi[t]||[]).concat(oi["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function B(e,t,n){var i,r,o=0,s=ri.length,a=ut.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Zn||j(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,o=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,n]),1>o&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:ut.extend({},t),opts:ut.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zn||j(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ut.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);
return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(H(u,c.opts.specialEasing);s>o;o++)if(i=ri[o].call(c,e,u,c.opts))return i;return ut.map(u,F,c),ut.isFunction(c.opts.start)&&c.opts.start.call(e,c),ut.fx.timer(ut.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(e,t){var n,i,r,o,s;for(n in e)if(i=ut.camelCase(n),r=t[i],o=e[n],ut.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=ut.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function U(e,t,n){var i,r,o,s,a,l,c=this,u={},d=e.style,h=e.nodeType&&k(e),f=ut._data(e,"fxshow");n.queue||(a=ut._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ut.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ut.css(e,"display")&&"none"===ut.css(e,"float")&&(ut.support.inlineBlockNeedsLayout&&"inline"!==D(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ut.support.shrinkWrapBlocks||c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],ti.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(h?"hide":"show"))continue;u[i]=f&&f[i]||ut.style(e,i)}if(!ut.isEmptyObject(u)){f?"hidden"in f&&(h=f.hidden):f=ut._data(e,"fxshow",{}),o&&(f.hidden=!h),h?ut(e).show():c.done(function(){ut(e).hide()}),c.done(function(){var t;ut._removeData(e,"fxshow");for(t in u)ut.style(e,t,u[t])});for(i in u)s=F(h?f[i]:0,i,c),i in f||(f[i]=s.start,h&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function z(e,t,n,i,r){return new z.prototype.init(e,t,n,i,r)}function q(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=xn[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function V(e){return ut.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var W,Y,K=typeof t,G=e.location,J=e.document,Q=J.documentElement,X=e.jQuery,Z=e.$,et={},tt=[],nt="1.10.2",it=tt.concat,rt=tt.push,ot=tt.slice,st=tt.indexOf,at=et.toString,lt=et.hasOwnProperty,ct=nt.trim,ut=function(e,t){return new ut.fn.init(e,t,Y)},dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ht=/\S+/g,ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,gt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,yt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,wt=/^-ms-/,_t=/-([\da-z])/gi,Ct=function(e,t){return t.toUpperCase()},kt=function(e){(J.addEventListener||"load"===e.type||"complete"===J.readyState)&&(xt(),ut.ready())},xt=function(){J.addEventListener?(J.removeEventListener("DOMContentLoaded",kt,!1),e.removeEventListener("load",kt,!1)):(J.detachEvent("onreadystatechange",kt),e.detachEvent("onload",kt))};ut.fn=ut.prototype={jquery:nt,constructor:ut,init:function(e,n,i){var r,o;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:pt.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof ut?n[0]:n,ut.merge(this,ut.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:J,!0)),mt.test(r[1])&&ut.isPlainObject(n))for(r in n)ut.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if(o=J.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return i.find(e);this.length=1,this[0]=o}return this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ut.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ut.makeArray(e,this))},selector:"",length:0,toArray:function(){return ot.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ut.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ut.each(this,e,t)},ready:function(e){return ut.ready.promise().done(e),this},slice:function(){return this.pushStack(ot.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(ut.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:rt,sort:[].sort,splice:[].splice},ut.fn.init.prototype=ut.fn,ut.extend=ut.fn.extend=function(){var e,n,i,r,o,s,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||ut.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(o=arguments[l]))for(r in o)e=a[r],i=o[r],a!==i&&(u&&i&&(ut.isPlainObject(i)||(n=ut.isArray(i)))?(n?(n=!1,s=e&&ut.isArray(e)?e:[]):s=e&&ut.isPlainObject(e)?e:{},a[r]=ut.extend(u,s,i)):i!==t&&(a[r]=i));return a},ut.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ut&&(e.$=Z),t&&e.jQuery===ut&&(e.jQuery=X),ut},isReady:!1,readyWait:1,holdReady:function(e){e?ut.readyWait++:ut.ready(!0)},ready:function(e){if(e===!0?!--ut.readyWait:!ut.isReady){if(!J.body)return setTimeout(ut.ready);ut.isReady=!0,e!==!0&&--ut.readyWait>0||(W.resolveWith(J,[ut]),ut.fn.trigger&&ut(J).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ut.type(e)},isArray:Array.isArray||function(e){return"array"===ut.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?et[at.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==ut.type(e)||e.nodeType||ut.isWindow(e))return!1;try{if(e.constructor&&!lt.call(e,"constructor")&&!lt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ut.support.ownLast)for(n in e)return lt.call(e,n);for(n in e);return n===t||lt.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var i=mt.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=ut.buildFragment([e],t,r),r&&ut(r).remove(),ut.merge([],i.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ut.trim(t),t&&gt.test(t.replace(yt,"@").replace(bt,"]").replace(vt,"")))?new Function("return "+t)():(ut.error("Invalid JSON: "+t),void 0)},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ut.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&ut.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(wt,"ms-").replace(_t,Ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:ct&&!ct.call("")?function(e){return null==e?"":ct.call(e)}:function(e){return null==e?"":(e+"").replace(ft,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ut.merge(i,"string"==typeof e?[e]:e):rt.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(st)return st.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,s=e.length;for(n=!!n;s>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),l=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&(l[l.length]=r);else for(o in e)r=t(e[o],o,i),null!=r&&(l[l.length]=r);return it.apply([],l)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(o=e[n],n=e,e=o),ut.isFunction(e)?(i=ot.call(arguments,2),r=function(){return e.apply(n||this,i.concat(ot.call(arguments)))},r.guid=e.guid=e.guid||ut.guid++,r):t},access:function(e,n,i,r,o,s,a){var l=0,c=e.length,u=null==i;if("object"===ut.type(i)){o=!0;for(l in i)ut.access(e,n,l,i[l],!0,s,a)}else if(r!==t&&(o=!0,ut.isFunction(r)||(a=!0),u&&(a?(n.call(e,r),n=null):(u=n,n=function(e,t,n){return u.call(ut(e),n)})),n))for(;c>l;l++)n(e[l],i,a?r:r.call(e[l],l,n(e[l],i)));return o?e:u?n.call(e):c?n(e[0],i):s},now:function(){return(new Date).getTime()},swap:function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r}}),ut.ready.promise=function(t){if(!W)if(W=ut.Deferred(),"complete"===J.readyState)setTimeout(ut.ready);else if(J.addEventListener)J.addEventListener("DOMContentLoaded",kt,!1),e.addEventListener("load",kt,!1);else{J.attachEvent("onreadystatechange",kt),e.attachEvent("onload",kt);var n=!1;try{n=null==e.frameElement&&J.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!ut.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}xt(),ut.ready()}}()}return W.promise(t)},ut.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){et["[object "+t+"]"]=t.toLowerCase()}),Y=ut(J),function(e,t){function n(e,t,n,i){var r,o,s,a,l,c,u,d,p,m;if((t?t.ownerDocument||t:B)!==M&&O(t),t=t||M,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(I&&!i){if(r=bt.exec(e))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&j(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return et.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&k.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(s)),n}if(k.qsa&&(!$||!$.test(e))){if(d=u=F,p=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(u=t.getAttribute("id"))?d=u.replace(Ct,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+f(c[l]);p=ft.test(e)&&t.parentNode||t,m=c.join(",")}if(m)try{return et.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{u||t.removeAttribute("id")}}}return _(e.replace(ct,"$1"),t,n,i)}function i(){function e(n,i){return t.push(n+=" ")>S.cacheLength&&delete e[t.shift()],e[n]=i}var t=[];return e}function r(e){return e[F]=!0,e}function o(e){var t=M.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=e.length;i--;)S.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function d(){}function h(e,t){var i,r,o,s,a,l,c,u=q[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=S.preFilter;a;){(!i||(r=dt.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ht.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ct," ")}),a=a.slice(i.length));for(s in S.filter)!(r=vt[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return t?a.length:a?n.error(e):q(e,l).slice(0)}function f(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=U++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,l,c,u=H+" "+o;if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r)if(c=t[F]||(t[F]={}),(l=c[i])&&l[0]===u){if((a=l[1])===!0||a===x)return a===!0}else if(l=c[i]=[u],l[1]=e(t,n,s)||x,l[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),c&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[F]&&(i=v(i)),o&&!o[F]&&(o=v(o,s)),r(function(r,s,a,l){var c,u,d,h=[],f=[],p=s.length,m=r||w(t||"*",a.nodeType?[a]:a,[]),v=!e||!r&&t?m:g(m,h,e,a,l),y=n?o||(r?e:p||i)?[]:s:v;if(n&&n(v,y,a,l),i)for(c=g(y,f),i(c,[],a,l),u=c.length;u--;)(d=c[u])&&(y[f[u]]=!(v[f[u]]=d));if(r){if(o||e){if(o){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(v[u]=d);o(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=o?nt.call(r,d):h[u])>-1&&(r[c]=!(s[c]=d))}}else y=g(y===s?y.splice(p,y.length):y),o?o(null,s,y,l):et.apply(s,y)})}function y(e){for(var t,n,i,r=e.length,o=S.relative[e[0].type],s=o||S.relative[" "],a=o?1:0,l=p(function(e){return e===t},s,!0),c=p(function(e){return nt.call(t,e)>-1},s,!0),u=[function(e,n,i){return!o&&(i||n!==N)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];r>a;a++)if(n=S.relative[e[a].type])u=[p(m(u),n)];else{if(n=S.filter[e[a].type].apply(null,e[a].matches),n[F]){for(i=++a;r>i&&!S.relative[e[i].type];i++);return v(a>1&&m(u),a>1&&f(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ct,"$1"),n,i>a&&y(e.slice(a,i)),r>i&&y(e=e.slice(i)),r>i&&f(e))}u.push(n)}return m(u)}function b(e,t){var i=0,o=t.length>0,s=e.length>0,a=function(r,a,l,c,u){var d,h,f,p=[],m=0,v="0",y=r&&[],b=null!=u,w=N,_=r||s&&S.find.TAG("*",u&&a.parentNode||a),C=H+=null==w?1:Math.random()||.1;for(b&&(N=a!==M&&a,x=i);null!=(d=_[v]);v++){if(s&&d){for(h=0;f=e[h++];)if(f(d,a,l)){c.push(d);break}b&&(H=C,x=++i)}o&&((d=!f&&d)&&m--,r&&y.push(d))}if(m+=v,o&&v!==m){for(h=0;f=t[h++];)f(y,p,a,l);if(r){if(m>0)for(;v--;)y[v]||p[v]||(p[v]=X.call(c));p=g(p)}et.apply(c,p),b&&!r&&p.length>0&&m+t.length>1&&n.uniqueSort(c)}return b&&(H=C,N=w),y};return o?r(a):a}function w(e,t,i){for(var r=0,o=t.length;o>r;r++)n(e,t[r],i);return i}function _(e,t,n,i){var r,o,s,a,l,c=h(e);if(!i&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&k.getById&&9===t.nodeType&&I&&S.relative[o[1].type]){if(t=(S.find.ID(s.matches[0].replace(kt,xt),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(r=vt.needsContext.test(e)?0:o.length;r--&&(s=o[r],!S.relative[a=s.type]);)if((l=S.find[a])&&(i=l(s.matches[0].replace(kt,xt),ft.test(o[0].type)&&t.parentNode||t))){if(o.splice(r,1),e=i.length&&f(o),!e)return et.apply(n,i),n;break}}return D(e,c)(i,t,!I,n,ft.test(e)),n}var C,k,x,S,T,E,D,N,A,O,M,P,I,$,R,L,j,F="sizzle"+-new Date,B=e.document,H=0,U=0,z=i(),q=i(),V=i(),W=!1,Y=function(e,t){return e===t?(W=!0,0):0},K=typeof t,G=1<<31,J={}.hasOwnProperty,Q=[],X=Q.pop,Z=Q.push,et=Q.push,tt=Q.slice,nt=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=ot.replace("w","w#"),at="\\["+rt+"*("+ot+")"+rt+"*(?:([*^$|!~]?=)"+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+rt+"*\\]",lt=":("+ot+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+at.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),dt=new RegExp("^"+rt+"*,"+rt+"*"),ht=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),ft=new RegExp(rt+"*[+~]"),pt=new RegExp("="+rt+"*([^\\]'\"]*)"+rt+"*\\]","g"),mt=new RegExp(lt),gt=new RegExp("^"+st+"$"),vt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+lt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wt=/^(?:input|select|textarea|button)$/i,_t=/^h\d$/i,Ct=/'|\\/g,kt=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),xt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{et.apply(Q=tt.call(B.childNodes),B.childNodes),Q[B.childNodes.length].nodeType}catch(St){et={apply:Q.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}E=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},k=n.support={},O=n.setDocument=function(e){var t=e?e.ownerDocument||e:B,n=t.defaultView;return t!==M&&9===t.nodeType&&t.documentElement?(M=t,P=t.documentElement,I=!E(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){O()}),k.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),k.getElementsByTagName=o(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),k.getById=o(function(e){return P.appendChild(e).id=F,!t.getElementsByName||!t.getElementsByName(F).length}),k.getById?(S.find.ID=function(e,t){if(typeof t.getElementById!==K&&I){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(e){var t=e.replace(kt,xt);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(kt,xt);return function(e){var n=typeof e.getAttributeNode!==K&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=k.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==K?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},S.find.CLASS=k.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==K&&I?t.getElementsByClassName(e):void 0},R=[],$=[],(k.qsa=yt.test(t.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||$.push("\\["+rt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||$.push(":checked")}),o(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&$.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||$.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),$.push(",.*:")})),(k.matchesSelector=yt.test(L=P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){k.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),R.push("!=",lt)}),$=$.length&&new RegExp($.join("|")),R=R.length&&new RegExp(R.join("|")),j=yt.test(P.contains)||P.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=P.compareDocumentPosition?function(e,n){if(e===n)return W=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);return i?1&i||!k.sortDetached&&n.compareDocumentPosition(e)===i?e===t||j(B,e)?-1:n===t||j(B,n)?1:A?nt.call(A,e)-nt.call(A,n):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var i,r=0,o=e.parentNode,s=n.parentNode,l=[e],c=[n];if(e===n)return W=!0,0;if(!o||!s)return e===t?-1:n===t?1:o?-1:s?1:A?nt.call(A,e)-nt.call(A,n):0;if(o===s)return a(e,n);for(i=e;i=i.parentNode;)l.unshift(i);for(i=n;i=i.parentNode;)c.unshift(i);for(;l[r]===c[r];)r++;return r?a(l[r],c[r]):l[r]===B?-1:c[r]===B?1:0},t):M},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==M&&O(e),t=t.replace(pt,"='$1']"),!(!k.matchesSelector||!I||R&&R.test(t)||$&&$.test(t)))try{var i=L.call(e,t);if(i||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return n(t,M,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==M&&O(e),j(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==M&&O(e);var i=S.attrHandle[n.toLowerCase()],r=i&&J.call(S.attrHandle,n.toLowerCase())?i(e,n,!I):t;return r===t?k.attributes||!I?e.getAttribute(n):(r=e.getAttributeNode(n))&&r.specified?r.value:null:r},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],i=0,r=0;if(W=!k.detectDuplicates,A=!k.sortStable&&e.slice(0),e.sort(Y),W){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},T=n.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=T(t);return n},S=n.selectors={cacheLength:50,createPseudo:r,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(kt,xt),e[3]=(e[4]||e[5]||"").replace(kt,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,i=!e[5]&&e[2];return vt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&mt.test(i)&&(n=h(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(kt,xt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==K&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(r){var o=n.attr(r,e);return null==o?"!="===t:t?(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o+" ").indexOf(i)>-1:"|="===t?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,f,p,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(u=g[F]||(g[F]={}),c=u[e]||[],f=c[0]===H&&c[1],h=c[0]===H&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[H,f,h];break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===H)h=c[1];else for(;(d=++f&&d&&d[m]||(h=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[F]||(d[F]={}))[e]=[H,h]),d!==t)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,t){var i,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return o[F]?o(t):o.length>1?(i=[e,e,"",t],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var i,r=o(e,t),s=r.length;s--;)i=nt.call(e,r[s]),e[i]=!(n[i]=r[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=D(e.replace(ct,"$1"));return i[F]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(t){return n(e,t).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:r(function(e){return gt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(kt,xt).toLowerCase(),function(t){var n;do if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return _t.test(e.nodeName)},input:function(e){return wt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},S.pseudos.nth=S.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[C]=l(C);for(C in{submit:!0,reset:!0})S.pseudos[C]=c(C);d.prototype=S.filters=S.pseudos,S.setFilters=new d,D=n.compile=function(e,t){var n,i=[],r=[],o=V[e+" "];if(!o){for(t||(t=h(e)),n=t.length;n--;)o=y(t[n]),o[F]?i.push(o):r.push(o);o=V(e,b(r,i))}return o},k.sortStable=F.split("").sort(Y).join("")===F,k.detectDuplicates=W,O(),k.sortDetached=o(function(e){return 1&e.compareDocumentPosition(M.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),k.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||s(it,function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&i.specified?i.value:e[t]===!0?t.toLowerCase():null}),ut.find=n,ut.expr=n.selectors,ut.expr[":"]=ut.expr.pseudos,ut.unique=n.uniqueSort,ut.text=n.getText,ut.isXMLDoc=n.isXML,ut.contains=n.contains}(e);var St={};ut.Callbacks=function(e){e="string"==typeof e?St[e]||i(e):ut.extend({},e);var n,r,o,s,a,l,c=[],u=!e.once&&[],d=function(t){for(r=e.memory&&t,o=!0,a=l||0,l=0,s=c.length,n=!0;c&&s>a;a++)if(c[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,c&&(u?u.length&&d(u.shift()):r?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;!function i(t){ut.each(t,function(t,n){var r=ut.type(n);"function"===r?e.unique&&h.has(n)||c.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?s=c.length:r&&(l=t,d(r))}return this},remove:function(){return c&&ut.each(arguments,function(e,t){for(var i;(i=ut.inArray(t,c,i))>-1;)c.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(e){return e?ut.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=u=r=t,this},disabled:function(){return!c},lock:function(){return u=t,r||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||o&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):d(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},ut.extend({Deferred:function(e){var t=[["resolve","done",ut.Callbacks("once memory"),"resolved"],["reject","fail",ut.Callbacks("once memory"),"rejected"],["notify","progress",ut.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ut.Deferred(function(n){ut.each(t,function(t,o){var s=o[0],a=ut.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ut.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ut.extend(e,i):i}},r={};return i.pipe=i.then,ut.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=ot.call(arguments),s=o.length,a=1!==s||e&&ut.isFunction(e.promise)?s:0,l=1===a?e:ut.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?ot.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&ut.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}}),ut.support=function(t){var n,i,r,o,s,a,l,c,u,d=J.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],i=d.getElementsByTagName("a")[0],!i||!i.style||!n.length)return t;o=J.createElement("select"),a=o.appendChild(J.createElement("option")),r=d.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(i.getAttribute("style")),t.hrefNormalized="/a"===i.getAttribute("href"),t.opacity=/^0.5/.test(i.style.opacity),t.cssFloat=!!i.style.cssFloat,t.checkOn=!!r.value,t.optSelected=a.selected,t.enctype=!!J.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==J.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,r.checked=!0,t.noCloneChecked=r.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!a.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}r=J.createElement("input"),r.setAttribute("value",""),t.input=""===r.getAttribute("value"),r.value="t",r.setAttribute("type","radio"),t.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),s=J.createDocumentFragment(),s.appendChild(r),t.appendChecked=r.checked,t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1
}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(l="on"+u,"t"),t[u+"Bubbles"]=l in e||d.attributes[l].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(u in ut(t))break;return t.ownLast="0"!==u,ut(function(){var n,i,r,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=J.getElementsByTagName("body")[0];s&&(n=J.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=d.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",t.reliableHiddenOffsets=c&&0===r[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ut.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,i=d.appendChild(J.createElement("div")),i.style.cssText=d.style.cssText=o,i.style.marginRight=i.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof d.style.zoom!==K&&(d.innerHTML="",d.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(n),n=d=r=i=null)}),n=o=s=a=i=r=null,t}({});var Tt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Et=/([A-Z])/g;ut.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ut.cache[e[ut.expando]]:e[ut.expando],!!e&&!a(e)},data:function(e,t,n){return r(e,t,n)},removeData:function(e,t){return o(e,t)},_data:function(e,t,n){return r(e,t,n,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ut.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ut.fn.extend({data:function(e,n){var i,r,o=null,a=0,l=this[0];if(e===t){if(this.length&&(o=ut.data(l),1===l.nodeType&&!ut._data(l,"parsedAttrs"))){for(i=l.attributes;a<i.length;a++)r=i[a].name,0===r.indexOf("data-")&&(r=ut.camelCase(r.slice(5)),s(l,r,o[r]));ut._data(l,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ut.data(this,e)}):arguments.length>1?this.each(function(){ut.data(this,e,n)}):l?s(l,e,ut.data(l,e)):null},removeData:function(e){return this.each(function(){ut.removeData(this,e)})}}),ut.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ut._data(e,t),n&&(!i||ut.isArray(n)?i=ut._data(e,t,ut.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ut.queue(e,t),i=n.length,r=n.shift(),o=ut._queueHooks(e,t),s=function(){ut.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ut._data(e,n)||ut._data(e,n,{empty:ut.Callbacks("once memory").add(function(){ut._removeData(e,t+"queue"),ut._removeData(e,n)})})}}),ut.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?ut.queue(this[0],e):n===t?this:this.each(function(){var t=ut.queue(this,e,n);ut._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ut.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ut.dequeue(this,e)})},delay:function(e,t){return e=ut.fx?ut.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=ut.Deferred(),s=this,a=this.length,l=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=ut._data(s[a],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),o.promise(n)}});var Dt,Nt,At=/[\t\r\n\f]/g,Ot=/\r/g,Mt=/^(?:input|select|textarea|button|object)$/i,Pt=/^(?:a|area)$/i,It=/^(?:checked|selected)$/i,$t=ut.support.getSetAttribute,Rt=ut.support.input;ut.fn.extend({attr:function(e,t){return ut.access(this,ut.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ut.removeAttr(this,e)})},prop:function(e,t){return ut.access(this,ut.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ut.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,r,o,s=0,a=this.length,l="string"==typeof e&&e;if(ut.isFunction(e))return this.each(function(t){ut(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ht)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(At," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=ut.trim(i)}return this},removeClass:function(e){var t,n,i,r,o,s=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ut.isFunction(e))return this.each(function(t){ut(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ht)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(At," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?ut.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ut.isFunction(e)?this.each(function(n){ut(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=ut(this),o=e.match(ht)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===K||"boolean"===n)&&(this.className&&ut._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ut._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(At," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];{if(arguments.length)return r=ut.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,ut(this).val()):e,null==o?o="":"number"==typeof o?o+="":ut.isArray(o)&&(o=ut.map(o,function(e){return null==e?"":e+""})),i=ut.valHooks[this.type]||ut.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,o,"value")!==t||(this.value=o))});if(o)return i=ut.valHooks[o.type]||ut.valHooks[o.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(Ot,""):null==n?"":n)}}}),ut.extend({valHooks:{option:{get:function(e){var t=ut.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(ut.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ut.nodeName(n.parentNode,"optgroup"))){if(t=ut(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=ut.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=ut.inArray(ut(i).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,i){var r,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===K?ut.prop(e,n,i):(1===s&&ut.isXMLDoc(e)||(n=n.toLowerCase(),r=ut.attrHooks[n]||(ut.expr.match.bool.test(n)?Nt:Dt)),i===t?r&&"get"in r&&null!==(o=r.get(e,n))?o:(o=ut.find.attr(e,n),null==o?t:o):null!==i?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):(ut.removeAttr(e,n),void 0))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(ht);if(o&&1===e.nodeType)for(;n=o[r++];)i=ut.propFix[n]||n,ut.expr.match.bool.test(n)?Rt&&$t||!It.test(n)?e[i]=!1:e[ut.camelCase("default-"+n)]=e[i]=!1:ut.attr(e,n,""),e.removeAttribute($t?n:i)},attrHooks:{type:{set:function(e,t){if(!ut.support.radioValue&&"radio"===t&&ut.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var r,o,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!ut.isXMLDoc(e),s&&(n=ut.propFix[n]||n,o=ut.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var t=ut.find.attr(e,"tabindex");return t?parseInt(t,10):Mt.test(e.nodeName)||Pt.test(e.nodeName)&&e.href?0:-1}}}}),Nt={set:function(e,t,n){return t===!1?ut.removeAttr(e,n):Rt&&$t||!It.test(n)?e.setAttribute(!$t&&ut.propFix[n]||n,n):e[ut.camelCase("default-"+n)]=e[n]=!0,n}},ut.each(ut.expr.match.bool.source.match(/\w+/g),function(e,n){var i=ut.expr.attrHandle[n]||ut.find.attr;ut.expr.attrHandle[n]=Rt&&$t||!It.test(n)?function(e,n,r){var o=ut.expr.attrHandle[n],s=r?t:(ut.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return ut.expr.attrHandle[n]=o,s}:function(e,n,i){return i?t:e[ut.camelCase("default-"+n)]?n.toLowerCase():null}}),Rt&&$t||(ut.attrHooks.value={set:function(e,t,n){return ut.nodeName(e,"input")?(e.defaultValue=t,void 0):Dt&&Dt.set(e,t,n)}}),$t||(Dt={set:function(e,n,i){var r=e.getAttributeNode(i);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(i)),r.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},ut.expr.attrHandle.id=ut.expr.attrHandle.name=ut.expr.attrHandle.coords=function(e,n,i){var r;return i?t:(r=e.getAttributeNode(n))&&""!==r.value?r.value:null},ut.valHooks.button={get:function(e,n){var i=e.getAttributeNode(n);return i&&i.specified?i.value:t},set:Dt.set},ut.attrHooks.contenteditable={set:function(e,t,n){Dt.set(e,""===t?!1:t,n)}},ut.each(["width","height"],function(e,t){ut.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ut.support.hrefNormalized||ut.each(["href","src"],function(e,t){ut.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ut.support.style||(ut.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),ut.support.optSelected||(ut.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ut.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ut.propFix[this.toLowerCase()]=this}),ut.support.enctype||(ut.propFix.enctype="encoding"),ut.each(["radio","checkbox"],function(){ut.valHooks[this]={set:function(e,t){return ut.isArray(t)?e.checked=ut.inArray(ut(e).val(),t)>=0:void 0}},ut.support.checkOn||(ut.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Lt=/^(?:input|select|textarea)$/i,jt=/^key/,Ft=/^(?:mouse|contextmenu)|click/,Bt=/^(?:focusinfocus|focusoutblur)$/,Ht=/^([^.]*)(?:\.(.+)|)$/;ut.event={global:{},add:function(e,n,i,r,o){var s,a,l,c,u,d,h,f,p,m,g,v=ut._data(e);if(v){for(i.handler&&(c=i,i=c.handler,o=c.selector),i.guid||(i.guid=ut.guid++),(a=v.events)||(a=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof ut===K||e&&ut.event.triggered===e.type?t:ut.event.dispatch.apply(d.elem,arguments)},d.elem=e),n=(n||"").match(ht)||[""],l=n.length;l--;)s=Ht.exec(n[l])||[],p=g=s[1],m=(s[2]||"").split(".").sort(),p&&(u=ut.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=ut.event.special[p]||{},h=ut.extend({type:p,origType:g,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&ut.expr.match.needsContext.test(o),namespace:m.join(".")},c),(f=a[p])||(f=a[p]=[],f.delegateCount=0,u.setup&&u.setup.call(e,r,m,d)!==!1||(e.addEventListener?e.addEventListener(p,d,!1):e.attachEvent&&e.attachEvent("on"+p,d))),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),o?f.splice(f.delegateCount++,0,h):f.push(h),ut.event.global[p]=!0);e=null}},remove:function(e,t,n,i,r){var o,s,a,l,c,u,d,h,f,p,m,g=ut.hasData(e)&&ut._data(e);if(g&&(u=g.events)){for(t=(t||"").match(ht)||[""],c=t.length;c--;)if(a=Ht.exec(t[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(d=ut.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,h=u[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)s=h[o],!r&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(h.splice(o,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(e,s));l&&!h.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||ut.removeEvent(e,f,g.handle),delete u[f])}else for(f in u)ut.event.remove(e,f+t[c],n,i,!0);ut.isEmptyObject(u)&&(delete g.handle,ut._removeData(e,"events"))}},trigger:function(n,i,r,o){var s,a,l,c,u,d,h,f=[r||J],p=lt.call(n,"type")?n.type:n,m=lt.call(n,"namespace")?n.namespace.split("."):[];if(l=d=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!Bt.test(p+ut.event.triggered)&&(p.indexOf(".")>=0&&(m=p.split("."),p=m.shift(),m.sort()),a=p.indexOf(":")<0&&"on"+p,n=n[ut.expando]?n:new ut.Event(p,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:ut.makeArray(i,[n]),u=ut.event.special[p]||{},o||!u.trigger||u.trigger.apply(r,i)!==!1)){if(!o&&!u.noBubble&&!ut.isWindow(r)){for(c=u.delegateType||p,Bt.test(c+p)||(l=l.parentNode);l;l=l.parentNode)f.push(l),d=l;d===(r.ownerDocument||J)&&f.push(d.defaultView||d.parentWindow||e)}for(h=0;(l=f[h++])&&!n.isPropagationStopped();)n.type=h>1?c:u.bindType||p,s=(ut._data(l,"events")||{})[n.type]&&ut._data(l,"handle"),s&&s.apply(l,i),s=a&&l[a],s&&ut.acceptData(l)&&s.apply&&s.apply(l,i)===!1&&n.preventDefault();if(n.type=p,!o&&!n.isDefaultPrevented()&&(!u._default||u._default.apply(f.pop(),i)===!1)&&ut.acceptData(r)&&a&&r[p]&&!ut.isWindow(r)){d=r[a],d&&(r[a]=null),ut.event.triggered=p;try{r[p]()}catch(g){}ut.event.triggered=t,d&&(r[a]=d)}return n.result}},dispatch:function(e){e=ut.event.fix(e);var n,i,r,o,s,a=[],l=ot.call(arguments),c=(ut._data(this,"events")||{})[e.type]||[],u=ut.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=ut.event.handlers.call(this,e,c),n=0;(o=a[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,s=0;(r=o.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,i=((ut.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,o,s,a=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(o=[],s=0;l>s;s++)r=n[s],i=r.selector+" ",o[i]===t&&(o[i]=r.needsContext?ut(i,this).index(c)>=0:ut.find(i,this,null,[c]).length),o[i]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return l<n.length&&a.push({elem:this,handlers:n.slice(l)}),a},fix:function(e){if(e[ut.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ft.test(r)?this.mouseHooks:jt.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new ut.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||J),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,s=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||J,o=r.documentElement,i=r.body,e.pageX=n.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ut.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ut.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=ut.extend(new ut.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?ut.event.trigger(r,null,t):ut.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},ut.removeEvent=J.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===K&&(e[i]=null),e.detachEvent(i,n))},ut.Event=function(e,t){return this instanceof ut.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&ut.extend(this,t),this.timeStamp=e&&e.timeStamp||ut.now(),this[ut.expando]=!0,void 0):new ut.Event(e,t)},ut.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ut.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ut.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!ut.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ut.support.submitBubbles||(ut.event.special.submit={setup:function(){return ut.nodeName(this,"form")?!1:(ut.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=ut.nodeName(n,"input")||ut.nodeName(n,"button")?n.form:t;i&&!ut._data(i,"submitBubbles")&&(ut.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),ut._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ut.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ut.nodeName(this,"form")?!1:(ut.event.remove(this,"._submit"),void 0)}}),ut.support.changeBubbles||(ut.event.special.change={setup:function(){return Lt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ut.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ut.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ut.event.simulate("change",this,e,!0)})),!1):(ut.event.add(this,"beforeactivate._change",function(e){var t=e.target;Lt.test(t.nodeName)&&!ut._data(t,"changeBubbles")&&(ut.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ut.event.simulate("change",this.parentNode,e,!0)}),ut._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ut.event.remove(this,"._change"),!Lt.test(this.nodeName)}}),ut.support.focusinBubbles||ut.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){ut.event.simulate(t,e.target,ut.event.fix(e),!0)};ut.event.special[t]={setup:function(){0===n++&&J.addEventListener(e,i,!0)},teardown:function(){0===--n&&J.removeEventListener(e,i,!0)}}}),ut.fn.extend({on:function(e,n,i,r,o){var s,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(s in e)this.on(s,n,i,e[s],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=c;else if(!r)return this;return 1===o&&(a=r,r=function(e){return ut().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ut.guid++)),this.each(function(){ut.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ut(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=c),this.each(function(){ut.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){ut.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ut.event.trigger(e,t,n,!0):void 0}});var Ut=/^.[^:#\[\.,]*$/,zt=/^(?:parents|prev(?:Until|All))/,qt=ut.expr.match.needsContext,Vt={children:!0,contents:!0,next:!0,prev:!0};ut.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(ut(e).filter(function(){for(t=0;r>t;t++)if(ut.contains(i[t],this))return!0}));for(t=0;r>t;t++)ut.find(e,i[t],n);return n=this.pushStack(r>1?ut.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=ut(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(ut.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(h(this,e||[],!0))},filter:function(e){return this.pushStack(h(this,e||[],!1))},is:function(e){return!!h(this,"string"==typeof e&&qt.test(e)?ut(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=qt.test(e)||"string"!=typeof e?ut(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ut.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?ut.unique(o):o)},index:function(e){return e?"string"==typeof e?ut.inArray(this[0],ut(e)):ut.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ut(e,t):ut.makeArray(e&&e.nodeType?[e]:e),i=ut.merge(this.get(),n);return this.pushStack(ut.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ut.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ut.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ut.dir(e,"parentNode",n)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return ut.dir(e,"nextSibling")},prevAll:function(e){return ut.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ut.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ut.dir(e,"previousSibling",n)},siblings:function(e){return ut.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ut.sibling(e.firstChild)},contents:function(e){return ut.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ut.merge([],e.childNodes)}},function(e,t){ut.fn[e]=function(n,i){var r=ut.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ut.filter(i,r)),this.length>1&&(Vt[e]||(r=ut.unique(r)),zt.test(e)&&(r=r.reverse())),this.pushStack(r)}}),ut.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ut.find.matchesSelector(i,e)?[i]:[]:ut.find.matches(e,ut.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],o=e[n];o&&9!==o.nodeType&&(i===t||1!==o.nodeType||!ut(o).is(i));)1===o.nodeType&&r.push(o),o=o[n];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Wt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Yt=/ jQuery\d+="(?:null|\d+)"/g,Kt=new RegExp("<(?:"+Wt+")[\\s/>]","i"),Gt=/^\s+/,Jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qt=/<([\w:]+)/,Xt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,on=/^true\/(.*)/,sn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,an={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ut.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=f(J),cn=ln.appendChild(J.createElement("div"));an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td,ut.fn.extend({text:function(e){return ut.access(this,function(e){return e===t?ut.text(this):this.empty().append((this[0]&&this[0].ownerDocument||J).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?ut.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||ut.cleanData(w(n)),n.parentNode&&(t&&ut.contains(n.ownerDocument,n)&&v(w(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ut.cleanData(w(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ut.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ut.clone(this,e,t)})},html:function(e){return ut.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Yt,""):t;if(!("string"!=typeof e||en.test(e)||!ut.support.htmlSerialize&&Kt.test(e)||!ut.support.leadingWhitespace&&Gt.test(e)||an[(Qt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Jt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(ut.cleanData(w(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ut.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),ut(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=it.apply([],e);var i,r,o,s,a,l,c=0,u=this.length,d=this,h=u-1,f=e[0],p=ut.isFunction(f);if(p||!(1>=u||"string"!=typeof f||ut.support.checkClone)&&nn.test(f))return this.each(function(i){var r=d.eq(i);p&&(e[0]=f.call(this,i,r.html())),r.domManip(e,t,n)});if(u&&(l=ut.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(s=ut.map(w(l,"script"),m),o=s.length;u>c;c++)r=l,c!==h&&(r=ut.clone(r,!0,!0),o&&ut.merge(s,w(r,"script"))),t.call(this[c],r,c);if(o)for(a=s[s.length-1].ownerDocument,ut.map(s,g),c=0;o>c;c++)r=s[c],rn.test(r.type||"")&&!ut._data(r,"globalEval")&&ut.contains(a,r)&&(r.src?ut._evalUrl(r.src):ut.globalEval((r.text||r.textContent||r.innerHTML||"").replace(sn,"")));l=i=null}return this}}),ut.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ut.fn[e]=function(e){for(var n,i=0,r=[],o=ut(e),s=o.length-1;s>=i;i++)n=i===s?this:this.clone(!0),ut(o[i])[t](n),rt.apply(r,n.get());return this.pushStack(r)}}),ut.extend({clone:function(e,t,n){var i,r,o,s,a,l=ut.contains(e.ownerDocument,e);if(ut.support.html5Clone||ut.isXMLDoc(e)||!Kt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(cn.innerHTML=e.outerHTML,cn.removeChild(o=cn.firstChild)),!(ut.support.noCloneEvent&&ut.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ut.isXMLDoc(e)))for(i=w(o),a=w(e),s=0;null!=(r=a[s]);++s)i[s]&&b(r,i[s]);if(t)if(n)for(a=a||w(e),i=i||w(o),s=0;null!=(r=a[s]);s++)y(r,i[s]);else y(e,o);return i=w(o,"script"),i.length>0&&v(i,!l&&w(e,"script")),i=a=r=null,o},buildFragment:function(e,t,n,i){for(var r,o,s,a,l,c,u,d=e.length,h=f(t),p=[],m=0;d>m;m++)if(o=e[m],o||0===o)if("object"===ut.type(o))ut.merge(p,o.nodeType?[o]:o);else if(Zt.test(o)){for(a=a||h.appendChild(t.createElement("div")),l=(Qt.exec(o)||["",""])[1].toLowerCase(),u=an[l]||an._default,a.innerHTML=u[1]+o.replace(Jt,"<$1></$2>")+u[2],r=u[0];r--;)a=a.lastChild;if(!ut.support.leadingWhitespace&&Gt.test(o)&&p.push(t.createTextNode(Gt.exec(o)[0])),!ut.support.tbody)for(o="table"!==l||Xt.test(o)?"<table>"!==u[1]||Xt.test(o)?0:a:a.firstChild,r=o&&o.childNodes.length;r--;)ut.nodeName(c=o.childNodes[r],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(ut.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else p.push(t.createTextNode(o));for(a&&h.removeChild(a),ut.support.appendChecked||ut.grep(w(p,"input"),_),m=0;o=p[m++];)if((!i||-1===ut.inArray(o,i))&&(s=ut.contains(o.ownerDocument,o),a=w(h.appendChild(o),"script"),s&&v(a),n))for(r=0;o=a[r++];)rn.test(o.type||"")&&n.push(o);return a=null,h},cleanData:function(e,t){for(var n,i,r,o,s=0,a=ut.expando,l=ut.cache,c=ut.support.deleteExpando,u=ut.event.special;null!=(n=e[s]);s++)if((t||ut.acceptData(n))&&(r=n[a],o=r&&l[r])){if(o.events)for(i in o.events)u[i]?ut.event.remove(n,i):ut.removeEvent(n,i,o.handle);l[r]&&(delete l[r],c?delete n[a]:typeof n.removeAttribute!==K?n.removeAttribute(a):n[a]=null,tt.push(r))}},_evalUrl:function(e){return ut.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ut.fn.extend({wrapAll:function(e){if(ut.isFunction(e))return this.each(function(t){ut(this).wrapAll(e.call(this,t))});if(this[0]){var t=ut(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ut.isFunction(e)?this.each(function(t){ut(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ut(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ut.isFunction(e);return this.each(function(n){ut(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ut.nodeName(this,"body")||ut(this).replaceWith(this.childNodes)}).end()}});var un,dn,hn,fn=/alpha\([^)]*\)/i,pn=/opacity\s*=\s*([^)]*)/,mn=/^(top|right|bottom|left)$/,gn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=new RegExp("^("+dt+")(.*)$","i"),bn=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),wn=new RegExp("^([+-])=("+dt+")","i"),_n={BODY:"block"},Cn={position:"absolute",visibility:"hidden",display:"block"},kn={letterSpacing:0,fontWeight:400},xn=["Top","Right","Bottom","Left"],Sn=["Webkit","O","Moz","ms"];
ut.fn.extend({css:function(e,n){return ut.access(this,function(e,n,i){var r,o,s={},a=0;if(ut.isArray(n)){for(o=dn(e),r=n.length;r>a;a++)s[n[a]]=ut.css(e,n[a],!1,o);return s}return i!==t?ut.style(e,n,i):ut.css(e,n)},e,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){k(this)?ut(this).show():ut(this).hide()})}}),ut.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=hn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ut.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,l=ut.camelCase(n),c=e.style;if(n=ut.cssProps[l]||(ut.cssProps[l]=C(c,l)),a=ut.cssHooks[n]||ut.cssHooks[l],i===t)return a&&"get"in a&&(o=a.get(e,!1,r))!==t?o:c[n];if(s=typeof i,"string"===s&&(o=wn.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(ut.css(e,n)),s="number"),!(null==i||"number"===s&&isNaN(i)||("number"!==s||ut.cssNumber[l]||(i+="px"),ut.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(e,i,r))===t)))try{c[n]=i}catch(u){}}},css:function(e,n,i,r){var o,s,a,l=ut.camelCase(n);return n=ut.cssProps[l]||(ut.cssProps[l]=C(e.style,l)),a=ut.cssHooks[n]||ut.cssHooks[l],a&&"get"in a&&(s=a.get(e,!0,i)),s===t&&(s=hn(e,n,r)),"normal"===s&&n in kn&&(s=kn[n]),""===i||i?(o=parseFloat(s),i===!0||ut.isNumeric(o)?o||0:s):s}}),e.getComputedStyle?(dn=function(t){return e.getComputedStyle(t,null)},hn=function(e,n,i){var r,o,s,a=i||dn(e),l=a?a.getPropertyValue(n)||a[n]:t,c=e.style;return a&&(""!==l||ut.contains(e.ownerDocument,e)||(l=ut.style(e,n)),bn.test(l)&&vn.test(n)&&(r=c.width,o=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=r,c.minWidth=o,c.maxWidth=s)),l}):J.documentElement.currentStyle&&(dn=function(e){return e.currentStyle},hn=function(e,n,i){var r,o,s,a=i||dn(e),l=a?a[n]:t,c=e.style;return null==l&&c&&c[n]&&(l=c[n]),bn.test(l)&&!mn.test(n)&&(r=c.left,o=e.runtimeStyle,s=o&&o.left,s&&(o.left=e.currentStyle.left),c.left="fontSize"===n?"1em":l,l=c.pixelLeft+"px",c.left=r,s&&(o.left=s)),""===l?"auto":l}),ut.each(["height","width"],function(e,t){ut.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&gn.test(ut.css(e,"display"))?ut.swap(e,Cn,function(){return E(e,t,i)}):E(e,t,i):void 0},set:function(e,n,i){var r=i&&dn(e);return S(e,n,i?T(e,t,i,ut.support.boxSizing&&"border-box"===ut.css(e,"boxSizing",!1,r),r):0)}}}),ut.support.opacity||(ut.cssHooks.opacity={get:function(e,t){return pn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=ut.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ut.trim(o.replace(fn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=fn.test(o)?o.replace(fn,r):o+" "+r)}}),ut(function(){ut.support.reliableMarginRight||(ut.cssHooks.marginRight={get:function(e,t){return t?ut.swap(e,{display:"inline-block"},hn,[e,"marginRight"]):void 0}}),!ut.support.pixelPosition&&ut.fn.position&&ut.each(["top","left"],function(e,t){ut.cssHooks[t]={get:function(e,n){return n?(n=hn(e,t),bn.test(n)?ut(e).position()[t]+"px":n):void 0}}})}),ut.expr&&ut.expr.filters&&(ut.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ut.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ut.css(e,"display"))},ut.expr.filters.visible=function(e){return!ut.expr.filters.hidden(e)}),ut.each({margin:"",padding:"",border:"Width"},function(e,t){ut.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+xn[i]+t]=o[i]||o[i-2]||o[0];return r}},vn.test(e)||(ut.cssHooks[e+t].set=S)});var Tn=/%20/g,En=/\[\]$/,Dn=/\r?\n/g,Nn=/^(?:submit|button|image|reset|file)$/i,An=/^(?:input|select|textarea|keygen)/i;ut.fn.extend({serialize:function(){return ut.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ut.prop(this,"elements");return e?ut.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ut(this).is(":disabled")&&An.test(this.nodeName)&&!Nn.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=ut(this).val();return null==n?null:ut.isArray(n)?ut.map(n,function(e){return{name:t.name,value:e.replace(Dn,"\r\n")}}):{name:t.name,value:n.replace(Dn,"\r\n")}}).get()}}),ut.param=function(e,n){var i,r=[],o=function(e,t){t=ut.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=ut.ajaxSettings&&ut.ajaxSettings.traditional),ut.isArray(e)||e.jquery&&!ut.isPlainObject(e))ut.each(e,function(){o(this.name,this.value)});else for(i in e)A(i,e[i],n,o);return r.join("&").replace(Tn,"+")},ut.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ut.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ut.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var On,Mn,Pn=ut.now(),In=/\?/,$n=/#.*$/,Rn=/([?&])_=[^&]*/,Ln=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,jn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fn=/^(?:GET|HEAD)$/,Bn=/^\/\//,Hn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Un=ut.fn.load,zn={},qn={},Vn="*/".concat("*");try{Mn=G.href}catch(Wn){Mn=J.createElement("a"),Mn.href="",Mn=Mn.href}On=Hn.exec(Mn.toLowerCase())||[],ut.fn.load=function(e,n,i){if("string"!=typeof e&&Un)return Un.apply(this,arguments);var r,o,s,a=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l,e.length),e=e.slice(0,l)),ut.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(s="POST"),a.length>0&&ut.ajax({url:e,type:s,dataType:"html",data:n}).done(function(e){o=arguments,a.html(r?ut("<div>").append(ut.parseHTML(e)).find(r):e)}).complete(i&&function(e,t){a.each(i,o||[e.responseText,t,e])}),this},ut.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ut.fn[t]=function(e){return this.on(t,e)}}),ut.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mn,type:"GET",isLocal:jn.test(On[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ut.parseJSON,"text xml":ut.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?P(P(e,ut.ajaxSettings),t):P(ut.ajaxSettings,e)},ajaxPrefilter:O(zn),ajaxTransport:O(qn),ajax:function(e,n){function i(e,n,i,r){var o,d,y,b,_,k=n;2!==w&&(w=2,l&&clearTimeout(l),u=t,a=r||"",C.readyState=e>0?4:0,o=e>=200&&300>e||304===e,i&&(b=I(h,C,i)),b=$(h,b,C,o),o?(h.ifModified&&(_=C.getResponseHeader("Last-Modified"),_&&(ut.lastModified[s]=_),_=C.getResponseHeader("etag"),_&&(ut.etag[s]=_)),204===e||"HEAD"===h.type?k="nocontent":304===e?k="notmodified":(k=b.state,d=b.data,y=b.error,o=!y)):(y=k,(e||!k)&&(k="error",0>e&&(e=0))),C.status=e,C.statusText=(n||k)+"",o?m.resolveWith(f,[d,k,C]):m.rejectWith(f,[C,k,y]),C.statusCode(v),v=t,c&&p.trigger(o?"ajaxSuccess":"ajaxError",[C,h,o?d:y]),g.fireWith(f,[C,k]),c&&(p.trigger("ajaxComplete",[C,h]),--ut.active||ut.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,o,s,a,l,c,u,d,h=ut.ajaxSetup({},n),f=h.context||h,p=h.context&&(f.nodeType||f.jquery)?ut(f):ut.event,m=ut.Deferred(),g=ut.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,_="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!d)for(d={};t=Ln.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)v[t]=[v[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||_;return u&&u.abort(t),i(0,t),this}};if(m.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,h.url=((e||h.url||Mn)+"").replace($n,"").replace(Bn,On[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=ut.trim(h.dataType||"*").toLowerCase().match(ht)||[""],null==h.crossDomain&&(r=Hn.exec(h.url.toLowerCase()),h.crossDomain=!(!r||r[1]===On[1]&&r[2]===On[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(On[3]||("http:"===On[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ut.param(h.data,h.traditional)),M(zn,h,n,C),2===w)return C;c=h.global,c&&0===ut.active++&&ut.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Fn.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(In.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Rn.test(s)?s.replace(Rn,"$1_="+Pn++):s+(In.test(s)?"&":"?")+"_="+Pn++)),h.ifModified&&(ut.lastModified[s]&&C.setRequestHeader("If-Modified-Since",ut.lastModified[s]),ut.etag[s]&&C.setRequestHeader("If-None-Match",ut.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Vn+"; q=0.01":""):h.accepts["*"]);for(o in h.headers)C.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(h.beforeSend.call(f,C,h)===!1||2===w))return C.abort();_="abort";for(o in{success:1,error:1,complete:1})C[o](h[o]);if(u=M(qn,h,n,C)){C.readyState=1,c&&p.trigger("ajaxSend",[C,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},h.timeout));try{w=1,u.send(y,i)}catch(k){if(!(2>w))throw k;i(-1,k)}}else i(-1,"No Transport");return C},getJSON:function(e,t,n){return ut.get(e,t,n,"json")},getScript:function(e,n){return ut.get(e,t,n,"script")}}),ut.each(["get","post"],function(e,n){ut[n]=function(e,i,r,o){return ut.isFunction(i)&&(o=o||r,r=i,i=t),ut.ajax({url:e,type:n,dataType:o,data:i,success:r})}}),ut.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ut.globalEval(e),e}}}),ut.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ut.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=J.head||ut("head")[0]||J.documentElement;return{send:function(t,r){n=J.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||r(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Yn=[],Kn=/(=)\?(?=&|$)|\?\?/;ut.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yn.pop()||ut.expando+"_"+Pn++;return this[e]=!0,e}}),ut.ajaxPrefilter("json jsonp",function(n,i,r){var o,s,a,l=n.jsonp!==!1&&(Kn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=ut.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Kn,"$1"+o):n.jsonp!==!1&&(n.url+=(In.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||ut.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=e[o],e[o]=function(){a=arguments},r.always(function(){e[o]=s,n[o]&&(n.jsonpCallback=i.jsonpCallback,Yn.push(o)),a&&ut.isFunction(s)&&s(a[0]),a=s=t}),"script"):void 0});var Gn,Jn,Qn=0,Xn=e.ActiveXObject&&function(){var e;for(e in Gn)Gn[e](t,!0)};ut.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&R()||L()}:R,Jn=ut.ajaxSettings.xhr(),ut.support.cors=!!Jn&&"withCredentials"in Jn,Jn=ut.support.ajax=!!Jn,Jn&&ut.ajaxTransport(function(n){if(!n.crossDomain||ut.support.cors){var i;return{send:function(r,o){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)l.setRequestHeader(a,r[a])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,r){var a,c,u,d;try{if(i&&(r||4===l.readyState))if(i=t,s&&(l.onreadystatechange=ut.noop,Xn&&delete Gn[s]),r)4!==l.readyState&&l.abort();else{d={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(d.text=l.responseText);try{u=l.statusText}catch(h){u=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(f){r||o(-1,f)}d&&o(a,u,d,c)},n.async?4===l.readyState?setTimeout(i):(s=++Qn,Xn&&(Gn||(Gn={},ut(e).unload(Xn)),Gn[s]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(t,!0)}}}});var Zn,ei,ti=/^(?:toggle|show|hide)$/,ni=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),ii=/queueHooks$/,ri=[U],oi={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=ni.exec(t),o=r&&r[3]||(ut.cssNumber[e]?"":"px"),s=(ut.cssNumber[e]||"px"!==o&&+i)&&ni.exec(ut.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,ut.style(n.elem,e,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};ut.Animation=ut.extend(B,{tweener:function(e,t){ut.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],oi[n]=oi[n]||[],oi[n].unshift(t)},prefilter:function(e,t){t?ri.unshift(e):ri.push(e)}}),ut.Tween=z,z.prototype={constructor:z,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ut.cssNumber[n]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,n=z.propHooks[this.prop];return this.pos=t=this.options.duration?ut.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ut.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ut.fx.step[e.prop]?ut.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ut.cssProps[e.prop]]||ut.cssHooks[e.prop])?ut.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ut.each(["toggle","show","hide"],function(e,t){var n=ut.fn[t];ut.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,i,r)}}),ut.fn.extend({fadeTo:function(e,t,n,i){return this.filter(k).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ut.isEmptyObject(e),o=ut.speed(t,n,i),s=function(){var t=B(this,ut.extend({},e),o);(r||ut._data(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=ut.timers,s=ut._data(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&ii.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));(t||!i)&&ut.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ut._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=ut.timers,s=i?i.length:0;for(n.finish=!0,ut.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ut.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ut.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ut.speed=function(e,t,n){var i=e&&"object"==typeof e?ut.extend({},e):{complete:n||!n&&t||ut.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ut.isFunction(t)&&t};return i.duration=ut.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ut.fx.speeds?ut.fx.speeds[i.duration]:ut.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ut.isFunction(i.old)&&i.old.call(this),i.queue&&ut.dequeue(this,i.queue)},i},ut.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ut.timers=[],ut.fx=z.prototype.init,ut.fx.tick=function(){var e,n=ut.timers,i=0;for(Zn=ut.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||ut.fx.stop(),Zn=t},ut.fx.timer=function(e){e()&&ut.timers.push(e)&&ut.fx.start()},ut.fx.interval=13,ut.fx.start=function(){ei||(ei=setInterval(ut.fx.tick,ut.fx.interval))},ut.fx.stop=function(){clearInterval(ei),ei=null},ut.fx.speeds={slow:600,fast:200,_default:400},ut.fx.step={},ut.expr&&ut.expr.filters&&(ut.expr.filters.animated=function(e){return ut.grep(ut.timers,function(t){return e===t.elem}).length}),ut.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ut.offset.setOffset(this,e,t)});var n,i,r={top:0,left:0},o=this[0],s=o&&o.ownerDocument;if(s)return n=s.documentElement,ut.contains(n,o)?(typeof o.getBoundingClientRect!==K&&(r=o.getBoundingClientRect()),i=V(s),{top:r.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:r.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):r},ut.offset={setOffset:function(e,t,n){var i=ut.css(e,"position");"static"===i&&(e.style.position="relative");var r,o,s=ut(e),a=s.offset(),l=ut.css(e,"top"),c=ut.css(e,"left"),u=("absolute"===i||"fixed"===i)&&ut.inArray("auto",[l,c])>-1,d={},h={};u?(h=s.position(),r=h.top,o=h.left):(r=parseFloat(l)||0,o=parseFloat(c)||0),ut.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(d.top=t.top-a.top+r),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):s.css(d)}},ut.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===ut.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ut.nodeName(e[0],"html")||(n=e.offset()),n.top+=ut.css(e[0],"borderTopWidth",!0),n.left+=ut.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ut.css(i,"marginTop",!0),left:t.left-n.left-ut.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Q;e&&!ut.nodeName(e,"html")&&"static"===ut.css(e,"position");)e=e.offsetParent;return e||Q})}}),ut.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);ut.fn[e]=function(r){return ut.access(this,function(e,r,o){var s=V(e);return o===t?s?n in s?s[n]:s.document.documentElement[r]:e[r]:(s?s.scrollTo(i?ut(s).scrollLeft():o,i?o:ut(s).scrollTop()):e[r]=o,void 0)},e,r,arguments.length,null)}}),ut.each({Height:"height",Width:"width"},function(e,n){ut.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){ut.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return ut.access(this,function(n,i,r){var o;return ut.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):r===t?ut.css(n,i,a):ut.style(n,i,r,a)},n,s?r:t,s,null)}})}),ut.fn.size=function(){return this.length},ut.fn.andSelf=ut.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ut:(e.jQuery=e.$=ut,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ut}))}(window)}).call(this),"undefined"==typeof Package&&(Package={}),Package.jquery={}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);(function(){e={};var n=function(e,n){if(!document.querySelectorAll)throw new Error("This browser doesn't support querySelectorAll.");var i=n;return p(n,"DomUtils_findAllBySelector_scope",function(n){var r=t.map(e.split(","),function(e){return n+" "+e}).join(",");return i.querySelectorAll(r)})},i=window.Sizzle||window.jQuery&&window.jQuery.find||n,r=document.createElement("div");r.innerHTML="   <link/><table></table><select><!----></select>";var o=document.createElement("div");o.innerHTML="<select><option selected>Foo</option></select>",o.firstChild.setAttribute("name","myname");var s={leadingWhitespaceKilled:3!==r.firstChild.nodeType,tbodyInsertion:r.getElementsByTagName("tbody").length>0,tagsLost:0===r.getElementsByTagName("link").length,commentsLost:!r.getElementsByTagName("select")[0].firstChild,selectValueMustBeFromAttribute:"Foo"!==o.firstChild.value,mustSetNameInCreateElement:o.firstChild.outerHTML&&-1===o.firstChild.outerHTML.indexOf("myname")},a={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};t.extend(a,{optgroup:a.option,tbody:a.thead,tfoot:a.thead,colgroup:a.thead,caption:a.thead,th:a.td}),s.tagsLost&&(a._default=[1,"div<div>","</div>"]);var l=/^\s+/,c=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,u=/<([\w:]+)/,d=/<tbody/i,h=/<|&#?\w+;/;e.htmlToFragment=function(e){var n=document,i=n.createDocumentFragment();if(e.length)if(h.test(e)){e=e.replace(c,"<$1></$2>");var r=u.exec(e),o=r?r[1].toLowerCase():"",f=a[o]||a._default,p=f[1]+e+f[2];s.commentsLost&&(p=p.replace(/<\s*(select|option)\b/gi,'<ins domutilsrealtagname="$1"'),p=p.replace(/<\/\s*(select|option)\b/gi,"</ins"));var m=n.createElement("div");m.innerHTML=p;for(var g=f[0];g--;)m=m.lastChild;if(s.tbodyInsertion&&!d.test(e)){var v=m.getElementsByTagName("tbody");t.each(v,function(e){e.firstChild||e.parentNode.removeChild(e)})}if(s.leadingWhitespaceKilled){var y=l.exec(e);y&&m.insertBefore(n.createTextNode(y[0]),m.firstChild)}if(s.commentsLost){var b=[];t.each(m.getElementsByTagName("ins"),function(e){e.getAttribute("domutilsrealtagname")&&b.push(e)}),t.each(b,function(e){var n=e.getAttribute("domutilsrealtagname");s.mustSetNameInCreateElement&&e.getAttribute("name")&&(n="<"+n+" name='"+t.escape(e.getAttribute("name"))+"'/>");var i=document.createElement(n);e.removeAttribute("domutilsrealtagname");for(var r=e.attributes,o=0;o<r.length;++o){var a=r.item(o);if(a.specified){var l=a.name.toLowerCase(),c=String(a.value);"selected"===l&&""===c&&(c="selected"),i.setAttribute(l,c)}}for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode.replaceChild(i,e)})}for(;m.firstChild;)i.appendChild(m.firstChild)}else i.appendChild(n.createTextNode(e));else;return i},e.fragmentToHtml=function(t){return t=t.cloneNode(!0),e.fragmentToContainer(t).innerHTML},e.fragmentToContainer=function(e){for(var t=document,n=e.firstChild;n&&1!==n.nodeType;)n=n.nextSibling;var i=t.createElement("div");if(n){var r=n.nodeName,o=a[r]||a._default;i.innerHTML=o[1]+o[2];for(var s=o[0];s--;)i=i.lastChild;i.appendChild(e)}else i.appendChild(e);return i},e.elementContains=function(e,t){return 1!==e.nodeType?!1:e===t?!1:e.compareDocumentPosition?16&e.compareDocumentPosition(t):(t=t.parentNode,t&&1===t.nodeType?e===t?!0:e.contains(t):!1)},e.findAll=function(t,n){if(11===t.nodeType){for(var r=t,o=e.fragmentToContainer(r),s=i(n,o);o.firstChild;)r.appendChild(o.firstChild);return s}return i(n,t)},e.find=function(t,n){var i=e.findAll(t,n);return i.length?i[0]:null};var f=function(t,n,i){return e.elementContains(t,n)?!1:e.compareElementIndex(n,t)<=0&&e.compareElementIndex(t,i)<=0};e.findAllClipped=function(n,i,r,o){for(;r!==o&&1!==r.nodeType;)r=r.nextSibling;for(;r!==o&&1!==o.nodeType;)o=o.previousSibling;if(1!==r.nodeType)return[];var s=e.findAll(n,i);return t.reject(s,function(e){return!f(e,r,o)})},e.findClipped=function(t,n,i,r){var o=e.findAllClipped(t,n,i,r);return o.length?o[0]:null};var p=function(e,t,n){var i=!1;e.getAttribute("id")||(e.setAttribute("id",t),i=!0);try{var r=e.getAttribute("id").replace(/'/g,"\\$&");return n("[id='"+r+"']")}finally{i&&e.removeAttribute("id")}},m=function(t,n,i,r,o){for(var s=i.split(","),a=0,l=s.length;l>a;a++){var c=p(t,"DomUtils_matchesSelector_target",function(s){var a,l=i.match(/\S.*?(?=\s*$)/)[0],c=l+s;return a=r?e.findClipped(n,c,r,o):e.find(n,c),a===t});if(c)return!0}return!1};e.matchesSelector=function(e,t,n){return m(e,t,n)},e.matchesSelectorClipped=function(e,t,n,i,r){return m(e,t,n,i,r)},e.compareElementIndex=function(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var n=e.compareDocumentPosition(t);return 24&n?0:4&n?-1:1}return e.contains(t)||t.contains(e)?0:e.sourceIndex<t.sourceIndex?-1:1},e.wrapFragmentForContainer=function(e,n){if(n&&"TABLE"===n.nodeName&&t.any(e.childNodes,function(e){return"TR"===e.nodeName})){var i=document.createElement("TBODY");i.appendChild(e),e.appendChild(i)}},e.isInDocument=function(t){return t===document?!0:(1!==t.nodeType&&(t=t.parentNode),t&&1===t.nodeType?t===document.body?!0:e.elementContains(document.body,t):!1)},e.rangeToHtml=function(t,n){for(var i=document.createDocumentFragment(),r=t,o=n.nextSibling;r&&r!==o;r=r.nextSibling)i.appendChild(r.cloneNode(!0));return e.fragmentToHtml(i)},e.outerHtml=function(t){return e.rangeToHtml(t,t)},e.setElementValue=function(t,n){if(t.value=n,t.value!==n&&"SELECT"===t.nodeName)for(var i=e.findAll(t,"option"),r=0;r<i.length;++r)if(e.getElementValue(i[r])===n)return i[r].selected=!0,void 0},e.getElementValue=function(t){if(!s.selectValueMustBeFromAttribute)return t.value;if("OPTION"===t.nodeName){var n=t.attributes.value;return!n||n.specified?t.value:t.text}return"SELECT"===t.nodeName?t.selectedIndex<0?null:e.getElementValue(t.options[t.selectedIndex]):t.value}}).call(this),"undefined"==typeof Package&&(Package={}),Package.domutils={DomUtils:e}}(),function(){{var e;Package.meteor.Meteor}(function(){var t=function(){var e=document.createTextNode("");try{e.test=123}catch(t){}return 123!==e.test?!1:document.documentMode?!1:!0}(),n=function(e,n){if(t)return[e,n];if(3===e.nodeType){var i=document.createComment("IE");e.parentNode.insertBefore(i,e),e=i}if(3===n.nodeType){var i=document.createComment("IE");n.parentNode.insertBefore(i,n.nextSibling),n=i}return[e,n]};e=function(e,t,r,o){if(11===t.nodeType)r=t.lastChild,t=t.firstChild;else if(!t.parentNode)throw new Error("LiveRange start and end must have a parent");r=r||t,this.tag=e;var s=n(t,r);t=this._ensureTag(s[0]),r=this._ensureTag(s[1]);var a=i(t[e][0],!0,r,t,o),l=i(r[e][1],!1,t,r,o);this._insertEntries(t,0,a,[this]),this._insertEntries(r,1,l,[this])};var i=function(e,t,n,i,r){for(var o,s=t?n.parentNode.lastChild:i,a=t?!r:r,l=0,c=s;l<=e.length;l++){for(var u=e[l],d=u&&(t?u._end:u._start);c!==d&&c!==n;)c=c.previousSibling;if(d===n){if(o=l,a)break}else if(c===n){o=l;break}}return o};e.prototype._ensureTag=function(e){return this.tag in e||(e[this.tag]=[[],[]]),e};var r=function(){var e=document.createElement("DIV"),t=!1;try{e.test=12,delete e.test,t=!0}catch(n){}return t}();e._cleanNode=function(e,t,n){var i=t[e];!i||i[0].length+i[1].length&&!n||(r?delete t[e]:t.removeAttribute(e))},e.prototype.destroy=function(t){var n=this;if(t){if(this.visit(function(e,t){e&&(t._start=null,t._end=null)},function(t,i){if(!t)for(var r=i.firstChild;r;r=r.nextSibling)e._cleanNode(n.tag,r,!0)}),this._removeEntries(this._start,0,this._startIndex),this._removeEntries(this._end,1,0,this._endIndex+1),this._start!==this._end){for(var i=this._start.nextSibling;i!==this._end;i=i.nextSibling)e._cleanNode(n.tag,i,!0);this._start[n.tag]&&this._removeEntries(this._start,1),this._end[n.tag]&&this._removeEntries(this._end,0)}this._start=this._end=null}else this._removeEntries(this._start,0,this._startIndex,this._startIndex+1),this._removeEntries(this._end,1,this._endIndex,this._endIndex+1),this._start=this._end=null},e.prototype.firstNode=function(){return this._start},e.prototype.lastNode=function(){return this._end},e.prototype.containerNode=function(){return this._start.parentNode},e.prototype.visit=function(e,t){e=e||function(){},t=t||function(){};var n=this.tag,i=function(r,o,s){for(var a=s||0,l=o.nextSibling,c=r;c&&c!==l;c=c.nextSibling){var u=c[n]&&c[n][0];if(u&&a<u.length){var d=u[a],h=d._start,f=d._end;e(!0,d)!==!1&&i(h,f,a+1),e(!1,d),c=f}else t(!0,c)!==!1&&c.firstChild&&i(c.firstChild,c.lastChild),t(!1,c);a=0}};i(this._start,this._end,this._startIndex+1)},e.prototype._removeEntries=function(t,n,i,r){var o=t[this.tag][n];i=i||0,r=r||0===r?r:o.length;for(var s=o.splice(i,r-i),a=i;a<o.length;a++)n?o[a]._endIndex=a:o[a]._startIndex=a;return o.length||e._cleanNode(this.tag,t),s},e.prototype._insertEntries=function(e,t,n,i){var r=e[this.tag][t];Array.prototype.splice.apply(r,[n,0].concat(i));for(var o=n;o<r.length;o++)t?(r[o]._end=e,r[o]._endIndex=o):(r[o]._start=e,r[o]._startIndex=o)},e.prototype.replaceContents=function(e){if(!e.firstChild)throw new Error("replaceContents requires non-empty fragment");return this.operate(function(t,n){t.parentNode.insertBefore(e,t);for(var i=t.ownerDocument.createDocumentFragment(),r=t;;){var o=r.nextSibling;if(i.appendChild(r),r===n)break;if(r=o,!r)throw new Error("LiveRanges must begin and end on siblings in order")}return i})},e.prototype.operate=function(e){var t=this._start,i=this._end,r=this._removeEntries(t,0,0,this._startIndex+1),o=this._removeEntries(i,1,this._endIndex),s=t.parentNode,a=t.previousSibling,l=i.nextSibling,c=null;c=e(t,i);var u=a?a.nextSibling:s.firstChild,d=l?l.previousSibling:s.lastChild;if(!u||u===l)throw new Error("Ranges must contain at least one element");var h=n(u,d);return u=this._ensureTag(h[0]),d=this._ensureTag(h[1]),this._insertEntries(u,0,0,r),this._insertEntries(d,1,d[this.tag][1].length,o),c},e.transplantTag=function(e,t,n){if(n[e]){t[e]=n[e],n[e]=null;for(var i=t[e][0],r=t[e][1],o=0;o<i.length;o++)i[o]._start=t;for(var o=0;o<r.length;o++)r[o]._end=t}},e.transplantRange=function(e,t,n){n._ensureTag(e),t!==e&&n._ensureTag(t),n._insertEntries(e,0,0,n._start[n.tag][0].slice(0,n._startIndex+1)),n._insertEntries(t,1,0,n._end[n.tag][1].slice(n._endIndex))},e.prototype.insertBefore=function(e){var t=e.firstChild;t&&(this._start.parentNode.insertBefore(e,this._start),this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex)))},e.prototype.insertAfter=function(e){var t=e.lastChild;t&&(this._end.parentNode.insertBefore(e,this._end.nextSibling),this._ensureTag(t),this._insertEntries(t,1,t[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)))},e.prototype.extract=function(){if(this._startIndex>0&&this._start[this.tag][0][this._startIndex-1]._end===this._end)return null;var e=this._start.previousSibling,t=this._end.nextSibling,n=this._start.parentNode;
this._startIndex>0&&(this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex))),this._endIndex<this._end[this.tag][1].length-1&&(this._ensureTag(e),this._insertEntries(e,1,e[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)));for(var i,r=document.createDocumentFragment();i=e?e.nextSibling:n.firstChild,i&&i!==t;)r.appendChild(i);return r},e.prototype.findParent=function(t){var n=o(this.tag,this._end,this._endIndex);return n?n:t?null:e.findRange(this.tag,this.containerNode())},e.findRange=function(t,n){var i=o(t,n);return i?i:n.parentNode?e.findRange(t,n.parentNode):null};var o=function(e,t,n){if("undefined"==typeof n&&(n=-1),t[e]&&n+1<t[e][1].length)return t[e][1][n+1];for(var i=t.nextSibling;i;){var n=0,r=i[e]&&i[e][0];if(r&&r.length){var o=r[0];i=o._end,n=o._endIndex+1}if(i[e]&&n<i[e][1].length)return i[e][1][n];i=i.nextSibling}return null}}).call(this),"undefined"==typeof Package&&(Package={}),Package.liverange={LiveRange:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.domutils.DomUtils;(function(){var n,i=[],r=function(){return!1},o=function(){return!0},s=function(e){var t=e.stopPropagation,n=e.preventDefault;e.isPropagationStopped=r,e.isImmediatePropagationStopped=r,e.isDefaultPrevented=r,e.stopPropagation=function(){e.isPropagationStopped=o,t?t.call(e):e.cancelBubble=!0},e.preventDefault=function(){e.isDefaultPrevented=o,n?n.call(e):e.returnValue=!1},e.stopImmediatePropagation=function(){e.stopPropagation(),e.isImmediatePropagationStopped=o};var i=e.type;if(void 0===e.metaKey&&(e.metaKey=e.ctrlKey),/^key/.test(i))null==e.which&&(e.which=null!=e.charCode?e.charCode:e.keyCode);else if(/^(?:mouse|contextmenu)|click/.test(i)&&(!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),!e.which&&void 0!==e.button)){var s=e.button;e.which=1&s?1:2&s?3:4&s?2:0}return e},a=function(e){e=s(e),t.each(i,function(t){t.types[e.type]&&(!t._checkIECompliance||e.currentTarget["_uevents_test_eventtype_"+e.type])&&t.handler.call(null,e)})},l=function(){return n||(n=document.addEventListener?new e._impl.w3c(a):new e._impl.ie(a)),n},c={};e=function(e,t){this.handler=e,this.types={},this.impl=l(),this._checkIECompliance=t,i.push(this)},t.extend(e.prototype,{addType:function(e){this.types[e]||(this.types[e]=!0,c[e]=(c[e]||0)+1,1===c[e]&&this.impl.addType(e))},removeType:function(e){this.types[e]&&(delete this.types[e],c[e]--,c[e]||this.impl.removeType(e))},installHandler:function(e,n){1===e.nodeType&&(this.impl.installHandler(e,n),this._checkIECompliance&&(e["_uevents_test_eventtype_"+n]=e,e.firstChild&&t.each(e.getElementsByTagName("*"),function(e){e["_uevents_test_eventtype_"+n]=e})))},destroy:function(){var e=this;i=t.without(i,e),t.each(t.keys(e.types),function(t){e.removeType(t)})}})}).call(this),function(){var i=0,r=1,o=2;e._impl=e._impl||{},e._impl.w3c=function(e){this.deliver=e,this.typeCounts={},this.boundHandler=t.bind(this.handler,this),this.boundCapturer=t.bind(this.capturer,this),this.focusBlurMode="onfocusin"in document.createElement("DIV")?i:o,this.simulateMouseEnterLeave=!window.opera},t.extend(e._impl.w3c.prototype,{addType:function(e){this._listen(this._expandEventType(e))},removeType:function(e){this._unlisten(this._expandEventType(e))},installHandler:function(){},_expandEventType:function(e){var t=[e];return this.focusBlurMode===r?"focus"===e?t.push("focusin"):"blur"===e&&t.push("focusout"):this.focusBlurMode===o&&("focusin"===e?t.push("focus"):"focusout"===e&&t.push("blur")),this.simulateMouseEnterLeave&&("mouseenter"===e?t.push("mouseover"):"mouseleave"===e&&t.push("mouseout")),"tap"===e&&(t.push("touchmove"),t.push("touchend")),t},_listen:function(e){var n=this;t.each(e,function(e){1===(n.typeCounts[e]=(n.typeCounts[e]||0)+1)&&document.addEventListener(e,n.boundCapturer,!0)})},_unlisten:function(e){var n=this;t.each(e,function(e){--n.typeCounts[e]||document.removeEventListener(e,n.boundCapturer,!0)})},capturer:function(e){3===e.target.nodeType&&(e.target=e.target.parentNode);var n=e.type,i=e.bubbles,r=e.target;r.addEventListener(n,this.boundHandler,!1);var o;if(i){o=[];for(var s=r.parentNode;s;s=s.parentNode)s.addEventListener(n,this.boundHandler,!1),o.push(s)}setTimeout(function(){r.removeEventListener(n,this.boundHandler,!1),i&&t.each(o,function(e){e.removeEventListener(n,this.boundHandler,!1)})},0)},handler:function(e){var t=function(e,t,n,i,r){var o=document.createEvent("UIEvents");o.initUIEvent(e,n,i,window,r),o.synthetic=!0,t.dispatchEvent(o)};if(e.currentTarget===e.target&&(this.focusBlurMode===r?"focusin"===e.type?t("focus",e.target,!1):"focusout"===e.type&&t("blur",e.target,!1):this.focusBlurMode===o&&("focus"===e.type?t("focusin",e.target,!0):"blur"===e.type&&t("focusout",e.target,!0))),this.focusBlurMode===r){if(("focus"===e.type||"blur"===e.type)&&!e.synthetic)return}else if(this.focusBlurMode===o&&("focusin"===e.type||"focusout"===e.type)&&!e.synthetic)return;(!this.simulateMouseEnterLeave||"mouseenter"!==e.type&&"mouseleave"!==e.type||e.synthetic)&&(this.deliver(e),!this.simulateMouseEnterLeave||e.relatedTarget&&(e.currentTarget===e.relatedTarget||n.elementContains(e.currentTarget,e.relatedTarget))||("mouseover"===e.type?t("mouseenter",e.currentTarget,!1):"mouseout"===e.type&&t("mouseleave",e.currentTarget,!1)),"touchmove"===e.type&&(e.currentTarget._notTapping=!0),"touchend"===e.type&&(e.currentTarget._notTapping||t("tap",e.currentTarget,!0),delete e.currentTarget._notTapping))}})}.call(this),function(){e._impl=e._impl||{},e._impl.ie=function(e){var t=this;this.deliver=e,this.curriedHandler=function(){t.handler.call(this,t)},document.attachEvent("ondatasetcomplete",function(){var e=window.event,t=e&&e.srcElement;e.synthetic&&t&&"FORM"===t.nodeName&&e.returnValue!==!1&&t.submit()})},t.extend(e._impl.ie.prototype,{addType:function(){},removeType:function(){},installHandler:function(e,t){var n="on"+t;if(1===e.nodeType){this._install(e,n);for(var i=e.getElementsByTagName("*"),r=0,o=i.length;o>r;r++)this._install(i[r],n)}},_install:function(e,t){var n=[t];"onfocus"===t?n.push("onfocusin"):"onblur"===t?n.push("onfocusout"):"onchange"===t?("INPUT"!==e.nodeName||"checkbox"!==e.type&&"radio"!==e.type||(n=["onpropertychange"]),n.push("oncellchange")):"onsubmit"===t&&n.push("ondatasetcomplete");for(var i=0;i<n.length;i++)e[n[i]]=this.curriedHandler},handler:function(e){var t=function(e,t){var n=document.createEventObject();return n.synthetic=!0,t.fireEvent(e,n),n.returnValue},n=window.event,i=n.type,r=n.srcElement||document;if(n.target=r,1===this.nodeType){n.currentTarget=this;var o=this;if(o!==r||n.synthetic||("focusin"===i?t("onfocus",o):"focusout"===i?t("onblur",o):"change"===i?t("oncellchange",o):"propertychange"===i?"checked"===n.propertyName&&t("oncellchange",o):"submit"===i&&t("ondatasetcomplete",o)),("focus"===i||"blur"===n.type||"change"===n.type||"submit"===n.type)&&!n.synthetic)return"submit"===n.type&&(n.returnValue=!1),void 0;"cellchange"===i&&n.synthetic&&(i=n.type="change"),"datasetcomplete"===i&&n.synthetic&&(i=n.type="submit"),e.deliver(n)}}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["universal-events"]={UniversalEventListener:e}}(),function(){var e,t,n,i,r,o,s,a=Package.meteor.Meteor,l=Package.underscore._,c=Package.random.Random,u=Package.domutils.DomUtils,d=Package.liverange.LiveRange,h=Package["universal-events"].UniversalEventListener,f=Package["ordered-dict"].OrderedDict,p=Package.deps.Deps,m=Package.ejson.EJSON;(function(){e={},t={};var s=function(){var e=null;return{get:function(){return e},withValue:function(t,n){var i=e;e=t;try{return n()}finally{e=i}}}}();n="_spark_"+c.id(),t.TAG=n,e._TAG=n;var a="data",g="isolate",v="events",y="watch",b="label",w="landmark",_="list",C="item",k=!1;t.setCheckIECompliance=function(e){k=e};var x={};e._addGlobalPreserve=function(e,t){x[e]=t};var S=function(e,t,i,r){var o=new d(n,t,i,r);return o.type=e,o},T=function(e,t){for(var i=d.findRange(n,t);i&&i.type!==e;)i=i.findParent();return i},E=function(e,t){do t=t.findParent();while(t&&t.type!==e);return t},D=function(e,t){for(var i=new d(n,e,t,!0),r=i;r;r=r.findParent())r.type===y&&r.notify();i.destroy()},N=!1,A=function(e){var t=N;N=!0;try{return e()}finally{N=t}};i=function(){this.annotations={},this._branchNotes={},this.currentBranch=this.newLabelStack(),this.landmarkRanges=[],this.pc=new P},l.extend(i.prototype,{annotate:function(e,t,n){if("function"!=typeof n){var i=n;n=function(e){e&&l.extend(e,i)}}var r=(t||"")+":"+c.id();return this.annotations[r]=function(e,i){if(!e||!t)return n(null),void 0;var r=S(t,e,i);n(r)},"<$"+r+">"+e+"</$"+r+">"},newLabelStack:function(){var e=[this._branchNotes];return{pushLabel:function(t){var n=e[e.length-1],i="_"+t;e.push(n[i]=n[i]||{})},popLabel:function(){e.pop()},getNotes:function(){var t=e[e.length-1];return t},mark:function(t){for(var n=e.length-1;n>=0&&!e[n][t];n--)e[n][t]=!0}}},materialize:function(e){var t=this,n=s.withValue(t,e);n=t.annotate(n);var i,r={},o=function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;if(8===t.nodeType){var i=r[t.nodeValue];if(i===!1)throw new Error("Spark HTML fragments may only be used once. Second use in "+u.fragmentToHtml(e));i&&(r[t.nodeValue]=!1,u.wrapFragmentForContainer(i,t.parentNode),t.parentNode.replaceChild(i,t))}else 1===t.nodeType&&o(t);t=n}},a=[[]],c=[],d=/<(\/?)\$([^<>]+)>|<|[^<]+/g;d.lastIndex=0;for(var h;h=d.exec(n);){var f=!h[1],p=h[2],m=t.annotations[p];if(m===!1)throw new Error("Spark HTML fragments may be used only once. Second use of: "+u.fragmentToHtml(r[p]));if(m)if(f)c.push(p),a.push([]);else{var g=c.pop();if(g!==p)throw new Error("Range mismatch: "+g+" / "+p);var v=u.htmlToFragment(a.pop().join(""));if(o(v),v.firstChild||v.appendChild(document.createComment("empty")),m(v.firstChild,v.lastChild),t.annotations[p]=!1,!c.length){i=v;break}r[p]=v,a[a.length-1].push("<!--"+p+"-->")}else a[a.length-1].push(h[0])}return M(i,t.landmarkRanges),t.landmarkRanges=[],l.each(t.annotations,function(e){e&&e()}),t.annotations={},l.each(u.findAll(i,"[value], textarea, select"),function(e){e._sparkOriginalRenderedValue=[u.getElementValue(e)]}),l.each(u.findAll(i,"input[type=checkbox], input[type=radio]"),function(e){e._sparkOriginalRenderedChecked=[!!e.checked]}),i}});var O=function(e){return function(){var t=s.get(),n=l.toArray(arguments);return t?(n.push(t),e.apply(null,n)):n.pop()}},M=function(t,i){var r=new d(n,t),o=!1;r.finalize=function(){o=!0},p.afterFlush(function(){if(!o){if(!u.isInDocument(r.firstNode())){for(var t=r.firstNode();t.parentNode;)t=t.parentNode;if(!t._protect)return e.finalize(t),void 0}l.each(i,function(e){e.isPreservedConstant||e.rendered.call(e.landmark)});for(var n=r;n=E(w,n);)n.rendered.call(n.landmark);D(r.firstNode(),r.lastNode()),r.destroy()}})};e.render=function(e){var t=new i,n=t.materialize(e);return n};var P=function(){this.roots=[],this.regionPreservations=[]};l.extend(P.prototype,{addRoot:function(e,t,n,i){var r=this;r.roots.push({context:i,preserve:e,fromRange:t,toRange:n})},addConstantRegion:function(e,t){var n=this;n.regionPreservations.push({type:"region",fromStart:e.firstNode(),fromEnd:e.lastNode(),newRange:t})},computePreservations:function(e,t){var i=this,r=l.clone(i.regionPreservations),o=function(e,t,n,i,r){e=e||t.containerNode();var o=u.findAllClipped(e,i,t.firstNode(),t.lastNode());l.each(o,function(e){var t=n(e);t&&r(e,t)})};l.each(i.roots,function(e){e.fromNodesByLabel={},l.each(e.preserve,function(t,n){e.fromNodesByLabel[n]={},o(e.context,e.fromRange,t,n,function(t,i){e.fromNodesByLabel[n][i]=t})})});var s=new d(n,t.firstNode(),t.lastNode()),a=document.createDocumentFragment();a.appendChild(document.createComment(""));var c=s.replaceContents(a),h=new d(n,c);e.insertBefore(c),l.each(i.roots,function(e){l.each(e.preserve,function(t,n){o(e.context,e.toRange,t,n,function(t,i){var o=e.fromNodesByLabel[n][i];o&&(r.push({type:"node",from:o,to:t}),e.fromNodesByLabel[n][i]=null)})})});var f=h.extract();return h.destroy(),s.replaceContents(f),s.destroy(),r}});e.renderToRange=function(t,r){var s=t.firstNode();if(s&&s.parentNode){var a=new i,c=function(e,t){var n=a.newLabelStack();e.visit(function(e,i){i.type===b?e?n.pushLabel(i.label):n.popLabel():i.type===w&&e&&t(i,n.getNotes())})};c(t,function(e,t){t.originalRange=e});var h=u.findAllClipped(t.containerNode(),"input[type=radio]",t.firstNode(),t.lastNode());l.each(h,function(e){e._currentChecked=[!!e.checked]});var f=a.materialize(r);u.wrapFragmentForContainer(f,t.containerNode());var p=new d(n,f),m=a.pc;c(p,function(e,t){t.originalRange&&(e.constant&&m.addConstantRegion(t.originalRange,e),m.addRoot(e.preserve,t.originalRange,e))});for(var g=t;(g=g.findParent())&&g.firstNode().parentNode;)g.type===w,g&&m.addRoot(g.preserve,t,p,g.containerNode());m.addRoot(x,t,p);var v=m.computePreservations(t,p);p.destroy();var y={};A(function(){t.operate(function(t,n){e.finalize(t,n),o(t.parentNode,f,t.previousSibling,n.nextSibling,v,y)})}),l.each(y.regionPreservations,function(e){e.isPreservedConstant=!0})}},e.finalize=function(e,t){if(!e.parentNode&&11!==e.nodeType){var i=document.createDocumentFragment();i.appendChild(e),e=i,t=null}var r=new d(n,e,t);r.visit(function(e,t){e&&t.finalize&&t.finalize()}),r.destroy(!0)},e.setDataContext=O(function(e,t,n){return n.annotate(t,a,{data:e})}),e.getDataContext=function(e){var t=T(a,e);return t&&t.data};var I=null,$=function(){return I||(I=new h(function(e){if(!N){for(var t=[],n=T(v,e.currentTarget);n;)t.push(n),n=E(v,n);l.each(t,function(t){t.handler(e)})}},k)),I};e.attachEvents=O(function(t,n,i){var r=$(),o={};l.each(t,function(e,t){"function"==typeof e&&(e=[e]);var n=t.split(/,\s+/);l.each(n,function(t){var n=t.split(/\s+/);if(0!==n.length){var i=n.shift(),r=n.join(" ");o[i]=o[i]||[],l.each(e,function(e){o[i].push({selector:r,callback:e})})}})});var s=l.keys(o),a=function(e){l.each(s,function(t){for(var n=e.firstNode(),i=e.lastNode().nextSibling;n&&n!==i;n=n.nextSibling)r.installHandler(n,t)})};n=i.annotate(n,y,{notify:function(){a(this)}});var c=!1;return n=i.annotate(n,v,function(t){t&&(l.each(s,function(e){r.addType(e)}),a(t),t.finalize=function(){c=!0},t.handler=function(n){for(var i=o[n.type]||[],r=0;r<i.length;r++){if(c||n.isImmediatePropagationStopped())return;var s=i[r],a=s.callback,l=s.selector;if(l){if(!u.matchesSelectorClipped(n.currentTarget,t.containerNode(),l,t.firstNode(),t.lastNode()))continue}else if(n.currentTarget!==n.target)continue;var d=e.getDataContext(n.currentTarget)||{},h=E(w,t),f=h&&h.landmark,p=a.call(d,n,f);p===!1&&(n.stopImmediatePropagation(),n.preventDefault())}})})}),e.isolate=function(t){var n=s.get();if(!n)return t();var i,r,o=!0;return p.autorun(function(s){o?(r=n.annotate(t(),g,function(e){e?(i=e,i.finalize=function(){s.stop()}):s.stop()}),o=!1):e.renderToRange(i,t)}),r};var R=function(e,t){l.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})};r=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e},e.list=function(t,n,i){i=i||function(){return""};var o={},a={};l.each(["addedBefore","removed","movedBefore","changed"],function(e){a[e]=function(){return o[e].apply(null,arguments)}});var c=new f(r);l.extend(o,{addedBefore:function(e,t,n){var i=m.clone(t);i._id=e;var r={doc:i,liveRange:null};c.putBefore(e,r,n)}});var d,h=t.observeChanges(a),g=s.get(),v=g?l.bind(g.annotate,g):function(e){return e},y=function(e){return t.getTransform&&t.getTransform()?t.getTransform()(m.clone(e)):e},b="";c.empty()?b=i():c.forEach(function(e){b+=v(n(y(e.doc)),C,function(t){e.liveRange=t})});var k=!1,x=function(){h.stop(),k=!0};b=v(b,_,function(e){e?(d=e,d.finalize=x):x()}),g||x();var T=function(){for(var e=d;e=E(w,e);)e.rendered.call(e.landmark)},D=function(e){p.afterFlush(function(){k||A(e)})};return l.extend(o,{addedBefore:function(t,i,r){D(function(){var o=m.clone(i);o._id=t;var s=e.render(l.bind(n,null,y(o)));u.wrapFragmentForContainer(s,d.containerNode());var a=S(C,s);c.empty()?e.finalize(d.replaceContents(s)):null===r?c.lastValue().liveRange.insertAfter(s):c.get(r).liveRange.insertBefore(s),c.putBefore(t,{doc:o,liveRange:a},r)})},removed:function(t){D(function(){if(c.first()===c.last()){var n=e.render(i);u.wrapFragmentForContainer(n,d.containerNode()),e.finalize(d.replaceContents(n))}else e.finalize(c.get(t).liveRange.extract());c.remove(t),T()})},movedBefore:function(e,t){D(function(){var n=c.get(e).liveRange.extract();null===t?c.lastValue().liveRange.insertAfter(n):c.get(t).liveRange.insertBefore(n),c.moveBefore(e,t),T()})},changed:function(t,i){D(function(){var r=c.get(t);if(!r)throw new Error("Unknown id for changed: "+t);R(r.doc,i),e.renderToRange(r.liveRange,l.bind(n,null,y(r.doc)))})}}),b};var L=1;e.Landmark=function(){this.id=L++,this._range=null},l.extend(e.Landmark.prototype,{firstNode:function(){return this._range.firstNode()},lastNode:function(){return this._range.lastNode()},find:function(e){var t=this._range;return u.findClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},findAll:function(e){var t=this._range;return u.findAllClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},hasDom:function(){return!!this._range}}),e.UNIQUE_LABEL=["UNIQUE_LABEL"],e.labelBranch=function(t,n){var i=s.get();if(!i||null===t)return n();t===e.UNIQUE_LABEL&&(t=c.id()),i.currentBranch.pushLabel(t);var r=n(),o=i.currentBranch.getNotes().occupied;return i.currentBranch.popLabel(),o?i.annotate(r,b,{label:t}):r},e.createLandmark=function(t,n){var i=s.get();if(!i){var r=new e.Landmark;t.created&&t.created.call(r);var o=n(r);return t.destroyed&&t.destroyed.call(r),o}var a={};l.isArray(t.preserve)?l.each(t.preserve,function(e){a[e]=!0}):a=t.preserve||{};for(var c in a)"function"!=typeof a[c]&&(a[c]=function(){return!0});i.currentBranch.mark("occupied");var r,u=i.currentBranch.getNotes();if(u.originalRange){if(u.originalRange.superceded)throw new Error("Can't create second landmark in same branch");u.originalRange.superceded=!0,r=u.originalRange.landmark}else r=new e.Landmark,t.created&&p.nonreactive(function(){t.created.call(r)});u.landmark=r;var o=n(r);return i.annotate(o,w,function(e){return e?(l.extend(e,{preserve:a,constant:!!t.constant,rendered:t.rendered||function(){},destroyed:t.destroyed||function(){},landmark:r,finalize:function(){this.superceded||(this.landmark._range=null,this.destroyed.call(this.landmark))}}),r._range=e,i.landmarkRanges.push(e),i=null,void 0):(t.destroyed&&t.destroyed.call(r),void 0)})},t.getEnclosingLandmark=function(e){var t=T(w,e);return t?t.landmark:null}}).call(this),function(){o=function(e,t,i,r,a,c){var h=function(e,t){d.transplantTag(n,e,t)},f=new s(e,t,i,r),p=function(e,t,n,i){for(var r=t?t.nextSibling:e.firstChild;r&&r!==n;r=r.nextSibling)i(r)!==!1&&r.firstChild&&p(r,null,null,i)};c=c||{};var m=c.regionPreservations=c.regionPreservations||[],g=null;return p(t,null,null,function(e){var t=l.find(a,function(t){return"region"===t.type&&t.newRange.firstNode()===e})||l.find(a,function(t){return"node"===t.type&&t.to===e});if(t){var n="region"===t.type?t.fromStart:t.from;if(!g||u.compareElementIndex(g,n)<0)if("region"===t.type)f.match(t.fromStart,t.newRange.firstNode(),h,!0)&&(f.skipToSiblings(t.fromEnd,t.newRange.lastNode()),d.transplantRange(t.fromStart,t.fromEnd,t.newRange),m.push(t.newRange));else if("node"===t.type&&f.match(n,e,h))return g=n,(n.firstChild||e.firstChild)&&"TEXTAREA"!==n.nodeName&&"SELECT"!==n.nodeName&&o(n,e,null,null,a),!1}return!0}),f.finish(),c},s=function(e,t,n,i){this.tgtParent=e,this.srcParent=t,this.tgtBefore=n,this.tgtAfter=i,this.lastKeptTgtNode=null,this.lastKeptSrcNode=null},s.prototype.match=function(e,t,n,i){var r=this.lastKeptTgtNode,o=this.lastKeptSrcNode,a=e,l=t;if(!a!=!l)return!1;var c=!r,d=!a;if(!c){for(;!(r.parentNode===this.tgtParent||a&&u.elementContains(r.parentNode,a));)this._replaceNodes(r,null,o,null),r=r.parentNode,o=o.parentNode;if(this.lastKeptTgtNode=r,this.lastKeptSrcNode=o,!d&&(u.elementContains(o,l)||o.parentNode!==this.srcParent&&!u.elementContains(o.parentNode,l)))return!1}if(d)this._replaceNodes(r,null,o,null,this.tgtParent,this.srcParent);else{if(!i&&a.nodeName!==l.nodeName)return!1;for(var h=a.parentNode,f=l.parentNode;h!==(c?this.tgtParent:r.parentNode);h=h.parentNode,f=f.parentNode){if(f===(c?this.srcParent:o.parentNode))return!1;if(h.nodeName!==f.nodeName)return!1}if(f!==(c?this.srcParent:o.parentNode))return!1;for(var p=!0;;){if(p&&i||(1===a.nodeType&&s._copyAttributes(a,l),n&&n(a,l)),p=!1,(c?this.tgtParent:r.parentNode)===a.parentNode){this._replaceNodes(r,a,o,l);break}this._replaceNodes(null,a,null,l),a=a.parentNode,l=l.parentNode}}return this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0},s.prototype.skipToSiblings=function(e,t){var n=this.lastKeptTgtNode,i=this.lastKeptSrcNode;return n&&n.parentNode===e.parentNode?i&&i.parentNode===t.parentNode?(this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0):!1:!1},s.prototype.finish=function(){return this.match(null,null)},s.prototype._replaceNodes=function(e,t,n,i,r,o){var s=r||(e||t).parentNode,a=o||(n||i).parentNode;s===this.tgtParent&&(e=e||this.tgtBefore,t=t||this.tgtAfter),a===this.srcParent&&(n=n||this.srcBefore,i=i||this.srcAfter);for(var l;(l=e?e.nextSibling:s.firstChild)&&l!==t;)s.removeChild(l);for(var c;(c=n?n.nextSibling:a.firstChild)&&c!==i;)s.insertBefore(c,t||null)},s._copyAttributes=function(e,t){var n=t.attributes,i=e.attributes,r=e===document.activeElement;e.style.cssText&&(e.style.cssText="");var o=!1,s=null;if("INPUT"===e.nodeName&&(o="radio"===e.type,o||"checkbox"===e.type)){var a=!!e._sparkOriginalRenderedChecked&&e._sparkOriginalRenderedChecked[0],l=!!t._sparkOriginalRenderedChecked&&t._sparkOriginalRenderedChecked[0],c=e._currentChecked?e._currentChecked[0]:e.checked;a===l?s=c:(s=l,e._sparkOriginalRenderedChecked=[s])}for(var d=i.length-1;d>=0;d--){var h=i[d];if(h.specified){var f=h.name;if(i[f]&&"id"!==f&&"type"!==f&&(!o||"name"!==f)&&"value"!==f&&"src"!==f){var p=e[f];(!p||"object"!=typeof p&&!/^jQuery/.test(f))&&e.removeAttributeNode(h)}}}if(e.mergeAttributes){var m=t._sparkOriginalRenderedValue;t.removeAttribute("_sparkOriginalRenderedValue"),e.mergeAttributes(t),m&&(t._sparkOriginalRenderedValue=m),t.name&&(e.name=t.name)}else for(var d=0,g=n.length;g>d;d++){var v=n.item(d);if(v.specified){var f=v.name.toLowerCase(),y=String(v.value);if("type"===f);else if("checked"===f);else if("style"===f)e.style.cssText=t.style.cssText;else if("class"===f)e.className=t.className;else if("value"===f);else if("src"===f)t.src!==e.src&&(e.src=t.src);else try{e.setAttribute(f,y)}catch(b){throw new Error("Error copying attribute '"+f+"': "+b)}}}var w=function(e){return e._sparkOriginalRenderedValue?e._sparkOriginalRenderedValue[0]:null},_=w(t),C=w(e),k=u.getElementValue(e);if("SELECT"===e.nodeName){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.insertBefore(t.firstChild,null);u.setElementValue(e,k)}_===C||k!==_&&r||(k!==_&&u.setElementValue(e,_),e._sparkOriginalRenderedValue=[_]),null!==s&&(e.checked!==s&&(e.checked=s),e.defaultChecked=s,s?e.setAttribute("checked","checked"):e.removeAttribute("checked"))},t.Patcher=s}.call(this),function(){a.render=function(t){return e.render(function(){return e.isolate("function"==typeof t?t:function(){return String(t)})})},a.renderList=function(t,n,i){return e.render(function(){return e.list(t,function(t){var i=t._id?r(t._id):null;return e.labelBranch(i,function(){return e.isolate(l.bind(n,null,t))})},function(){return i?e.isolate(i):""})})}}.call(this),function(){e._labelFromIdOrName=function(e){var t=null;if(1===e.nodeType)if(e.getAttribute("id"))t="#"+e.getAttribute("id");else if(e.getAttribute("name"))for(t=e.getAttribute("name"),"INPUT"!==e.nodeName||"radio"!==e.type&&"checkbox"!==e.type||!e.value||(t=t+":"+e.value);e.parentNode&&1===e.parentNode.nodeType;){if(e=e.parentNode,e.id){t="#"+e.id+"/"+t;break}e.getAttribute("name")&&(t=e.getAttribute("name")+"/"+t)}return t}}.call(this),"undefined"==typeof Package&&(Package={}),Package.spark={Spark:e,SparkTest:t}}(),function(){var e=(Package.meteor.Meteor,Package.underscore._),t=Package.spark.Spark;(function(){var n="input textarea button select option".split(" "),i=e.map(n,function(e){return e.replace(/^.*$/,"$&[id], $&[name]")}).join(", ");t._addGlobalPreserve(i,t._labelFromIdOrName)}).call(this),"undefined"==typeof Package&&(Package={}),Package["preserve-inputs"]={}}(),function(){Package.meteor.Meteor;(function(){if("undefined"==typeof jQuery)throw new Error("Bootstrap requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]}}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){o.trigger("closed.bs.alert").remove()}var i=e(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=e(r);t&&t.preventDefault(),o.length||(o=i.hasClass("alert")?i:i.parent()),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i)};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.is("input")?"val":"html",r=n.data();e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]'),t=!0;if(e.length){var n=this.$element.find("input");"radio"===n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),r=i.data("bs.button"),o="object"==typeof n&&n;r||i.data("bs.button",r=new t(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,i=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var i=this.$element.find(".item.active"),r=n||i[t](),o=this.interval,s="next"==t?"left":"right",a="next"==t?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[a]()}this.sliding=!0,o&&this.pause();var c=e.Event("slide.bs.carousel",{relatedTarget:r[0],direction:s});if(!r.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(l.$indicators.children()[l.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(c),c.isDefaultPrevented())return;r.addClass(t),r[0].offsetWidth,i.addClass(s),r.addClass(s),i.one(e.support.transition.end,function(){r.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(c),c.isDefaultPrevented())return;i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return o&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n),s="string"==typeof n?n:o.slide;r||i.data("bs.carousel",r=new t(this,o)),"number"==typeof n?r.to(n):s?r[s]():o.interval&&r.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i=e(this),r=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=e.extend({},r.data(),i.data()),s=i.attr("data-slide-to");s&&(o.interval=!1),r.carousel(o),(s=i.attr("data-slide-to"))&&r.data("bs.carousel").to(s),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var s=e.camelCase(["scroll",r].join("-"));this.$element.one(e.support.transition.end,e.proxy(o,this)).emulateTransitionEnd(350)[r](this.$element[0][s])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();
this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?(this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350),void 0):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),r=i.data("bs.collapse"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);r||i.data("bs.collapse",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),r=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=e(r),s=o.data("bs.collapse"),a=s?"toggle":i.data(),l=i.attr("data-parent"),c=l&&e(l);s&&s.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),o.collapse(a)})}(jQuery),+function(e){"use strict";function t(){e(i).remove(),e(r).each(function(t){var i=n(e(this));i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown")),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",r="[data-toggle=dropdown]",o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var o=n(r),s=o.hasClass("open");if(t(),!s){if("ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t),o.trigger(i=e.Event("show.bs.dropdown")),i.isDefaultPrevented())return;o.toggleClass("open").trigger("shown.bs.dropdown"),r.focus()}return!1}},o.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var o=n(i),s=o.hasClass("open");if(!s||s&&27==t.keyCode)return 27==t.which&&o.find(r).focus(),i.click();var a=e("[role=menu] li:not(.divider):visible a",o);if(a.length){var l=a.index(a.filter(":focus"));38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus()}}}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu]",o.prototype.keydown)}(jQuery),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(r)}).emulateTransitionEnd(300):n.$element.focus().trigger(r)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var r=e(this),o=r.data("bs.modal"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);o||r.data("bs.modal",o=new t(this,s)),"string"==typeof n?o[n](i):s.show&&o.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),r=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},r.data(),n.data());t.preventDefault(),r.modal(o,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focus",l="hover"==s?"mouseleave":"blur";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,o=r.test(i);o&&(i=i.replace(r,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var s=this.getPosition(),a=n[0].offsetWidth,l=n[0].offsetHeight;if(o){var c=this.$element.parent(),u=i,d=document.documentElement.scrollTop||document.body.scrollTop,h="body"==this.options.container?window.innerWidth:c.outerWidth(),f="body"==this.options.container?window.innerHeight:c.outerHeight(),p="body"==this.options.container?0:c.offset().left;i="bottom"==i&&s.top+s.height+l-d>f?"top":"top"==i&&s.top-d-l<0?"bottom":"right"==i&&s.right+a>h?"left":"left"==i&&s.left-a<p?"right":i,n.removeClass(u).addClass(i)}var m=this.getCalculatedOffset(i,s,a,l);this.applyPlacement(m,i),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var n,i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top=e.top+s,e.left=e.left+a,i.offset(e).addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;if("top"==t&&c!=o&&(n=!0,e.top=e.top+o-c),/bottom|top/.test(t)){var u=0;e.left<0&&(u=-2*e.left,e.left=0,i.offset(e),l=i[0].offsetWidth,c=i[0].offsetHeight),this.replaceArrow(u-r+l,l,"left")}else this.replaceArrow(c-o,c,"top");n&&i.offset(e)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach()}var n=this,i=this.tip(),r=e.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.$element.trigger("hidden.bs."+this.type),this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),o="object"==typeof n&&n;r||i.data("bs.tooltip",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),r=i.data("bs.popover"),o="object"==typeof n&&n;r||i.data("bs.popover",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(n,i){var r,o=e.proxy(this.process,this);this.$element=e(n).is("body")?e(window):e(n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",o),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||(r=e(n).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);{var n=this;this.$body.find(this.selector).map(function(){var i=e(this),r=i.data("target")||i.attr("href"),o=/^#\w/.test(r)&&e(r);return o&&o.length&&[[o[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})}},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(t>=i)return s!=(e=o.last()[0])&&this.activate(e);for(e=r.length;e--;)s!=o[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parents(".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],o=e.Event("show.bs.tab",{relatedTarget:r});if(t.trigger(o),!o.isDefaultPrevented()){var s=e(i);this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},t.prototype.activate=function(t,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),s=i&&e.support.transition&&o.hasClass("fade");s?o.one(e.support.transition.end,r).emulateTransitionEnd(150):r(),o.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new t(this)),"string"==typeof n&&r[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.top,a=o.bottom;"object"!=typeof o&&(a=s=o),"function"==typeof s&&(s=o.top()),"function"==typeof a&&(a=o.bottom());var l=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=a&&r.top+this.$element.height()>=n-a?"bottom":null!=s&&s>=i?"top":!1;this.affixed!==l&&(this.unpin&&this.$element.css("top",""),this.affixed=l,this.unpin="bottom"==l?r.top-i:null,this.$element.removeClass(t.RESET).addClass("affix"+(l?"-"+l:"")),"bottom"==l&&this.$element.offset({top:document.body.offsetHeight-a-this.$element.height()}))}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),r=i.data("bs.affix"),o="object"==typeof n&&n;r||i.data("bs.affix",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery)}).call(this),"undefined"==typeof Package&&(Package={}),Package["bootstrap-3"]={}}(),function(){Package.meteor.Meteor;!function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function n(e){var t,n,i,r;if(!e||e.length<1)return e;for(t="",n=0,i=e.length;i>n;n++)r=e.charAt(n),t+=F[r]||r;return t}function i(e,t){for(var n=0,i=t.length;i>n;n+=1)if(o(e,t[n]))return n;return-1}function r(){var t=e(j);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function o(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function s(t,n){var i,r,o;if(null===t||t.length<1)return[];for(i=t.split(n),r=0,o=i.length;o>r;r+=1)i[r]=e.trim(i[r]);return i}function a(e){return e.outerWidth(!1)-e.width()}function l(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var r=e.data(n,i);r!==t&&n.val()!==r&&(e.removeData(n,i),n.trigger("keyup-change"))})}function c(n){n.on("mousemove",function(n){var i=L;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function u(e,n,i){i=i||t;var r;return function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,t)},e)}}function d(e){var t,n=!1;return function(){return n===!1&&(t=e(),n=!0),t}}function h(e,t){var n=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function f(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var n=0,i=0;if("selectionStart"in t)n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),n=r.text.length-i}return{offset:n,length:i}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!I){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);I=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),I.attr("class","select2-sizer"),e("body").append(I)}return I.text(t.val()),I.width()}function y(t,n,i){var r,o,s=[];r=t.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=n.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=i(this),o&&s.push(o))})),t.attr("class",s.join(" "))}function b(e,t,i,r){var o=n(e.toUpperCase()).indexOf(n(t.toUpperCase())),s=t.length;return 0>o?(i.push(r(e)),void 0):(i.push(r(e.substring(0,o))),i.push("<span class='select2-match'>"),i.push(r(e.substring(o,o+s))),i.push("</span>"),i.push(r(e.substring(o+s,e.length))),void 0)}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(n){var i,r=null,o=n.quietMillis||100,s=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,o=s,c=n.transport||e.fn.select2.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);i=i?i.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,r&&r.abort(),n.params&&(e.isFunction(n.params)?e.extend(d,n.params.call(a)):e.extend(d,n.params)),e.extend(d,{url:o,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page);l.callback(t)}}),r=c.call(a,d)},o)}}function C(t){var n,i,r=t,o=function(e){return""+e.text};e.isArray(r)&&(i=r,r={results:i}),e.isFunction(r)===!1&&(i=r,r=function(){return i});var s=r();return s.text&&(o=s.text,e.isFunction(o)||(n=s.text,o=function(e){return e[n]})),function(t){var n,i=t.term,s={results:[]};return""===i?(t.callback(r()),void 0):(n=function(r,s){var a,l;if(r=r[0],r.children){a={};for(l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);a.children=[],e(r.children).each2(function(e,t){n(t,a.children)}),(a.children.length||t.matcher(i,o(a),r))&&s.push(a)}else t.matcher(i,o(r),r)&&s.push(r)},e(r().results).each2(function(e,t){n(t,s.results)}),t.callback(s),void 0)}}function k(n){var i=e.isFunction(n);return function(r){var o=r.term,s={results:[]};e(i?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(""===o||r.matcher(o,n))&&s.results.push(e?this:{id:this,text:this})}),r.callback(s)}}function x(t,n){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(n+" must be a function or a falsy value")}function S(t){return e.isFunction(t)?t():t}function T(t){var n=0;return e.each(t,function(e,t){t.children?n+=T(t.children):n++}),n}function E(e,n,i,r){var s,a,l,c,u,d=e,h=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=r.tokenSeparators.length;c>l&&(u=r.tokenSeparators[l],a=e.indexOf(u),!(a>=0));l++);if(0>a)break;if(s=e.substring(0,a),e=e.substring(a+u.length),s.length>0&&(s=r.createSearchChoice.call(this,s,n),s!==t&&null!==s&&r.id(s)!==t&&null!==r.id(s))){for(h=!1,l=0,c=n.length;c>l;l++)if(o(r.id(s),r.id(n[l]))){h=!0;break}h||i(s)}}return d!==e?e:void 0}function D(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var N,A,O,M,P,I,$,R,L={x:0,y:0},N={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case N.LEFT:case N.RIGHT:case N.UP:case N.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case N.SHIFT:case N.CTRL:case N.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},j="<div class='select2-measure-scrollbar'></div>",F={"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AA",:"AE",:"AE",:"AE",:"AO",:"AU",:"AV",:"AV",:"AY","":"B",:"B",:"B",:"B",:"B",:"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F",:"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"G",:"G",:"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J",:"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M",:"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N","":"N","":"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"OI",:"OO",:"OU","":"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P","":"Q",:"Q",:"Q",:"Q",:"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"R",:"R","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"S","":"S",:"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"V",:"V",:"V",:"V",:"V",:"V",:"V",:"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"Z",:"Z",:"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"aa",:"ae",:"ae",:"ae",:"ao",:"au",:"av",:"av",:"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"f",:"f",:"f",:"f",:"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"g",:"g",:"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j",:"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n","":"n","":"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"oi",:"ou",:"oo","":"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p","":"q",:"q",:"q",:"q",:"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"r",:"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"s",:"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v",:"v",:"v",:"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z"};$=e(document),P=function(){var e=1;return function(){return e++}}(),$.on("mousemove",function(e){L.x=e.pageX,L.y=e.pageY}),A=D(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,o,s=".select2-results";
this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+P()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=d(function(){return n.element.closest("body")}),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(S(n.containerCss)),this.container.addClass(S(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(n.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(s),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),c(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",s,this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,r){var o=i.scrollTop();r>0&&0>=o-r?(i.scrollTop(0),m(e)):0>r&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(e))}),l(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var u=n.element.prop("readonly");u===t&&(u=!1),this.readonly(u),R=R||r(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,n=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),n!==t&&(n.container.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:o(e.attr("locked"),"locked")||o(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,r,a,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(i,r,o){var s,a=this.opts.id;s=function(i,r,l){var u,d,h,f,p,m,g,v,y,b;for(i=n.sortResults(i,r,o),u=0,d=i.length;d>u;u+=1)h=i[u],p=h.disabled===!0,f=!p&&a(h)!==t,m=h.children&&h.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(h)),v=e(document.createElement("div")),v.addClass("select2-result-label"),b=n.formatResult(h,v,o,c.opts.escapeMarkup),b!==t&&v.html(b),g.append(v),m&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),s(h.children,y,l+1),g.append(y)),g.data("select2-data",h),r.append(g)},s(r,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(a=n.id,n.id=function(e){return e[a]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(r?(n.query=this.bind(function(e){var n,r,o,s={results:[],more:!1},a=e.term;o=function(t,n){var i;t.is("option")?e.matcher(a,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){o(t,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(r=this.getPlaceholderOption(),r&&(n=n.not(r))),n.each2(function(e,t){o(t,s.results)}),e.callback(s)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=_.call(n.element,n.ajax)):"data"in n?n.query=C(n.data):"tags"in n&&(n.query=k(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var r=[];e(s(t.val(),n.separator)).each(function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return o(this.id,t.id)?(t=this,!1):void 0}),r.push(t)}),i(r)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var e,n,i=this.opts.element;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(S(this.opts.containerCssClass)),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(this.opts.dropdownCssClass))}),i.on("propertychange.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,r,o,s=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),d=e(window),h=d.width(),f=d.height(),p=d.scrollLeft()+h,m=d.scrollTop()+f,g=a.top+l,v=a.left,y=m>=g+u,b=a.top-u>=this.body().scrollTop(),w=s.outerWidth(!1),_=p>=v+w,C=s.hasClass("select2-drop-above");C?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(s.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=s.outerHeight(!1),p=d.scrollLeft()+h,m=d.scrollTop()+f,g=a.top+l,v=a.left,w=s.outerWidth(!1),_=p>=v+w,s.show()),this.opts.dropdownAutoWidth?(o=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),w=s.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:R.width),w>c?c=w:w=c,_=p>=v+w):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),g-=t.top,v-=t.left),_||(v=a.left+c-w),r={left:v,width:c},n?(r.bottom=f-a.top,r.top="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(r.top=g,r.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),r=e.extend(r,S(this.opts.dropdownCss)),s.css(r)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var t,n=this.containerId,i="scroll."+n,r="resize."+n,o="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",function(t){var n,i=e("#select2-drop");i.length>0&&(n=i.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+i+" "+o,function(){s.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,n="scroll."+t,i="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(r)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return S(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,n,i,r,o,s,a,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return l.scrollTop(0),void 0;t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[n]),r=i.offset().top+i.outerHeight(!0),n===t.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(r=a.offset().top+a.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),r>o&&l.scrollTop(l.scrollTop()+(r-o)),s=i.offset().top-l.offset().top,0>s&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var r=e(n[i]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,r,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),n=e(o[t]),n.addClass("select2-highlighted"),this.ensureHighlightVisible(),r=n.data("select2-data"),r&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r}),void 0)},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,r=this,o=this.search.val(),s=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){r.opened()&&(r.opts.populateResults.call(this,t,e.results,{term:o,page:i,context:s}),r.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(r.opts.formatLoadMore(i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):n.remove(),r.positionDropdown(),r.resultsPage=i,r.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(n){function i(){c.removeClass("select2-active"),h.positionDropdown()}function r(e){u.html(e),i()}var s,a,l,c=this.search,u=this.results,d=this.opts,h=this,f=c.val(),p=e.data(this.container,"select2-last-term");if((n===!0||!p||!o(f,p))&&(e.data(this.container,"select2-last-term",f),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(s=this.data(),e.isArray(s)&&s.length>=m&&x(d.formatSelectionTooBig,"formatSelectionTooBig")))return r("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(m)+"</li>"),void 0;if(c.val().length<d.minimumInputLength)return x(d.formatInputTooShort,"formatInputTooShort")?r("<li class='select2-no-results'>"+d.formatInputTooShort(c.val(),d.minimumInputLength)+"</li>"):r(""),n&&this.showSearch&&this.showSearch(!0),void 0;if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return x(d.formatInputTooLong,"formatInputTooLong")?r("<li class='select2-no-results'>"+d.formatInputTooLong(c.val(),d.maximumInputLength)+"</li>"):r(""),void 0;d.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2-searching'>"+d.formatSearching()+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&c.val(a),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(s){var a;if(l==this.queryCount){if(!this.opened())return this.search.removeClass("select2-active"),void 0;if(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(h,c.val(),s.results),a!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(s.results).filter(function(){return o(h.id(this),h.id(a))}).length&&s.results.unshift(a)),0===s.results.length&&x(d.formatNoMatches,"formatNoMatches"))return r("<li class='select2-no-results'>"+d.formatNoMatches(c.val())+"</li>"),void 0;u.empty(),h.opts.populateResults.call(this,u,s.results,{term:c.val(),page:this.resultsPage,context:null}),s.more===!0&&x(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),i(),this.opts.element.trigger({type:"select2-loaded",items:s})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){f(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function n(){var n,i,r,o,s,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),o=0,s=i.length;s>o;o+=1)if(a=i[o].replace(/\s/g,""),r=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),O=D(A,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(r=this.search.val().length,n.setSelectionRange(r,r)),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,n=this.container,i=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+P()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===N.PAGE_UP||e.which===N.PAGE_DOWN)return m(e),void 0;switch(e.which){case N.UP:case N.DOWN:return this.moveHighlight(e.which===N.UP?-1:1),m(e),void 0;case N.ENTER:return this.selectHighlighted(),m(e),void 0;case N.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case N.ESC:return this.cancel(e),m(e),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==N.TAB&&!N.isControl(e)&&!N.isFunctionKey(e)&&e.which!==N.ESC){if(this.opts.openOnEnter===!1&&e.which===N.ENTER)return m(e),void 0;if(e.which==N.DOWN||e.which==N.UP||e.which==N.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),m(e),void 0}return e.which==N.DELETE||e.which==N.BACKSPACE?(this.opts.allowClear&&this.clear(),m(e),void 0):void 0}})),l(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()?(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val():!1},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=n.val(),s=null;t.query({matcher:function(e,n,i){var a=o(r,t.id(i));return a&&(s=i),a},callback:e.isFunction(i)?function(){i(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,r=this;if(this.findHighlightableChoices().each2(function(e,t){return o(r.id(t.data("select2-data")),r.opts.element.val())?(i=e,!1):void 0}),n!==!1&&(t===!0&&i>=0?this.highlight(i):this.highlight(0)),t===!0){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(T(e.results)>=s)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),o(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),r.empty(),null!==e&&(n=this.opts.formatSelection(e,r,this.opts.escapeMarkup)),n!==t&&r.append(n),i=this.opts.formatSelectionCssClass(e,r),i!==t&&r.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=r.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:o});else{if(!e&&0!==e)return this.clear(n),void 0;if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),n&&r.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(arguments.length>1&&(i=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i),void 0)}}),M=D(A,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=s(n.val(),t.separator),a=[];t.query({matcher:function(n,i,s){var l=e.grep(r,function(e){return o(e,t.id(s))}).length;return l&&a.push(s),l},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<r.length;n++)for(var s=r[n],l=0;l<a.length;l++){var c=a[l];if(o(s,t.id(c))){e.push(c),a.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+P()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),r=n.next(".select2-search-choice:not(.select2-locked)"),o=p(this.search);if(n.length&&(e.which==N.LEFT||e.which==N.RIGHT||e.which==N.BACKSPACE||e.which==N.DELETE||e.which==N.ENTER)){var s=n;return e.which==N.LEFT&&i.length?s=i:e.which==N.RIGHT?s=r.length?r:null:e.which===N.BACKSPACE?(this.unselect(n.first()),this.search.width(10),s=i.length?i:r):e.which==N.DELETE?(this.unselect(n.first()),this.search.width(10),s=r.length?r:null):e.which==N.ENTER&&(s=null),this.selectChoice(s),m(e),s&&s.length||this.open(),void 0}if((e.which===N.BACKSPACE&&1==this.keydowns||e.which==N.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),m(e),void 0;if(this.selectChoice(null),this.opened())switch(e.which){case N.UP:case N.DOWN:return this.moveHighlight(e.which===N.UP?-1:1),m(e),void 0;case N.ENTER:return this.selectHighlighted(),m(e),void 0;case N.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case N.ESC:return this.cancel(e),m(e),void 0}if(e.which!==N.TAB&&!N.isControl(e)&&!N.isFunctionKey(e)&&e.which!==N.BACKSPACE&&e.which!==N.ESC){if(e.which===N.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===N.PAGE_UP||e.which===N.PAGE_DOWN)&&m(e),e.which===N.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))
})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],o=this;e(t).each(function(){i(o.id(this),n)<0&&(n.push(o.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r,o=!n.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?s:a,c=this.id(n),u=this.getVal();i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),r=this.opts.formatSelectionCssClass(n,l.find("div")),r!=t&&l.addClass(r),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),m(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var n,r,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){for(;(r=i(this.id(n),o))>=0;)o.splice(r,1),this.setVal(o),this.select&&this.postprocessResults();var s=e.Event("select2-removing");s.val=this.id(n),s.choice=n,this.opts.element.trigger(s),s.isDefaultPrevented()||(t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},postprocessResults:function(e,t,n){var r=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){var n=a.id(t.data("select2-data"));i(n,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&x(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-a(this.search)},resizeSearch:function(){var e,t,n,i,r,o=a(this.search);e=v(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(t-i)-o,e>r&&(r=n-o),40>r&&(r=n-o),0>=r&&(r=e),this.search.width(Math.floor(r))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)o(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var r,o=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),i&&this.triggerChange({added:this.data(),removed:r}),void 0;if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(r,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,r,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(r=this.data(),t||(t=[]),i=e.map(t,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),e.fn.select2=function(){var n,r,o,s,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),r=a?new M:new O,r.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(i(l[0],c)<0)throw"Unknown method: "+l[0];if(s=t,r=e(this).data("select2"),r===t)return;if(o=l[0],"container"===o?s=r.container:"dropdown"===o?s=r.dropdown:(h[o]&&(o=h[o]),s=r[o].apply(r,l.slice(1))),i(l[0],u)>=0||i(l[0],d)&&1==l.length)return!1}}),s===t?this:s},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var r=[];return b(e.text,n.term,r,i),r.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return n(""+t).toUpperCase().indexOf(n(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:E,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:C,tags:k},util:{debounce:u,markMatch:b,escapeMarkup:w,stripDiacritics:n},"class":{"abstract":A,single:O,multi:M}}}}(jQuery),"undefined"==typeof Package&&(Package={}),Package.select2={}}(),function(){{var e;Package.meteor.Meteor}(function(){(function(e){function t(e,t){return function(n){return l(e.call(this,n),t)}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function i(){}function r(e){s(this,e)}function o(e){var t=e.years||e.year||e.y||0,n=e.months||e.month||e.M||0,i=e.weeks||e.week||e.w||0,r=e.days||e.day||e.d||0,o=e.hours||e.hour||e.h||0,s=e.minutes||e.minute||e.m||0,a=e.seconds||e.second||e.s||0,l=e.milliseconds||e.millisecond||e.ms||0;this._input=e,this._milliseconds=+l+1e3*a+6e4*s+36e5*o,this._days=+r+7*i,this._months=+n+12*t,this._data={},this._bubble()}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function a(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function c(e,t,n,i){var r,o,s=t._milliseconds,a=t._days,l=t._months;s&&e._d.setTime(+e._d+s*n),(a||l)&&(r=e.minute(),o=e.hour()),a&&e.date(e.date()+a*n),l&&e.month(e.month()+l*n),s&&!i&&L.updateOffset(e),(a||l)&&(e.minute(r),e.hour(o))}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(n=0;i>n;n++)~~e[n]!==~~t[n]&&o++;return o+r}function h(e){return e?lt[e]||e.toLowerCase().replace(/(.)s$/,"$1"):e}function f(e,t){return t.abbr=e,H[e]||(H[e]=new i),H[e].set(t),H[e]}function p(e){delete H[e]}function m(e){if(!e)return L.fn._lang;if(!H[e]&&U)try{require("./lang/"+e)}catch(t){return L.fn._lang}return H[e]||L.fn._lang}function g(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function v(e){var t,n,i=e.match(V);for(t=0,n=i.length;n>t;t++)i[t]=ht[i[t]]?ht[i[t]]:g(i[t]);return function(r){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function y(e,t){return t=b(t,e.lang()),ct[t]||(ct[t]=v(t)),ct[t](e)}function b(e,t){function n(e){return t.longDateFormat(e)||e}for(var i=5;i--&&(W.lastIndex=0,W.test(e));)e=e.replace(W,n);return e}function w(e,t){switch(e){case"DDDD":return G;case"YYYY":return J;case"YYYYY":return Q;case"S":case"SS":case"SSS":case"DDD":return K;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return X;case"a":case"A":return m(t._l)._meridiemParse;case"X":return tt;case"Z":case"ZZ":return Z;case"T":return et;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return Y;default:return new RegExp(e.replace("\\",""))}}function _(e){var t=(Z.exec(e)||[])[0],n=(t+"").match(ot)||["-",0,0],i=+(60*n[1])+~~n[2];return"+"===n[0]?-i:i}function C(e,t,n){var i,r=n._a;switch(e){case"M":case"MM":null!=t&&(r[1]=~~t-1);break;case"MMM":case"MMMM":i=m(n._l).monthsParse(t),null!=i?r[1]=i:n._isValid=!1;break;case"D":case"DD":null!=t&&(r[2]=~~t);break;case"DDD":case"DDDD":null!=t&&(r[1]=0,r[2]=~~t);break;case"YY":r[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~t;break;case"a":case"A":n._isPm=m(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":r[3]=~~t;break;case"m":case"mm":r[4]=~~t;break;case"s":case"ss":r[5]=~~t;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=_(t)}null==t&&(n._isValid=!1)}function k(e){var t,n,i,r=[];if(!e._d){for(i=S(e),t=0;3>t&&null==e._a[t];++t)e._a[t]=r[t]=i[t];for(;7>t;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];r[3]+=~~((e._tzm||0)/60),r[4]+=~~((e._tzm||0)%60),n=new Date(0),e._useUTC?(n.setUTCFullYear(r[0],r[1],r[2]),n.setUTCHours(r[3],r[4],r[5],r[6])):(n.setFullYear(r[0],r[1],r[2]),n.setHours(r[3],r[4],r[5],r[6])),e._d=n}}function x(e){var t=e._i;e._d||(e._a=[t.years||t.year||t.y,t.months||t.month||t.M,t.days||t.day||t.d,t.hours||t.hour||t.h,t.minutes||t.minute||t.m,t.seconds||t.second||t.s,t.milliseconds||t.millisecond||t.ms],k(e))}function S(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function T(e){var t,n,i,r=m(e._l),o=""+e._i;for(i=b(e._f,r).match(V),e._a=[],t=0;t<i.length;t++)n=(w(i[t],e).exec(o)||[])[0],n&&(o=o.slice(o.indexOf(n)+n.length)),ht[i[t]]&&C(i[t],n,e);o&&(e._il=o),e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),k(e)}function E(e){var t,n,i,o,a,l=99;for(o=0;o<e._f.length;o++)t=s({},e),t._f=e._f[o],T(t),n=new r(t),a=d(t._a,n.toArray()),n._il&&(a+=n._il.length),l>a&&(l=a,i=n);s(e,i)}function D(e){var t,n=e._i,i=nt.exec(n);if(i){for(e._f="YYYY-MM-DD"+(i[2]||" "),t=0;4>t;t++)if(rt[t][1].exec(n)){e._f+=rt[t][0];break}Z.exec(n)&&(e._f+=" Z"),T(e)}else e._d=new Date(n)}function N(t){var n=t._i,i=z.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?D(t):u(n)?(t._a=n.slice(0),k(t)):n instanceof Date?t._d=new Date(+n):"object"==typeof n?x(t):t._d=new Date(n)}function A(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function O(e,t,n){var i=B(Math.abs(e)/1e3),r=B(i/60),o=B(r/60),s=B(o/24),a=B(s/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",B(s/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=n,A.apply({},l)}function M(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=L(e).add("d",o),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function P(e){var t=e._i,n=e._f;return null===t||""===t?null:("string"==typeof t&&(e._i=t=m().preparse(t)),L.isMoment(t)?(e=s({},t),e._d=new Date(+t._d)):n?u(n)?E(e):T(e):N(e),new r(e))}function I(e,t){L.fn[e]=L.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),L.updateOffset(this),this):this._d["get"+n+t]()}}function $(e){L.duration.fn[e]=function(){return this._data[e]}}function R(e,t){L.duration.fn["as"+e]=function(){return+this/t}}for(var L,j,F="2.2.1",B=Math.round,H={},U="undefined"!=typeof module&&module.exports,z=/^\/?Date\((\-?\d+)/i,q=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,V=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,W=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Y=/\d\d?/,K=/\d{1,3}/,G=/\d{3}/,J=/\d{1,4}/,Q=/[+\-]?\d{1,6}/,X=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Z=/Z|[\+\-]\d\d:?\d\d/i,et=/T/i,tt=/[\+\-]?\d+(\.\d{1,3})?/,nt=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,it="YYYY-MM-DDTHH:mm:ssZ",rt=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ot=/([\+\-]|\d\d)/gi,st="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),at={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},lt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},ct={},ut="DDD w W M D d".split(" "),dt="M D H h m s w W".split(" "),ht={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(e/60),2)+":"+l(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};ut.length;)j=ut.pop(),ht[j+"o"]=n(ht[j],j);for(;dt.length;)j=dt.pop(),ht[j+j]=t(ht[j],2);for(ht.DDDD=t(ht.DDD,3),s(i.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=L.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=L([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return M(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}}),L=function(e,t,n){return P({_i:e,_f:t,_l:n,_isUTC:!1})},L.utc=function(e,t,n){return P({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t}).utc()},L.unix=function(e){return L(1e3*e)},L.duration=function(e,t){var n,i,r=L.isDuration(e),s="number"==typeof e,a=r?e._input:s?{}:e,l=q.exec(e);return s?t?a[t]=e:a.milliseconds=e:l&&(n="-"===l[1]?-1:1,a={y:0,d:~~l[2]*n,h:~~l[3]*n,m:~~l[4]*n,s:~~l[5]*n,ms:~~l[6]*n}),i=new o(a),r&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},L.version=F,L.defaultFormat=it,L.updateOffset=function(){},L.lang=function(e,t){return e?(e=e.toLowerCase(),e=e.replace("_","-"),t?f(e,t):null===t?(p(e),e="en"):H[e]||m(e),L.duration.fn._lang=L.fn._lang=m(e),void 0):L.fn._lang._abbr},L.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),m(e)},L.isMoment=function(e){return e instanceof r},L.isDuration=function(e){return e instanceof o},s(L.fn=r.prototype,{clone:function(){return L(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return y(L(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!d(this._a,(this._isUTC?L.utc(this._a):L(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},invalidAt:function(){var e,t=this._a,n=(this._isUTC?L.utc(this._a):L(this._a)).toArray();for(e=6;e>=0&&t[e]===n[e];--e);return e},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=y(this,e||L.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?L.duration(+t,e):L.duration(e,t),c(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?L.duration(+t,e):L.duration(e,t),c(this,n,-1),this},diff:function(e,t,n){var i,r,o=this._isUTC?L(e).zone(this._offset||0):L(e).local(),s=6e4*(this.zone()-o.zone());return t=h(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-L(this).startOf("month")-(o-L(o).startOf("month")))/i,r-=6e4*(this.zone()-L(this).startOf("month").zone()-(o.zone()-L(o).startOf("month").zone()))/i,"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?r:a(r)},from:function(e,t){return L.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(L(),e)},calendar:function(){var e=this.diff(L().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?"string"==typeof e&&(e=this.lang().weekdaysParse(e),"number"!=typeof e)?this:this.add({d:e-t}):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),L.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=h(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoweek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=h(e),this.startOf(e).add("isoweek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+L(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+L(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+L(e).startOf(t)},min:function(e){return e=L.apply(null,arguments),this>e?this:e},max:function(e){return e=L.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=_(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&c(this,L.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},hasAlignedHourOffset:function(e){return e=e?L(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return L.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var t=B((L(this).startOf("day")-L(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=M(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=M(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=M(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=h(e),this[e.toLowerCase()]()},set:function(e,t){e=h(e),this[e.toLowerCase()](t)},lang:function(t){return t===e?this._lang:(this._lang=m(t),this)}}),j=0;j<st.length;j++)I(st[j].toLowerCase().replace(/s$/,""),st[j]);I("year","FullYear"),L.fn.days=L.fn.day,L.fn.months=L.fn.month,L.fn.weeks=L.fn.week,L.fn.isoWeeks=L.fn.isoWeek,L.fn.toJSON=L.fn.toISOString,s(L.duration.fn=o.prototype,{_bubble:function(){var e,t,n,i,r=this._milliseconds,o=this._days,s=this._months,l=this._data;l.milliseconds=r%1e3,e=a(r/1e3),l.seconds=e%60,t=a(e/60),l.minutes=t%60,n=a(t/60),l.hours=n%24,o+=a(n/24),l.days=o%30,s+=a(o/30),l.months=s%12,i=a(s/12),l.years=i},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*~~(this._months/12)},humanize:function(e){var t=+this,n=O(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=L.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=L.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=h(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=h(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:L.fn.lang});for(j in at)at.hasOwnProperty(j)&&(R(j,at[j]),$(j.toLowerCase()));R("Weeks",6048e5),L.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},L.lang("en",{ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),U&&(module.exports=L),"undefined"==typeof ender&&(this.moment=L),"function"==typeof define&&define.amd&&define("moment",[],function(){return L})}).call(this)}).call(this),function(){"undefined"!=typeof Package&&(e=this.moment)}.call(this),"undefined"==typeof Package&&(Package={}),Package.moment={moment:e}}(),function(){var e=Package.meteor.Meteor;(function(){if(window.localStorage)e._localStorage={getItem:function(e){return window.localStorage.getItem(e)},setItem:function(e,t){window.localStorage.setItem(e,t)},removeItem:function(e){window.localStorage.removeItem(e)}};else if($.browser.msie){var t=document.createElement("span");t.style.behavior='url("#default#userData")',t.id="localstorage-helper",t.style.display="none",document.getElementsByTagName("head")[0].appendChild(t);var n="localStorage";t.load(n),e._localStorage={setItem:function(e,i){t.setAttribute(e,i),t.save(n)},removeItem:function(e){t.removeAttribute(e),t.save(n)},getItem:function(e){return t.load(n),t.getAttribute(e)}}}else e._debug("You are running a browser with no localStorage or userData support. Logging in from one tab will not cause another tab to be logged in."),e._localStorage={_data:{},setItem:function(e,t){this._data[e]=t},removeItem:function(e){delete this._data[e]},getItem:function(e){var t=this._data[e];return void 0===t?null:t}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.localstorage={}}(),function(){var e,t=Package.meteor.Meteor;(function(){"undefined"==typeof e&&(e={}),e.configurations=new t.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:!0}),e.ConfigError=function(e){this.message=e},e.ConfigError.prototype=new Error,e.ConfigError.prototype.name="ServiceConfiguration.ConfigError"}).call(this),"undefined"==typeof Package&&(Package={}),Package["service-configuration"]={ServiceConfiguration:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.spark.Spark;(function(){e={},e.json_ast_to_func=function(t){return function(n,i){return e.evaluate(t,n,i)}};var i=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e};e._default_helpers={"with":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(e)},each:function(e,r){var o=this;return e&&e.length>0?t.map(e,function(e){var t=e&&e._id&&i(e._id)||("string"==typeof e?e:null)||n.UNIQUE_LABEL;return n.labelBranch(t,function(){return r.fn(e)})}).join(""):n.labelBranch("else",function(){return r.inverse(o)})},"if":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(this)},unless:function(e,t){return!e||e instanceof Array&&!e.length?t.fn(this):t.inverse(this)}},e.registerHelper=function(t,n){if(t in e._default_helpers)throw new Error("There is already a helper '"+t+"'");
e._default_helpers[t]=n},e._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),e._defaultThis=function(){return this}(),e.evaluate=function(i,r,o){o=o||{};var s=t.extend({},e._default_helpers);t.extend(s,o.helpers||{});var a=o.partials||{},l=function(e,n){if("object"!=typeof n)return n;for(var i=0;i<n[0];i++){if(!e.parent)throw new Error("Too many '..' segments");e=e.parent}if(1===n.length)return e.data;var r=!1;""===n[1]&&(n=n.slice(),n.splice(1,1),r=!0);var o,a=e.data;if(0===n[0]&&s.hasOwnProperty(n[1])&&!r)o=s[n[1]];else{if(!o instanceof Object&&"undefined"!=typeof function(){}[n[1]]&&!r)throw new Error("Can't call a helper '"+n[1]+"' because it is a built-in function property in JavaScript");o=e.data&&e.data[n[1]]}for(var i=2;i<n.length;i++){if("function"==typeof o&&(o=o.call(a),a=o),void 0===o||null===o){o="";break}o=o[n[i]]}return"function"==typeof o?t.bind(o,a):o},c=function(e,n,i,r){i=i||{},n=n.slice(0);var o=n[n.length-1],s={};"object"!=typeof o||o instanceof Array||t.each(n.pop(),function(t,n){var i=l(e,t);s[n]="function"==typeof i?i():i});for(var a=function(t,n){for(var i=t.slice(1),r=0;r<i.length;r++)"function"==typeof i[r]&&(i[r]=i[r]());return n&&i.push(n),t[0].apply(e.data,i)},c=new Array(n.length),u=0;u<n.length;u++)c[u]=l(e,n[u]);if("function"!=typeof c[0])return c[0];if(r&&c.length>1){var d=c[1];"function"==typeof d&&(d=a(c.slice(1),{hash:s})),c=[c[0],d],i.hash={}}else i.hash=s;return a(c,i)},u=function(i,r,o){var s,l=[],d=function(e){return"string"==typeof e?e:null===e?"null":void 0===e?"":e.toString()},h=function(t,i){return function(r){return(r||e._defaultThis)===(i||e._defaultThis)?t(r):n.setDataContext(r,t(r))}},f=function(t){return t instanceof e.SafeString?t.toString():e._escape(d(t))},p=function(){return(o?o+".":"")+s},m=function(e,t){return n.labelBranch(e+"@"+p(),t)};return t.each(r,function(e,t){if(s=t,"string"==typeof e)l.push(e);else if("{"===e[0])l.push(m(e[1],function(){return f(c(i,e[1]))}));else if("!"===e[0])l.push(m(e[1],function(){return d(c(i,e[1]||""))}));else if("#"===e[0]){var n=p(),r=h(function(t){return u({parent:i,data:t},e[2],n)},i.data);r.fn=r,r.inverse=h(function(t){return u({parent:i,data:t},e[3]||[],n)},i.data);var o=m(e[1],function(){return d(c(i,e[1],r,!0))});l.push(o)}else{if(">"!==e[0])throw new Error("bad element in template");var g=e[1];if(!(g in a))throw new Error("No such template '"+g+"'");var o=m(g,function(){return d(a[g](i.data))});l.push(o)}}),l.join("")},d=(o.name||"")+"#";return u({data:r,parent:null},i,d)},e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()}}).call(this),"undefined"==typeof Package&&(Package={}),Package.handlebars={Handlebars:e}}(),function(){{var e,t,n,i,r,o,s,a,l,c,u,d=Package.meteor.Meteor,h=Package.underscore._,f=Package.deps.Deps,p=Package.random.Random,m=Package["service-configuration"].ServiceConfiguration;Package.livedata.DDP}(function(){e={},e._options={};var r=90,o=3600;t=6e5,n=1e4,e.config=function(t){d.isServer?__meteor_runtime_config__.accountsConfigCalled=!0:__meteor_runtime_config__.accountsConfigCalled||d._debug("Accounts.config was called on the client but not on the server; some configuration options may not take effect.");var n=["sendVerificationEmail","forbidClientAccountCreation","restrictCreationByEmailDomain","loginExpirationInDays"];h.each(h.keys(t),function(e){if(!h.contains(n,e))throw new Error("Accounts.config: Invalid key: "+e)}),h.each(n,function(n){if(n in t){if(n in e._options)throw new Error("Can't set `"+n+"` more than once");e._options[n]=t[n]}}),d.isServer&&maybeStopExpireTokensInterval()},d.users=new d.Collection("users",{_preventAutopublish:!0}),e.loginServiceConfiguration=m.configurations,e.ConfigError=m.ConfigError,e.LoginCancelledError=function(e){this.message=e},e.LoginCancelledError.numericError=145546287,e.LoginCancelledError.prototype=new Error,e.LoginCancelledError.prototype.name="Accounts.LoginCancelledError",i=function(){return 24*(e._options.loginExpirationInDays||r)*60*60*1e3},e._tokenExpiration=function(e){return new Date(new Date(e).getTime()+i())},e._tokenExpiresSoon=function(e){var t=.1*i(),n=1e3*o;return t>n&&(t=n),new Date>new Date(e)-t}}).call(this),function(){r=!0;var t;t=window.location.hash.match(/^\#\/reset-password\/(.*)$/),t&&(r=!1,e._resetPasswordToken=t[1],window.location.hash=""),t=window.location.hash.match(/^\#\/verify-email\/(.*)$/),t&&(r=!1,e._verifyEmailToken=t[1],window.location.hash=""),t=window.location.hash.match(/^\#\/enroll-account\/(.*)$/),t&&(r=!1,e._enrollAccountToken=t[1],window.location.hash="")}.call(this),function(){d.userId=function(){return d.connection.userId()};var t=!1,n=new f.Dependency;e._setLoggingIn=function(e){t!==e&&(t=e,n.changed())},d.loggingIn=function(){return n.depend(),t},d.user=function(){var e=d.userId();return e?d.users.findOne(e):null},e.callLoginMethod=function(t){t=h.extend({methodName:"login",methodArguments:[],_suppressLoggingIn:!1},t),h.each(["validateResult","userCallback"],function(e){t[e]||(t[e]=function(){})});var n=h.once(t.userCallback),i=!1,r=function(t,r){d.connection.onReconnect=!t&&r&&r.token?function(){i=!0;var t=c();t&&(r={token:t,tokenExpires:u()}),r.tokenExpires||(r.tokenExpires=e._tokenExpiration(new Date)),e._tokenExpiresSoon(r.tokenExpires)?o():e.callLoginMethod({methodArguments:[{resume:r.token}],_suppressLoggingIn:!0,userCallback:function(e){e&&o(),n(e)}})}:null},a=function(r,o){if(!i){if(e._setLoggingIn(!1),r||!o)return r=r||new Error("No result from call to "+t.methodName),n(r),void 0;try{t.validateResult(o)}catch(a){return n(a),void 0}s(o.id,o.token,o.tokenExpires),n()}};t._suppressLoggingIn||e._setLoggingIn(!0),d.apply(t.methodName,t.methodArguments,{wait:!0,onResultReceived:r},a)},o=function(){l(),d.connection.setUserId(null),d.connection.onReconnect=null},s=function(e,t,n){a(e,t,n),d.connection.setUserId(e)},d.logout=function(e){d.apply("logout",[],{wait:!0},function(t){t?e&&e(t):(o(),e&&e())})},d.logoutOtherClients=function(e){var t=d.connection.onReconnect,n=d.userId();d.connection.onReconnect=null,d.apply("logoutOtherClients",[],{wait:!0},function(i,r){d.connection.onReconnect=t,i||a(n,r.token,r.tokenExpires),d.connection.onReconnect(),e&&e(i)})};var i=d.subscribe("meteor.loginServiceConfiguration");e.loginServicesConfigured=function(){return i.ready()},Package.handlebars&&(Package.handlebars.Handlebars.registerHelper("currentUser",function(){return d.user()}),Package.handlebars.Handlebars.registerHelper("loggingIn",function(){return d.loggingIn()}))}.call(this),function(){var t;d.loginWithToken=function(t,n){e.callLoginMethod({methodArguments:[{resume:t}],userCallback:n})},e._enableAutoLogin=function(){r=!0,v()};var n="Meteor.loginToken",i="Meteor.loginTokenExpires",s="Meteor.userId";e._isolateLoginTokenForTest=function(){n+=p.id(),s+=p.id()},a=function(r,o,a){d._localStorage.setItem(s,r),d._localStorage.setItem(n,o),a||(a=e._tokenExpiration(new Date)),d._localStorage.setItem(i,a),t=o},l=function(){d._localStorage.removeItem(s),d._localStorage.removeItem(n),d._localStorage.removeItem(i),t=null},c=e._storedLoginToken=function(){return d._localStorage.getItem(n)},u=function(){return d._localStorage.getItem(i)};var h=function(){return d._localStorage.getItem(s)},f=function(){var t=d._localStorage.getItem(i);t&&e._tokenExpiresSoon(new Date(t))&&l()};if(r){f();var m=c();if(m){var g=h();g&&d.connection.setUserId(g),d.loginWithToken(m,function(e){e&&(d._debug("Error logging in with token: "+e),o())})}}t=m;var v=function(){if(r){var e=c();t!=e&&(e?d.loginWithToken(e):d.logout()),t=e}};setInterval(v,3e3)}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-base"]={Accounts:e}}(),function(){var e,t,n,i=(Package.meteor.Meteor,Package.random.Random),r=(Package.check.check,Package.check.Match,Package.underscore._);(function(){t=function(){function e(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function t(){return new e(null)}function n(e,t,n,i,r,o){for(var s=16383&t,a=t>>14;--o>=0;){var l=16383&this[e],c=this[e++]>>14,u=a*l+c*s;l=s*l+((16383&u)<<14)+n[i]+r,r=(l>>28)+(u>>14)+a*c,n[i++]=268435455&l}return r}function i(e){return Zt.charAt(e)}function r(e,t){var n=en[e.charCodeAt(t)];return null==n?-1:n}function o(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function s(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+DV:this.t=0}function a(e){var n=t();return n.fromInt(e),n}function l(t,n){var i;if(16==n)i=4;else if(8==n)i=3;else if(256==n)i=8;else if(2==n)i=1;else if(32==n)i=5;else{if(4!=n)return this.fromRadix(t,n),void 0;i=2}this.t=0,this.s=0;for(var o=t.length,s=!1,a=0;--o>=0;){var l=8==i?255&t[o]:r(t,o);0>l?"-"==t.charAt(o)&&(s=!0):(s=!1,0==a?this[this.t++]=l:a+i>this.DB?(this[this.t-1]|=(l&(1<<this.DB-a)-1)<<a,this[this.t++]=l>>this.DB-a):this[this.t-1]|=l<<a,a+=i,a>=this.DB&&(a-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),s&&e.ZERO.subTo(this,this)}function c(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function u(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,o=!1,s="",a=this.t,l=this.DB-a*this.DB%t;if(a-->0)for(l<this.DB&&(n=this[a]>>l)>0&&(o=!0,s=i(n));a>=0;)t>l?(n=(this[a]&(1<<l)-1)<<t-l,n|=this[--a]>>(l+=this.DB-t)):(n=this[a]>>(l-=t)&r,0>=l&&(l+=this.DB,--a)),n>0&&(o=!0),o&&(s+=i(n));return o?s:"0"}function d(){var n=t();return e.ZERO.subTo(this,n),n}function h(){return this.s<0?this.negate():this}function f(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function p(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function m(){return this.t<=0?0:this.DB*(this.t-1)+p(this[this.t-1]^this.s&this.DM)}function g(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function v(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function y(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,s=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>r|a,a=(this[n]&o)<<i;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function b(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return t.t=0,void 0;var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<r,t[s-n]=this[s]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}function w(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=0>i?-1:0,-1>i?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function _(t,n){var i=this.abs(),r=t.abs(),o=i.t;for(n.t=o+r.t;--o>=0;)n[o]=0;for(o=0;o<r.t;++o)n[o+i.t]=i.am(0,r[o],n,o,0,i.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)}function C(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function k(n,i,r){var o=n.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=i&&i.fromInt(0),null!=r&&this.copyTo(r),void 0;null==r&&(r=t());var a=t(),l=this.s,c=n.s,u=this.DB-p(o[o.t-1]);u>0?(o.lShiftTo(u,a),s.lShiftTo(u,r)):(o.copyTo(a),s.copyTo(r));var d=a.t,h=a[d-1];if(0!=h){var f=h*(1<<this.F1)+(d>1?a[d-2]>>this.F2:0),m=this.FV/f,g=(1<<this.F1)/f,v=1<<this.F2,y=r.t,b=y-d,w=null==i?t():i;for(a.dlShiftTo(b,w),r.compareTo(w)>=0&&(r[r.t++]=1,r.subTo(w,r)),e.ONE.dlShiftTo(d,w),w.subTo(a,a);a.t<d;)a[a.t++]=0;for(;--b>=0;){var _=r[--y]==h?this.DM:Math.floor(r[y]*m+(r[y-1]+v)*g);if((r[y]+=a.am(0,_,r,b,0,d))<_)for(a.dlShiftTo(b,w),r.subTo(w,r);r[y]<--_;)r.subTo(w,r)}null!=i&&(r.drShiftTo(d,i),l!=c&&e.ZERO.subTo(i,i)),r.t=d,r.clamp(),u>0&&r.rShiftTo(u,r),0>l&&e.ZERO.subTo(r,r)}}}function x(n){var i=t();return this.abs().divRemTo(n,null,i),this.s<0&&i.compareTo(e.ZERO)>0&&n.subTo(i,i),i}function S(e){this.m=e}function T(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function E(e){return e}function D(e){e.divRemTo(this.m,null,e)}function N(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function A(e,t){e.squareTo(t),this.reduce(t)}function O(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function M(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function P(n){var i=t();return n.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),n.s<0&&i.compareTo(e.ZERO)>0&&this.m.subTo(i,i),i}function I(e){var n=t();return e.copyTo(n),this.reduce(n),n}function $(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function R(e,t){e.squareTo(t),this.reduce(t)}function L(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function j(){return 0==(this.t>0?1&this[0]:this.s)}function F(n,i){if(n>4294967295||1>n)return e.ONE;var r=t(),o=t(),s=i.convert(this),a=p(n)-1;for(s.copyTo(r);--a>=0;)if(i.sqrTo(r,o),(n&1<<a)>0)i.mulTo(o,s,r);else{var l=r;r=o,o=l}return i.revert(r)}function B(e,t){var n;return n=256>e||t.isEven()?new S(t):new M(t),this.exp(e,n)}function H(){var e=t();return this.copyTo(e),e}function U(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function z(){return 0==this.t?this.s:this[0]<<24>>24}function q(){return 0==this.t?this.s:this[0]<<16>>16}function V(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function W(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Y(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var n=this.chunkSize(e),i=Math.pow(e,n),r=a(i),o=t(),s=t(),l="";for(this.divRemTo(r,o,s);o.signum()>0;)l=(i+s.intValue()).toString(e).substr(1)+l,o.divRemTo(r,o,s);return s.intValue().toString(e)+l}function K(t,n){this.fromInt(0),null==n&&(n=10);for(var i=this.chunkSize(n),o=Math.pow(n,i),s=!1,a=0,l=0,c=0;c<t.length;++c){var u=r(t,c);0>u?"-"==t.charAt(c)&&0==this.signum()&&(s=!0):(l=n*l+u,++a>=i&&(this.dMultiply(o),this.dAddOffset(l,0),a=0,l=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(l,0)),s&&e.ZERO.subTo(this,this)}function G(t,n,i){if("number"==typeof n)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),it,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var r=new Array,o=7&t;r.length=(t>>3)+1,n.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}}function J(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-->0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)8>i?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,0>=i&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t}function Q(e){return 0==this.compareTo(e)}function X(e){return this.compareTo(e)<0?this:e}function Z(e){return this.compareTo(e)>0?this:e}function et(e,t,n){var i,r,o=Math.min(e.t,this.t);for(i=0;o>i;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=o;i<this.t;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<e.t;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function tt(e,t){return e&t}function nt(e){var n=t();return this.bitwiseTo(e,tt,n),n}function it(e,t){return e|t}function rt(e){var n=t();return this.bitwiseTo(e,it,n),n}function ot(e,t){return e^t}function st(e){var n=t();return this.bitwiseTo(e,ot,n),n}function at(e,t){return e&~t}function lt(e){var n=t();return this.bitwiseTo(e,at,n),n}function ct(){for(var e=t(),n=0;n<this.t;++n)e[n]=this.DM&~this[n];return e.t=this.t,e.s=~this.s,e}function ut(e){var n=t();return 0>e?this.rShiftTo(-e,n):this.lShiftTo(e,n),n}function dt(e){var n=t();return 0>e?this.lShiftTo(-e,n):this.rShiftTo(e,n),n}function ht(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ft(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+ht(this[e]);return this.s<0?this.t*this.DB:-1}function pt(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function mt(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=pt(this[n]^t);return e}function gt(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function vt(t,n){var i=e.ONE.shiftLeft(t);return this.bitwiseTo(i,n,i),i}function yt(e){return this.changeBit(e,it)}function bt(e){return this.changeBit(e,at)}function wt(e){return this.changeBit(e,ot)}function _t(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=0>i?-1:0,i>0?t[n++]=i:-1>i&&(t[n++]=this.DV+i),t.t=n,t.clamp()}function Ct(e){var n=t();return this.addTo(e,n),n}function kt(e){var n=t();return this.subTo(e,n),n}function xt(e){var n=t();return this.multiplyTo(e,n),n}function St(e){var n=t();return this.divRemTo(e,n,null),n}function Tt(e){var n=t();return this.divRemTo(e,null,n),n}function Et(e){var n=t(),i=t();return this.divRemTo(e,n,i),new Array(n,i)}function Dt(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Nt(e,t){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}function At(){}function Ot(e){return e}function Mt(e,t,n){e.multiplyTo(t,n)}function Pt(e,t){e.squareTo(t)}function It(e){return this.exp(e,new At)}function $t(e,t,n){var i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;var r;for(r=n.t-this.t;r>i;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);r>i;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()}function Rt(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)}function Lt(n){this.r2=t(),this.q3=t(),e.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function jt(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var n=t();return e.copyTo(n),this.reduce(n),n}function Ft(e){return e}function Bt(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ht(e,t){e.squareTo(t),this.reduce(t)}function Ut(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function zt(e,n){var i,r,o=e.bitLength(),s=a(1);if(0>=o)return s;i=18>o?1:48>o?3:144>o?4:768>o?5:6,r=8>o?new S(n):n.isEven()?new Lt(n):new M(n);var l=new Array,c=3,u=i-1,d=(1<<i)-1;if(l[1]=r.convert(this),i>1){var h=t();for(r.sqrTo(l[1],h);d>=c;)l[c]=t(),r.mulTo(h,l[c-2],l[c]),c+=2}var f,m,g=e.t-1,v=!0,y=t();for(o=p(e[g])-1;g>=0;){for(o>=u?f=e[g]>>o-u&d:(f=(e[g]&(1<<o+1)-1)<<u-o,g>0&&(f|=e[g-1]>>this.DB+o-u)),c=i;0==(1&f);)f>>=1,--c;if((o-=c)<0&&(o+=this.DB,--g),v)l[f].copyTo(s),v=!1;else{for(;c>1;)r.sqrTo(s,y),r.sqrTo(y,s),c-=2;c>0?r.sqrTo(s,y):(m=s,s=y,y=m),r.mulTo(y,l[f],s)}for(;g>=0&&0==(e[g]&1<<o);)r.sqrTo(s,y),m=s,s=y,y=m,--o<0&&(o=this.DB-1,--g)}return r.revert(s)}function qt(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var r=t.getLowestSetBit(),o=n.getLowestSetBit();if(0>o)return t;for(o>r&&(o=r),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Vt(e){if(0>=e)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n}function Wt(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var i=t.clone(),r=this.clone(),o=a(1),s=a(0),l=a(0),c=a(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),n?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),n?(l.isEven()&&c.isEven()||(l.addTo(this,l),c.subTo(t,c)),l.rShiftTo(1,l)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);i.compareTo(r)>=0?(i.subTo(r,i),n&&o.subTo(l,o),s.subTo(c,s)):(r.subTo(i,r),n&&l.subTo(o,l),c.subTo(s,c))}return 0!=r.compareTo(e.ONE)?e.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c}function Yt(e){var t,n=this.abs();if(1==n.t&&n[0]<=tn[tn.length-1]){for(t=0;t<tn.length;++t)if(n[0]==tn[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<tn.length;){for(var i=tn[t],r=t+1;r<tn.length&&nn>i;)i*=tn[r++];for(i=n.modInt(i);r>t;)if(i%tn[t++]==0)return!1}return n.millerRabin(e)}function Kt(n){var i=this.subtract(e.ONE),r=i.getLowestSetBit();if(0>=r)return!1;var o=i.shiftRight(r);n=n+1>>1,n>tn.length&&(n=tn.length);for(var s=t(),a=0;n>a;++a){s.fromInt(tn[a]);var l=s.modPow(o,this);if(0!=l.compareTo(e.ONE)&&0!=l.compareTo(i)){for(var c=1;c++<r&&0!=l.compareTo(i);)if(l=l.modPowInt(2,this),0==l.compareTo(e.ONE))return!1;if(0!=l.compareTo(i))return!1}}return!0}var Gt;e.prototype.am=n,Gt=28,e.prototype.DB=Gt,e.prototype.DM=(1<<Gt)-1,e.prototype.DV=1<<Gt;var Jt=52;e.prototype.FV=Math.pow(2,Jt),e.prototype.F1=Jt-Gt,e.prototype.F2=2*Gt-Jt;var Qt,Xt,Zt="0123456789abcdefghijklmnopqrstuvwxyz",en=new Array;for(Qt="0".charCodeAt(0),Xt=0;9>=Xt;++Xt)en[Qt++]=Xt;for(Qt="a".charCodeAt(0),Xt=10;36>Xt;++Xt)en[Qt++]=Xt;for(Qt="A".charCodeAt(0),Xt=10;36>Xt;++Xt)en[Qt++]=Xt;S.prototype.convert=T,S.prototype.revert=E,S.prototype.reduce=D,S.prototype.mulTo=N,S.prototype.sqrTo=A,M.prototype.convert=P,M.prototype.revert=I,M.prototype.reduce=$,M.prototype.mulTo=L,M.prototype.sqrTo=R,e.prototype.copyTo=o,e.prototype.fromInt=s,e.prototype.fromString=l,e.prototype.clamp=c,e.prototype.dlShiftTo=g,e.prototype.drShiftTo=v,e.prototype.lShiftTo=y,e.prototype.rShiftTo=b,e.prototype.subTo=w,e.prototype.multiplyTo=_,e.prototype.squareTo=C,e.prototype.divRemTo=k,e.prototype.invDigit=O,e.prototype.isEven=j,e.prototype.exp=F,e.prototype.toString=u,e.prototype.negate=d,e.prototype.abs=h,e.prototype.compareTo=f,e.prototype.bitLength=m,e.prototype.mod=x,e.prototype.modPowInt=B,e.ZERO=a(0),e.ONE=a(1),At.prototype.convert=Ot,At.prototype.revert=Ot,At.prototype.mulTo=Mt,At.prototype.sqrTo=Pt,Lt.prototype.convert=jt,Lt.prototype.revert=Ft,Lt.prototype.reduce=Bt,Lt.prototype.mulTo=Ut,Lt.prototype.sqrTo=Ht;var tn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],nn=(1<<26)/tn[tn.length-1];return e.prototype.chunkSize=V,e.prototype.toRadix=Y,e.prototype.fromRadix=K,e.prototype.fromNumber=G,e.prototype.bitwiseTo=et,e.prototype.changeBit=vt,e.prototype.addTo=_t,e.prototype.dMultiply=Dt,e.prototype.dAddOffset=Nt,e.prototype.multiplyLowerTo=$t,e.prototype.multiplyUpperTo=Rt,e.prototype.modInt=Vt,e.prototype.millerRabin=Kt,e.prototype.clone=H,e.prototype.intValue=U,e.prototype.byteValue=z,e.prototype.shortValue=q,e.prototype.signum=W,e.prototype.toByteArray=J,e.prototype.equals=Q,e.prototype.min=X,e.prototype.max=Z,e.prototype.and=nt,e.prototype.or=rt,e.prototype.xor=st,e.prototype.andNot=lt,e.prototype.not=ct,e.prototype.shiftLeft=ut,e.prototype.shiftRight=dt,e.prototype.getLowestSetBit=ft,e.prototype.bitCount=mt,e.prototype.testBit=gt,e.prototype.setBit=yt,e.prototype.clearBit=bt,e.prototype.flipBit=wt,e.prototype.add=Ct,e.prototype.subtract=kt,e.prototype.multiply=xt,e.prototype.divide=St,e.prototype.remainder=Tt,e.prototype.divideAndRemainder=Et,e.prototype.modPow=zt,e.prototype.modInverse=Wt,e.prototype.pow=It,e.prototype.gcd=qt,e.prototype.isProbablePrime=Yt,e}()}).call(this),function(){n=function(){function e(e){function t(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}function i(e,t){return e>>>t}function r(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function s(e){return n(e,2)^n(e,13)^n(e,22)}function a(e){return n(e,6)^n(e,11)^n(e,25)}function l(e){return n(e,7)^n(e,18)^i(e,3)}function c(e){return n(e,17)^n(e,19)^i(e,10)}function u(e,n){var i,u,d,h,f,p,m,g,v,y,b,w,_=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),C=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),k=new Array(64);e[n>>5]|=128<<24-n%32,e[(n+64>>9<<4)+15]=n;for(var v=0;v<e.length;v+=16){i=C[0],u=C[1],d=C[2],h=C[3],f=C[4],p=C[5],m=C[6],g=C[7];for(var y=0;64>y;y++)k[y]=16>y?e[y+v]:t(t(t(c(k[y-2]),k[y-7]),l(k[y-15])),k[y-16]),b=t(t(t(t(g,a(f)),r(f,p,m)),_[y]),k[y]),w=t(s(i),o(i,u,d)),g=m,m=p,p=f,f=t(h,b),h=d,d=u,u=i,i=t(b,w);C[0]=t(i,C[0]),C[1]=t(u,C[1]),C[2]=t(d,C[2]),C[3]=t(h,C[3]),C[4]=t(f,C[4]),C[5]=t(p,C[5]),C[6]=t(m,C[6]),C[7]=t(g,C[7])}return C}function d(e){for(var t=Array(),n=(1<<p)-1,i=0;i<e.length*p;i+=p)t[i>>5]|=(e.charCodeAt(i/p)&n)<<24-i%32;return t}function h(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}function f(e){for(var t=m?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<4*e.length;i++)n+=t.charAt(e[i>>2]>>8*(3-i%4)+4&15)+t.charAt(e[i>>2]>>8*(3-i%4)&15);return n}var p=8,m=0;return e=h(e),f(u(d(e),e.length*p))}return e}()}.call(this),function(){e={},e.generateVerifier=function(e,n){var r=s(n),o=n&&n.identity||i.id(),a=n&&n.salt||i.id(),l=r.hash(a+r.hash(o+":"+e)),c=new t(l,16),u=r.g.modPow(c,r.N);return{identity:o,salt:a,verifier:u.toString(16)}},e.matchVerifier={identity:String,salt:String,verifier:String},e.Client=function(e,n){var i=this;i.params=s(n),i.password=e;var r,o,l=i.params.N,c=i.params.g;if(n&&n.a){if("string"==typeof n.a)r=new t(n.a,16);else{if(!(n.a instanceof t))throw new Error("Invalid parameter: a");r=n.a}if(o=c.modPow(r,l),0===o.mod(l))throw new Error("Invalid parameter: a: A mod N == 0.")}else for(;!o||0===o.mod(l);)r=a(),o=c.modPow(r,l);i.a=r,i.A=o,i.Astr=o.toString(16)},e.Client.prototype.startExchange=function(){var e=this;return{A:e.Astr}},e.Client.prototype.respondToChallenge=function(e){var n=this,i=n.params.N,r=n.params.g,o=n.params.k,s=n.params.hash;if(n.identity=e.identity,n.salt=e.salt,n.Bstr=e.B,n.B=new t(n.Bstr,16),0===n.B.mod(i))throw new Error("Server sent invalid key: B mod N == 0.");var a=new t(s(n.Astr+n.Bstr),16),l=new t(s(n.salt+s(n.identity+":"+n.password)),16),c=o.multiply(r.modPow(l,i)),u=n.a.add(a.multiply(l)),d=n.B.subtract(c).modPow(u,i),h=s(n.Astr+n.Bstr+d.toString(16)),f=s(n.Astr+h+d.toString(16));return n.S=d,n.HAMK=f,{M:h}},e.Client.prototype.verifyConfirmation=function(e){var t=this;return t.HAMK&&e.HAMK===t.HAMK},e.Server=function(e,n){var i=this;i.params=s(n),i.verifier=e;var r,o,l=i.params.N,c=i.params.g,u=i.params.k,d=new t(i.verifier.verifier,16);if(n&&n.b){if("string"==typeof n.b)r=new t(n.b,16);else{if(!(n.b instanceof t))throw new Error("Invalid parameter: b");r=n.b}if(o=u.multiply(d).add(c.modPow(r,l)).mod(l),0===o.mod(l))throw new Error("Invalid parameter: b: B mod N == 0.")}else for(;!o||0===o.mod(l);)r=a(),o=u.multiply(d).add(c.modPow(r,l)).mod(l);i.b=r,i.B=o,i.Bstr=o.toString(16)},e.Server.prototype.issueChallenge=function(e){var n=this;if(n.Astr=e.A,n.A=new t(n.Astr,16),0===n.A.mod(n.params.N))throw new Error("Client sent invalid key: A mod N == 0.");var i=n.params.N,r=n.params.hash,o=new t(r(n.Astr+n.Bstr),16),s=new t(n.verifier.verifier,16),a=n.A.multiply(s.modPow(o,i));return n.S=a.modPow(n.b,i),n.M=r(n.Astr+n.Bstr+n.S.toString(16)),n.HAMK=r(n.Astr+n.M+n.S.toString(16)),{identity:n.verifier.identity,salt:n.verifier.salt,B:n.Bstr}},e.Server.prototype.verifyResponse=function(e){var t=this;return e.M!==t.M?null:{HAMK:t.HAMK}};var o={hash:function(e){return n(e).toLowerCase()},N:new t("EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",16),g:new t("2")};o.k=new t(o.hash(o.N.toString(16)+o.g.toString(16)),16);var s=function(e){if(!e)return o;var n=r.extend({},o);return r.each(["N","g","k"],function(i){if(e[i])if("string"==typeof e[i])n[i]=new t(e[i],16);else{if(!(e[i]instanceof t))throw new Error("Invalid parameter: "+i);n[i]=e[i]}}),e.hash&&(n.hash=function(t){return e.hash(t).toLowerCase()}),!e.k&&(e.N||e.g||e.hash)&&(n.k=n.hash(n.N.toString(16)+n.g.toString(16))),n},a=function(){return new t(i.hexString(36),16)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.srp={SRP:e}}(),function(){{var e=Package.meteor.Meteor,t=Package["accounts-base"].Accounts,n=Package.srp.SRP,i=Package.underscore._;Package.livedata.DDP}(function(){e.loginWithPassword=function(i,r,o){var s=new n.Client(r),a=s.startExchange();"string"==typeof i&&(i=-1===i.indexOf("@")?{username:i}:{email:i}),a.user=i,t._setLoggingIn(!0),e.apply("beginPasswordExchange",[a],function(e,n){if(e||!n)return t._setLoggingIn(!1),e=e||new Error("No result from call to beginPasswordExchange"),o&&o(e),void 0;var i=s.respondToChallenge(n);t.callLoginMethod({methodArguments:[{srp:i}],validateResult:function(e){if(!s.verifyConfirmation({HAMK:e.HAMK}))throw new Error("Server is cheating!")},userCallback:o})})},t.createUser=function(e,r){if(e=i.clone(e),!e.password)throw new Error("Must set options.password");var o=n.generateVerifier(e.password);delete e.password,e.srp=o,t.callLoginMethod({methodName:"createUser",methodArguments:[e],userCallback:r})},t.changePassword=function(t,i,r){if(!e.user())return r&&r(new Error("Must be logged in to change password.")),void 0;
var o=n.generateVerifier(i);if(t){var s=new n.Client(t),a=s.startExchange();a.user={id:e.user()._id},e.apply("beginPasswordExchange",[a],function(t,n){if(t||!n)return r&&r(t||new Error("No result from call to beginPasswordExchange")),void 0;var i=s.respondToChallenge(n);i.srp=o,e.apply("changePassword",[i],function(e,t){e||!t?r&&r(e||new Error("No result from changePassword.")):s.verifyConfirmation(t)?r&&r():r&&r(new Error("Old password verification failed."))})})}else e.apply("changePassword",[{srp:o}],function(e,t){e||!t?r&&r(e||new Error("No result from changePassword.")):r&&r()})},t.forgotPassword=function(t,n){if(!t.email)throw new Error("Must pass options.email");e.call("forgotPassword",t,n)},t.resetPassword=function(e,i,r){if(!e)throw new Error("Need to pass token");if(!i)throw new Error("Need to pass newPassword");var o=n.generateVerifier(i);t.callLoginMethod({methodName:"resetPassword",methodArguments:[e,o],userCallback:r})},t.verifyEmail=function(e,n){if(!e)throw new Error("Need to pass token");t.callLoginMethod({methodName:"verifyEmail",methodArguments:[e],userCallback:n})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-password"]={}}(),function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=(Package.random.Random,Package.check.check,Package.check.Match,Package["accounts-base"].Accounts);(function(){n.oauth={};var i={};n.oauth.registerService=function(n){if(t.has(i,n))throw new Error("Duplicate service: "+n);i[n]=!0,e.server&&e.users._ensureIndex("services."+n+".id",{unique:1,sparse:1})},n.oauth.serviceNames=function(){return t.keys(i)}}).call(this),function(){n.oauth.tryLoginAfterPopupClosed=function(t,i){n.callLoginMethod({methodArguments:[{oauth:{credentialToken:t}}],userCallback:i&&function(t){t&&t instanceof e.Error&&t.error===n.LoginCancelledError.numericError?i(new n.LoginCancelledError(t.details)):i(t)}})},n.oauth.credentialRequestCompleteHandler=function(e){return function(t){t&&t instanceof Error?e&&e(t):n.oauth.tryLoginAfterPopupClosed(t,e)}}}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-oauth"]={}}(),function(){{var e;Package.meteor.Meteor}(function(){e={},e.initiateLogin=function(e,n,i,r){var o=t(n,r&&r.width||650,r&&r.height||331),s=setInterval(function(){try{var t=o.closed||void 0===o.closed}catch(n){return}t&&(clearInterval(s),i(e))},100)};var t=function(e,t,n){var i="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,r="undefined"!=typeof window.screenY?window.screenY:window.screenTop,o="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,s="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,a=i+(o-t)/2,l=r+(s-n)/2,c="width="+t+",height="+n+",left="+a+",top="+l+",scrollbars=yes",u=window.open(e,"Login",c);return u.focus&&u.focus(),u}}).call(this),"undefined"==typeof Package&&(Package={}),Package.oauth={Oauth:e}}(),function(){Package.meteor.Meteor,Package["service-configuration"].ServiceConfiguration,Package.oauth.Oauth;"undefined"==typeof Package&&(Package={}),Package.oauth2={}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.spark.Spark,i=Package.handlebars.Handlebars;(function(){e={};var r={},o=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e},s=function(){s=function(){};var e=i._default_helpers.each;i._default_helpers.each=function(i,r){var s=function(){return!i||i instanceof Array||i instanceof Object&&"observeChanges"in i};if(!s())throw new Error("{{#each}} only accepts arrays, cursors, or falsey values. You passed: "+i);return i&&"observeChanges"in i?n.list(i,function(e){return n.labelBranch(e&&e._id&&o(e._id)||n.UNIQUE_LABEL,function(){var i=n.isolate(t.bind(r.fn,null,e));return n.setDataContext(e,i)})},function(){return r.inverse?n.isolate(r.inverse):""}):e.call(this,i,r)},t.extend(i._default_helpers,{isolate:function(e){var t=this;return n.isolate(function(){return e.fn(t)})},constant:function(e){var t=this;return n.createLandmark({constant:!0},function(){return e.fn(t)})}})},a={},l=function(e){var t=a[e.id]||(a[e.id]={find:function(t){if(!e.hasDom())throw new Error("Template not in DOM");return e.find(t)},findAll:function(t){if(!e.hasDom())throw new Error("Template not in DOM");return e.findAll(t)}});return t.firstNode=e.hasDom()?e.firstNode():null,t.lastNode=e.hasDom()?e.lastNode():null,t},c={_tmpl_data:null,events:function(e){var n=this._tmpl_data.events=this._tmpl_data.events||{};t.each(e,function(e,t){n[t]=n[t]||[],n[t].push(e)})},preserve:function(e){var n=this._tmpl_data.preserve=this._tmpl_data.preserve||{};t.isArray(e)?t.each(e,function(e){n[e]=!0}):t.extend(n,e)},helpers:function(e){var t=this._tmpl_data.helpers=this._tmpl_data.helpers||{};for(var n in e)t[n]=e[n]}};e.__define__=function(o,u){if(s(),"__define__"===o)throw new Error("Sorry, '__define__' is a special name and cannot be used as the name of a template");var d=function(i){var s=o&&e[o]||{},h=s._tmpl_data||{},f=n.labelBranch("Template."+o,function(){var e=n.createLandmark({preserve:h.preserve||{},created:function(){var e=l(this);e.data=i,s.created&&s.created.call(e)},rendered:function(){var e=l(this);e.data=i,s.rendered&&s.rendered.call(e)},destroyed:function(){s.destroyed&&s.destroyed.call(l(this)),delete a[this.id]}},function(){var e=n.isolate(function(){return u(i,{helpers:t.extend({},d,h.helpers||{}),partials:r,name:o})}),a=function(e){var n={};return t.each(e,function(e,i){"function"==typeof e&&(e=[e]),n[i]=t.map(e,function(e){return function(t,n){return e.call(this,t,l(n))}})}),n},f=s.events!==c.events?s.events:h.events;return s.events&&(e=n.attachEvents(a(f),e)),e});return e=n.setDataContext(i,e)});return f};if(t.extend(d,i.helpers),o){if(e[o])throw new Error("There are multiple templates named '"+o+"'. Each template needs a unique name.");e[o]=d,t.extend(d,c),d._tmpl_data={},r[o]=d}return d}}).call(this),"undefined"==typeof Package&&(Package={}),Package.templating={Template:e}}(),function(){{var e,t=Package.meteor.Meteor,n=Package.oauth.Oauth,i=Package.underscore._,r=Package.templating.Template,o=Package.random.Random,s=Package["service-configuration"].ServiceConfiguration;Package.spark.Spark}(function(){r.__define__("configureLoginServiceDialogForGithub",Package.handlebars.Handlebars.json_ast_to_func(['<p>\n    First, you\'ll need to get a Github Client ID. Follow these steps:\n  </p>\n  <ol>\n    <li>\n      Visit <a href="https://github.com/settings/applications/new" target="blank">https://github.com/settings/applications/new</a>\n    </li>\n    <li>\n      Set Homepage URL to: <span class="url">',["{",[[0,"siteUrl"]]],'</span>\n    </li>\n    <li>\n      Set Authorization callback URL to: <span class="url">',["{",[[0,"siteUrl"]]],"_oauth/github?close</span>\n    </li>\n  </ol>"]))}).call(this),function(){r.configureLoginServiceDialogForGithub.siteUrl=function(){return t.absoluteUrl()},r.configureLoginServiceDialogForGithub.fields=function(){return[{property:"clientId",label:"Client ID"},{property:"secret",label:"Client Secret"}]}}.call(this),function(){e={},e.requestCredential=function(e,r){r||"function"!=typeof e||(r=e,e={});var a=s.configurations.findOne({service:"github"});if(!a)return r&&r(new s.ConfigError("Service not configured")),void 0;var l=o.id(),c=e&&e.requestPermissions||[],u=i.map(c,encodeURIComponent).join("+"),d="https://github.com/login/oauth/authorize?client_id="+a.clientId+"&scope="+u+"&redirect_uri="+t.absoluteUrl("_oauth/github?close")+"&state="+l;n.initiateLogin(l,d,r,{width:900,height:450})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.github={Github:e}}(),function(){var e=Package.meteor.Meteor,t=Package["accounts-base"].Accounts,n=Package.github.Github;(function(){t.oauth.registerService("github"),e.isClient?e.loginWithGithub=function(e,i){i||"function"!=typeof e||(i=e,e=null);var r=t.oauth.credentialRequestCompleteHandler(i);n.requestCredential(e,r)}:t.addAutopublishFields({forLoggedInUser:["services.github"],forOtherUsers:["services.github.username"]})}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-github"]={}}(),function(){var e,t,n=Package.meteor.Meteor,i=Package.underscore._;(function(){!function(n,i){function r(e,t){return null===e?"null"===t:void 0===e?"undefined"===t:e.is&&e instanceof c?"element"===t:7<Object.prototype.toString.call(e).toLowerCase().indexOf(t)}function o(e){var t,n,i,s,a,l,c,h;if(e instanceof o)return e;for(r(e,"array")||(e=String(e).replace(/\s/g,"").toLowerCase().match(/(?:\+,|[^,])+/g)),t=0,n=e.length;n>t;++t){for(r(e[t],"array")||(e[t]=String(e[t]).match(/(?:\+\/|[^\/])+/g)),l=[],i=e[t].length;i--;){for(c=e[t][i],a={jwertyCombo:String(c),shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1},r(c,"array")||(c=String(c).toLowerCase().match(/(?:(?:[^\+])+|\+\+|^\+$)/g)),s=c.length;s--;)"++"===c[s]&&(c[s]="+"),c[s]in d.mods?a[u[d.mods[c[s]]]]=!0:c[s]in d.keys?a.keyCode=d.keys[c[s]]:h=c[s].match(/^\[([^-]+\-?[^-]*)-([^-]+\-?[^-]*)\]$/);if(r(a.keyCode,"undefined"))if(h&&h[1]in d.keys&&h[2]in d.keys){for(h[2]=d.keys[h[2]],h[1]=d.keys[h[1]],s=h[1];s<h[2];++s)l.push({altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,ctrlKey:a.ctrlKey,keyCode:s,jwertyCombo:String(c)});a.keyCode=s}else a.keyCode=0;l.push(a)}this[t]=l}return this.length=t,this}var s,a,l=n.document,c=n.jQuery||n.Zepto||n.ender||l;c===l?(s=function(e,t){return e?c.querySelector(e,t||c):c},a=function(e,t){e.addEventListener("keydown",t,!1)},e=function(e,t){var n,i=document.createEvent("Event");i.initEvent("keydown",!0,!0);for(n in t)i[n]=t[n];return(e||c).dispatchEvent(i)}):(s=function(e,t){return c(e||l,t)},a=function(e,t){c(e).bind("keydown.jwerty",t)},e=function(e,t){c(e||l).trigger(c.Event("keydown",t))});var u={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"},d={mods:{"":16,shift:16,"":17,ctrl:17,"":18,alt:18,option:18,"":91,meta:91,cmd:91,"super":91,win:91},keys:{"":8,backspace:8,"":9,"":9,tab:9,"":13,"return":13,enter:13,"":13,pause:19,"pause-break":19,"":20,caps:20,"caps-lock":20,"":27,escape:27,esc:27,space:32,"":33,pgup:33,"page-up":33,"":34,pgdown:34,"page-down":34,"":35,end:35,"":36,home:36,ins:45,insert:45,del:46,"delete":46,"":37,left:37,"arrow-left":37,"":38,up:38,"arrow-up":38,"":39,right:39,"arrow-right":39,"":40,down:40,"arrow-down":40,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,";":186,semicolon:186,"=":187,equals:187,",":188,comma:188,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,"'":222,quote:222,apostraphe:222}},h=95;for(t=0;106>++h;)d.keys["num-"+t]=h,++t;for(h=47,t=0;58>++h;)d.keys[t]=h,++t;for(h=111,t=1;136>++h;)d.keys["f"+t]=h,++t;for(var h=64;91>++h;)d.keys[String.fromCharCode(h).toLowerCase()]=h;var f=i.jwerty={event:function(e,t,n){if(r(t,"boolean")){var i=t;t=function(){return i}}e=new o(e);var s,a,l=0,c=e.length-1;return function(i){(a=f.is(e,i,l))?c>l?++l:(s=t.call(n||this,i,a),!1===s&&i.preventDefault(),l=0):l=f.is(e,i)?1:0}},is:function(e,t,n){e=new o(e),e=e[n||0],t=t.originalEvent||t,n=e.length;for(var i=!1;n--;){var r,i=e[n].jwertyCombo;for(r in e[n])"jwertyCombo"!==r&&t[r]!=e[n][r]&&(i=!1);if(!1!==i)break}return i},key:function(e,t,i,o,l){var c=r(i,"element")||r(i,"string")?i:o,u=c===i?n:i;i=c===i?o:l,a(r(c,"element")?c:s(c,i),f.event(e,t,u))},fire:function(t,n,i,a){t=new o(t),a=r(i,"number")?i:a,e(r(n,"element")?n:s(n,i),t[a||0][0])},KEYS:d}}(this,"undefined"!=typeof module&&module.exports?module.exports:this)}).call(this),function(){!function(){$(document).ready(function(){var e=function(){this._body=document.body,this._bindings={}};e.prototype.unfancy=function(e){return e.replace(/[\+]+/g,"")},e.prototype.addOne=function(e,t,n,i){i="string"!=typeof i?"keydown":i;var r="string"!=typeof n?this._body:$(n),o=this.unfancy(i+"."+e);n=this._body===r?"body":n;var s=i+"/"+e+"/"+n;"string"==typeof e&&"function"==typeof t&&($(r).bind(o,jwerty.event(e,t)),this._bindings[s]={key:e,func:t,context:n,contextNode:r,event:i})},e.prototype.add=function(e,t,n){var r=this;i.isObject(e)&&i.each(e,function(e,i){r.addOne(i,e,t,n)})},e.prototype.isBinded=function(e,t,n){var r="string"!=typeof n?"keydown":n,o="string"!=typeof t?this._body:$(t),s=r+"/"+e+"/"+(this._body===o?"body":t),a=!1;return"undefined"==typeof t&&"undefined"==typeof n?a=i.has(this._bindings,s):i.find(this._bindings,function(e,t){e.contextNode.selector===o.selector&&e.event===r&&t===s&&(a=!0)}),a},e.prototype.removeOne=function(e,t,n){var r=!1,o="string"!=typeof n?"keydown":n,s="string"!=typeof t?this._body:$(t),a=this.unfancy(o+"."+e),o=o+"/"+e+"/"+(this._body===s?"body":t);return this.isBinded(e,t,n)&&($(s).unbind(a),this._bindings=i.omit(this._bindings,o),r=!0),r},e.prototype.remove=function(e,t,n){var r=this;i.isArray(e)&&i.each(e,function(e){r.removeOne(e,t,n)})},e.prototype.removeAll=function(){var e=this;i.each(this._bindings,function(t){e.removeOne(t.key,t.context,t.event)})},e.prototype.replace=function(e,t,n,i){var r=!1;return this.isBinded(e,n,i)&&(this.removeOne(e,n,i),this.addOne(e,t,n,i),r=!0),r},n.Keybindings=new e})}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.keybindings={}}(),function(){{var e,t=Package.meteor.Meteor,n=Package.oauth.Oauth,i=Package.underscore._,r=Package["service-configuration"].ServiceConfiguration,o=Package.random.Random,s=Package.templating.Template;Package.spark.Spark}(function(){s.__define__("configureLoginServiceDialogForGoogle",Package.handlebars.Handlebars.json_ast_to_func(['<p>\n    First, you\'ll need to get a Google Client ID. Follow these steps:\n  </p>\n  <ol>\n    <li>\n      Visit <a href="https://code.google.com/apis/console/" target="blank">https://code.google.com/apis/console/</a>\n    </li>\n    <li>\n      If necessary, "Create Project"\n    <li>\n      Click "APIs &amp; auth" and "Registered apps" on the left\n    </li>\n    <li>\n      Click the "Register App" button\n    </li>\n    <li>\n      Choose "Web application" as the type\n    </li>\n    <li>\n      Click "Register"\n    </li>\n    <li>\n      Expand the "OAuth 2.0 Client ID section"\n    </li>\n    <li>\n      Set Web Origin to: <span class="url">',["{",[[0,"siteUrl"]]],'</span>\n    </li>\n    <li>\n      Set Redirect URI to: <span class="url">',["{",[[0,"siteUrl"]]],'_oauth/google?close</span>\n    </li>\n    <li>\n      Click "Generate"\n    </li>\n  </ol>']))}).call(this),function(){s.configureLoginServiceDialogForGoogle.siteUrl=function(){return t.absoluteUrl()},s.configureLoginServiceDialogForGoogle.fields=function(){return[{property:"clientId",label:"Client ID"},{property:"secret",label:"Client secret"}]}}.call(this),function(){e={},e.requestCredential=function(e,s){s||"function"!=typeof e?e||(e={}):(s=e,e={});var a=r.configurations.findOne({service:"google"});if(!a)return s&&s(new r.ConfigError("Service not configured")),void 0;var l=o.id(),c=["https://www.googleapis.com/auth/userinfo.profile"],u=["https://www.googleapis.com/auth/userinfo.email"];e.requestPermissions&&(u=e.requestPermissions),u=i.union(u,c);var d=i.map(u,encodeURIComponent).join("+"),h=e.requestOfflineToken?"offline":"online",f=e.forceApprovalPrompt?"force":"auto",p="https://accounts.google.com/o/oauth2/auth?response_type=code&client_id="+a.clientId+"&scope="+d+"&redirect_uri="+t.absoluteUrl("_oauth/google?close")+"&state="+l+"&access_type="+h+"&approval_prompt="+f;"string"==typeof Accounts._options.restrictCreationByEmailDomain&&(p+="&hd="+encodeURIComponent(Accounts._options.restrictCreationByEmailDomain)),n.initiateLogin(l,p,s,{height:406})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.google={Google:e}}(),function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=(Package.random.Random,Package["accounts-base"].Accounts),i=Package.google.Google;(function(){n.oauth.registerService("google"),e.isClient?e.loginWithGoogle=function(e,t){t||"function"!=typeof e||(t=e,e=null);var r=n.oauth.credentialRequestCompleteHandler(t);i.requestCredential(e,r)}:n.addAutopublishFields({forLoggedInUser:t.map(i.whitelistedFields.concat(["accessToken","expiresAt"]),function(e){return"services.google."+e}),forOtherUsers:t.map(t.without(i.whitelistedFields,"email","verified_email"),function(e){return"services.google."+e})})}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-google"]={}}(),function(){{var e;Package.meteor.Meteor}"undefined"==typeof Package&&(Package={}),Package.npm={Async:e}}(),function(){var e,t,n=Package.meteor.Meteor;(function(){e={},e.pageview=function(){console.log("Analytics code is not loaded yet.")},e.event=function(){console.log("Analytics code is not loaded yet.")},t=function(e,t,n,i,r,o,s){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,o=t.createElement(n),s=t.getElementsByTagName(n)[0],o.async=1,o.src=i,s.parentNode.insertBefore(o,s)},n.settings&&void 0!==n.settings.public&&void 0!==n.settings.public.ga&&void 0!==n.settings.public.ga.account?(t(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",n.settings.public.ga.account),e.pageview=function(e){e||(e=window.location.pathname),ga("send","pageview",e)},e.event=function(e,t,n,i){ga("send","event",e,t,n,i)}):console.log("public.ga.account has not been set in your settings.json file.")}).call(this),"undefined"==typeof Package&&(Package={}),Package.GAnalytics={GAnalytics:e}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.coffeescript={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=Package.deps.Deps,r=Package.ejson.EJSON;(function(){var o=function(e){return void 0===e?"undefined":r.stringify(e)},s=function(e){return void 0===e||"undefined"===e?void 0:r.parse(e)};e=function(e){this.keys=e||{},this.keyDeps={},this.keyValueDeps={}},n.extend(e.prototype,{set:function(e,t){var i=this;t=o(t);var r="undefined";if(n.has(i.keys,e)&&(r=i.keys[e]),t!==r){i.keys[e]=t;var s=function(e){e&&e.changed()};s(i.keyDeps[e]),i.keyValueDeps[e]&&(s(i.keyValueDeps[e][r]),s(i.keyValueDeps[e][t]))}},setDefault:function(e,t){var n=this;void 0===n.keys[e]&&n.set(e,t)},get:function(e){var t=this;return t._ensureKey(e),t.keyDeps[e].depend(),s(t.keys[e])},equals:function(e,a){var l=this,c=Package["mongo-livedata"]&&t.Collection.ObjectID;if(!("string"==typeof a||"number"==typeof a||"boolean"==typeof a||"undefined"==typeof a||a instanceof Date||c&&a instanceof c||null===a))throw new Error("ReactiveDict.equals: value must be scalar");var u=o(a);if(i.active){l._ensureKey(e),n.has(l.keyValueDeps[e],u)||(l.keyValueDeps[e][u]=new i.Dependency);var d=l.keyValueDeps[e][u].depend();d&&i.onInvalidate(function(){l.keyValueDeps[e][u].hasDependents()||delete l.keyValueDeps[e][u]})}var h=void 0;return n.has(l.keys,e)&&(h=s(l.keys[e])),r.equals(h,a)},_ensureKey:function(e){var t=this;e in t.keyDeps||(t.keyDeps[e]=new i.Dependency,t.keyValueDeps[e]={})},getMigrationData:function(){return this.keys}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-dict"]={ReactiveDict:e}}(),function(){var e,t,n,i,r,o,s,a,l,c,u,d,h,f=Package.meteor.Meteor,p=Package["reactive-dict"].ReactiveDict,m=Package.deps.Deps,g=Package.underscore._,v=Package.ejson.EJSON,y=Package.templating.Template,b=Package.handlebars.Handlebars,w=Package.spark.Spark;(function(){r={},r.global=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:null},r.resolveValue=function(e){var t,n,i=r.global();if(g.isString(e)){t=e.split("."),n=i;for(var o=0;o<t.length;o++)if(n=n[t[o]],!n)return void 0}else n=e;return n},r.hasOwnProperty=function(e,t){var n={}.hasOwnProperty;return n.call(e,t)},r.inherits=function(e,t){function n(){this.constructor=e}if("[object Function]"!==r.typeOf(e))throw new Error("First parameter to Utils.inherits must be a function");if("[object Function]"!==r.typeOf(t))throw new Error("Second parameter to Utils.inherits must be a function");for(var i in t)r.hasOwnProperty(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r.toArray=function(e){return e?"[object Array]"!==r.typeOf(e)?[e]:e:[]},r.typeOf=function(e){return e&&e.typeName?e.typeName:Object.prototype.toString.call(e)},r.extend=function(e,t,n){return 1===arguments.length?t=e:(t=t||{},t.extend=e),r.create(t,{onBeforeExtendPrototype:n})},r.create=function(e,t){var n,i;t=t||{},e=e||{},n=r.hasOwnProperty(e,"constructor")?e.constructor:function(){return n.__super__&&n.__super__.constructor?n.__super__.constructor.apply(this,arguments):void 0},i=e.extend,e.extend&&delete e.extend;var o=function(e,t,n){r.inherits(e,r.resolveValue(t)),n&&g.extend(e.prototype,n)};return i&&o(n,i),t.onBeforeExtendPrototype&&t.onBeforeExtendPrototype.call(n,e),g.extend(n.prototype,e),n},r.assert=function(e,t){if(!e)throw new Error(t)},r.warn=function(e,t){e||console&&console.warn&&console.warn(t)},r.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1,e.length)},r.classify=function(e){var t=/_|-|\./;return g.map(e.split(t),function(e){return r.capitalize(e)}).join("")},r.pick=function(){for(var e,t=g.toArray(arguments),n=0;n<t.length;n++)if(e=t[n],"undefined"!=typeof e&&null!==e)return e;return null}}).call(this),function(){t=function(e,t,n){var i;r.assert(e instanceof s),r.assert(g.isString(t),"Route constructor requires a name as the second parameter"),g.isFunction(n)&&(n={handler:n}),n=this.options=n||{},i=n.path||"/"+t,this.router=e,this.originalPath=i,g.isString(this.originalPath)&&"/"!==this.originalPath.charAt(0)&&(this.originalPath="/"+this.originalPath),this.name=t,this.where=n.where||"client",this.controller=n.controller,this.isReactive="undefined"!=typeof n.reactive?n.reactive:!0,this.compile()},t.prototype={constructor:t,compile:function(){var e,t=this,n=t.options;return this.keys=[],t.originalPath instanceof RegExp?t.re=t.originalPath:(e=t.originalPath.replace(/(.)\/$/,"$1").concat(n.strict?"":"/?").replace(/\/\(/g,"(?:/").replace(/#/,"/?#").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,i,r,o,s){return t.keys.push({name:r,optional:!!s}),n=n||"",""+(s?"":n)+"(?:"+(s?n:"")+(i||"")+(o||i&&"([^/.]+?)"||"([^/]+?)")+")"+(s||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),t.re=new RegExp("^"+e+"$",n.sensitive?"":"i")),this},params:function(e){if(!e)return null;var t,n,i,r=[],o=this.exec(e),s=this.keys;if(!o)throw new Error('The route named "'+this.name+'" does not match the path "'+e+'"');for(var a=1,l=o.length;l>a;++a)n=s[a-1],i="string"==typeof o[a]?decodeURIComponent(o[a]):o[a],n?r[n.name]=void 0!==r[n.name]?r[n.name]:i:r.push(i);return e=decodeURI(e),t=e.split("?")[1],t&&(t=t.split("#")[0]),r.hash=e.split("#")[1],t&&g.each(t.split("&"),function(e){c=e.split("="),r[c[0]]=decodeURIComponent(c[1])}),r},normalizePath:function(e){var t=f.absoluteUrl();e=e.replace(t,"");var n=e.indexOf("?");e=~n?e.slice(0,n):e;var i=e.indexOf("#");return e=~i?e.slice(0,i):e,"/"!==e.charAt(0)&&(e="/"+e),e},test:function(e){return this.re.test(this.normalizePath(e))},exec:function(e){return this.re.exec(this.normalizePath(e))},resolve:function(e,t){var n,i,r,o,s=0,a=this.originalPath,l=!1;if(t=t||{},e=e||[],o=t.query,r=t.hash,a instanceof RegExp)throw new Error("Cannot currently resolve a regular expression path");return a=this.originalPath.replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,r,o,s,a,c){if(r=r||"",n=e[s],i="undefined"!=typeof n,c&&!i)n="";else if(!i)return l=!0,console.warn('You called Route.prototype.resolve with a missing parameter. "'+s+'" not found in params'),void 0;n=g.isFunction(n)?n.call(e):n;var u=g.map(String(n).split("/"),function(e){return encodeURIComponent(e)}).join("/");return r+u}).replace(/\*/g,function(){if("undefined"==typeof e[s])throw new Error("You are trying to access a wild card parameter at index "+s+" but the value of params at that index is undefined");var t=String(e[s++]);return g.map(t.split("/"),function(e){return encodeURIComponent(e)}).join("/")}),g.isObject(o)&&(o=g.map(g.pairs(o),function(e){return e[0]+"="+encodeURIComponent(e[1])}).join("&"),o&&o.length&&(a=a+"/?"+o)),r&&(r=encodeURI(r.replace("#","")),a=o?a+"#"+r:a+"/#"+r),a=a.replace(/\/+/g,"/"),a=a.replace(/^(.+)\/$/g,"$1"),l?null:a},path:function(e,t){return this.resolve(e,t)},url:function(e,t){var n=this.path(e,t);return"/"===n[0]&&(n=n.slice(1,n.length)),f.absoluteUrl()+n},getController:function(t,n){var i,o,s,a=r.resolveValue,l=r.classify,c=r.toArray,u=function(e){var t=a(e);if("undefined"==typeof t)throw new Error('controller "'+e+'" is not defined');return t};return n=g.extend({},this.router.options,this.options,n||{},{before:c(this.options.before),after:c(this.options.after),unload:c(this.options.unload),waitOn:c(this.router.options.waitOn).concat(c(this.options.waitOn)),path:t,route:this,router:this.router,params:this.params(t)}),this.controller?(i=g.isString(this.controller)?u(this.controller):this.controller,o=new i(n)):(s=this.name,s&&(i=a(l(s+"Controller")))?o=new i(n):new e(n))}}}.call(this),function(){o=function(e){e=this.options=e||{};this.router=e.router,this.route=e.route,this.path=e.path,this.params=e.params||[],this.where=e.where||"client",this.action=e.action||this.action,this.hooks={},e.load=r.toArray(e.load),e.before=r.toArray(e.before),e.after=r.toArray(e.after),e.unload=r.toArray(e.unload)},o.prototype={constructor:o,runHooks:function(e,t){for(var n,t=(this.constructor,r.toArray(t)),i=function(t){var n=[];return t.__super__&&(n=n.concat(i(t.__super__.constructor))),r.hasOwnProperty(t.prototype,e)?n.concat(t.prototype[e]):n},o=i(this.constructor),s=this.options[e],a=this.route?this.router.getHooks(e,this.route.name):[],l=a.concat(s).concat(o).concat(t),c=0;(n=l[c])&&!this.stopped;c++)n.call(this)},run:function(){throw new Error("not implemented")},action:function(){throw new Error("not implemented")},stop:function(){this.stopped=!0}},g.extend(o,{extend:function(e){return r.extend(this,e,function(){})}})}.call(this),function(){s=function(e){var t=this;this.configure(e),this.routes=[],this._globalHooks={},g.each(s.HOOK_TYPES,function(e){t._globalHooks[e]=[]})},s.HOOK_TYPES=["load","before","after","unload"],s.prototype={constructor:s,configure:function(e){var t=this;return this.options=this.options||{},g.extend(this.options,e),g.each(s.HOOK_TYPES,function(e){t.options[e]&&(g.each(r.toArray(t.options[e]),function(n){t.addHook(e,n)}),delete t.options[e])}),this},addHook:function(e,t,n){return n=n||{},n.only&&(n.only=r.toArray(n.only)),n.except&&(n.except=r.toArray(n.except)),this._globalHooks[e].push({options:n,hook:t}),this},load:function(e,t){return this.addHook("load",e,t)},before:function(e,t){return this.addHook("before",e,t)},after:function(e,t){return this.addHook("after",e,t)},unload:function(e,t){return this.addHook("unload",e,t)},getHooks:function(e,t){var n=[];return g.each(this._globalHooks[e],function(e){var i=e.options;i.except&&g.include(i.except,t)||(!i.only||g.include(i.only,t))&&n.push(e.hook)}),n},map:function(e){return r.assert(g.isFunction(e),"map requires a function as the first parameter"),e.call(this),this},route:function(e,n){var i;return r.assert(g.isString(e),"name is a required parameter"),i=n instanceof t?n:new t(this,e,n),this.routes[e]=i,this.routes.push(i),i},path:function(e,t,n){var i=this.routes[e];return r.warn(i,"You called Router.path for a route named "+e+" but that that route doesn't seem to exist. Are you sure you created it?"),i&&i.path(t,n)},url:function(e,t,n){var i=this.routes[e];return r.warn(i,'You called Router.url for a route named "'+e+"\" but that route doesn't seem to exist. Are you sure you created it?"),i&&i.url(t,n)},dispatch:function(e,t,n){function i(){if(r=s[l++],!r)return o.onRouteNotFound(e,t);if(r.test(e)){if(r.where!==a)return o.onUnhandled(e,t);var c=r.getController(e,t);o.run(c,n)}else i()}var r,o=this,s=o.routes,a=f.isClient?"client":"server",l=0;i()},run:function(){throw new Error("run not implemented")},onUnhandled:function(){throw new Error("onUnhandled not implemented")},onRouteNotFound:function(e){throw new Error('Oh no! No route found for path: "'+e+'"')}}}.call(this),function(){function e(e){var t=e.currentTarget,n=g.isUndefined(e.which)?e.button:e.which,r=t.href,o=t.pathname+t.search+t.hash;1===n&&(e.metaKey||e.ctrlKey||e.shiftKey||e.isDefaultPrevented()||t.target||i.isSameOrigin(r)&&(e.preventDefault(),i.set(o)))}function t(e){d(e.state,null,location.pathname+location.search+location.hash),r&&n.changed()}var n=new m.Dependency,r=!1,o={path:location.pathname+location.search+location.hash};i={},i.options={linkSelector:"a[href]"},i.configure=function(e){this.isStarted&&i.unbindEvents(),g.extend(this.options,e),this.isStarted&&i.bindEvents()},i.origin=function(){return location.protocol+"//"+location.host},i.isSameOrigin=function(e){var t=i.origin();return 0===e.indexOf(t)},i.get=function(){return n.depend(),o},i.path=function(){return n.depend(),o.path},i.set=function(e,t){t=t||{};var r=t.state||{};/^http/.test(e)?u=e:("/"!==e.charAt(0)&&(e="/"+e),u=i.origin()+e),i.isSameOrigin(u)?"server"===t.where?window.location=u:t.replaceState?i.replaceState(r,t.title,e):i.pushState(r,t.title,e):window.location=u,t.skipReactive!==!0&&n.changed()},d=function(e,t,n){o=e||{},o.path=n,o.title=t},i.pushState=function(e,t,n){r=!0,d(e,t,n),history.pushState?history.pushState(e,t,n):window.location=n},i.replaceState=function(e,t,n){r=!0,d(e,t,n),history.replaceState?history.replaceState(e,t,n):window.location=n},i.bindEvents=function(){$(window).on("popstate",t),$(document).on("click",this.options.linkSelector,e)},i.unbindEvents=function(){$(window).off("popstate",t),$(window).off("click",this.options.linkSelector,e)},i.start=function(){this.isStarted||(i.bindEvents(),this.isStarted=!0,history.replaceState&&history.replaceState({initial:!0},null,location.pathname+location.search+location.hash))},i.stop=function(){i.unbindEvents(),this.isStarted=!1},i.start()}.call(this),function(){var e="__main__",t="__defaultLayout__",n=function(e,t){if(g.isFunction(e))return e;if(y[e])return y[e];if(t)return t;throw new Error('Oops, no template found named "'+e+'"')},i=function(e){if(g.isFunction(e))return!0;if(!y[e])throw new Error('Uh oh, no template found named "'+e+'"')},r=function(e){this._dep=new m.Dependency,this._value=e||null};r.prototype={set:function(e){v.equals(e,this._value)||(this._value=e,this._dep.changed())},get:function(){return this._dep.depend(),this._value},equals:function(e){return this._dep.depend(),v.equals(this._value,e)}},a=function(){this.yieldsToTemplates=new p,this.layout=new r,this.data=new r({}),this.layout.set(t),this._yields={}},a.prototype={constructor:a,setLayout:function(e){var n=this;e=e||t,i(e),m.nonreactive(function(){var t=n.layout.get();t!==e&&(n._yields={})}),this.layout.set(e)},setTemplate:function(t,n){var i=this;n=n||e,f.defer(function(){m.afterFlush(function(){var t,r=i._yields[n];if(!r)if(t=n==e?"Sorry, couldn't find the main yield. Did you define it in one of the rendered templates like this: {{yield}}?":"Sorry, couldn't find a yield named \""+n+'". Did you define it in one of the rendered templates like this: {{yield "'+n+'"}}?',console&&console.warn)console.warn(t);else{if(!console||!console.error)throw new Error(t);console.error(t)}})}),this.yieldsToTemplates.set(n,t)},clearYield:function(e){this.yieldsToTemplates.set(e,null)},setData:function(e){this.data.set(e)},getData:function(){return this.data.get()},helpers:function(){var e=this;return{yield:function(t){var n;return arguments.length<2&&(t=null),n=e._renderTemplate(t),new b.SafeString(n)}}},_renderTemplate:function(t){var i=this;return t=t||e,this._yields[t]=!0,w.isolate(function(){var e=n(i.yieldsToTemplates.get(t),function(){return""}),r=i.getData(),o=i.helpers(),s=g.extend({},r,o);return e(s)})},renderLayout:function(){var e=this,t=w.isolate(function(){var t=n(e.layout.get()),i=e.data.get(),r=e.helpers(),o=g.extend({},i,r);
return t(o)});return t},clearUnusedYields:function(e){var t=this,n=g.keys(this.yieldsToTemplates.keys);e=g.filter(e,function(e){return!!e});var i=g.difference(n,e);g.each(i,function(e){t.clearYield(e)})}}}.call(this),function(){if(l=r.extend(s,{constructor:function(){var e=this;l.__super__.constructor.apply(this,arguments),this.isRendered=!1,this._page=new a,this._currentController=null,this._controllerDep=new m.Dependency,this._hasJustReloaded=!1,f.startup(function(){setTimeout(function(){e.options.autoRender!==!1&&e.autoRender(),e.options.autoStart!==!1&&e.start()})})},current:function(e){return e&&e.reactive===!1?this._currentController:(this._controllerDep.depend(),this._currentController)},setLayout:function(e){this._page.setLayout(e)},setTemplate:function(e,t){this._page.setTemplate(e,t)},clearUnusedYields:function(e){this._page.clearUnusedYields(e)},setData:function(e){this._page.setData(e)},getData:function(){return this._page.getData()},run:function(e,t){var n=this,i=f.isClient?"client":"server";if(r.assert(e,"run requires a controller"),e.where!=i)return n.onUnhandled(e.path,e.options),void 0;var o=function(){m.autorun(function(t){n._routeComputation=t,n._hasJustReloaded||e.runHooks("load"),n._hasJustReloaded=!1,this.stopped||m.autorun(function(){e.run()})})};this._currentController&&this._currentController.runHooks("unload"),this._currentController=e,this._routeComputation?(this._routeComputation.stop(),this._routeComputation.onInvalidate(o)):o(),e==this._currentController&&(t&&t(e),this._controllerDep.changed())},go:function(e,t,n){var o,s,a,l=/^\/|http/,c=function(){n=n||{},i.set(s,{replaceState:n.replaceState,state:n.state,skipReactive:!0})};l.test(e)?(s=e,n=t,this.dispatch(s,n,c)):(o=this.routes[e],r.assert(o,"No route found named "+e),s=o.path(t,n),a=o.getController(s,n),this.run(a,c))},render:function(){return this.isRendered=!0,this._page.renderLayout()},autoRender:function(){var e=this,t=w.render(function(){return e.render()});document.body.appendChild(t)},start:function(){var e=this;e.isStarted||(e.isStarted=!0,m.autorun(function(t){e._locationComputation=t,e.dispatch(i.path(),{state:history.state})}))},stop:function(){this.isStarted=!1,this._locationComputation&&this._locationComputation.stop()},onUnhandled:function(e){this.stop(),window.location=e},onRouteNotFound:function(e){if(history&&!history.state.initial)this.stop(),window.location=e;else{if(!this.options.notFoundTemplate)throw new Error('Oh no! No route found for path: "'+e+'"');this.setLayout(this.options.layoutTemplate),this.setTemplate(this.options.notFoundTemplate)}}}),n=new l,f._reload){f._reload.onMigrate("iron-router",function(){return[!0,!0]});var e=f._reload.migrationData("iron-router");n._hasJustReloaded=e}}.call(this),function(){y.__define__("__defaultLayout__",Package.handlebars.Handlebars.json_ast_to_func([["{",[[0,"yield"]]]]))}.call(this),function(){h=function(){this._dep=new m.Dependency,this.clear()},h.prototype={get:function(e){return this._list[e]},clear:function(){this._list=[]},append:function(e){var t=this;e=r.toArray(e),g.each(e,function(e){t.push(e)})},push:function(e){if(e){var t=this._list.push(e);return t}},ready:function(){return g.all(this._list,function(e){return e.ready()})}};var t=function(){var e=this,t=g.isFunction(e.data)?e.data.call(e):e.data;t!==!1&&e.setData(t)},n=function(){var e=this,t=e.getData();null!==t&&"undefined"!=typeof t||!e.notFoundTemplate||(e.render(e.notFoundTemplate),this.renderYields(),e.stop())},i=function(){this.ready()||this.loadingTemplate&&(this.render(this.loadingTemplate),this.renderYields(),this.stop())},s=function(){this.router&&this.router.clearUnusedYields(this._renderedYields)};e=r.extend(o,{constructor:function(){e.__super__.constructor.apply(this,arguments);var t=this,n=function(e){return r.pick(t.options[e],t[e])};this.loadingTemplate=n("loadingTemplate"),this.notFoundTemplate=n("notFoundTemplate"),this.data=n("data"),this.template=n("template")||this.route&&this.route.name,this.yieldTemplates=n("yieldTemplates"),this.layoutTemplate=n("layoutTemplate"),this.waitOn=[].concat(r.toArray(this.options.waitOn)).concat(r.toArray(this.waitOn)),this._waitList=new h},ready:function(){return this._waitList.ready()},redirect:function(){return this.stop(),this.router&&this.router.go.apply(this.router,arguments)},yieldTemplates:null,layoutTemplate:null,template:null,loadingTemplate:null,notFoundTemplate:null,data:{},getData:function(){return this.router&&this.router.getData()},setData:function(e){this.router&&this.router.setData(e)},waitOn:null,subscribe:function(){var e=this,t=function(){var t=!1;return{wait:function(){t||(e._waitList.push(this),t=!0)}}}(),n=f.subscribe.apply(this,arguments);return g.extend(n,t)},render:function(e,t){var n,e,i=this,r=function(e){i._renderedYields&&(e=e||"__main__",i._renderedYields.push(e))};0==arguments.length?(this.router&&this.router.setTemplate(this.template),r(),this.renderYields()):(t=t||{},n=t.to,this.router&&this.router.setTemplate(e,n),r(n))},renderYields:function(){var e=this;g.each(this.yieldTemplates,function(t,n){e.render(n,t)})},setLayout:function(e){this.router&&this.router.setLayout(e)},run:function(){var e=this,o=(g.toArray(arguments),g.isFunction(this.action)?this.action:this[this.action]);r.assert(o,"You don't have an action named \""+this.action+'" defined on your RouteController'),this.stopped=!1,this._renderedYields=[],this._waitList.clear();var a=g.flatten(g.map(this.waitOn,function(t){return g.isFunction(t)?t.call(e):t}));return this._waitList.append(a),this.setLayout(this.layoutTemplate),this.runHooks("before",[i,t,n]),this.stopped?(this.isFirstRun=!1,void 0):(o.call(this),this.runHooks("after",[s]),this.isFirstRun=!1,void 0)},wait:function(e){e=g.isFunction(e)?e.call(this):e,this._waitList.append(e)},action:function(){this.render()}})}.call(this),function(){b&&(b.registerHelper("pathFor",function(e,t,i){2==arguments.length&&(i=t,t=this);var r=i.hash.hash,o=g.omit(i.hash,"hash");return n.path(e,t,{query:o,hash:r})}),b.registerHelper("urlFor",function(e,t,i){2==arguments.length&&(i=t,t=this);var r=i.hash.hash,o=g.omit(i.hash,"hash");return n.url(e,t,{query:o,hash:r})}),b.registerHelper("renderRouter",function(){return new b.SafeString(n.render())}),b.registerHelper("currentRouteController",function(){return n.current()}),b.registerHelper("link",function(e){var t=e.hash||{},i=t.route,r=t.params||this,o=t.query,s=t.hash,a=t["class"]||"",l=n.path(i,r,{query:o,hash:s}),c='<a href="'+l+'" class="'+a+'">';return c+=e.fn(this),c+="</a>",new b.SafeString(c)}))}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron-router"]={RouteController:e,Route:t,Router:n,IronLocation:i,Utils:r,IronRouteController:o,IronRouter:s,PageManager:a,ClientRouter:l}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.less={}}(),function(){{var e,t,n=(Package.meteor.Meteor,Package.underscore._),i=Package["iron-router"].RouteController,r=(Package["iron-router"].Route,Package["iron-router"].Router);Package["iron-router"].IronLocation}(function(){t="object"==typeof t?t:{};var o,s,a,l,c;e=function(){function e(){}return e.percent=0,e.isReady=!1,e.isDone=!1,e.element=!1,e.options={},e.currentOptions={},e.configure=function(e){return null==e&&(e={}),n.isObject(e)&&(n.extend(this.options,e),this.currentOptions=n.clone(this.options)),this},e.prepare=function(){var e=this;if(!this.isReady)return this.element=$(n.isFunction(this.options.element)?this.options.element.call(this):this.options.element),this.element.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(t){return""===t.originalEvent.pseudoElement&&t.originalEvent.propertyName===n.last(e.element.css("transition-property").split(", "))?e.reset():void 0}),this.isReady=!0,$("body").append(this.element),this},e.reset=function(){return this.isReady&&(clearTimeout(this.ticker),this.percent=0,this.isDone=!1,this.currentOptions.reset.call(this)),this},e.start=function(e){return null==e&&(e={}),n.isObject(e)&&(this.currentOptions=n.extend({},this.options,e)),this.isReady&&(this.reset(),this.progress(),this.currentOptions.tick&&this.tick()),this},e.tick=function(){var e=this;return this.ticker=setTimeout(function(){return e.progress(),e.tick()},750*Math.random()+750),this},e.progress=function(e){return null==e&&(e=!1),this.percent+=e?e:(100-this.percent)*(.45*Math.random()+.05)|0,this.percent>=100?this.done():(this.currentOptions.progress.call(this),this)},e.done=function(){return this.isReady&&!this.isDone&&(clearTimeout(this.ticker),this.percent=100,this.isDone=!0,this.currentOptions.done.call(this)),this},e}(),e.configure({element:function(){return'<div id="iron-router-progress"'+(this.options.spinner?' class="spinner"':"")+"></div>"},spinner:!0,tick:!0,reset:function(){return this.element.removeClass("loading done"),this.element.css("width","0%"),this.element[0].offsetWidth=this.element[0].offsetWidth,this},progress:function(){return this.element.addClass("loading"),this.element.removeClass("done"),this.element&&this.element.css("width",""+this.percent+"%"),this},done:function(){return this.element.addClass("done"),this.element.css("width","100%"),this}}),c=!0,a=!1,l={load:function(){return a="load",e.start(this.options.progress||{}),this},before:function(){return a="before",this.ready()?e.done():(e.progress(),this.stop()),this},after:function(){return e.done(),this},unload:function(){return a="unload",c=!1,e.reset(),this}},o=i.prototype.stop,i.prototype.stop=function(){var t;return t=o.call(this),"load"===a&&e.done(),t},s=r.map,r.map=function(e){var t,i,r,o,a,c,u;for(i=s.call(this,e),u=this.routes,a=0,c=u.length;c>a;a++)if(r=u[a],!r.options.disableProgress)for(o in l)t=l[o],n.isArray(r.options[o])?r.options[o].push(t):r.options[o]=n.isFunction(r.options[o])?[r.options[o],t]:t;return i},$(function(){return e.prepare()})}).call(this),"undefined"==typeof Package&&(Package={}),Package["iron-router-progress"]={IronRouterProgress:e}}(),function(){{var e,t;Package.meteor.Meteor}!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.editableform.defaults,n),this.$div=e(t),this.options.scope||(this.options.scope=this)};t.prototype={constructor:t,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=e(e.fn.editableform.template)},initButtons:function(){var t=this.$form.find(".editable-buttons");t.append(e.fn.editableform.buttons),"bottom"===this.options.showbuttons&&t.addClass("editable-buttons-bottom")},render:function(){this.$loading=e(e.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),e.when(this.input.render()).then(e.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(e.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(e){e.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var t=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(t),this.$form.submit(e.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var e,t;this.$form?(e=this.$form.outerWidth(),t=this.$form.outerHeight(),e&&this.$loading.width(e),t&&this.$loading.height(t),this.$form.hide()):(e=this.$loading.parent().width(),e&&this.$loading.width(e)),this.$loading.show()},showForm:function(e){this.$loading.hide(),this.$form.show(),e!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(t){var n,i=this.$form.find(".control-group"),r=this.$form.find(".editable-error-block");if(t===!1)i.removeClass(e.fn.editableform.errorGroupClass),r.removeClass(e.fn.editableform.errorBlockClass).empty().hide();else{if(t){n=(""+t).split("\n");for(var o=0;o<n.length;o++)n[o]=e("<div>").text(n[o]).html();t=n.join("<br>")}i.addClass(e.fn.editableform.errorGroupClass),r.addClass(e.fn.editableform.errorBlockClass).html(t).show()}},submit:function(t){t.stopPropagation(),t.preventDefault();var n=this.input.input2value(),i=this.validate(n);if("object"===e.type(i)&&void 0!==i.newValue){if(n=i.newValue,this.input.value2input(n),"string"==typeof i.msg)return this.error(i.msg),this.showForm(),void 0}else if(i)return this.error(i),this.showForm(),void 0;if(!this.options.savenochange&&this.input.value2str(n)==this.input.value2str(this.value))return this.$div.triggerHandler("nochange"),void 0;var r=this.input.value2submit(n);this.isSaving=!0,e.when(this.save(r)).done(e.proxy(function(e){this.isSaving=!1;var t="function"==typeof this.options.success?this.options.success.call(this.options.scope,e,n):null;return t===!1?(this.error(!1),this.showForm(!1),void 0):"string"==typeof t?(this.error(t),this.showForm(),void 0):(t&&"object"==typeof t&&t.hasOwnProperty("newValue")&&(n=t.newValue),this.error(!1),this.value=n,this.$div.triggerHandler("save",{newValue:n,submitValue:r,response:e}),void 0)},this)).fail(e.proxy(function(e){this.isSaving=!1;var t;t="function"==typeof this.options.error?this.options.error.call(this.options.scope,e,n):"string"==typeof e?e:e.responseText||e.statusText||"Unknown error!",this.error(t),this.showForm()},this))},save:function(t){this.options.pk=e.fn.editableutils.tryParseJson(this.options.pk,!0);var n,i="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,r=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==i&&void 0!==i));return r?(this.showLoading(),n={name:this.options.name||"",value:t,pk:i},"function"==typeof this.options.params?n=this.options.params.call(this.options.scope,n):(this.options.params=e.fn.editableutils.tryParseJson(this.options.params,!0),e.extend(n,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,n):e.ajax(e.extend({url:this.options.url,data:n,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(e){return void 0===e&&(e=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,e):void 0},option:function(e,t){e in this.options&&(this.options[e]=t),"value"===e&&this.setValue(t)},setValue:function(e,t){this.value=t?this.input.str2value(e):e,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},e.fn.editableform=function(n){var i=arguments;return this.each(function(){var r=e(this),o=r.data("editableform"),s="object"==typeof n&&n;o||r.data("editableform",o=new t(this,s)),"string"==typeof n&&o[n].apply(o,Array.prototype.slice.call(i,1))})},e.fn.editableform.Constructor=t,e.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},e.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',e.fn.editableform.loading='<div class="editableform-loading"></div>',e.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',e.fn.editableform.errorGroupClass=null,e.fn.editableform.errorBlockClass="editable-error",e.fn.editableform.engine="jquery"}(window.jQuery),function(e){"use strict";e.fn.editableutils={inherit:function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype},setCursorPosition:function(e,t){if(e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},tryParseJson:function(e,t){if("string"==typeof e&&e.length&&e.match(/^[\{\[].*[\}\]]$/))if(t)try{e=new Function("return "+e)()}catch(n){}finally{return e}else e=new Function("return "+e)();return e},sliceObj:function(t,n,i){var r,o,s={};if(!e.isArray(n)||!n.length)return s;for(var a=0;a<n.length;a++)r=n[a],t.hasOwnProperty(r)&&(s[r]=t[r]),i!==!0&&(o=r.toLowerCase(),t.hasOwnProperty(o)&&(s[r]=t[o]));return s},getConfigData:function(t){var n={};return e.each(t.data(),function(e,t){("object"!=typeof t||t&&"object"==typeof t&&(t.constructor===Object||t.constructor===Array))&&(n[e]=t)}),n},objectKeys:function(e){if(Object.keys)return Object.keys(e);if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n},escape:function(t){return e("<div>").text(t).html()},itemsByValue:function(t,n,i){if(!n||null===t)return[];if("function"!=typeof i){var r=i||"value";i=function(e){return e[r]}}var o=e.isArray(t),s=[],a=this;return e.each(n,function(n,r){if(r.children)s=s.concat(a.itemsByValue(t,r.children,i));else if(o)e.grep(t,function(e){return e==(r&&"object"==typeof r?i(r):r)}).length&&s.push(r);else{var l=r&&"object"==typeof r?i(r):r;t==l&&s.push(r)}}),s},createInput:function(t){var n,i,r,o=t.type;return"date"===o&&("inline"===t.mode?e.fn.editabletypes.datefield?o="datefield":e.fn.editabletypes.dateuifield&&(o="dateuifield"):e.fn.editabletypes.date?o="date":e.fn.editabletypes.dateui&&(o="dateui"),"date"!==o||e.fn.editabletypes.date||(o="combodate")),"datetime"===o&&"inline"===t.mode&&(o="datetimefield"),"wysihtml5"!==o||e.fn.editabletypes[o]||(o="textarea"),"function"==typeof e.fn.editabletypes[o]?(n=e.fn.editabletypes[o],i=this.sliceObj(t,this.objectKeys(n.defaults)),r=new n(i)):(e.error("Unknown type: "+o),!1)},supportsTransitions:function(){var e=document.body||document.documentElement,t=e.style,n="transition",i=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof t[n])return!0;n=n.charAt(0).toUpperCase()+n.substr(1);for(var r=0;r<i.length;r++)if("string"==typeof t[i[r]+n])return!0;return!1}}}(window.jQuery),function(e){"use strict";var t=function(e,t){this.init(e,t)},n=function(e,t){this.init(e,t)};t.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(n,i){this.$element=e(n),this.options=e.extend({},e.fn.editableContainer.defaults,i),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",e.proxy(function(){this.destroy()},this)),e(document).data("editable-handlers-attached")||(e(document).on("keyup.editable",function(t){27===t.which&&e(".editable-open").editableContainer("hide")}),e(document).on("click.editable",function(n){var i,r=e(n.target),o=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(e.contains(document.documentElement,n.target)&&!r.is(document)){for(i=0;i<o.length;i++)if(r.is(o[i])||r.parents(o[i]).length)return;t.prototype.closeOthers(n.target)}}),e(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!e.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var t in this.options)t in this.defaults?this.containerOptions[t]=this.options[t]:this.formOptions[t]=this.options[t]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var e;return this.containerDataName&&(e=this.$element.data(this.containerDataName))?e:e=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:e.proxy(this.save,this),nochange:e.proxy(function(){this.hide("nochange")},this),cancel:e.proxy(function(){this.hide("cancel")},this),show:e.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:e.proxy(this.setPosition,this),resize:e.proxy(this.setPosition,this),rendered:e.proxy(function(){this.$element.triggerHandler("shown",e(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(t){this.$element.addClass("editable-open"),t!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=e("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(e){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return this.delayedHide={reason:e},void 0;this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",e||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(e){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(e)},setPosition:function(){},save:function(e,t){this.$element.triggerHandler("save",t),this.hide("save")},option:function(e,t){this.options[e]=t,e in this.containerOptions?(this.containerOptions[e]=t,this.setContainerOption(e,t)):(this.formOptions[e]=t,this.$form&&this.$form.editableform("option",e,t))},setContainerOption:function(e,t){this.call("option",e,t)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(t){e(".editable-open").each(function(n,i){if(i!==t&&!e(i).find(t).length){var r=e(i),o=r.data("editableContainer");o&&("cancel"===o.options.onblur?r.data("editableContainer").hide("onblur"):"submit"===o.options.onblur&&r.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},e.fn.editableContainer=function(i){var r=arguments;return this.each(function(){var o=e(this),s="editableContainer",a=o.data(s),l="object"==typeof i&&i,c="inline"===l.mode?n:t;a||o.data(s,a=new c(this,l)),"string"==typeof i&&a[i].apply(a,Array.prototype.slice.call(r,1))})},e.fn.editableContainer.Popup=t,e.fn.editableContainer.Inline=n,e.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}}(window.jQuery),function(e){"use strict";e.extend(e.fn.editableContainer.Inline.prototype,e.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=e("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,e.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.editable.defaults,n,e.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!e.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};t.prototype={constructor:t,init:function(){var t,n=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=e.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(e.trim(this.$element.html())),n=!0):(this.options.value=e.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",e.proxy(function(e){if(this.options.disabled||e.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var t="click"!==this.options.toggle;this.toggle(t)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":t=!0;break;case"auto":t=!e.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!n;break;default:t=!1}e.when(t?this.render():!0).then(e.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var t=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",t,e.proxy(function(t){var n=e(t.target);n.data("editable")||(n.hasClass(this.options.emptyclass)&&n.empty(),n.editable(this.options).trigger(t))},this))},render:function(e){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,e):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,e):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(t,n){return t&&"object"==typeof t?(e.each(t,e.proxy(function(t,n){this.option(e.trim(t),n)},this)),void 0):(this.options[t]=n,"disabled"===t?n?this.disable():this.enable():("value"===t&&this.setValue(n),this.container&&this.container.option(t,n),this.input.option&&this.input.option(t,n),void 0))},handleEmpty:function(t){this.options.display!==!1&&(this.isEmpty=void 0!==t?t:"function"==typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===e.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(t){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var n=e.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(n),this.$element.on("save.internal",e.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(t)}},hide:function(){this.container&&this.container.hide()},toggle:function(e){this.container&&this.container.tip().is(":visible")?this.hide():this.show(e)},save:function(e,t){if(this.options.unsavedclass){var n=!1;n=n||"function"==typeof this.options.url,n=n||this.options.display===!1,n=n||void 0!==t.response,n=n||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(t.newValue),n?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var i=this.$element,r=i.css("background-color");i.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===r&&(r=""),i.css("background-color",r),i.addClass("editable-bg-transition"),setTimeout(function(){i.removeClass("editable-bg-transition")},1700)},10)}this.setValue(t.newValue,!1,t.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(t,n,i){this.value=n?this.input.str2value(t):t,this.container&&this.container.option("value",this.value),e.when(this.render(i)).then(e.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},e.fn.editable=function(n){var i={},r=arguments,o="editable";switch(n){case"validate":return this.each(function(){var t,n=e(this),r=n.data(o);r&&(t=r.validate())&&(i[r.options.name]=t)}),i;case"getValue":return 2===arguments.length&&arguments[1]===!0?i=this.eq(0).data(o).value:this.each(function(){var t=e(this),n=t.data(o);n&&void 0!==n.value&&null!==n.value&&(i[n.options.name]=n.input.value2submit(n.value))}),i;case"submit":var s=arguments[1]||{},a=this,l=this.editable("validate");if(e.isEmptyObject(l)){var c={};if(1===a.length){var u=a.data("editable"),d={name:u.options.name||"",value:u.input.value2submit(u.value),pk:"function"==typeof u.options.pk?u.options.pk.call(u.options.scope):u.options.pk};"function"==typeof u.options.params?d=u.options.params.call(u.options.scope,d):(u.options.params=e.fn.editableutils.tryParseJson(u.options.params,!0),e.extend(d,u.options.params)),c={url:u.options.url,data:d,type:"POST"},s.success=s.success||u.options.success,s.error=s.error||u.options.error}else{var h=this.editable("getValue");c={url:s.url,data:h,type:"POST"}}c.success="function"==typeof s.success?function(e){s.success.call(a,e,s)}:e.noop,c.error="function"==typeof s.error?function(){s.error.apply(a,arguments)}:e.noop,s.ajaxOptions&&e.extend(c,s.ajaxOptions),s.data&&e.extend(c.data,s.data),e.ajax(c)}else"function"==typeof s.error&&s.error.call(a,l);return this}return this.each(function(){var i=e(this),s=i.data(o),a="object"==typeof n&&n;return a&&a.selector?(s=new t(this,a),void 0):(s||i.data(o,s=new t(this,a)),"string"==typeof n&&s[n].apply(s,Array.prototype.slice.call(r,1)),void 0)})},e.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(e){"use strict";e.fn.editabletypes={};var t=function(){};t.prototype={init:function(t,n,i){this.type=t,this.options=e.extend({},i,n)},prerender:function(){this.$tpl=e(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(t,n){e(n)[this.options.escape?"text":"html"](e.trim(t))},html2value:function(t){return e("<div>").html(t).text()},value2str:function(e){return e},str2value:function(e){return e},value2submit:function(e){return e},value2input:function(e){this.$input.val(e)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()
},clear:function(){this.$input.val(null)},escape:function(t){return e("<div>").text(t).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(e){void 0!==this.options[e]&&null!==this.options[e]&&this.$input.attr(e,this.options[e])},option:function(e,t){this.options[e]=t}},t.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},e.extend(e.fn.editabletypes,{abstractinput:t})}(window.jQuery),function(e){"use strict";var t=function(){};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){var t=e.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),t.resolve()},function(){this.error=this.options.sourceError,t.resolve()}),t.promise()},html2value:function(){return null},value2html:function(t,n,i,r){var o=e.Deferred(),s=function(){"function"==typeof i?i.call(n,t,this.sourceData,r):this.value2htmlFinal(t,n),o.resolve()};return null===t?s.call(this):this.onSourceReady(s,function(){o.resolve()}),o.promise()},onSourceReady:function(t,n){var i;if(e.isFunction(this.options.source)?(i=this.options.source.call(this.options.scope),this.sourceData=null):i=this.options.source,this.options.sourceCache&&e.isArray(this.sourceData))return t.call(this),void 0;try{i=e.fn.editableutils.tryParseJson(i,!1)}catch(r){return n.call(this),void 0}if("string"==typeof i){if(this.options.sourceCache){var o,s=i;if(e(document).data(s)||e(document).data(s,{}),o=e(document).data(s),o.loading===!1&&o.sourceData)return this.sourceData=o.sourceData,this.doPrepend(),t.call(this),void 0;if(o.loading===!0)return o.callbacks.push(e.proxy(function(){this.sourceData=o.sourceData,this.doPrepend(),t.call(this)},this)),o.err_callbacks.push(e.proxy(n,this)),void 0;o.loading=!0,o.callbacks=[],o.err_callbacks=[]}var a=e.extend({url:i,type:"get",cache:!1,dataType:"json",success:e.proxy(function(i){o&&(o.loading=!1),this.sourceData=this.makeArray(i),e.isArray(this.sourceData)?(o&&(o.sourceData=this.sourceData,e.each(o.callbacks,function(){this.call()})),this.doPrepend(),t.call(this)):(n.call(this),o&&e.each(o.err_callbacks,function(){this.call()}))},this),error:e.proxy(function(){n.call(this),o&&(o.loading=!1,e.each(o.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);e.ajax(a)}else this.sourceData=this.makeArray(i),e.isArray(this.sourceData)?(this.doPrepend(),t.call(this)):n.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(e.isArray(this.prependData)||(e.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=e.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),e.isArray(this.prependData)&&e.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(t){var n,i,r,o,s=[];if(!t||"string"==typeof t)return null;if(e.isArray(t)){o=function(e,t){return i={value:e,text:t},n++>=2?!1:void 0};for(var a=0;a<t.length;a++)r=t[a],"object"==typeof r?(n=0,e.each(r,o),1===n?s.push(i):n>1&&(r.children&&(r.children=this.makeArray(r.children)),s.push(r))):s.push({value:r,text:r})}else e.each(t,function(e,t){s.push({value:e,text:t})});return s},option:function(e,t){this.options[e]=t,"source"===e&&(this.sourceData=null),"prepend"===e&&(this.prependData=null)}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),e.fn.editabletypes.list=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("text",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),e.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=e('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(e.proxy(function(t){if(!~e.inArray(t.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var n=this;this.t=setTimeout(function(){n.toggleClear(t)},100)}},this)).parent().css("position","relative"),this.$clear.click(e.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var e=this.$input.val().length,t=this.$clear.is(":visible");e&&!t&&this.$clear.show(),!e&&t&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),e.fn.editabletypes.text=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("textarea",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(t){t.ctrlKey&&13===t.which&&e(this).closest("form").submit()})},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),e.fn.editabletypes.textarea=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("select",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.list),e.extend(t.prototype,{renderList:function(){this.$input.empty();var t=function(n,i){var r;if(e.isArray(i))for(var o=0;o<i.length;o++)r={},i[o].children?(r.label=i[o].text,n.append(t(e("<optgroup>",r),i[o].children))):(r.value=i[o].value,i[o].disabled&&(r.disabled=!0),n.append(e("<option>",r).text(i[o].text)));return n};t(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(t){13===t.which&&e(this).closest("form").submit()})},value2htmlFinal:function(t,n){var i="",r=e.fn.editableutils.itemsByValue(t,this.sourceData);r.length&&(i=r[0].text),e.fn.editabletypes.abstractinput.prototype.value2html.call(this,i,n)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){e(this).closest("form").submit()})}}),t.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),e.fn.editabletypes.select=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("checklist",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.list),e.extend(t.prototype,{renderList:function(){var t;if(this.$tpl.empty(),e.isArray(this.sourceData)){for(var n=0;n<this.sourceData.length;n++)t=e("<label>").append(e("<input>",{type:"checkbox",value:this.sourceData[n].value})).append(e("<span>").text(" "+this.sourceData[n].text)),e("<div>").append(t).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(t){return e.isArray(t)?t.sort().join(e.trim(this.options.separator)):""},str2value:function(t){var n,i=null;return"string"==typeof t&&t.length?(n=new RegExp("\\s*"+e.trim(this.options.separator)+"\\s*"),i=t.split(n)):i=e.isArray(t)?t:[t],i},value2input:function(t){this.$input.prop("checked",!1),e.isArray(t)&&t.length&&this.$input.each(function(n,i){var r=e(i);e.each(t,function(e,t){r.val()==t&&r.prop("checked",!0)})})},input2value:function(){var t=[];return this.$input.filter(":checked").each(function(n,i){t.push(e(i).val())}),t},value2htmlFinal:function(t,n){var i=[],r=e.fn.editableutils.itemsByValue(t,this.sourceData),o=this.options.escape;r.length?(e.each(r,function(t,n){var r=o?e.fn.editableutils.escape(n.text):n.text;i.push(r)}),e(n).html(i.join("<br>"))):e(n).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(t){13===t.which&&e(this).closest("form").submit()})}}),t.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),e.fn.editabletypes.checklist=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("password",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),e.extend(t.prototype,{value2html:function(t,n){t?e(n).text("[hidden]"):e(n).empty()},html2value:function(){return null}}),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),e.fn.editabletypes.password=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("email",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),e.fn.editabletypes.email=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("url",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),e.fn.editabletypes.url=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("tel",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),e.fn.editabletypes.tel=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("number",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),e.extend(t.prototype,{render:function(){t.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),e.fn.editabletypes.number=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("range",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.number),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){e(this).siblings("output").text(e(this).val())})},activate:function(){this.$input.focus()}}),t.defaults=e.extend({},e.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),e.fn.editabletypes.range=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("time",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.setClass()}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),e.fn.editabletypes.time=t}(window.jQuery),function(e){"use strict";var t=function(n){if(this.init("select2",n,t.defaults),n.select2=n.select2||{},this.sourceData=null,n.placeholder&&(n.select2.placeholder=n.placeholder),!n.select2.tags&&n.source){var i=n.source;e.isFunction(n.source)&&(i=n.source.call(n.scope)),"string"==typeof i?(n.select2.ajax=n.select2.ajax||{},n.select2.ajax.data||(n.select2.ajax.data=function(e){return{query:e}}),n.select2.ajax.results||(n.select2.ajax.results=function(e){return{results:e}}),n.select2.ajax.url=i):(this.sourceData=this.convertSource(i),n.select2.data=this.sourceData)}if(this.options.select2=e.extend({},t.defaults.select2,n.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var r=this.idFunc||"id";this.idFunc=function(e){return e[r]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(e){return e.text})};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",e.proxy(function(e){this.sourceData=e.items.results},this)),this.isMultiple&&this.$input.on("change",function(){e(this).closest("form").parent().triggerHandler("resize")})},value2html:function(n,i){var r,o="",s=this;this.options.select2.tags?r=n:this.sourceData&&(r=e.fn.editableutils.itemsByValue(n,this.sourceData,this.idFunc)),e.isArray(r)?(o=[],e.each(r,function(e,t){o.push(t&&"object"==typeof t?s.formatSelection(t):t)})):r&&(o=s.formatSelection(r)),o=e.isArray(o)?o.join(this.options.viewseparator):o,t.superclass.value2html.call(this,o,i)},html2value:function(e){return this.options.select2.tags?this.str2value(e,this.options.viewseparator):null},value2input:function(t){if(e.isArray(t)&&(t=t.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(t).trigger("change",!0):(this.$input.val(t),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var n=this.options.select2.id,i=this.options.select2.formatSelection;if(!n&&!i){var r=e(this.options.scope);if(!r.data("editable").isEmpty){var o={id:t,text:r.text()};this.$input.select2("data",o)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(t,n){if("string"!=typeof t||!this.isMultiple)return t;n=n||this.getSeparator();var i,r,o;if(null===t||t.length<1)return null;for(i=t.split(n),r=0,o=i.length;o>r;r+=1)i[r]=e.trim(i[r]);return i},autosubmit:function(){this.$input.on("change",function(t,n){n||e(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||e.fn.select2.defaults.separator},convertSource:function(t){if(e.isArray(t)&&t.length&&void 0!==t[0].value)for(var n=0;n<t.length;n++)void 0!==t[n].value&&(t[n].id=t[n].value,delete t[n].value);return t},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),e.fn.editabletypes.select2=t}(window.jQuery),function(e){var t=function(t,n){return this.$element=e(t),this.$element.is("input")?(this.options=e.extend({},e.fn.combodate.defaults,n,this.$element.data()),this.init(),void 0):(e.error("Combodate should be applied to INPUT element"),void 0)};t.prototype={constructor:t,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=e('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",e.proxy(function(t){this.$element.val(this.getValue()).change(),this.options.smartDays&&(e(t.target).is(".month")||e(t.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template;return e.each(this.map,function(e,n){n=n[0];var i=new RegExp(n+"+"),r=n.length>1?n.substring(1,2):n;t=t.replace(i,"{"+r+"}")}),t=t.replace(/ /g,"&nbsp;"),e.each(this.map,function(e,n){n=n[0];var i=n.length>1?n.substring(1,2):n;t=t.replace("{"+i+"}",'<select class="'+e+'"></select>')}),t},initCombos:function(){for(var e in this.map){var t=this.$widget.find("."+e);this["$"+e]=t.length?t:null,this.fillCombo(e)}},fillCombo:function(e){var t=this["$"+e];if(t){var n="fill"+e.charAt(0).toUpperCase()+e.slice(1),i=this[n](),r=t.val();t.empty();for(var o=0;o<i.length;o++)t.append('<option value="'+i[o][0]+'">'+i[o][1]+"</option>");t.val(r)}},fillCommon:function(e){var t,n=[];if("name"===this.options.firstItem){t=moment.relativeTime||moment.langData()._relativeTime;var i="function"==typeof t[e]?t[e](1,!0,e,!1):t[e];i=i.split(" ").reverse()[0],n.push(["",i])}else"empty"===this.options.firstItem&&n.push(["",""]);return n},fillDay:function(){var e,t,n=this.fillCommon("d"),i=-1!==this.options.template.indexOf("DD"),r=31;if(this.options.smartDays&&this.$month&&this.$year){var o=parseInt(this.$month.val(),10),s=parseInt(this.$year.val(),10);isNaN(o)||isNaN(s)||(r=moment([s,o]).daysInMonth())}for(t=1;r>=t;t++)e=i?this.leadZero(t):t,n.push([t,e]);return n},fillMonth:function(){var e,t,n=this.fillCommon("M"),i=-1!==this.options.template.indexOf("MMMM"),r=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(t=0;11>=t;t++)e=i?moment().date(1).month(t).format("MMMM"):r?moment().date(1).month(t).format("MMM"):o?this.leadZero(t+1):t+1,n.push([t,e]);return n},fillYear:function(){var e,t,n=[],i=-1!==this.options.template.indexOf("YYYY");for(t=this.options.maxYear;t>=this.options.minYear;t--)e=i?t:(t+"").substring(2),n[this.options.yearDescending?"push":"unshift"]([t,e]);return n=this.fillCommon("y").concat(n)},fillHour:function(){var e,t,n=this.fillCommon("h"),i=-1!==this.options.template.indexOf("h"),r=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=i?1:0,s=i?12:23;for(t=o;s>=t;t++)e=r?this.leadZero(t):t,n.push([t,e]);return n},fillMinute:function(){var e,t,n=this.fillCommon("m"),i=-1!==this.options.template.indexOf("mm");for(t=0;59>=t;t+=this.options.minuteStep)e=i?this.leadZero(t):t,n.push([t,e]);return n},fillSecond:function(){var e,t,n=this.fillCommon("s"),i=-1!==this.options.template.indexOf("ss");for(t=0;59>=t;t+=this.options.secondStep)e=i?this.leadZero(t):t,n.push([t,e]);return n},fillAmpm:function(){var e=-1!==this.options.template.indexOf("a"),t=(-1!==this.options.template.indexOf("A"),[["am",e?"am":"AM"],["pm",e?"pm":"PM"]]);return t},getValue:function(t){var n,i={},r=this,o=!1;return e.each(this.map,function(e){if("ampm"!==e){var t="day"===e?1:0;return i[e]=r["$"+e]?parseInt(r["$"+e].val(),10):t,isNaN(i[e])?(o=!0,!1):void 0}}),o?"":(this.$ampm&&(i.hour=12===i.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?i.hour:i.hour+12),n=moment([i.year,i.month,i.day,i.hour,i.minute,i.second]),this.highlight(n),t=void 0===t?this.options.format:t,null===t?n.isValid()?n:null:n.isValid()?n.format(t):"")},setValue:function(t){function n(t,n){var i={};return t.children("option").each(function(t,r){var o,s=e(r).attr("value");""!==s&&(o=Math.abs(s-n),("undefined"==typeof i.distance||o<i.distance)&&(i={value:s,distance:o}))}),i.value}if(t){var i="string"==typeof t?moment(t,this.options.format):moment(t),r=this,o={};i.isValid()&&(e.each(this.map,function(e,t){"ampm"!==e&&(o[e]=i[t[1]]())}),this.$ampm&&(o.hour>=12?(o.ampm="pm",o.hour>12&&(o.hour-=12)):(o.ampm="am",0===o.hour&&(o.hour=12))),e.each(o,function(e,t){r["$"+e]&&("minute"===e&&r.options.minuteStep>1&&r.options.roundTime&&(t=n(r["$"+e],t)),"second"===e&&r.options.secondStep>1&&r.options.roundTime&&(t=n(r["$"+e],t)),r["$"+e].val(t))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(i.format(this.options.format)).change())}},highlight:function(e){e.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(e){return 9>=e?"0"+e:e},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},e.fn.combodate=function(n){var i,r=Array.apply(null,arguments);return r.shift(),"getValue"===n&&this.length&&(i=this.eq(0).data("combodate"))?i.getValue.apply(i,r):this.each(function(){var i=e(this),o=i.data("combodate"),s="object"==typeof n&&n;o||i.data("combodate",o=new t(this,s)),"string"==typeof n&&"function"==typeof o[n]&&o[n].apply(o,r)})},e.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(e){"use strict";var t=function(n){this.init("combodate",n,t.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),n.combodate=e.fn.editableutils.tryParseJson(n.combodate,!0),this.options.combodate=e.extend({},t.defaults.combodate,n.combodate,{format:this.options.format,template:this.options.template})};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===e.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(e,n){var i=e?e.format(this.options.viewformat):"";t.superclass.value2html.call(this,i,n)},html2value:function(e){return e?moment(e,this.options.viewformat):null},value2str:function(e){return e?e.format(this.options.format):""},str2value:function(e){return e?moment(e,this.options.format):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.combodate("setValue",e)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),e.fn.editabletypes.combodate=t}(window.jQuery),function(e){"use strict";var t=e.fn.editableform.Constructor.prototype.initInput;e.extend(e.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=e(e.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){t.apply(this);var n=null===this.input.options.inputclass||this.input.options.inputclass===!1,i="input-sm",r="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~e.inArray(this.input.type,r)&&(this.input.$input.addClass("form-control"),n&&(this.input.options.inputclass=i,this.input.$input.addClass(i)));for(var o=this.$form.find(".editable-buttons"),s=n?[i]:this.input.options.inputclass.split(" "),a=0;a<s.length;a++)"input-lg"===s[a].toLowerCase()&&o.find("button").removeClass("btn-sm").addClass("btn-lg")}}),e.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',e.fn.editableform.errorGroupClass="has-error",e.fn.editableform.errorBlockClass=null,e.fn.editableform.engine="bs3"}(window.jQuery),function(e){"use strict";e.extend(e.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:e.fn.popover.Constructor.DEFAULTS,initContainer:function(){e.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var t;this.$element.data("template")&&(t=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),t&&this.$element.data("template",t)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(e,t){this.container().options[e]=t},setPosition:function(){(function(){var e=this.tip(),t="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,n=/\s?auto?\s?/i,i=n.test(t);i&&(t=t.replace(n,"")||"top");var r=this.getPosition(),o=e[0].offsetWidth,s=e[0].offsetHeight;if(i){var a=this.$element.parent(),l=t,c=document.documentElement.scrollTop||document.body.scrollTop,u="body"==this.options.container?window.innerWidth:a.outerWidth(),d="body"==this.options.container?window.innerHeight:a.outerHeight(),h="body"==this.options.container?0:a.offset().left;t="bottom"==t&&r.top+r.height+s-c>d?"top":"top"==t&&r.top-c-s<0?"bottom":"right"==t&&r.right+o>u?"left":"left"==t&&r.left-o<h?"right":t,e.removeClass(l).addClass(t)}var f=this.getCalculatedOffset(t,r,o,s);this.applyPlacement(f,t)}).call(this.container())}})}(window.jQuery),function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function n(t,n){var i,r=e(t).data(),o={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])"),n=new RegExp("^"+n.toLowerCase());for(var a in r)n.test(a)&&(i=a.replace(s,function(e,t){return t.toLowerCase()}),o[i]=r[a]);return o}function i(t){var n={};if(u[t]||(t=t.split("-")[0],u[t])){var i=u[t];return e.each(c,function(e,t){t in i&&(n[t]=i[t])}),n}}var r=function(t,n){this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(d.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};r.prototype={constructor:r,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),i=n.language;switch(u[i]||(i=i.split("-")[0],u[i]||(i=l.language)),n.language=i,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var r=d.parseFormat(n.format);n.startDate!==-1/0&&(n.startDate=d.parseDate(n.startDate,r,n.language)),1/0!==n.endDate&&(n.endDate=d.parseDate(n.endDate,r,n.language)),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t,n,i=0;i<e.length;i++)t=e[i][0],n=e[i][1],t.on(n)},_unapplyEvents:function(e){for(var t,n,i=0;i<e.length;i++)t=e[i][0],n=e[i][1],t.off(n)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).size()||this.picker.is(e.target)||this.picker.find(e.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var i=n||this.date,r=new Date(i.getTime()+6e4*i.getTimezoneOffset());this.element.trigger({type:t,date:r,format:e.proxy(function(e){var t=e||this.o.format;return d.formatDate(i,t,this.o.language)},this)})},show:function(e){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),e&&e.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){this.date=e,this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):this.component&&this.element.find("input").val(e)},getFormattedDate:function(e){return void 0===e&&(e=this.o.format),d.formatDate(this.date,e,this.o.language)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+10,n=this.component?this.component.parent().offset():this.element.offset(),i=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:n.top+i,left:n.left,zIndex:t})}},_allow_update:!0,update:function(){if(this._allow_update){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):(e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=d.parseDate(e,this.o.format,this.o.language),t&&this.setValue(),this.viewDate=this.date<this.o.startDate?new Date(this.o.startDate):this.date>this.o.endDate?new Date(this.o.endDate):new Date(this.date),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+u[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+u[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o=this.date.valueOf(),s=new Date;return t.getUTCFullYear()<i||t.getUTCFullYear()==i&&t.getUTCMonth()<r?n.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()==i&&t.getUTCMonth()>r)&&n.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==s.getFullYear()&&t.getUTCMonth()==s.getMonth()&&t.getUTCDate()==s.getDate()&&n.push("today"),o&&t.valueOf()==o&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!=e.inArray(t.valueOf(),this.range)&&n.push("selected")),n
},fill:function(){{var n,i=new Date(this.viewDate),r=i.getUTCFullYear(),o=i.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,c=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf()}this.picker.find(".datepicker-days thead th.datepicker-switch").text(u[this.o.language].months[o]+" "+r),this.picker.find("tfoot th.today").text(u[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(u[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var h=t(r,o-1,28,0,0,0,0),f=d.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(f),h.setUTCDate(f-(h.getUTCDay()-this.o.weekStart+7)%7);var p=new Date(h);p.setUTCDate(p.getUTCDate()+42),p=p.valueOf();for(var m,g=[];h.valueOf()<p;){if(h.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+h+(this.o.weekStart-h.getUTCDay()-7)%7*864e5),y=new Date(+v+(11-v.getUTCDay())%7*864e5),b=new Date(+(b=t(y.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),w=(y-b)/864e5/7+1;g.push('<td class="cw">'+w+"</td>")}m=this.getClassNames(h),m.push("day");var _=this.o.beforeShowDay(h);void 0===_?_={}:"boolean"==typeof _?_={enabled:_}:"string"==typeof _&&(_={classes:_}),_.enabled===!1&&m.push("disabled"),_.classes&&(m=m.concat(_.classes.split(/\s+/))),_.tooltip&&(n=_.tooltip),m=e.unique(m),g.push('<td class="'+m.join(" ")+'"'+(n?' title="'+n+'"':"")+">"+h.getUTCDate()+"</td>"),h.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var C=this.date&&this.date.getUTCFullYear(),k=this.picker.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");C&&C==r&&k.eq(this.date.getUTCMonth()).addClass("active"),(s>r||r>l)&&k.addClass("disabled"),r==s&&k.slice(0,a).addClass("disabled"),r==l&&k.slice(c+1).addClass("disabled"),g="",r=10*parseInt(r/10,10);var x=this.picker.find(".datepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td");r-=1;for(var S=-1;11>S;S++)g+='<span class="year'+(-1==S?" old":10==S?" new":"")+(C==r?" active":"")+(s>r||r>l?" disabled":"")+'">'+r+"</span>",r+=1;x.html(g)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(n){n.preventDefault();var i=e(n.target).closest("span, td, th");if(1==i.length)switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var r=d.modes[this.viewMode].navStep*("prev"==i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,r);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,r)}this.fill();break;case"today":var o=new Date;o=t(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var s="linked"==this.o.todayBtn?null:"view";this._setDate(o,s);break;case"clear":var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!i.is(".disabled")){if(this.viewDate.setUTCDate(1),i.is(".month")){var l=1,c=i.parent().find("span").index(i),u=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(t(u,c,l,0,0,0,0))}else{var u=parseInt(i.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(u),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(t(u,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var l=parseInt(i.text(),10)||1,u=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();i.is(".old")?0===c?(c=11,u-=1):c-=1:i.is(".new")&&(11==c?(c=0,u+=1):c+=1),this._setDate(t(u,c,l,0,0,0,0))}}},_setDate:function(e,t){t&&"date"!=t||(this.date=new Date(e)),t&&"view"!=t||(this.viewDate=new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),!this.o.autoclose||t&&"date"!=t||this.hide())},moveMonth:function(e,t){if(!t)return e;var n,i,r=new Date(e.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),a=Math.abs(t);if(t=t>0?1:-1,1==a)i=-1==t?function(){return r.getUTCMonth()==s}:function(){return r.getUTCMonth()!=n},n=s+t,r.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var l=0;a>l;l++)r=this.moveMonth(r,t);n=r.getUTCMonth(),r.setUTCDate(o),i=function(){return n!=r.getUTCMonth()}}for(;i();)r.setUTCDate(--o),r.setUTCMonth(n);return r},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return 27==e.keyCode&&this.show(),void 0;var t,n,i,r=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37==e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.date,t),i=this.moveYear(this.viewDate,t)):e.shiftKey?(n=this.moveMonth(this.date,t),i=this.moveMonth(this.viewDate,t)):(n=new Date(this.date),n.setUTCDate(this.date.getUTCDate()+t),i=new Date(this.viewDate),i.setUTCDate(this.viewDate.getUTCDate()+t)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),e.preventDefault(),r=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38==e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.date,t),i=this.moveYear(this.viewDate,t)):e.shiftKey?(n=this.moveMonth(this.date,t),i=this.moveMonth(this.viewDate,t)):(n=new Date(this.date),n.setUTCDate(this.date.getUTCDate()+7*t),i=new Date(this.viewDate),i.setUTCDate(this.viewDate.getUTCDate()+7*t)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),e.preventDefault(),r=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(r){this._trigger("changeDate");var o;this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var o=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};o.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.date}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){var n=e(t.target).data("datepicker"),i=n.getUTCDate(),r=e.inArray(t.target,this.inputs),o=this.inputs.length;if(-1!=r){if(i<this.dates[r])for(;r>=0&&i<this.dates[r];)this.pickers[r--].setUTCDate(i);else if(i>this.dates[r])for(;o>r&&i>this.dates[r];)this.pickers[r++].setUTCDate(i);this.updateDates()}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var s=e.fn.datepicker,a=e.fn.datepicker=function(t){var s=Array.apply(null,arguments);s.shift();var a;return this.each(function(){var c=e(this),u=c.data("datepicker"),d="object"==typeof t&&t;if(!u){var h=n(this,"date"),f=e.extend({},l,h,d),p=i(f.language),m=e.extend({},l,p,h,d);if(c.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||c.find("input").toArray()};c.data("datepicker",u=new o(this,e.extend(m,g)))}else c.data("datepicker",u=new r(this,m))}return"string"==typeof t&&"function"==typeof u[t]&&(a=u[t].apply(u,s),void 0!==a)?!1:void 0}),void 0!==a?a:this},l=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=r;var u=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,d.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\x00").split("\x00"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(n,i,o){if(n instanceof Date)return n;if("string"==typeof i&&(i=d.parseFormat(i)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){var s,a,l=/([\-+]\d+)([dmwy])/,c=n.match(/([\-+]\d+)([dmwy])/g);n=new Date;for(var h=0;h<c.length;h++)switch(s=l.exec(c[h]),a=parseInt(s[1]),s[2]){case"d":n.setUTCDate(n.getUTCDate()+a);break;case"m":n=r.prototype.moveMonth.call(r.prototype,n,a);break;case"w":n.setUTCDate(n.getUTCDate()+7*a);break;case"y":n=r.prototype.moveYear.call(r.prototype,n,a)}return t(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}var f,p,s,c=n&&n.match(this.nonpunctuation)||[],n=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,n=t(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var y=i.parts.slice();if(c.length!=y.length&&(y=e(y).filter(function(t,n){return-1!==e.inArray(n,g)}).toArray()),c.length==y.length){for(var h=0,b=y.length;b>h;h++){if(f=parseInt(c[h],10),s=y[h],isNaN(f))switch(s){case"MM":p=e(u[o].months).filter(function(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e==t}),f=e.inArray(p[0],u[o].months)+1;break;case"M":p=e(u[o].monthsShort).filter(function(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e==t}),f=e.inArray(p[0],u[o].monthsShort)+1}m[s]=f}for(var w,h=0;h<g.length;h++)w=g[h],w in m&&!isNaN(m[w])&&v[w](n,m[w])}return n},formatDate:function(t,n,i){"string"==typeof n&&(n=d.parseFormat(n));var r={d:t.getUTCDate(),D:u[i].daysShort[t.getUTCDay()],DD:u[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:u[i].monthsShort[t.getUTCMonth()],MM:u[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m;for(var t=[],o=e.extend([],n.separators),s=0,a=n.parts.length;a>=s;s++)o.length&&t.push(o.shift()),t.push(r[n.parts[s]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=d,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=s,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),a.call(n,"show"))}),e(function(){a.call(e('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(e){"use strict";e.fn.bdatepicker=e.fn.datepicker.noConflict(),e.fn.datepicker||(e.fn.datepicker=e.fn.bdatepicker);var t=function(e){this.init("date",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{initPicker:function(t,n){this.options.viewformat||(this.options.viewformat=this.options.format),t.datepicker=e.fn.editableutils.tryParseJson(t.datepicker,!0),this.options.datepicker=e.extend({},n.datepicker,t.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=e.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault(),e.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear)))},value2html:function(e,n){var i=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";t.superclass.value2html.call(this,i,n)},html2value:function(e){return this.parseDate(e,this.parsedViewFormat)},value2str:function(e){return e?this.dpg.formatDate(e,this.parsedFormat,this.options.datepicker.language):""},str2value:function(e){return this.parseDate(e,this.parsedFormat)},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.bdatepicker("update",e)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(t){if(!e(t.currentTarget).is(".old")&&!e(t.currentTarget).is(".new")){var n=e(this).closest("form");setTimeout(function(){n.submit()},200)}})},parseDate:function(e,t){var n,i=null;return e&&(i=this.dpg.parseDate(e,t,this.options.datepicker.language),"string"==typeof e&&(n=this.dpg.formatDate(i,t,this.options.datepicker.language),e!==n&&(i=null))),i}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),e.fn.editabletypes.date=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datefield",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.date),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(e){this.$input.val(e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),e.fn.editabletypes.datefield=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datetime",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{initPicker:function(t,n){this.options.viewformat||(this.options.viewformat=this.options.format),t.datetimepicker=e.fn.editableutils.tryParseJson(t.datetimepicker,!0),this.options.datetimepicker=e.extend({},n.datetimepicker,t.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=e.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var t=e(this).closest("form").parent();setTimeout(function(){t.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault(),e.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear)))},value2html:function(e,n){var i=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return n?(t.superclass.value2html.call(this,i,n),void 0):i},html2value:function(e){var t=this.parseDate(e,this.parsedViewFormat);return t?this.fromUTC(t):null},value2str:function(e){return e?this.dpg.formatDate(this.toUTC(e),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(e){var t=this.parseDate(e,this.parsedFormat);return t?this.fromUTC(t):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){e&&this.$input.data("datetimepicker").setDate(e)},input2value:function(){var e=this.$input.data("datetimepicker");return e.date?e.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var t=e(this).closest("form");setTimeout(function(){t.submit()},200)})},toUTC:function(e){return e?new Date(e.valueOf()-6e4*e.getTimezoneOffset()):e},fromUTC:function(e){return e?new Date(e.valueOf()+6e4*e.getTimezoneOffset()):e},parseDate:function(e,t){var n,i=null;return e&&(i=this.dpg.parseDate(e,t,this.options.datetimepicker.language,this.options.formatType),"string"==typeof e&&(n=this.dpg.formatDate(i,t,this.options.datetimepicker.language,this.options.formatType),e!==n&&(i=null))),i}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),e.fn.editabletypes.datetime=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datetimefield",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.datetime),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(e){this.$input.val(this.value2html(e)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),e.fn.editabletypes.datetimefield=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("address",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input")},value2html:function(t,n){if(!t)return e(n).empty(),void 0;var i=e("<div>").text(t.city).html()+", "+e("<div>").text(t.street).html()+" st., bld. "+e("<div>").text(t.building).html();e(n).html(i)},html2value:function(){return null},value2str:function(e){var t="";if(e)for(var n in e)t=t+n+":"+e[n]+";";return t},str2value:function(e){return e},value2input:function(e){e&&(this.$input.filter('[name="city"]').val(e.city),this.$input.filter('[name="street"]').val(e.street),this.$input.filter('[name="building"]').val(e.building))},input2value:function(){return{city:this.$input.filter('[name="city"]').val(),street:this.$input.filter('[name="street"]').val(),building:this.$input.filter('[name="building"]').val()}},activate:function(){this.$input.filter('[name="city"]').focus()},autosubmit:function(){this.$input.keydown(function(t){13===t.which&&e(this).closest("form").submit()})}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-address"><label><span>City: </span><input type="text" name="city" class="input-small"></label></div><div class="editable-address"><label><span>Street: </span><input type="text" name="street" class="input-small"></label></div><div class="editable-address"><label><span>Building: </span><input type="text" name="building" class="input-mini"></label></div>',inputclass:""}),e.fn.editabletypes.address=t}(window.jQuery),function(e){"use strict";var t=function(n){this.init("wysihtml5",n,t.defaults),this.options.wysihtml5=e.extend({},t.defaults.wysihtml5,n.wysihtml5)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){var t,n=e.Deferred();return this.$input.attr("id","textarea_"+(new Date).getTime()),this.setClass(),this.setAttr("placeholder"),e.extend(this.options.wysihtml5,{events:{load:function(){n.resolve()}}}),this.$input.wysihtml5(this.options.wysihtml5),t=/msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase()),t&&this.$input.before("<br><br>"),n.promise()},value2html:function(t,n){e(n).html(t)},html2value:function(e){return e},value2input:function(e){this.$input.data("wysihtml5").editor.setValue(e,!0)},activate:function(){this.$input.data("wysihtml5").editor.focus()},isEmpty:function(t){return""===e.trim(t.html())?!0:""!==e.trim(t.text())?!1:!t.height()||!t.width()}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"editable-wysihtml5",placeholder:null,wysihtml5:{stylesheets:!1}}),e.fn.editabletypes.wysihtml5=t}(window.jQuery);var n={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=function(){function e(e,t){var n=typeof e[t];return n==d||!(n!=u||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=u||!e[t])}function n(e,t){return typeof e[t]!=h}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function r(e){return e&&v(e,g)&&b(e,m)}function o(e){window.alert("Rangy not supported in your browser. Reason: "+e),w.initialized=!0,w.supported=!1}function s(e){var t="Rangy warning: "+e;w.config.alertOnWarn?window.alert(t):typeof window.console!=h&&typeof window.console.log!=h&&window.console.log(t)}function a(){if(!w.initialized){var n,i=!1,s=!1;e(document,"createRange")&&(n=document.createRange(),v(n,p)&&b(n,f)&&(i=!0),n.detach());var a=t(document,"body")?document.body:document.getElementsByTagName("body")[0];a&&e(a,"createTextRange")&&(n=a.createTextRange(),r(n)&&(s=!0)),i||s||o("Neither Range nor TextRange are implemented"),w.initialized=!0,w.features={implementsDomRange:i,implementsTextRange:s};for(var l=C.concat(_),c=0,u=l.length;u>c;++c)try{l[c](w)}catch(d){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",d)}}}function l(e){e=e||window,a();for(var t=0,n=k.length;n>t;++t)k[t](e)}function c(e){this.name=e,this.initialized=!1,this.supported=!1}var u="object",d="function",h="undefined",f=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],p=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],m=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],g=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],v=i(e),y=i(t),b=i(n),w={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:v,areHostObjects:y,areHostProperties:b,isTextRange:r},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};w.fail=o,w.warn=s,{}.hasOwnProperty?w.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:o("hasOwnProperty not supported");var _=[],C=[];w.init=a,w.addInitListener=function(e){w.initialized?e(w):_.push(e)};var k=[];w.addCreateMissingNativeApiListener=function(e){k.push(e)},w.createMissingNativeApi=l,c.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},c.prototype.warn=function(e){w.warn("Module "+this.name+": "+e)},c.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},w.createModule=function(e,t){var n=new c(e);w.modules[e]=n,C.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},w.requireModules=function(e){for(var t,n,i=0,r=e.length;r>i;++i){if(n=e[i],t=w.modules[n],!(t&&t instanceof c))throw new Error("Module '"+n+"' not found");if(!t.supported)throw new Error("Module '"+n+"' not supported")}};var x=!1,S=function(){x||(x=!0,w.initialized||a())};return typeof window==h?(o("No window found"),void 0):typeof document==h?(o("No document found"),void 0):(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",S,!1),e(window,"addEventListener")?window.addEventListener("load",S,!1):e(window,"attachEvent")?window.attachEvent("onload",S):o("Window does not have required addEventListener or attachEvent method"),w)}(),rangy.createModule("DomUtil",function(e,t){function n(e){var t;return typeof e.namespaceURI==S||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function i(e){var t=e.parentNode;return 1==t.nodeType?t:null}function r(e){for(var t=0;e=e.previousSibling;)t++;return t}function o(e){var t;return c(e)?e.length:(t=e.childNodes)?t.length:0}function s(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(N(i,n))return n;return null}function a(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function l(e,t,n){for(var i,r=n?e:e.parentNode;r;){if(i=r.parentNode,i===t)return r;r=i}return null}function c(e){var t=e.nodeType;return 3==t||4==t||8==t}function u(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function d(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),u(n,e),n}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=S)return e.ownerDocument;if(typeof e.document!=S)return e.document;if(e.parentNode)return h(e.parentNode);throw new Error("getDocument: no document found for node")}function f(e){var t=h(e);if(typeof t.defaultView!=S)return t.defaultView;if(typeof t.parentWindow!=S)return t.parentWindow;throw new Error("Cannot get a window object for node")}function p(e){if(typeof e.contentDocument!=S)return e.contentDocument;if(typeof e.contentWindow!=S)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function m(e){if(typeof e.contentWindow!=S)return e.contentWindow;if(typeof e.contentDocument!=S)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function g(e){return T.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function v(e){for(var t;t=e.parentNode;)e=t;return e}function y(e,t,n,i){var o,a,c,u,d;if(e==n)return t===i?0:i>t?-1:1;if(o=l(n,e,!0))return t<=r(o)?-1:1;if(o=l(e,n,!0))return r(o)<i?-1:1;if(a=s(e,n),c=e===a?a:l(e,a,!0),u=n===a?a:l(n,a,!0),c===u)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(d=a.firstChild;d;){if(d===c)return-1;if(d===u)return 1;d=d.nextSibling}throw new Error("Should not be here!")}function b(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function w(e){if(!e)return"[No node]";if(c(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function _(e){this.root=e,this._next=e}function C(e){return new _(e)}function k(e,t){this.node=e,this.offset=t}function x(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var S="undefined",T=e.util;T.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),T.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var E=document.createElement("div");T.areHostMethods(E,["insertBefore","appendChild","cloneNode"]||!T.areHostObjects(E,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),T.isHostProperty(E,"innerHTML")||t.fail("Element is missing innerHTML property");var D=document.createTextNode("test");T.areHostMethods(D,["splitText","deleteData","insertData","appendData","cloneNode"]||!T.areHostObjects(E,["previousSibling","nextSibling","childNodes","parentNode"])||!T.areHostProperties(D,["data"]))||t.fail("Incomplete Text Node implementation");var N=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};_.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null
}},k.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+w(this.node)+":"+this.offset+")]"}},x.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},x.prototype.toString=function(){return this.message},e.dom={arrayContains:N,isHtmlNamespace:n,parentElement:i,getNodeIndex:r,getNodeLength:o,getCommonAncestor:s,isAncestorOf:a,getClosestAncestorIn:l,isCharacterDataNode:c,insertAfter:u,splitDataNode:d,getDocument:h,getWindow:f,getIframeWindow:m,getIframeDocument:p,getBody:g,getRootContainer:v,comparePoints:y,inspectNode:w,fragmentFromNodeChildren:b,createIterator:C,DomPosition:k},e.DOMException=x}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(R.isAncestorOf(e,t.startContainer,!0)||R.isAncestorOf(e,t.endContainer,!0))}function n(e){return R.getDocument(e.startContainer)}function i(e,t,n){var i=e._listeners[t];if(i)for(var r=0,o=i.length;o>r;++r)i[r].call(e,{target:e,args:n})}function r(e){return new L(e.parentNode,R.getNodeIndex(e))}function o(e){return new L(e.parentNode,R.getNodeIndex(e)+1)}function s(e,t,n){var i=11==e.nodeType?e.firstChild:e;return R.isCharacterDataNode(t)?n==t.length?R.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:R.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function a(e){for(var t,i,r,o=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(r=e.getSubtreeIterator(),i.appendChild(a(r)),r.detach(!0)),10==i.nodeType)throw new j("HIERARCHY_REQUEST_ERR");o.appendChild(i)}return o}function l(e,t,n){var i,r;n=n||{stop:!1};for(var o,s;o=e.next();)if(e.isPartiallySelectedSubtree()){if(t(o)===!1)return n.stop=!0,void 0;if(s=e.getSubtreeIterator(),l(s,t,n),s.detach(!0),n.stop)return}else for(i=R.createIterator(o);r=i.next();)if(t(r)===!1)return n.stop=!0,void 0}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function u(e){for(var t,i,r=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(u(i)),i.detach(!0)):e.remove(),10==t.nodeType)throw new j("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function d(e,t,n){var i,r=!(!t||!t.length),o=!!n;r&&(i=new RegExp("^("+t.join("|")+")$"));var s=[];return l(new f(e,!1),function(e){r&&!i.test(e.nodeType)||o&&!n(e)||s.push(e)}),s}function h(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+R.inspectNode(e.startContainer)+":"+e.startOffset+", "+R.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function f(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&R.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||R.isCharacterDataNode(this.sc)?R.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||R.isCharacterDataNode(this.ec)?R.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,n){this.nodes=d(e,t,n),this._next=this.nodes[0],this._position=0}function g(e){return function(t,n){for(var i,r=n?t:t.parentNode;r;){if(i=r.nodeType,R.arrayContains(e,i))return r;r=r.parentNode}return null}}function v(e,t){if(Y(e,t))throw new p("INVALID_NODE_TYPE_ERR")}function y(e){if(!e.startContainer)throw new j("INVALID_STATE_ERR")}function b(e,t){if(!R.arrayContains(t,e.nodeType))throw new p("INVALID_NODE_TYPE_ERR")}function w(e,t){if(0>t||t>(R.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new j("INDEX_SIZE_ERR")}function _(e,t){if(V(e,!0)!==V(t,!0))throw new j("WRONG_DOCUMENT_ERR")}function C(e){if(W(e,!0))throw new j("NO_MODIFICATION_ALLOWED_ERR")}function k(e,t){if(!e)throw new j(t)}function x(e){return!R.arrayContains(B,e.nodeType)&&!V(e,!0)}function S(e,t){return t<=(R.isCharacterDataNode(e)?e.length:e.childNodes.length)}function T(e){if(y(e),x(e.startContainer)||x(e.endContainer)||!S(e.startContainer,e.startOffset)||!S(e.endContainer,e.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function E(){}function D(e){e.START_TO_START=Z,e.START_TO_END=et,e.END_TO_END=tt,e.END_TO_START=nt,e.NODE_BEFORE=it,e.NODE_AFTER=rt,e.NODE_BEFORE_AND_AFTER=ot,e.NODE_INSIDE=st}function N(e){D(e),D(e.prototype)}function A(e,t){return function(){T(this);var n,i,r=this.startContainer,s=this.startOffset,a=this.commonAncestorContainer,c=new f(this,!0);r!==a&&(n=R.getClosestAncestorIn(r,a,!0),i=o(n),r=i.node,s=i.offset),l(c,C),c.reset();var u=e(c);return c.detach(),t(this,r,s,r,s),u}}function O(n,i,s){function a(e,t){return function(n){y(this),b(n,F),b(q(n),B);var i=(e?r:o)(n);(t?l:d)(this,i.node,i.offset)}}function l(e,t,n){var r=e.endContainer,o=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((q(t)!=q(r)||1==R.comparePoints(t,n,r,o))&&(r=t,o=n),i(e,t,n,r,o))}function d(e,t,n){var r=e.startContainer,o=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((q(t)!=q(r)||-1==R.comparePoints(t,n,r,o))&&(r=t,o=n),i(e,r,o,t,n))}function h(e,t,n){(t!==e.startContainer||n!==e.startOffset||t!==e.endContainer||n!==e.endOffset)&&i(e,t,n,t,n)}n.prototype=new E,e.util.extend(n.prototype,{setStart:function(e,t){y(this),v(e,!0),w(e,t),l(this,e,t)},setEnd:function(e,t){y(this),v(e,!0),w(e,t),d(this,e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){T(this),e?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){y(this),v(e,!0),i(this,e,0,e,R.getNodeLength(e))},selectNode:function(e){y(this),v(e,!1),b(e,F);var t=r(e),n=o(e);i(this,t.node,t.offset,n.node,n.offset)},extractContents:A(u,i),deleteContents:A(c,i),canSurroundContents:function(){T(this),C(this.startContainer),C(this.endContainer);var e=new f(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},detach:function(){s(this)},splitBoundaries:function(){T(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,o=e===n;R.isCharacterDataNode(n)&&r>0&&r<n.length&&R.splitDataNode(n,r),R.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=R.splitDataNode(e,t),o?(r-=t,n=e):n==e.parentNode&&r>=R.getNodeIndex(e)&&r++,t=0),i(this,e,t,n,r)},normalizeBoundaries:function(){T(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,r=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},s=function(i){var o=i.previousSibling;if(o&&o.nodeType==i.nodeType){e=i;var s=i.length;if(t=o.length,i.insertData(0,o.data),o.parentNode.removeChild(o),e==n)r+=t,n=e;else if(n==i.parentNode){var a=R.getNodeIndex(i);r==a?(n=i,r=s):r>a&&r--}}},a=!0;if(R.isCharacterDataNode(n))n.length==r&&o(n);else{if(r>0){var l=n.childNodes[r-1];l&&R.isCharacterDataNode(l)&&o(l)}a=!this.collapsed}if(a){if(R.isCharacterDataNode(e))0==t&&s(e);else if(t<e.childNodes.length){var c=e.childNodes[t];c&&R.isCharacterDataNode(c)&&s(c)}}else e=n,t=r;i(this,e,t,n,r)},collapseToPoint:function(e,t){y(this),v(e,!0),w(e,t),h(this,e,t)}}),N(n)}function M(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:R.getCommonAncestor(e.startContainer,e.endContainer)}function P(e,t,n,r,o){var s=e.startContainer!==t||e.startOffset!==n,a=e.endContainer!==r||e.endOffset!==o;e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=o,M(e),i(e,"boundarychange",{startMoved:s,endMoved:a})}function I(e){y(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,i(e,"detach",null),e._listeners=null}function $(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},M(this)}e.requireModules(["DomUtil"]);var R=e.dom,L=R.DomPosition,j=e.DOMException;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,R.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!R.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new $(n(this.range));var t=this._current,i=t,r=0,o=t,s=R.getNodeLength(t);R.isAncestorOf(t,this.sc,!0)&&(i=this.sc,r=this.so),R.isAncestorOf(t,this.ec,!0)&&(o=this.ec,s=this.eo),P(e,i,r,o,s)}return new f(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},p.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},p.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var F=[1,3,4,5,7,8,10],B=[2,9,11],H=[5,6,10,12],U=[1,3,4,5,7,8,10,11],z=[1,3,4,5,7,8],q=R.getRootContainer,V=g([9,11]),W=g(H),Y=g([6,10,12]),K=document.createElement("style"),G=!1;try{K.innerHTML="<b>x</b>",G=3==K.firstChild.nodeType}catch(J){}e.features.htmlParsingConforms=G;var Q=G?function(e){var t=this.startContainer,n=R.getDocument(t);if(!t)throw new j("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:R.isCharacterDataNode(t)&&(i=R.parentElement(t)),i=null===i||"HTML"==i.nodeName&&R.isHtmlNamespace(R.getDocument(i).documentElement)&&R.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=e,R.fragmentFromNodeChildren(i)}:function(e){y(this);var t=n(this),i=t.createElement("body");return i.innerHTML=e,R.fragmentFromNodeChildren(i)},X=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Z=0,et=1,tt=2,nt=3,it=0,rt=1,ot=2,st=3;E.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){T(this),_(this.startContainer,t.startContainer);var n,i,r,o,s=e==nt||e==Z?"start":"end",a=e==et||e==Z?"start":"end";return n=this[s+"Container"],i=this[s+"Offset"],r=t[a+"Container"],o=t[a+"Offset"],R.comparePoints(n,i,r,o)},insertNode:function(e){if(T(this),b(e,U),C(this.startContainer),R.isAncestorOf(e,this.startContainer,!0))throw new j("HIERARCHY_REQUEST_ERR");var t=s(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){T(this);var e,t;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&R.isCharacterDataNode(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t;var i=new f(this,!0);return e=a(i),i.detach(),e},canSurroundContents:function(){T(this),C(this.startContainer),C(this.endContainer);var e=new f(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(b(e,z),!this.canSurroundContents())throw new p("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);s(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){T(this);for(var e,t=new $(n(this)),i=X.length;i--;)e=X[i],t[e]=this[e];return t},toString:function(){T(this);var e=this.startContainer;if(e===this.endContainer&&R.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new f(this,!0);return l(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){T(this);var t=e.parentNode,n=R.getNodeIndex(e);if(!t)throw new j("NOT_FOUND_ERR");var i=this.comparePoint(t,n),r=this.comparePoint(t,n+1);return 0>i?r>0?ot:it:r>0?rt:st},comparePoint:function(e,t){return T(this),k(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),R.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:R.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Q,toHtml:function(){T(this);var e=n(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(T(this),k(e,"NOT_FOUND_ERR"),R.getDocument(e)!==n(this))return!1;var i=e.parentNode,r=R.getNodeIndex(e);k(i,"NOT_FOUND_ERR");var o=R.comparePoints(i,r,this.endContainer,this.endOffset),s=R.comparePoints(i,r+1,this.startContainer,this.startOffset);return t?0>=o&&s>=0:0>o&&s>0},isPointInRange:function(e,t){return T(this),k(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),R.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&R.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(T(this),n(e)!=n(this))throw new j("WRONG_DOCUMENT_ERR");var i=R.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),r=R.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=i&&r>=0:0>i&&r>0},intersection:function(e){if(this.intersectsRange(e)){var t=R.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=R.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==R.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==R.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new p("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==st},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,R.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var i=n.pop();t.setEnd(i,i.length);var r=this.containsRange(t);return t.detach(),r}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return T(this),new m(this,e,t)},getNodes:function(e,t){return T(this),d(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){y(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){y(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return $.rangesEqual(this,e)},inspect:function(){return h(this)}},O($,P,I),e.rangePrototype=E.prototype,$.rangeProperties=X,$.RangeIterator=f,$.copyComparisonConstants=N,$.createPrototypeRange=O,$.inspect=h,$.getRangeDocument=n,$.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=$,e.RangeException=p}),rangy.createModule("WrappedRange",function(e){function t(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();n=e.duplicate(),n.collapse(!1);var r=n.parentElement(),o=i==r?i:s.getCommonAncestor(i,r);return o==t?o:s.getCommonAncestor(t,o)}function n(e){return 0==e.compareEndPoints("StartToEnd",e)}function i(e,t,n,i){var r=e.duplicate();r.collapse(n);var o=r.parentElement();if(s.isAncestorOf(t,o,!0)||(o=t),!o.canHaveHTML)return new a(o.parentNode,s.getNodeIndex(o));var l,c,u,d,h,f=s.getDocument(o).createElement("span"),p=n?"StartToStart":"StartToEnd";do o.insertBefore(f,f.previousSibling),r.moveToElementText(f);while((l=r.compareEndPoints(p,e))>0&&f.previousSibling);if(h=f.nextSibling,-1==l&&h&&s.isCharacterDataNode(h)){r.setEndPoint(n?"EndToStart":"EndToEnd",e);var m;if(/[\r\n]/.test(h.data)){var g=r.duplicate(),v=g.text.replace(/\r\n/g,"\r").length;for(m=g.moveStart("character",v);-1==(l=g.compareEndPoints("StartToEnd",g));)m++,g.moveStart("character",1)}else m=r.text.length;d=new a(h,m)}else c=(i||!n)&&f.previousSibling,u=(i||n)&&f.nextSibling,d=u&&s.isCharacterDataNode(u)?new a(u,0):c&&s.isCharacterDataNode(c)?new a(c,c.length):new a(o,s.getNodeIndex(f));return f.parentNode.removeChild(f),d}function r(e,t){var n,i,r,o,a=e.offset,l=s.getDocument(e.node),c=l.body.createTextRange(),u=s.isCharacterDataNode(e.node);return u?(n=e.node,i=n.parentNode):(o=e.node.childNodes,n=a<o.length?o[a]:null,i=e.node),r=l.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),c.moveToElementText(r),c.collapse(!t),i.removeChild(r),u&&c[t?"moveStart":"moveEnd"]("character",a),c}e.requireModules(["DomUtil","DomRange"]);var o,s=e.dom,a=s.DomPosition,l=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){o=function(e){this.textRange=e,this.refresh()},o.prototype=new l(document),o.prototype.refresh=function(){var e,r,o=t(this.textRange);n(this.textRange)?r=e=i(this.textRange,o,!0,!0):(e=i(this.textRange,o,!0,!1),r=i(this.textRange,o,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(r.node,r.offset)},l.copyComparisonConstants(o);var c=function(){return this}();"undefined"==typeof c.Range&&(c.Range=o),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else!function(){function t(e){for(var t,n=u.length;n--;)t=u[n],e[t]=e.nativeRange[t]}function n(e,t,n,i,r){var o=e.startContainer!==t||e.startOffset!=n,s=e.endContainer!==i||e.endOffset!=r;(o||s)&&(e.setEnd(i,r),e.setStart(t,n))}function i(e){e.nativeRange.detach(),e.detached=!0;for(var t,n=u.length;n--;)t=u[n],e[t]=null}var r,a,c,u=l.rangeProperties;o=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,t(this)},l.createPrototypeRange(o,n,i),r=o.prototype,r.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},r.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},r.collapse=function(e){this.nativeRange.collapse(e),t(this)},r.cloneRange=function(){return new o(this.nativeRange.cloneRange())},r.refresh=function(){t(this)},r.toString=function(){return this.nativeRange.toString()};var d=document.createTextNode("test");s.getBody(document).appendChild(d);var h=document.createRange();h.setStart(d,0),h.setEnd(d,0);try{h.setStart(d,1),a=!0,r.setStart=function(e,n){this.nativeRange.setStart(e,n),t(this)},r.setEnd=function(e,n){this.nativeRange.setEnd(e,n),t(this)},c=function(e){return function(n){this.nativeRange[e](n),t(this)}}}catch(f){a=!1,r.setStart=function(e,n){try{this.nativeRange.setStart(e,n)}catch(i){this.nativeRange.setEnd(e,n),this.nativeRange.setStart(e,n)}t(this)},r.setEnd=function(e,n){try{this.nativeRange.setEnd(e,n)}catch(i){this.nativeRange.setStart(e,n),this.nativeRange.setEnd(e,n)}t(this)},c=function(e,n){return function(i){try{this.nativeRange[e](i)}catch(r){this.nativeRange[n](i),this.nativeRange[e](i)}t(this)}}}r.setStartBefore=c("setStartBefore","setEndBefore"),r.setStartAfter=c("setStartAfter","setEndAfter"),r.setEndBefore=c("setEndBefore","setStartBefore"),r.setEndAfter=c("setEndAfter","setStartAfter"),h.selectNodeContents(d),r.selectNodeContents=h.startContainer==d&&h.endContainer==d&&0==h.startOffset&&h.endOffset==d.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,l.getEndOffset(e))},h.selectNodeContents(d),h.setEnd(d,3);var p=document.createRange();p.selectNodeContents(d),p.setEnd(d,4),p.setStart(d,2),r.compareBoundaryPoints=-1==h.compareBoundaryPoints(h.START_TO_END,p)&1==h.compareBoundaryPoints(h.END_TO_START,p)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(h,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),s.getBody(document).removeChild(d),h.detach(),p.detach()}(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(o.rangeToTextRange=function(e){if(e.collapsed){var t=r(new a(e.startContainer,e.startOffset),!0);return t}var n=r(new a(e.startContainer,e.startOffset),!0),i=r(new a(e.endContainer,e.endOffset),!1),o=s.getDocument(e.startContainer).body.createTextRange();return o.setEndPoint("StartToStart",n),o.setEndPoint("EndToEnd",i),o}),o.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=o,e.createRange=function(t){return t=t||document,new o(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new l(e)},e.createIframeRange=function(t){return e.createRange(s.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(s.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(this)}),n=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function n(e){return(e||window).getSelection()}function i(e){return(e||window).document.selection}function r(e,t,n){var i=n?"end":"start",r=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function o(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function a(t){var n;return t instanceof x?(n=t._selectionNativeRange,n||(n=e.createNativeRange(C.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof S?n=t.nativeRange:e.features.implementsDomRange&&t instanceof C.getWindow(t.startContainer).Range&&(n=t),n}function l(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!C.isAncestorOf(e[0],e[t]))return!1;return!0}function c(e){var t=e.getNodes();if(!l(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function u(e){return!!e&&"undefined"!=typeof e.text}function d(e,t){var n=new S(t);e._ranges=[n],r(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function h(t){if(t._ranges.length=0,"None"==t.docSelection.type)s(t);else{var n=t.docSelection.createRange();if(u(n))d(t,n);else{t.rangeCount=n.length;for(var i,o=C.getDocument(n.item(0)),a=0;a<t.rangeCount;++a)i=e.createRange(o),i.selectNode(n.item(a)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,r(t,t._ranges[t.rangeCount-1],!1)}}}function f(e,t){for(var n=e.docSelection.createRange(),i=c(t),r=C.getDocument(n.item(0)),o=C.getBody(r).createControlRange(),s=0,a=n.length;a>s;++s)o.add(n.item(s));try{o.add(i)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),h(e)}function p(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function m(e,t){for(var n,i=C.getDocument(t[0].startContainer),r=C.getBody(i).createControlRange(),o=0;rangeCount>o;++o){n=c(t[o]);try{r.add(n)}catch(s){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),h(e)}function g(e,t){if(e.anchorNode&&C.getDocument(e.anchorNode)!==C.getDocument(t))throw new T("WRONG_DOCUMENT_ERR")}function v(e){var t=[],n=new E(e.anchorNode,e.anchorOffset),i=new E(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var o=0,s=e.rangeCount;s>o;++o)t[o]=x.inspect(e.getRangeAt(o));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var y,b,w="boolean",_="_rangySelection",C=e.dom,k=e.util,x=e.DomRange,S=e.WrappedRange,T=e.DOMException,E=C.DomPosition,D="Control",N=e.util.isHostMethod(window,"getSelection"),A=e.util.isHostObject(document,"selection"),O=A&&(!N||e.config.preferTextRange);O?(y=i,e.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return"None"!=n.type||C.getDocument(n.createRange().parentElement())==t}):N?(y=n,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=y;var M=y(),P=e.createNativeRange(document),I=C.getBody(document),$=k.areHostObjects(M,["anchorNode","focusNode"]&&k.areHostProperties(M,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=$;var R=k.isHostMethod(M,"extend");e.features.selectionHasExtend=R;var L="number"==typeof M.rangeCount;e.features.selectionHasRangeCount=L;var j=!1,F=!0;k.areHostMethods(M,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof M.rangeCount&&e.features.implementsDomRange&&!function(){var e=document.createElement("iframe");I.appendChild(e);var t=C.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=C.getIframeWindow(e).getSelection(),i=t.documentElement,r=i.lastChild,o=r.firstChild,s=t.createRange();s.setStart(o,1),s.collapse(!0),n.addRange(s),F=1==n.rangeCount,n.removeAllRanges();var a=s.cloneRange();s.setStart(o,0),a.setEnd(o,2),n.addRange(s),n.addRange(a),j=2==n.rangeCount,s.detach(),a.detach(),I.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=j,e.features.collapsedNonEditableSelectionsSupported=F;var B,H=!1;I&&k.isHostMethod(I,"createControlRange")&&(B=I.createControlRange(),k.areHostProperties(B,["item","add"])&&(H=!0)),e.features.implementsControlRange=H,b=$?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var U;k.isHostMethod(M,"getRangeAt")?U=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:$&&(U=function(t){var n=C.getDocument(t.anchorNode),i=e.createRange(n);return i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)),i}),e.getSelection=function(e){e=e||window;var t=e[_],n=y(e),r=A?i(e):null;return t?(t.nativeSelection=n,t.docSelection=r,t.refresh(e)):(t=new p(n,r,e),e[_]=t),t},e.getIframeSelection=function(t){return e.getSelection(C.getIframeWindow(t))};var z=p.prototype;if(!O&&$&&k.areHostMethods(M,["removeAllRanges","addRange"])){z.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var q=function(t,n){var i=x.getRangeDocument(n),r=e.createRange(i);r.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(a(r)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};z.addRange=L?function(t,n){if(H&&A&&this.docSelection.type==D)f(this,t);else if(n&&R)q(this,t);else{var i;if(j?i=this.rangeCount:(this.removeAllRanges(),i=0),this.nativeSelection.addRange(a(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(e.config.checkSelectionRanges){var o=U(this.nativeSelection,this.rangeCount-1);o&&!x.rangesEqual(o,t)&&(t=new S(o))}this._ranges[this.rangeCount-1]=t,r(this,t,Y(this.nativeSelection)),this.isCollapsed=b(this)}else this.refresh()}}:function(e,t){t&&R?q(this,e):(this.nativeSelection.addRange(a(e)),this.refresh())},z.setRanges=function(e){if(H&&e.length>1)m(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(k.isHostMethod(M,"empty")&&k.isHostMethod(P,"select")&&H&&O))return t.fail("No means of selecting a Range or TextRange was found"),!1;z.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=C.getDocument(this.anchorNode);else if(this.docSelection.type==D){var t=this.docSelection.createRange();t.length&&(e=C.getDocument(t.item(0)).body.createTextRange())}if(e){var n=e.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(i){}s(this)},z.addRange=function(e){this.docSelection.type==D?f(this,e):(S.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,r(this,e,!1))},z.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?m(this,e):t&&this.addRange(e[0])}}z.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new T("INDEX_SIZE_ERR");return this._ranges[e]};var V;if(O)V=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=C.getBody(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==D?h(t):u(n)?d(t,n):s(t)};else if(k.isHostMethod(M,"getRangeAt")&&"number"==typeof M.rangeCount)V=function(t){if(H&&A&&t.docSelection.type==D)h(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;i>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));r(t,t._ranges[t.rangeCount-1],Y(t.nativeSelection)),t.isCollapsed=b(t)}else s(t)};else{if(!$||typeof M.isCollapsed!=w||typeof P.collapsed!=w||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;V=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=U(n,0),e._ranges=[t],e.rangeCount=1,o(e),e.isCollapsed=b(e)):s(e)}}z.refresh=function(e){var t=e?this._ranges.slice(0):null;if(V(this),e){var n=t.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!x.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var W=function(e,t){var n=e.getAllRanges(),i=!1;e.removeAllRanges();for(var r=0,o=n.length;o>r;++r)i||t!==n[r]?e.addRange(n[r]):i=!0;e.rangeCount||s(e)};z.removeRange=H?function(e){if(this.docSelection.type==D){for(var t,n=this.docSelection.createRange(),i=c(e),r=C.getDocument(n.item(0)),o=C.getBody(r).createControlRange(),s=!1,a=0,l=n.length;l>a;++a)t=n.item(a),t!==i||s?o.add(n.item(a)):s=!0;o.select(),h(this)}else W(this,e)}:function(e){W(this,e)};var Y;!O&&$&&e.features.implementsDomRange?(Y=function(e){var t=!1;return e.anchorNode&&(t=1==C.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},z.isBackwards=function(){return Y(this)}):Y=z.isBackwards=function(){return!1
},z.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},z.collapse=function(t,n){g(this,t);var i=e.createRange(C.getDocument(t));i.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(i),this.isCollapsed=!0},z.collapseToStart=function(){if(!this.rangeCount)throw new T("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},z.collapseToEnd=function(){if(!this.rangeCount)throw new T("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},z.selectAllChildren=function(t){g(this,t);var n=e.createRange(C.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},z.deleteFromDocument=function(){if(H&&A&&this.docSelection.type==D){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var i=0,r=n.length;r>i;++i)n[i].deleteContents();this.addRange(n[r-1])}},z.getAllRanges=function(){return this._ranges.slice(0)},z.setSingleRange=function(e){this.setRanges([e])},z.containsNode=function(e,t){for(var n=0,i=this._ranges.length;i>n;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},z.toHtml=function(){var e="";if(this.rangeCount){for(var t=x.getRangeDocument(this._ranges[0]).createElement("div"),n=0,i=this._ranges.length;i>n;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},z.getName=function(){return"WrappedSelection"},z.inspect=function(){return v(this)},z.detach=function(){this.win[_]=null,this.win=this.anchorNode=this.focusNode=null},p.inspect=v,e.Selection=p,e.selectionPrototype=z,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})});var i=function(){};i.extend=function(e,t){var n=i.prototype.extend;i._prototyping=!0;var r=new this;n.call(r,e),r.base=function(){},delete i._prototyping;var o=r.constructor,s=r.constructor=function(){if(!i._prototyping)if(this._constructing||this.constructor==s)this._constructing=!0,o.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],r)};return s.ancestor=this,s.extend=this.extend,s.forEach=this.forEach,s.implement=this.implement,s.prototype=r,s.toString=this.toString,s.valueOf=function(e){return"object"==e?s:o.valueOf()},n.call(s,t),"function"==typeof s.init&&s.init(),s},i.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var r=t.valueOf();t=function(){var e=this.base||i.prototype.base;this.base=n;var t=r.apply(this,arguments);return this.base=e,t},t.valueOf=function(e){return"object"==e?t:r},t.toString=i.toString}this[e]=t}else if(e){var o=i.prototype.extend;i._prototyping||"function"==typeof this||(o=this.extend||o);for(var s={toSource:null},a=["constructor","toString","valueOf"],l=i._prototyping?0:1;c=a[l++];)e[c]!=s[c]&&o.call(this,c,e[c]);for(var c in e)s[c]||o.call(this,c,e[c])}return this}},i=i.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),n.browser=function(){function e(e){return(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var t=navigator.userAgent,n=document.createElement("div"),i=-1!==t.indexOf("MSIE")&&-1===t.indexOf("Opera"),r=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),o=-1!==t.indexOf("AppleWebKit/"),s=-1!==t.indexOf("Chrome/"),a=-1!==t.indexOf("Opera/");return{USER_AGENT:t,supported:function(){var t=this.USER_AGENT.toLowerCase(),i="contentEditable"in n,r=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,o=document.querySelector&&document.querySelectorAll,s=this.isIos()&&e(t)<5||-1!==t.indexOf("opera mobi")||-1!==t.indexOf("hpwos/");return i&&r&&o&&!s},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var e=this.USER_AGENT.toLowerCase();return-1!==e.indexOf("webkit")&&-1!==e.indexOf("mobile")},supportsSandboxedIframes:function(){return i},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!r},hasCurrentStyleProperty:function(){return"currentStyle"in n},insertsLineBreaksOnReturn:function(){return r},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in n||function(){return n.setAttribute("on"+e,"return;"),"function"==typeof n["on"+e]}()},supportsEventsInIframeCorrectly:function(){return!a},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return o||r},supportsDataTransfer:function(){try{return o&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return!1}},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";return t.innerHTML=n,t.innerHTML.toLowerCase()===n},supportsCommand:function(){var e={formatBlock:i,insertUnorderedList:i||a||o,insertOrderedList:i||a||o},t={insertHTML:r};return function(n,i){var r=e[i];if(!r){try{return n.queryCommandSupported(i)}catch(o){}try{return n.queryCommandEnabled(i)}catch(s){return!!t[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return i},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return r||a||o},supportsGetAttributeCorrectly:function(){var e=document.createElement("td");return"1"!=e.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return r||i||a},clearsListsInContentEditableCorrectly:function(){return r||i||o},autoScrollsToCaret:function(){return!o},autoClosesUnclosedTags:function(){var e,t,i=n.cloneNode(!1);return i.innerHTML="<p><div></div>",t=i.innerHTML.toLowerCase(),e="<p></p><div></div>"===t||"<p><div></div></p>"===t,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in n},needsSpaceAfterLineBreak:function(){return a},supportsSpeechApiOn:function(e){var n=t.match(/Chrome\/(\d+)/)||[,0];return n[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return i&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return i},hasProblemsSettingCaretAfterImg:function(){return i},hasUndoInContextMenu:function(){return r||s||a}}}(),n.lang.array=function(e){return{contains:function(t){if(e.indexOf)return-1!==e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1},without:function(t){t=n.lang.array(t);for(var i=[],r=0,o=e.length;o>r;r++)t.contains(e[r])||i.push(e[r]);return i},get:function(){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i}}},n.lang.Dispatcher=i.extend({observe:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},on:function(){return this.observe.apply(this,n.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},stopObserving:function(e,t){this.events=this.events||{};var n,i,r=0;if(e){for(n=this.events[e]||[],i=[];r<n.length;r++)n[r]!==t&&t&&i.push(n[r]);this.events[e]=i}else this.events={};return this}}),n.lang.object=function(e){return{merge:function(t){for(var n in t)e[n]=t[n];return this},get:function(){return e},clone:function(){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)}}},function(){var e=/^\s+/,t=/\s+$/;n.lang.string=function(n){return n=String(n),{trim:function(){return n.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)n=this.replace("#{"+t+"}").by(e[t]);return n},replace:function(e){return{by:function(t){return n.split(e).join(t)}}}}}}(),function(e){function t(e){return o(e)?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),s(e))}function n(e){return e.replace(l,function(e,t){var n=(t.match(c)||[])[1]||"",i=d[n];t=t.replace(c,""),t.split(i).length>t.split(n).length&&(t+=n,n="");var r=t,o=t;return t.length>u&&(o=o.substr(0,u)+"..."),"www."===r.substr(0,4)&&(r="http://"+r),'<a href="'+r+'">'+o+"</a>"+n})}function i(e){var t=e._wysihtml5_tempElement;return t||(t=e._wysihtml5_tempElement=e.createElement("div")),t}function r(e){var t=e.parentNode,r=i(t.ownerDocument);for(r.innerHTML="<span></span>"+n(e.data),r.removeChild(r.firstChild);r.firstChild;)t.insertBefore(r.firstChild,e);t.removeChild(e)}function o(e){for(var t;e.parentNode;){if(e=e.parentNode,t=e.nodeName,a.contains(t))return!0;if("body"===t)return!1}return!1}function s(t){if(!a.contains(t.nodeName)){if(t.nodeType===e.TEXT_NODE&&t.data.match(l))return r(t),void 0;for(var n=e.lang.array(t.childNodes).get(),i=n.length,o=0;i>o;o++)s(n[o]);return t}}var a=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,c=/([^\w\/\-](,?))$/i,u=100,d={")":"(","]":"[","}":"{"};e.dom.autoLink=t,e.dom.autoLink.URL_REG_EXP=l}(n),function(e){var t=e.browser.supportsClassList(),n=e.dom;n.addClass=function(e,i){return t?e.classList.add(i):(n.hasClass(e,i)||(e.className+=" "+i),void 0)},n.removeClass=function(e,n){return t?e.classList.remove(n):(e.className=e.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," "),void 0)},n.hasClass=function(e,n){if(t)return e.classList.contains(n);var i=e.className;return i.length>0&&(i==n||new RegExp("(^|\\s)"+n+"(\\s|$)").test(i))}}(n),n.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==n.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),n.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");return t.appendChild(n),n}function t(e,t){return e.createElement(t)}function i(i,r){if("UL"===i.nodeName||"OL"===i.nodeName||"MENU"===i.nodeName)return i;var o,s,a,l,c,u,d,h,f,p=i.ownerDocument,m=t(p,r),g=i.querySelectorAll("br"),v=g.length;for(f=0;v>f;f++)for(l=g[f];(c=l.parentNode)&&c!==i&&c.lastChild===l;){if("block"===n.dom.getStyle("display").from(c)){c.removeChild(l);break}n.dom.insert(l).after(l.parentNode)}for(o=n.lang.array(i.childNodes).get(),s=o.length,f=0;s>f;f++)h=h||e(p,m),a=o[f],u="block"===n.dom.getStyle("display").from(a),d="BR"===a.nodeName,u?(h=h.firstChild?e(p,m):h,h.appendChild(a),h=null):d?h=h.firstChild?null:h:h.appendChild(a);return i.parentNode.replaceChild(m,i),m}return i}(),n.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var i,r=0,o=e.length;o>r;r++)i=e[r],"undefined"!=typeof t[i]&&""!==t[i]&&(n[i]=t[i]);return{andTo:arguments.callee}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],i=function(t){return r(t)?parseInt(e.getStyle("width").from(t),10)<t.offsetWidth:!1},r=function(n){for(var i=0,r=t.length;r>i;i++)if("border-box"===e.getStyle(t[i]).from(n))return t[i]};e.copyStyles=function(r){return{from:function(o){i(o)&&(r=n.lang.array(r).without(t));for(var s,a="",l=r.length,c=0;l>c;c++)s=r[c],a+=s+":"+e.getStyle(s).from(o)+";";return{to:function(t){return e.setStyles(a).on(t),{andTo:arguments.callee}}}}}}}(n.dom),function(e){e.dom.delegate=function(t,n,i,r){return e.dom.observe(t,i,function(i){for(var o=i.target,s=e.lang.array(t.querySelectorAll(n));o&&o!==t;){if(s.contains(o)){r.call(o,i);break}o=o.parentNode}})}}(n),n.dom.getAsDom=function(){var e=function(e,t){var n=t.createElement("div");n.style.display="none",t.body.appendChild(n);try{n.innerHTML=e}catch(i){}return t.body.removeChild(n),n},t=function(e){if(!e._wysihtml5_supportsHTML5Tags){for(var t=0,n=i.length;n>t;t++)e.createElement(i[t]);e._wysihtml5_supportsHTML5Tags=!0}},i=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(i,r){r=r||document;var o;return"object"==typeof i&&i.nodeType?(o=r.createElement("div"),o.appendChild(i)):n.browser.supportsHTML5Tags(r)?(o=r.createElement("div"),o.innerHTML=i):(t(r),o=e(i,r)),o}}(),n.dom.getParentElement=function(){function e(e,t){return t&&t.length?"string"==typeof t?e===t:n.lang.array(t).contains(e):!0}function t(e){return e.nodeType===n.ELEMENT_NODE}function i(e,t,n){var i=(e.className||"").match(n)||[];return t?i[i.length-1]===t:!!i.length}function r(t,n,i){for(;i--&&t&&"BODY"!==t.nodeName;){if(e(t.nodeName,n))return t;t=t.parentNode}return null}function o(n,r,o,s,a){for(;a--&&n&&"BODY"!==n.nodeName;){if(t(n)&&e(n.nodeName,r)&&i(n,o,s))return n;n=n.parentNode}return null}return function(e,t,n){return n=n||50,t.className||t.classRegExp?o(e,t.nodeName,t.className,t.classRegExp,n):r(e,t.nodeName,n)}}(),n.dom.getStyle=function(){function e(e){return e.replace(i,function(e){return e.charAt(1).toUpperCase()})}var t={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},i=/\-[a-z]/g;return function(i){return{from:function(r){if(r.nodeType===n.ELEMENT_NODE){var o=r.ownerDocument,s=t[i]||e(i),a=r.style,l=r.currentStyle,c=a[s];if(c)return c;if(l)try{return l[s]}catch(u){}var d,h,f=o.defaultView||o.parentWindow,p=("height"===i||"width"===i)&&"TEXTAREA"===r.nodeName;return f.getComputedStyle?(p&&(d=a.overflow,a.overflow="hidden"),h=f.getComputedStyle(r,null).getPropertyValue(i),p&&(a.overflow=d||""),h):void 0}}}}}(),n.dom.hasElementWithTagName=function(){function e(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}var t={},n=1;return function(n,i){var r=e(n)+":"+i,o=t[r];return o||(o=t[r]=n.getElementsByTagName(i)),o.length>0}}(),function(e){function t(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=i++)}var n={},i=1;e.dom.hasElementWithClassName=function(i,r){if(!e.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+r);var o=t(i)+":"+r,s=n[o];return s||(s=n[o]=i.getElementsByClassName(r)),s.length>0}}(n),n.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},n.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),n&&n.appendChild(i)}}},n.dom.observe=function(e,t,n){t="string"==typeof t?[t]:t;for(var i,r,o=0,s=t.length;s>o;o++)r=t[o],e.addEventListener?e.addEventListener(r,n,!1):(i=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+r,i));return{stop:function(){for(var r,o=0,s=t.length;s>o;o++)r=t[o],e.removeEventListener?e.removeEventListener(r,n,!1):e.detachEvent("on"+r,i)}}},n.dom.parse=function(){function t(e,t,r,o){n.lang.object(f).merge(h).merge(t).get(),r=r||e.ownerDocument||document;var s,a,l,c=r.createDocumentFragment(),u="string"==typeof e;for(s=u?n.dom.getAsDom(e,r):e;s.firstChild;)l=s.firstChild,s.removeChild(l),a=i(l,o),a&&c.appendChild(a);return s.innerHTML="",s.appendChild(c),u?n.quirks.getCorrectInnerHTML(s):s}function i(t,n){var r,o=t.nodeType,s=t.childNodes,a=s.length,l=c[o],d=0;if(r=l&&l(t),!r)return null;for(d=0;a>d;d++)e=i(s[d],n),e&&r.appendChild(e);return n&&r.childNodes.length<=1&&r.nodeName.toLowerCase()===u&&!r.attributes.length?r.firstChild:r}function r(e){var t,i,r=f.tags,s=e.nodeName.toLowerCase(),a=e.scopeName;if(e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(a&&"HTML"!=a&&(s=a+":"+s),"outerHTML"in e&&(n.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(s="div")),s in r){if(t=r[s],!t||t.remove)return null;t="string"==typeof t?{rename_tag:t}:t}else{if(!e.firstChild)return null;t={rename_tag:u}}return i=e.ownerDocument.createElement(t.rename_tag||s),o(e,i,t),e=null,i}function o(e,t,i){var r,o,a,l,c,u,h,p={},v=i.set_class,y=i.add_class,b=i.set_attributes,w=i.check_attributes,_=f.classes,C=0,k=[],x=[],S=[],T=[];if(b&&(p=n.lang.object(b).clone()),w)for(c in w)h=m[w[c]],h&&(u=h(s(e,c)),"string"==typeof u&&(p[c]=u));if(v&&k.push(v),y)for(c in y)h=g[y[c]],h&&(l=h(s(e,c)),"string"==typeof l&&k.push(l));for(_["_wysihtml5-temp-placeholder"]=1,T=e.getAttribute("class"),T&&(k=k.concat(T.split(d))),r=k.length;r>C;C++)a=k[C],_[a]&&x.push(a);for(o=x.length;o--;)a=x[o],n.lang.array(S).contains(a)||S.unshift(a);S.length&&(p["class"]=S.join(" "));for(c in p)try{t.setAttribute(c,p[c])}catch(E){}p.src&&("undefined"!=typeof p.width&&t.setAttribute("width",p.width),"undefined"!=typeof p.height&&t.setAttribute("height",p.height))}function s(e,t){t=t.toLowerCase();var n=e.nodeName;if("IMG"==n&&"src"==t&&a(e)===!0)return e.src;if(p&&"outerHTML"in e){var i=e.outerHTML.toLowerCase(),r=-1!=i.indexOf(" "+t+"=");return r?e.getAttribute(t):null}return e.getAttribute(t)}function a(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}}function l(e){return e.ownerDocument.createTextNode(e.data)}var c={1:r,3:l},u="span",d=/\s+/,h={tags:{},classes:{}},f={},p=!n.browser.supportsGetAttributeCorrectly(),m={url:function(){var e=/^https?:\/\//i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(e,""):""}}(),numbers:function(){var e=/\D/g;return function(t){return t=(t||"").replace(e,""),t||null}}()},g={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[String(t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[String(t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[String(t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[String(t).charAt(0)]}}()};return t}(),n.dom.removeEmptyTextNodes=function(e){for(var t,i=n.lang.array(e.childNodes).get(),r=i.length,o=0;r>o;o++)t=i[o],t.nodeType===n.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},n.dom.renameElement=function(e,t){for(var i,r=e.ownerDocument.createElement(t);i=e.firstChild;)r.appendChild(i);return n.dom.copyAttributes(["align","className"]).from(e).to(r),e.parentNode.replaceChild(r,e),r},n.dom.replaceWithChildNodes=function(e){if(e.parentNode){if(!e.firstChild)return e.parentNode.removeChild(e),void 0;for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e),e=t=null}},function(e){function t(t){return"block"===e.getStyle("display").from(t)}function n(e){return"BR"===e.nodeName}function i(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function r(e){if("MENU"===e.nodeName||"UL"===e.nodeName||"OL"===e.nodeName){var r,o,s,a,l,c=e.ownerDocument,u=c.createDocumentFragment(),d=e.previousElementSibling||e.previousSibling;for(d&&!t(d)&&i(u);l=e.firstChild;){for(o=l.lastChild;r=l.firstChild;)s=r===o,a=s&&!t(r)&&!n(r),u.appendChild(r),a&&i(u);l.parentNode.removeChild(l)}e.parentNode.replaceChild(u,e)}}e.resolveList=r}(n.dom),function(e){var t=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],r=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],o=["referrer","write","open","close"];e.dom.Sandbox=i.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(i){if(e.dom.contains(t.documentElement,i)){var s=this,a=i.contentWindow,l=i.contentWindow.document,c=t.characterSet||t.charset||"utf-8",u=this._getHtml({charset:c,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(u),l.close(),this.getWindow=function(){return i.contentWindow},this.getDocument=function(){return i.contentWindow.document},a.onerror=function(e,t,n){throw new Error("wysihtml5.Sandbox: "+e,t,n)},!e.browser.supportsSandboxedIframes()){var d,h;for(d=0,h=n.length;h>d;d++)this._unset(a,n[d]);for(d=0,h=r.length;h>d;d++)this._unset(a,r[d],e.EMPTY_FUNCTION);for(d=0,h=o.length;h>d;d++)this._unset(l,o[d]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){s.callback(s)},0)}},_getHtml:function(t){var n,i=t.stylesheets,r="",o=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>o;o++)r+='<link rel="stylesheet" href="'+i[o]+'">';return t.stylesheets=r,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,i,r){try{t[n]=i}catch(o){}try{t.__defineGetter__(n,function(){return i})}catch(o){}if(r)try{t.__defineSetter__(n,function(){})}catch(o){}if(!e.browser.crashesWhenDefineProperty(n))try{var s={get:function(){return i}};r&&(s.set=function(){}),Object.defineProperty(t,n,s)}catch(o){}}})}(n),function(){var e={className:"class"};n.dom.setAttributes=function(t){return{on:function(n){for(var i in t)n.setAttribute(e[i]||i,t[i])}}}}(),n.dom.setStyles=function(e){return{on:function(t){var n=t.style;if("string"==typeof e)return n.cssText+=";"+e,void 0;for(var i in e)"float"===i?(n.cssFloat=e[i],n.styleFloat=e[i]):n[i]=e[i]}}},function(e){e.simulatePlaceholder=function(t,n,i){var r="placeholder",o=function(){n.hasPlaceholderSet()&&n.clear(),e.removeClass(n.element,r)},s=function(){n.isEmpty()&&(n.setValue(i),e.addClass(n.element,r))};t.observe("set_placeholder",s).observe("unset_placeholder",o).observe("focus:composer",o).observe("paste:composer",o).observe("blur:composer",s),s()}}(n.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(n.dom),n.quirks.cleanPastedHTML=function(){function e(e,i,r){i=i||t,r=r||e.ownerDocument||document;var o,s,a,l,c,u="string"==typeof e,d=0;o=u?n.dom.getAsDom(e,r):e;for(c in i)for(a=o.querySelectorAll(c),s=i[c],l=a.length;l>d;d++)s(a[d]);return a=e=i=null,u?o.innerHTML:o}var t={"a u":n.dom.replaceWithChildNodes};return e}(),function(e){var t=e.dom;e.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();("<p>&nbsp;</p>"==t||"<p>&nbsp;</p><p>&nbsp;</p>"==t)&&(e.innerHTML="")},0)};return function(n){t.observe(n.element,["cut","keydown"],e)}}(),e.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"],i=function(i,r){if(r.firstChild&&e.lang.array(n).contains(r.firstChild.nodeName)){var o=t.getParentElement(i,{nodeName:n});if(o){var s=o==r.firstChild;if(s){var a=o.childNodes.length<=1;if(a){var l=o.firstChild?""===o.firstChild.innerHTML:!0;l&&o.parentNode.removeChild(o)}}}}};return function(n){t.observe(n.element,"keydown",function(t){if(t.keyCode===e.BACKSPACE_KEY){var r=n.selection.getSelectedNode();i(r,n.element)}})}}()}(n),function(e){var t="%7E";e.quirks.getCorrectInnerHTML=function(n){var i=n.innerHTML;if(-1===i.indexOf(t))return i;var r,o,s,a,l=n.querySelectorAll("[href*='~'], [src*='~']");for(a=0,s=l.length;s>a;a++)r=l[a].href||l[a].src,o=e.lang.string(r).replace("~").by(t),i=e.lang.string(i).replace(o).by(r);return i}}(n),function(e){var t=e.dom,n=["LI","P","H1","H2","H3","H4","H5","H6"],i=["UL","OL","MENU"];e.quirks.insertLineBreakOnReturn=function(r){function o(n){var i=t.getParentElement(n,{nodeName:["P","DIV"]},2);if(i){var o=document.createTextNode(e.INVISIBLE_SPACE);t.insert(o).before(i),t.replaceWithChildNodes(i),r.selection.selectNode(o)}}function s(s){var a=s.keyCode;if(!(s.shiftKey||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY)){var l=(s.target,r.selection.getSelectedNode()),c=t.getParentElement(l,{nodeName:n},4);return c?("LI"!==c.nodeName||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY?c.nodeName.match(/H[1-6]/)&&a===e.ENTER_KEY&&setTimeout(function(){o(r.selection.getSelectedNode())},0):setTimeout(function(){var e,n=r.selection.getSelectedNode();n&&(e=t.getParentElement(n,{nodeName:i},2),e||o(n))},0),void 0):(a!==e.ENTER_KEY||e.browser.insertsLineBreaksOnReturn()||(r.commands.exec("insertLineBreak"),s.preventDefault()),void 0)}}t.observe(r.element.ownerDocument,"keydown",s)}}(n),function(e){var t="wysihtml5-quirks-redraw";e.quirks.redraw=function(n){e.dom.addClass(n,t),e.dom.removeClass(n,t);try{var i=n.ownerDocument;i.execCommand("italic",!1,null),i.execCommand("italic",!1,null)}catch(r){}}}(n),function(e){function n(e){var t=0;if(e.parentNode)do t+=e.offsetTop||0,e=e.offsetParent;while(e);return t}var r=e.dom;e.Selection=i.extend({constructor:function(e){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(t){var n=rangy.createRange(this.doc),i=t.nodeType===e.ELEMENT_NODE,o="canHaveHTML"in t?t.canHaveHTML:"IMG"!==t.nodeName,s=i?t.innerHTML:t.data,a=""===s||s===e.INVISIBLE_SPACE,l=r.getStyle("display").from(t),c="block"===l||"list-item"===l;if(a&&i&&o)try{t.innerHTML=e.INVISIBLE_SPACE}catch(u){}o?n.selectNodeContents(t):n.selectNode(t),o&&a&&i?n.collapse(c):o&&a&&(n.setStartAfter(t),n.setEndAfter(t)),this.setSelection(n)},getSelectedNode:function(e){var t,n;return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange(),n&&n.length)?n.item(0):(t=this.getSelection(this.doc),t.focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc),n?n.commonAncestorContainer:this.doc.body))},executeAndRestore:function(n,i){var r,o=this.doc.body,s=i&&o.scrollTop,a=i&&o.scrollLeft,l="_wysihtml5-temp-placeholder",c='<span class="'+l+'">'+e.INVISIBLE_SPACE+"</span>",u=this.getRange(this.doc);if(!u)return n(o,o),void 0;var d=u.createContextualFragment(c);u.insertNode(d);try{n(u.startContainer,u.endContainer)}catch(h){setTimeout(function(){throw h},0)}t=this.doc.querySelector("."+l),t?(r=rangy.createRange(this.doc),r.selectNode(t),r.deleteContents(),this.setSelection(r)):o.focus(),i&&(o.scrollTop=s,o.scrollLeft=a);try{t.parentNode.removeChild(t)}catch(f){}},executeAndRestoreSimple:function(e){var t,n,i,r,o,s=this.getRange(),a=this.doc.body;if(!s)return e(a,a),void 0;r=s.getNodes([3]),n=r[0]||s.startContainer,i=r[r.length-1]||s.endContainer,o={collapsed:s.collapsed,startContainer:n,startOffset:n===s.startContainer?s.startOffset:0,endContainer:i,endOffset:i===s.endContainer?s.endOffset:i.length};try{e(s.startContainer,s.endContainer)}catch(l){setTimeout(function(){throw l},0)}t=rangy.createRange(this.doc);try{t.setStart(o.startContainer,o.startOffset)}catch(c){}try{t.setEnd(o.endContainer,o.endOffset)}catch(u){}try{this.setSelection(t)}catch(d){}},insertHTML:function(e){var t=rangy.createRange(this.doc),n=t.createContextualFragment(e),i=n.lastChild;this.insertNode(n),i&&this.setAfter(i)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t=this.getRange();if(t)try{t.surroundContents(e),this.selectNode(e)}catch(n){e.appendChild(t.extractContents()),t.insertNode(e)}},scrollIntoView:function(){var t,i=this.doc,r=i.documentElement.scrollHeight>i.documentElement.offsetHeight,o=i._wysihtml5ScrollIntoViewElement=i._wysihtml5ScrollIntoViewElement||function(){var t=i.createElement("span");return t.innerHTML=e.INVISIBLE_SPACE,t}();r&&(this.insertNode(o),t=n(o),o.parentNode.removeChild(o),t>i.body.scrollTop&&(i.body.scrollTop=t))},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView,t=e.getSelection();t.modify("extend","left","lineboundary"),t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t,n,i,r,o=this.doc.selection.createRange(),s=o.boundingTop,a=(o.boundingHeight,this.doc.body.scrollWidth);if(o.moveToPoint){for(0===s&&(n=this.doc.createElement("span"),this.insertNode(n),s=n.offsetTop,n.parentNode.removeChild(n)),s+=1,i=-10;a>i;i+=2)try{o.moveToPoint(i,s);break}catch(l){}for(e=s,t=this.doc.selection.createRange(),r=a;r>=0;r--)try{t.moveToPoint(r,e);break}catch(c){}o.setEndPoint("EndToEnd",t),o.select()}},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow,n=rangy.getSelection(t);return n.setSingleRange(e)}})}(n),function(e,t){function n(e,t,n){if(!e.className)return!1;var i=e.className.match(n)||[];return i[i.length-1]===t}function i(e,t,n){e.className?(r(e,n),e.className+=" "+t):e.className=t}function r(e,t){e.className&&(e.className=e.className.replace(t,""))}function o(e,t){return e.className.replace(f," ")==t.className.replace(f," ")}function s(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function a(e,t){if(e.attributes.length!=t.attributes.length)return!1;
for(var n,i,r,o=0,s=e.attributes.length;s>o;++o)if(n=e.attributes[o],r=n.name,"class"!=r){if(i=t.attributes.getNamedItem(r),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function l(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n==e.length?!!e.nextSibling:!0:n>0&&n<e.childNodes.length}function c(e,n,i){var r;if(t.dom.isCharacterDataNode(n)&&(0==i?(i=t.dom.getNodeIndex(n),n=n.parentNode):i==n.length?(i=t.dom.getNodeIndex(n)+1,n=n.parentNode):r=t.dom.splitDataNode(n,i)),!r){r=n.cloneNode(!1),r.id&&r.removeAttribute("id");for(var o;o=n.childNodes[i];)r.appendChild(o);t.dom.insertAfter(r,n)}return n==e?r:c(e,r.parentNode,t.dom.getNodeIndex(r))}function u(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function d(e,t,n,i){this.tagNames=e||[h],this.cssClass=t||"",this.similarClassRegExp=n,this.normalize=i,this.applyToAnyTagName=!1}var h="span",f=/\s+/g;u.prototype={doMerge:function(){for(var e,t,n,i=[],r=0,o=this.textNodes.length;o>r;++r)e=this.textNodes[r],t=e.parentNode,i[r]=e.data,r&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=n=i.join(""),n},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,n=this.textNodes.length;n>t;++t)e[t]="'"+this.textNodes[t].data+"'";return"[Merge("+e.join(",")+")]"}},d.prototype={getAncestorWithClass:function(i){for(var r;i;){if(r=this.cssClass?n(i,this.cssClass,this.similarClassRegExp):!0,i.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&r)return i;i=i.parentNode}return!1},postApply:function(e,t){for(var n,i,r,o=e[0],s=e[e.length-1],a=[],l=o,c=s,d=0,h=s.length,f=0,p=e.length;p>f;++f)i=e[f],r=this.getAdjacentMergeableTextNode(i.parentNode,!1),r?(n||(n=new u(r),a.push(n)),n.textNodes.push(i),i===o&&(l=n.firstTextNode,d=l.length),i===s&&(c=n.firstTextNode,h=n.getLength())):n=null;var m=this.getAdjacentMergeableTextNode(s.parentNode,!0);if(m&&(n||(n=new u(s),a.push(n)),n.textNodes.push(m)),a.length){for(f=0,p=a.length;p>f;++f)a[f].doMerge();t.setStart(l,d),t.setEnd(c,h)}},getAdjacentMergeableTextNode:function(t,n){var i,r=t.nodeType==e.TEXT_NODE,o=r?t.parentNode:t,s=n?"nextSibling":"previousSibling";if(r){if(i=t[s],i&&i.nodeType==e.TEXT_NODE)return i}else if(i=o[s],i&&this.areElementsMergeable(t,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&o(e,n)&&a(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),t},applyToTextNode:function(e){var n=e.parentNode;if(1==n.childNodes.length&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase()))this.cssClass&&i(n,this.cssClass,this.similarClassRegExp);else{var r=this.createContainer(t.dom.getDocument(e));e.parentNode.insertBefore(r,e),r.appendChild(e)}},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&e.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(e,t,n){if(!t.containsNode(n)){var i=t.cloneRange();i.selectNode(n),i.isPointInRange(t.endContainer,t.endOffset)&&l(t.endContainer,t.endOffset)&&(c(n,t.endContainer,t.endOffset),t.setEndAfter(n)),i.isPointInRange(t.startContainer,t.startOffset)&&l(t.startContainer,t.startOffset)&&(n=c(n,t.startContainer,t.startOffset))}this.similarClassRegExp&&r(n,this.similarClassRegExp),this.isRemovable(n)&&s(n)},applyToRange:function(t){var n=t.getNodes([e.TEXT_NODE]);if(!n.length)try{var i=this.createContainer(t.endContainer.ownerDocument);return t.surroundContents(i),this.selectNode(t,i),void 0}catch(r){}if(t.splitBoundaries(),n=t.getNodes([e.TEXT_NODE]),n.length){for(var o,s=0,a=n.length;a>s;++s)o=n[s],this.getAncestorWithClass(o)||this.applyToTextNode(o);t.setStart(n[0],0),o=n[n.length-1],t.setEnd(o,o.length),this.normalize&&this.postApply(n,t)}},undoToRange:function(t){var n,i,r=t.getNodes([e.TEXT_NODE]);if(r.length)t.splitBoundaries(),r=t.getNodes([e.TEXT_NODE]);else{var o=t.endContainer.ownerDocument,s=o.createTextNode(e.INVISIBLE_SPACE);t.insertNode(s),t.selectNode(s),r=[s]}for(var a=0,l=r.length;l>a;++a)n=r[a],i=this.getAncestorWithClass(n),i&&this.undoToTextNode(n,t,i);1==l?this.selectNode(t,r[0]):(t.setStart(r[0],0),n=r[r.length-1],t.setEnd(n,n.length),this.normalize&&this.postApply(r,t))},selectNode:function(t,n){var i=n.nodeType===e.ELEMENT_NODE,r="canHaveHTML"in n?n.canHaveHTML:!0,o=i?n.innerHTML:n.data,s=""===o||o===e.INVISIBLE_SPACE;if(s&&i&&r)try{n.innerHTML=e.INVISIBLE_SPACE}catch(a){}t.selectNodeContents(n),s&&i?t.collapse(!1):s&&(t.setStartAfter(n),t.setEndAfter(n))},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),r=i?i.toString():"";return n.detach(),r},isAppliedToRange:function(t){var n,i=[],r=t.getNodes([e.TEXT_NODE]);if(!r.length)return n=this.getAncestorWithClass(t.startContainer),n?[n]:!1;for(var o,s=0,a=r.length;a>s;++s){if(o=this.getTextSelectedByRange(r[s],t),n=this.getAncestorWithClass(r[s]),""!=o&&!n)return!1;i.push(n)}return i},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)}},e.selection.HTMLApplier=d}(n,rangy),n.Commands=i.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return n.browser.supportsCommand(this.doc,e)},exec:function(e,t){var i=n.commands[e],r=n.lang.array(arguments).get(),o=i&&i.exec,s=null;if(this.editor.fire("beforecommand:composer"),o)r.unshift(this.composer),s=o.apply(i,r);else try{s=this.doc.execCommand(e,!1,t)}catch(a){}return this.editor.fire("aftercommand:composer"),s},state:function(e){var t=n.commands[e],i=n.lang.array(arguments).get(),r=t&&t.state;if(r)return i.unshift(this.composer),r.apply(t,i);try{return this.doc.queryCommandState(e)}catch(o){return!1}},value:function(e){var t=n.commands[e],i=t&&t.value;if(i)return i.call(t,this.composer,e);try{return this.doc.queryCommandValue(e)}catch(r){return null}}}),function(e){var t;e.commands.bold={exec:function(t,n){return e.commands.formatInline.exec(t,n,"b")},state:function(t,n){return e.commands.formatInline.state(t,n,"b")},value:function(){return t}}}(n),function(e){function t(e,t){for(var n,i,r,s=t.length,a=0;s>a;a++)n=t[a],i=o.getParentElement(n,{nodeName:"code"}),r=o.getTextContent(n),r.match(o.autoLink.URL_REG_EXP)&&!i?i=o.renameElement(n,"code"):o.replaceWithChildNodes(n)}function n(t,n){var s,a,l,c,u,d,h,f,p,m=t.doc,g="_wysihtml5-temp-"+ +new Date,v=/non-matching-class/g,y=0;for(e.commands.formatInline.exec(t,i,r,g,v),a=m.querySelectorAll(r+"."+g),s=a.length;s>y;y++){l=a[y],l.removeAttribute("class");for(p in n)l.setAttribute(p,n[p])}d=l,1===s&&(h=o.getTextContent(l),c=!!l.querySelector("*"),u=""===h||h===e.INVISIBLE_SPACE,!c&&u&&(o.setTextContent(l,n.text||l.href),f=m.createTextNode(" "),t.selection.setAfter(l),t.selection.insertNode(f),d=f)),t.selection.setAfter(d)}var i,r="A",o=e.dom;e.commands.createLink={exec:function(e,i,r){var o=this.state(e,i);o?e.selection.executeAndRestore(function(){t(e,o)}):(r="object"==typeof r?r:{href:r},n(e,r))},state:function(t,n){return e.commands.formatInline.state(t,n,"A")},value:function(){return i}}}(n),function(e){var t,n=/wysiwyg-font-size-[a-z\-]+/g;e.commands.fontSize={exec:function(t,i,r){return e.commands.formatInline.exec(t,i,"span","wysiwyg-font-size-"+r,n)},state:function(t,i,r){return e.commands.formatInline.state(t,i,"span","wysiwyg-font-size-"+r,n)},value:function(){return t}}}(n),function(e){var t,n=/wysiwyg-color-[a-z]+/g;e.commands.foreColor={exec:function(t,i,r){return e.commands.formatInline.exec(t,i,"span","wysiwyg-color-"+r,n)},state:function(t,i,r){return e.commands.formatInline.state(t,i,"span","wysiwyg-color-"+r,n)},value:function(){return t}}}(n),function(e){function t(e,t,i){e.className?(n(e,i),e.className+=" "+t):e.className=t}function n(e,t){e.className=e.className.replace(t,"")}function i(t){return t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim()}function r(e){for(var t=e.previousSibling;t&&i(t);)t=t.previousSibling;return t}function o(e){for(var t=e.nextSibling;t&&i(t);)t=t.nextSibling;return t}function s(e){var t=e.ownerDocument,n=o(e),i=r(e);n&&!u(n)&&e.parentNode.insertBefore(t.createElement("br"),n),i&&!u(i)&&e.parentNode.insertBefore(t.createElement("br"),e)}function a(e){var t=o(e),n=r(e);t&&c(t)&&t.parentNode.removeChild(t),n&&c(n)&&n.parentNode.removeChild(n)}function l(e){var t=e.lastChild;t&&c(t)&&t.parentNode.removeChild(t)}function c(e){return"BR"===e.nodeName}function u(e){return c(e)?!0:"block"===m.getStyle("display").from(e)?!0:!1}function d(t,n,i,r){if(r)var o=m.observe(t,"DOMNodeInserted",function(t){var n,i=t.target;i.nodeType===e.ELEMENT_NODE&&(n=m.getStyle("display").from(i),"inline"!==n.substr(0,6)&&(i.className+=" "+r))});t.execCommand(n,!1,i),o&&o.stop()}function h(e,t){e.selection.selectLine(),e.selection.surround(t),a(t),l(t),e.selection.selectNode(t)}function f(t){return!!e.lang.string(t.className).trim()}var p,m=e.dom,g="DIV",v=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",g];e.commands.formatBlock={exec:function(i,r,o,a,l){var c,u=i.doc,p=this.state(i,r,o,a,l);return o="string"==typeof o?o.toUpperCase():o,p?(i.selection.executeAndRestoreSimple(function(){l&&n(p,l);var e=f(p);e||p.nodeName!==(o||g)?e&&m.renameElement(p,g):(s(p),m.replaceWithChildNodes(p))}),void 0):(null===o||e.lang.array(v).contains(o))&&(c=i.selection.getSelectedNode(),p=m.getParentElement(c,{nodeName:v}))?(i.selection.executeAndRestoreSimple(function(){o&&(p=m.renameElement(p,o)),a&&t(p,a,l)}),void 0):i.commands.support(r)?(d(u,r,o||g,a),void 0):(p=u.createElement(o||g),a&&(p.className=a),h(i,p),void 0)},state:function(e,t,n,i,r){n="string"==typeof n?n.toUpperCase():n;var o=e.selection.getSelectedNode();return m.getParentElement(o,{nodeName:n,className:i,classRegExp:r})},value:function(){return p}}}(n),function(e){function t(e){var t=r[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]}function n(n,i,r){var s=n+":"+i;return o[s]||(o[s]=new e.selection.HTMLApplier(t(n),i,r,!0)),o[s]}var i,r={strong:"b",em:"i",b:"strong",i:"em"},o={};e.commands.formatInline={exec:function(e,t,i,r,o){var s=e.selection.getRange();return s?(n(i,r,o).toggleRange(s),e.selection.setSelection(s),void 0):!1},state:function(t,i,o,s,a){var l,c=t.doc,u=r[o]||o;return e.dom.hasElementWithTagName(c,o)||e.dom.hasElementWithTagName(c,u)?s&&!e.dom.hasElementWithClassName(c,s)?!1:(l=t.selection.getRange(),l?n(o,s,a).isAppliedToRange(l):!1):!1},value:function(){return i}}}(n),function(e){var t;e.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n)},state:function(){return!1},value:function(){return t}}}(n),function(e){var t="IMG";e.commands.insertImage={exec:function(n,i,r){r="object"==typeof r?r:{src:r};var o,s,a,l=n.doc,c=this.state(n);if(c)return n.selection.setBefore(c),a=c.parentNode,a.removeChild(c),e.dom.removeEmptyTextNodes(a),"A"!==a.nodeName||a.firstChild||(n.selection.setAfter(a),a.parentNode.removeChild(a)),e.quirks.redraw(n.element),void 0;c=l.createElement(t);for(s in r)c[s]=r[s];n.selection.insertNode(c),e.browser.hasProblemsSettingCaretAfterImg()?(o=l.createTextNode(e.INVISIBLE_SPACE),n.selection.insertNode(o),n.selection.setAfter(o)):n.selection.setAfter(c)},state:function(n){var i,r,o,s=n.doc;return e.dom.hasElementWithTagName(s,t)?(i=n.selection.getSelectedNode())?i.nodeName===t?i:i.nodeType!==e.ELEMENT_NODE?!1:(r=n.selection.getText(),(r=e.lang.string(r).trim())?!1:(o=n.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName}),1!==o.length?!1:o[0])):!1:!1},value:function(e){var t=this.state(e);return t&&t.src}}}(n),function(e){var t,n="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(t,i){t.commands.support(i)?(t.doc.execCommand(i,!1,null),e.browser.autoScrollsToCaret()||t.selection.scrollIntoView()):t.commands.exec("insertHTML",n)},state:function(){return!1},value:function(){return t}}}(n),function(e){var t;e.commands.insertOrderedList={exec:function(t,n){var i,r,o=t.doc,s=t.selection.getSelectedNode(),a=e.dom.getParentElement(s,{nodeName:"OL"}),l=e.dom.getParentElement(s,{nodeName:"UL"}),c="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(n)?(o.execCommand(n,!1,null),void 0):(a?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(a)}):l?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(l,"ol")}):(t.commands.exec("formatBlock","div",c),r=o.querySelector("."+c),i=""===r.innerHTML||r.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){a=e.dom.convertToList(r,"ol")}),i&&t.selection.selectNode(a.querySelector("li"))),void 0)},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"OL"})},value:function(){return t}}}(n),function(e){var t;e.commands.insertUnorderedList={exec:function(t,n){var i,r,o=t.doc,s=t.selection.getSelectedNode(),a=e.dom.getParentElement(s,{nodeName:"UL"}),l=e.dom.getParentElement(s,{nodeName:"OL"}),c="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(n)?(o.execCommand(n,!1,null),void 0):(a?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(a)}):l?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(l,"ul")}):(t.commands.exec("formatBlock","div",c),r=o.querySelector("."+c),i=""===r.innerHTML||r.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){a=e.dom.convertToList(r,"ul")}),i&&t.selection.selectNode(a.querySelector("li"))),void 0)},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:"UL"})},value:function(){return t}}}(n),function(e){var t;e.commands.italic={exec:function(t,n){return e.commands.formatInline.exec(t,n,"i")},state:function(t,n){return e.commands.formatInline.state(t,n,"i")},value:function(){return t}}}(n),function(e){var t,n="wysiwyg-text-align-center",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(n),function(e){var t,n="wysiwyg-text-align-left",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(n),function(e){var t,n="wysiwyg-text-align-right",i=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(t){return e.commands.formatBlock.exec(t,"formatBlock",null,n,i)},state:function(t){return e.commands.formatBlock.state(t,"formatBlock",null,n,i)},value:function(){return t}}}(n),function(e){var t;e.commands.underline={exec:function(t,n){return e.commands.formatInline.exec(t,n,"u")},state:function(t,n){return e.commands.formatInline.state(t,n,"u")},value:function(){return t}}}(n),function(e){function t(e){for(var t;t=e.querySelector("._wysihtml5-temp");)t.parentNode.removeChild(t)}var n=90,i=89,r=8,o=46,s=40,a='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",l='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",c=e.dom;e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var s,u=this,d=this.composer.sandbox.getDocument();if(c.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var t=e.keyCode,r=t===n&&!e.shiftKey,o=t===n&&e.shiftKey||t===i;r?(u.undo(),e.preventDefault()):o&&(u.redo(),e.preventDefault())}}),c.observe(this.element,"keydown",function(e){var t=e.keyCode;t!==s&&(s=t,(t===r||t===o)&&u.transact())}),e.browser.hasUndoInContextMenu()){var h,f,p=function(){t(d),clearInterval(h)};c.observe(this.element,"contextmenu",function(){p(),u.composer.selection.executeAndRestoreSimple(function(){u.element.lastChild&&u.composer.selection.setAfter(u.element.lastChild),d.execCommand("insertHTML",!1,a),d.execCommand("insertHTML",!1,l),d.execCommand("undo",!1,null)}),h=setInterval(function(){d.getElementById("_wysihtml5-redo")?(p(),u.redo()):d.getElementById("_wysihtml5-undo")||(p(),u.undo())},400),f||(f=!0,c.observe(document,"mousedown",p),c.observe(d,["mousedown","paste","cut","copy"],p))})}this.editor.observe("newword:composer",function(){u.transact()}).observe("beforecommand:composer",function(){u.transact()})},transact:function(){var e=this.history[this.position-1],t=this.composer.getValue();if(t!=e){var n=this.history.length=this.position;n>s&&(this.history.shift(),this.position--),this.position++,this.history.push(t)}},undo:function(){this.transact(),this.position<=1||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(e){this.composer.setValue(e),this.editor.focus(!0)}})}(n),n.views.View=i.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.observe("beforeload",function(){e.parent.observe("change_view",function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t){var n=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return t&&(n=this.parent.parse(n)),n=e.lang.string(n).replace(e.INVISIBLE_SPACE).by("")},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=t.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;t&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML,t="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return""===e||e===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector(t)},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var n=document.createElement("input");n.type="hidden",n.name="_wysihtml5_mode",n.value=1;var i=this.textarea.element;t.insert(this.iframe).after(i),t.insert(n).after(i)},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new e.Selection(this.parent),this.commands=new e.Commands(this.parent),t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),t.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var r=this.config.name;r&&(t.addClass(this.element,r),t.addClass(this.iframe,r));var o="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");o&&t.simulatePlaceholder(this.parent,this,o),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){i.focus()},100),e.quirks.insertLineBreakOnReturn(this),n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),n.clearsListsInContentEditableCorrectly()||e.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,r=n.canDisableAutoLinking(),o=n.doesAutoLinkingInContentEditable();if(r&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!o||o&&r)&&this.parent.observe("newword:composer",function(){i.selection.executeAndRestore(function(e,n){t.autoLink(n.parentNode)})});var s=this.sandbox.getDocument().getElementsByTagName("a"),a=t.autoLink.URL_REG_EXP,l=function(n){var i=e.lang.string(t.getTextContent(n)).trim();return"www."===i.substr(0,4)&&(i="http://"+i),i};t.observe(this.element,"keydown",function(e){if(s.length){var n,r=i.selection.getSelectedNode(e.target.ownerDocument),o=t.getParentElement(r,{nodeName:"A"},4);o&&(n=l(o),setTimeout(function(){var e=l(o);e!==n&&e.match(a)&&o.setAttribute("href",e)},0))}})}},_initObjectResizing:function(){var i=["width","height"],r=i.length,o=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?n.supportsEvent("resizeend")&&t.observe(o,"resizeend",function(t){for(var n,s=t.target||t.srcElement,a=s.style,l=0;r>l;l++)n=i[l],a[n]&&(s.setAttribute(n,parseInt(a[n],10)),a[n]="");e.quirks.redraw(o)}):n.supportsEvent("resizestart")&&t.observe(o,"resizestart",function(e){e.preventDefault()})},_initUndoManager:function(){new e.UndoManager(this.parent)}})}(n),function(e){var t=e.dom,n=document,i=window,r=n.createElement("div"),o=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],s=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],a=["width","height","top","left","right","bottom"],l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(e){if(e.setActive)try{e.setActive()}catch(r){}else{var o=e.style,s=n.documentElement.scrollTop||n.body.scrollTop,a=n.documentElement.scrollLeft||n.body.scrollLeft,l={position:o.position,top:o.top,left:o.left,WebkitUserSelect:o.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(l).on(e),i.scrollTo&&i.scrollTo(a,s)}};e.views.Composer.prototype.style=function(){var u=this,d=n.querySelector(":focus"),h=this.textarea.element,f=h.hasAttribute("placeholder"),p=f&&h.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||r.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||r.cloneNode(!1),f&&h.removeAttribute("placeholder"),h===d&&h.blur(),t.copyStyles(s).from(h).to(this.iframe).andTo(this.blurStylesHost),t.copyStyles(o).from(h).to(this.element).andTo(this.blurStylesHost),t.insertCSS(l).into(this.element.ownerDocument),c(h),t.copyStyles(s).from(h).to(this.focusStylesHost),t.copyStyles(o).from(h).to(this.focusStylesHost);var m=e.lang.array(s).without(["display"]);if(d?d.focus():h.blur(),f&&h.setAttribute("placeholder",p),!e.browser.hasCurrentStyleProperty())var g=t.observe(i,"resize",function(){if(!t.contains(document.documentElement,u.iframe))return g.stop(),void 0;var e=t.getStyle("display").from(h),n=t.getStyle("display").from(u.iframe);h.style.display="",u.iframe.style.display="none",t.copyStyles(a).from(h).to(u.iframe).andTo(u.focusStylesHost).andTo(u.blurStylesHost),u.iframe.style.display=n,h.style.display=e});return this.parent.observe("focus:composer",function(){t.copyStyles(m).from(u.focusStylesHost).to(u.iframe),t.copyStyles(o).from(u.focusStylesHost).to(u.element)}),this.parent.observe("blur:composer",function(){t.copyStyles(m).from(u.blurStylesHost).to(u.iframe),t.copyStyles(o).from(u.blurStylesHost).to(u.element)}),this}}(n),function(e){var t=e.dom,n=e.browser,i={66:"bold",73:"italic",85:"underline"};e.views.Composer.prototype.observe=function(){var r=this,o=this.getValue(),s=this.sandbox.getIframe(),a=this.element,l=n.supportsEventsInIframeCorrectly()?a:this.sandbox.getWindow(),c=n.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];t.observe(s,"DOMNodeRemoved",function(){clearInterval(u),r.parent.fire("destroy:composer")});var u=setInterval(function(){t.contains(document.documentElement,s)||(clearInterval(u),r.parent.fire("destroy:composer"))},250);t.observe(l,"focus",function(){r.parent.fire("focus").fire("focus:composer"),setTimeout(function(){o=r.getValue()},0)}),t.observe(l,"blur",function(){o!==r.getValue()&&r.parent.fire("change").fire("change:composer"),r.parent.fire("blur").fire("blur:composer")}),e.browser.isIos()&&t.observe(a,"blur",function(){var e=a.ownerDocument.createElement("input"),t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{r.selection.insertNode(e)}catch(i){a.appendChild(e)}e.focus(),e.parentNode.removeChild(e),window.scrollTo(n,t)}),t.observe(a,"dragenter",function(){r.parent.fire("unset_placeholder")}),n.firesOnDropOnlyWhenOnDragOverIsCancelled()&&t.observe(a,["dragover","dragenter"],function(e){e.preventDefault()}),t.observe(a,c,function(e){var t,i=e.dataTransfer;i&&n.supportsDataTransfer()&&(t=i.getData("text/html")||i.getData("text/plain")),t?(a.focus(),r.commands.exec("insertHTML",t),r.parent.fire("paste").fire("paste:composer"),e.stopPropagation(),e.preventDefault()):setTimeout(function(){r.parent.fire("paste").fire("paste:composer")},0)}),t.observe(a,"keyup",function(t){var n=t.keyCode;(n===e.SPACE_KEY||n===e.ENTER_KEY)&&r.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){r.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||t.observe(a,"mousedown",function(e){var t=e.target;"IMG"===t.nodeName&&(r.selection.selectNode(t),e.preventDefault())}),t.observe(a,"keydown",function(e){var t=e.keyCode,n=i[t];(e.ctrlKey||e.metaKey)&&!e.altKey&&n&&(r.commands.exec(n),e.preventDefault())}),t.observe(a,"keydown",function(t){var n,i=r.selection.getSelectedNode(!0),o=t.keyCode;!i||"IMG"!==i.nodeName||o!==e.BACKSPACE_KEY&&o!==e.DELETE_KEY||(n=i.parentNode,n.removeChild(i),"A"!==n.nodeName||n.firstChild||n.parentNode.removeChild(n),setTimeout(function(){e.quirks.redraw(a)},0),t.preventDefault())});var d={IMG:"Image: ",A:"Link: "};t.observe(a,"mouseover",function(e){var t,n=e.target,i=n.nodeName;if("A"===i||"IMG"===i){var r=n.hasAttribute("title");r||(t=d[i]+(n.getAttribute("href")||n.getAttribute("src")),n.setAttribute("title",t))}})}}(n),function(e){var t=400;e.views.Synchronizer=i.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var n,i=this,r=this.textarea.element.form,o=function(){n=setInterval(function(){i.fromComposerToTextarea()},t)},s=function(){clearInterval(n),n=null};o(),r&&(e.dom.observe(r,"submit",function(){i.sync(!0)}),e.dom.observe(r,"reset",function(){setTimeout(function(){i.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(e){"composer"!==e||n?"textarea"===e&&(i.fromComposerToTextarea(!0),s()):(i.fromTextareaToComposer(!0),o())}),this.editor.observe("destroy:composer",s)}})}(n),n.views.Textarea=n.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},hasPlaceholderSet:function(){var e=n.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,i=this.element.value,r=!i;return e&&r||i===t},isEmpty:function(){return!n.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,i={focusin:"focus",focusout:"blur"},r=n.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.observe("beforeload",function(){n.dom.observe(e,r,function(e){var n=i[e.type]||e.type;t.fire(n).fire(n+":textarea")}),n.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}}),function(e){var t=e.dom,n="wysihtml5-command-dialog-opened",i="input, select, textarea",r="[data-wysihtml5-dialog-field]",o="data-wysihtml5-dialog-field";e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){if(!this._observed){var r=this,o=function(e){var t=r._serialize();t==r.elementToChange?r.fire("edit",t):r.fire("save",t),r.hide(),e.preventDefault(),e.stopPropagation()};t.observe(r.link,"click",function(){t.hasClass(r.link,n)&&setTimeout(function(){r.hide()
},0)}),t.observe(this.container,"keydown",function(t){var n=t.keyCode;n===e.ENTER_KEY&&o(t),n===e.ESCAPE_KEY&&r.hide()}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",o),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){r.fire("cancel"),r.hide(),e.preventDefault(),e.stopPropagation()});for(var s=this.container.querySelectorAll(i),a=0,l=s.length,c=function(){clearInterval(r.interval)};l>a;a++)t.observe(s[a],"change",c);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll(r),n=t.length,i=0;n>i;i++)e[t[i].getAttribute(o)]=t[i].value;return e},_interpolate:function(e){for(var t,n,i,s=document.querySelector(":focus"),a=this.container.querySelectorAll(r),l=a.length,c=0;l>c;c++)t=a[c],t!==s&&(e&&"hidden"===t.type||(n=t.getAttribute(o),i=this.elementToChange?this.elementToChange[n]||"":t.defaultValue,t.value=i))},show:function(e){var r=this,o=this.container.querySelector(i);if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){r._interpolate(!0)},500)),t.addClass(this.link,n),this.container.style.display="",this.fire("show"),o&&!e)try{o.focus()}catch(s){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,t.removeClass(this.link,n),this.container.style.display="none",this.fire("hide")}})}(n),function(e){var t=e.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},r={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},o={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(s,a){var l=document.createElement("input");if(!e.browser.supportsSpeechApiOn(l))return a.style.display="none",void 0;var c=document.createElement("div");e.lang.object(i).merge({width:a.offsetWidth+"px",height:a.offsetHeight+"px"}),t.insert(l).into(c),t.insert(c).into(a),t.setStyles(r).on(l),t.setAttributes(o).on(l),t.setStyles(i).on(c),t.setStyles(n).on(a);var u="onwebkitspeechchange"in l?"webkitspeechchange":"speechchange";t.observe(l,u,function(){s.execCommand("insertText",l.value),l.value=""}),t.observe(l,"click",function(e){t.hasClass(a,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})}}(n),function(e){var t="wysihtml5-command-disabled",n="wysihtml5-commands-disabled",r="wysihtml5-command-active",o="wysihtml5-action-active",s=e.dom;e.toolbar.Toolbar=i.extend({constructor:function(t,n){this.editor=t,this.container="string"==typeof n?document.getElementById(n):n,this.composer=t.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),r=i.length,o=0;r>o;o++)new e.toolbar.Speech(this,i[o])},_getLinks:function(t){for(var n,i,r,o,s,a=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),l=a.length,c=0,u=this[t+"Mapping"]={};l>c;c++)n=a[c],r=n.getAttribute("data-wysihtml5-"+t),o=n.getAttribute("data-wysihtml5-"+t+"-value"),i=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+r+"']"),s=this._getDialog(n,r),u[r+":"+o]={link:n,group:i,name:r,value:o,dialog:s,state:!1}},_getDialog:function(t,n){var i,r,o=this,s=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return s&&(i=new e.toolbar.Dialog(t,s),i.observe("show",function(){r=o.composer.selection.getBookmark(),o.editor.fire("show:dialog",{command:n,dialogContainer:s,commandLink:t})}),i.observe("save",function(e){r&&o.composer.selection.setBookmark(r),o._execCommand(n,e),o.editor.fire("save:dialog",{command:n,dialogContainer:s,commandLink:t})}),i.observe("cancel",function(){o.editor.focus(!1),o.editor.fire("cancel:dialog",{command:n,dialogContainer:s,commandLink:t})})),i},execCommand:function(e,t){if(!this.commandsDisabled){var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case"change_view":t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea")}},_observe:function(){for(var e=this,t=this.editor,i=this.container,r=this.commandLinks.concat(this.actionLinks),o=r.length,a=0;o>a;a++)s.setAttributes({href:"javascript:;",unselectable:"on"}).on(r[a]);s.delegate(i,"[data-wysihtml5-command]","mousedown",function(e){e.preventDefault()}),s.delegate(i,"[data-wysihtml5-command]","click",function(t){var n=this,i=n.getAttribute("data-wysihtml5-command"),r=n.getAttribute("data-wysihtml5-command-value");e.execCommand(i,r),t.preventDefault()}),s.delegate(i,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n),t.preventDefault()}),t.observe("focus:composer",function(){e.bookmark=null,clearInterval(e.interval),e.interval=setInterval(function(){e._updateLinkStates()},500)}),t.observe("blur:composer",function(){clearInterval(e.interval)}),t.observe("destroy:composer",function(){clearInterval(e.interval)}),t.observe("change_view",function(t){setTimeout(function(){e.commandsDisabled="composer"!==t,e._updateLinkStates(),e.commandsDisabled?s.addClass(i,n):s.removeClass(i,n)},0)})},_updateLinkStates:function(){var n,i,a,l,c=(this.composer.element,this.commandMapping),u=this.actionMapping;for(n in c)l=c[n],this.commandsDisabled?(i=!1,s.removeClass(l.link,r),l.group&&s.removeClass(l.group,r),l.dialog&&l.dialog.hide()):(i=this.composer.commands.state(l.name,l.value),e.lang.object(i).isArray()&&(i=1===i.length?i[0]:!0),s.removeClass(l.link,t),l.group&&s.removeClass(l.group,t)),l.state!==i&&(l.state=i,i?(s.addClass(l.link,r),l.group&&s.addClass(l.group,r),l.dialog&&("object"==typeof i?l.dialog.show(i):l.dialog.hide())):(s.removeClass(l.link,r),l.group&&s.removeClass(l.group,r),l.dialog&&l.dialog.hide()));for(n in u)a=u[n],"change_view"===a.name&&(a.state=this.editor.currentView===this.editor.textarea,a.state?s.addClass(a.link,o):s.removeClass(a.link,o))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(n),function(e){var t,n={name:t,style:!0,toolbar:t,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:t,allowObjectResizing:!0,supportTouchDevices:!0};e.Editor=e.lang.Dispatcher.extend({constructor:function(t,i){if(this.textareaElement="string"==typeof t?document.getElementById(t):t,this.config=e.lang.object({}).merge(n).merge(i).get(),this.textarea=new e.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=e.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var r=this;return setTimeout(function(){r.fire("beforeload").fire("load")},0),void 0}e.dom.addClass(document.body,this.config.bodyClassName),this.composer=new e.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(o){}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){return e?(this.currentView.setValue(e,t),this):this.clear()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t){var n=this.config.parser(t,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof t&&e.quirks.redraw(t),n},_initParser:function(){this.observe("paste:composer",function(){var t=!0,n=this;n.composer.selection.executeAndRestore(function(){e.quirks.cleanPastedHTML(n.composer.element),n.parse(n.composer.element)},t)}),this.observe("paste:textarea",function(){var e,t=this.textarea.getValue();e=this.parse(t),this.textarea.setValue(e)})}})}(n),!function(e,t){"use strict";var n={"font-styles":function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+n+"' data-toggle='dropdown' href='#'><i class='icon-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+e.font_styles.normal+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+e.font_styles.h1+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+e.font_styles.h2+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+e.font_styles.h3+"</a></li></ul></li>"},emphasis:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+n+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+e.emphasis.bold+"</a><a class='btn"+n+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+e.emphasis.italic+"</a><a class='btn"+n+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+e.emphasis.underline+"</a></div></li>"},lists:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+n+"' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"' tabindex='-1'><i class='icon-list'></i></a><a class='btn"+n+"' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"' tabindex='-1'><i class='icon-th-list'></i></a><a class='btn"+n+"' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"' tabindex='-1'><i class='icon-indent-right'></i></a><a class='btn"+n+"' data-wysihtml5-command='Indent' title='"+e.lists.indent+"' tabindex='-1'><i class='icon-indent-left'></i></a></div></li>"},link:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+e.link.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'></div><div class='modal-footer'><a href='#' class='btn' data-dismiss='modal'>"+e.link.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.link.insert+"</a></div></div><a class='btn"+n+"' data-wysihtml5-command='createLink' title='"+e.link.insert+"' tabindex='-1'><i class='icon-share'></i></a></li>"},image:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+e.image.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'></div><div class='modal-footer'><a href='#' class='btn' data-dismiss='modal'>"+e.image.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.image.insert+"</a></div></div><a class='btn"+n+"' data-wysihtml5-command='insertImage' title='"+e.image.insert+"' tabindex='-1'><i class='icon-picture'></i></a></li>"},html:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn"+n+"' data-wysihtml5-action='change_view' title='"+e.html.edit+"' tabindex='-1'><i class='icon-pencil'></i></a></div></li>"},color:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+n+"' data-toggle='dropdown' href='#' tabindex='-1'><span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li></ul></li>"}},i=function(e,t,i){return n[e](t,i)},r=function(t,i){this.el=t;var r=i||s;for(var o in r.customTemplates)n[o]=r.customTemplates[o];this.toolbar=this.createToolbar(t,r),this.editor=this.createEditor(i),window.editor=this.editor,e("iframe.wysihtml5-sandbox").each(function(t,n){e(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){e("li.dropdown").removeClass("open")}})})};r.prototype={constructor:r,createEditor:function(n){n=n||{},n=e.extend(!0,{},n),n.toolbar=this.toolbar[0];var i=new t.Editor(this.el[0],n);if(n&&n.events)for(var r in n.events)i.on(r,n.events[r]);return i},createToolbar:function(t,n){var r=this,o=e("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),l=n.locale||s.locale||"en";for(var c in s){var u=!1;void 0!==n[c]?n[c]===!0&&(u=!0):u=s[c],u===!0&&(o.append(i(c,a[l],n)),"html"===c&&this.initHtml(o),"link"===c&&this.initInsertLink(o),"image"===c&&this.initInsertImage(o))}if(n.toolbar)for(c in n.toolbar)o.append(n.toolbar[c]);return o.find("a[data-wysihtml5-command='formatBlock']").click(function(t){var n=t.target||t.srcElement,i=e(n);r.toolbar.find(".current-font").text(i.html())}),o.find("a[data-wysihtml5-command='foreColor']").click(function(t){var n=t.target||t.srcElement,i=e(n);r.toolbar.find(".current-color").text(i.html())}),this.el.before(o),o},initHtml:function(e){var t="a[data-wysihtml5-action='change_view']";e.find(t).click(function(){e.find("a.btn").not(t).toggleClass("disabled")})},initInsertImage:function(t){var n,i=this,r=t.find(".bootstrap-wysihtml5-insert-image-modal"),o=r.find(".bootstrap-wysihtml5-insert-image-url"),s=r.find("a.btn-primary"),a=o.val(),l=function(){var e=o.val();o.val(a),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null),i.editor.composer.commands.exec("insertImage",e)};o.keypress(function(e){13==e.which&&(l(),r.modal("hide"))}),s.click(l),r.on("shown",function(){o.focus()}),r.on("hide",function(){i.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=insertImage]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return t?!0:(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),r.appendTo("body").modal("show"),r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})},initInsertLink:function(t){var n,i=this,r=t.find(".bootstrap-wysihtml5-insert-link-modal"),o=r.find(".bootstrap-wysihtml5-insert-link-url"),s=r.find("a.btn-primary"),a=o.val(),l=function(){var e=o.val();o.val(a),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null),i.editor.composer.commands.exec("createLink",{href:e,target:"_blank",rel:"nofollow"})};o.keypress(function(e){13==e.which&&(l(),r.modal("hide"))}),s.click(l),r.on("shown",function(){o.focus()}),r.on("hide",function(){i.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=createLink]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return t?!0:(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),r.appendTo("body").modal("show"),r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})}};var o={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(!0,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var n=e(this);n.data("wysihtml5",new r(n,t))})},shallowExtend:function(t){var n=e.extend({},e.fn.wysihtml5.defaultOptions,t||{}),i=this;return o.bypassDefaults.apply(i,[n])},deepExtend:function(t){var n=e.extend(!0,{},e.fn.wysihtml5.defaultOptions,t||{}),i=this;return o.bypassDefaults.apply(i,[n])},init:function(e){var t=this;return o.shallowExtend.apply(t,[e])}};e.fn.wysihtml5=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.wysihtml5"),void 0):o.init.apply(this,arguments)},e.fn.wysihtml5.Constructor=r;var s=e.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url"}},span:1,div:1,code:1,pre:1}},stylesheets:["./lib/css/wysiwyg-color.css"],locale:"en"};"undefined"==typeof e.fn.wysihtml5.defaultOptionsCache&&(e.fn.wysihtml5.defaultOptionsCache=e.extend(!0,{},e.fn.wysihtml5.defaultOptions));var a=e.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),"undefined"==typeof Package&&(Package={}),Package["x-editable-bootstrap3"]={}}(),function(){{var e,t;Package.meteor.Meteor}(function(){Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var e=Date,t=e.prototype,n=e.CultureInfo,i=function(e,t){return t||(t=2),("000"+e).slice(-1*t)};t.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},t.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new Date).clearTime()},e.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return t>e?-1:e>t?1:0;throw new TypeError(e+" - "+t)},e.equals=function(e,t){return 0===e.compareTo(t)},e.getDayNumberFromName=function(e){for(var t=n.dayNames,i=n.abbreviatedDayNames,r=n.shortestDayNames,o=e.toLowerCase(),s=0;s<t.length;s++)if(t[s].toLowerCase()==o||i[s].toLowerCase()==o||r[s].toLowerCase()==o)return s;return-1},e.getMonthNumberFromName=function(e){for(var t=n.monthNames,i=n.abbreviatedMonthNames,r=e.toLowerCase(),o=0;o<t.length;o++)if(t[o].toLowerCase()==r||i[o].toLowerCase()==r)return o;return-1},e.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},e.getDaysInMonth=function(t,n){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][n]},e.getTimezoneAbbreviation=function(e){for(var t=n.timezones,i=0;i<t.length;i++)if(t[i].offset===e)return t[i].name;return null},e.getTimezoneOffset=function(e){for(var t=n.timezones,i=0;i<t.length;i++)if(t[i].name===e.toUpperCase())return t[i].offset;return null},t.clone=function(){return new Date(this.getTime())},t.compareTo=function(e){return Date.compare(this,e)},t.equals=function(e){return Date.equals(this,e||new Date)},t.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},t.isAfter=function(e){return 1===this.compareTo(e||new Date)},t.isBefore=function(e){return-1===this.compareTo(e||new Date)},t.isToday=function(){return this.isSameDay(new Date)},t.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())},t.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},t.addSeconds=function(e){return this.addMilliseconds(1e3*e)},t.addMinutes=function(e){return this.addMilliseconds(6e4*e)},t.addHours=function(e){return this.addMilliseconds(36e5*e)},t.addDays=function(e){return this.setDate(this.getDate()+e),this},t.addWeeks=function(e){return this.addDays(7*e)},t.addMonths=function(t){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(n,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},t.addYears=function(e){return this.addMonths(12*e)},t.add=function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var r,o,s;t.getWeek=function(){var e,t,n,i,a,l,c,u,d,h;return r=r?r:this.getFullYear(),o=o?o:this.getMonth()+1,s=s?s:this.getDate(),2>=o?(e=r-1,t=(e/4|0)-(e/100|0)+(e/400|0),n=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),d=t-n,a=0,l=s-1+31*(o-1)):(e=r,t=(e/4|0)-(e/100|0)+(e/400|0),n=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),d=t-n,a=d+1,l=s+(153*(o-3)+2)/5+58+d),c=(e+t)%7,i=(l+c-a)%7,u=l+3-i|0,h=0>u?53-((c-d)/5|0):u>364+d?1:(u/7|0)+1,r=o=s=null,h},t.getISOWeek=function(){return r=this.getUTCFullYear(),o=this.getUTCMonth()+1,s=this.getUTCDate(),i(this.getWeek())},t.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())},e._validate=function(e,t,n,i){if("undefined"==typeof e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(t>e||e>n)throw new RangeError(e+" is not a valid value for "+i+".");return!0},e.validateMillisecond=function(t){return e._validate(t,0,999,"millisecond")},e.validateSecond=function(t){return e._validate(t,0,59,"second")},e.validateMinute=function(t){return e._validate(t,0,59,"minute")},e.validateHour=function(t){return e._validate(t,0,23,"hour")},e.validateDay=function(t,n,i){return e._validate(t,1,e.getDaysInMonth(n,i),"day")},e.validateMonth=function(t){return e._validate(t,0,11,"month")},e.validateYear=function(t){return e._validate(t,0,9999,"year")},t.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&e._validate(t.week,0,53,"week")&&this.setWeek(t.week),this},t.moveToFirstDayOfMonth=function(){return this.set({day:1})},t.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},t.moveToNthOccurrence=function(e,t){var n=0;if(t>0)n=t-1;else if(-1===t)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(n)},t.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===n?n+=7*(t||1):n)},t.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===n?n+=12*(t||1):n)},t.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},t.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},t.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=-6*Number(e)/10;return this.addMinutes(n-t)},t.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},t.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},t.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},t.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return 0>t?(e=(t-1e4).toString(),e.charAt(0)+e.substr(2)):(e=(t+1e4).toString(),"+"+e.substr(1))},t.getElapsed=function(e){return(e||new Date)-this},t.toISOString||(t.toISOString=function(){function e(e){return 10>e?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),t._toString=t.toString,t.toString=function(e){var t=this;if(e&&1==e.length){var r=n.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(r.shortDate);case"D":return t.t(r.longDate);case"F":return t.t(r.fullDateTime);case"m":return t.t(r.monthDay);case"r":return t.t(r.rfc1123);case"s":return t.t(r.sortableDateTime);case"t":return t.t(r.shortTime);case"T":return t.t(r.longTime);case"u":return t.t(r.universalSortableDateTime);case"y":return t.t(r.yearMonth)}}var o=function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return i(t.h()<13?0===t.h()?12:t.h():t.h()-12);case"h":return t.h()<13?0===t.h()?12:t.h():t.h()-12;case"HH":return i(t.h());case"H":return t.h();case"mm":return i(t.getMinutes());case"m":return t.getMinutes();case"ss":return i(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return i(t.getFullYear(),4);case"yy":return i(t.getFullYear());case"dddd":return n.dayNames[t.getDay()];case"ddd":return n.abbreviatedDayNames[t.getDay()];case"dd":return i(t.getDate());case"d":return t.getDate();case"MMMM":return n.monthNames[t.getMonth()];case"MMM":return n.abbreviatedMonthNames[t.getMonth()];case"MM":return i(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?n.amDesignator.substring(0,1):n.pmDesignator.substring(0,1);case"tt":return t.h()<12?n.amDesignator:n.pmDesignator;case"S":return o(t.getDate());default:return e}}):this._toString()}}(),function(){var e=Date,t=e.prototype,n=e.CultureInfo,i=Number.prototype;t._orient=1,t._nth=null,t._is=!1,t._same=!1,t._isSecond=!1,i._dateElement="day",t.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},t.last=t.prev=t.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},t.is=function(){return this._is=!0,this},t.same=function(){return this._same=!0,this._isSecond=!1,this},t.today=function(){return this.same().day()},t.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},t.at=function(t){return"string"==typeof t?e.parse(this.toString("d")+" "+t):this.set(t)},i.fromNow=i.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)
},i.ago=i.before=function(e){var t={};return t[this._dateElement]=-1*this,(e?e.clone():new Date).add(t)};var r,o="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),s="january february march april may june july august september october november december".split(/\s/),a="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),l="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),c="final first second third fourth fifth".split(/\s/);t.toObject=function(){for(var e={},t=0;t<a.length;t++)e[a[t].toLowerCase()]=this["get"+l[t]]();return e},e.fromObject=function(e){return e.week=null,Date.today().set(e)};for(var u=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var n=this._nth;this._nth=null;var i=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(t,n),this>i)throw new RangeError(e.getDayName(t)+" does not occur "+n+" times in the month of "+e.getMonthName(i.getMonth())+" "+i.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},d=function(t){return function(){var i=e.today(),r=t-i.getDay();return 0===t&&1===n.firstDayOfWeek&&0!==i.getDay()&&(r+=7),i.addDays(r)}},h=0;h<o.length;h++)e[o[h].toUpperCase()]=e[o[h].toUpperCase().substring(0,3)]=h,e[o[h]]=e[o[h].substring(0,3)]=d(h),t[o[h]]=t[o[h].substring(0,3)]=u(h);for(var f=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}},p=function(t){return function(){return e.today().set({month:t,day:1})}},m=0;m<s.length;m++)e[s[m].toUpperCase()]=e[s[m].toUpperCase().substring(0,3)]=m,e[s[m]]=e[s[m].substring(0,3)]=p(m),t[s[m]]=t[s[m].substring(0,3)]=f(m);for(var g=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var t=this.toObject(),n=(arguments[0]||new Date).toObject(),i="",r=e.toLowerCase(),o=a.length-1;o>-1;o--){if(i=a[o].toLowerCase(),t[i]!=n[i])return!1;if(r==i)break}return!0}return"s"!=e.substring(e.length-1)&&(e+="s"),this["add"+e](this._orient)}},v=function(e){return function(){return this._dateElement=e,this}},y=0;y<a.length;y++)r=a[y].toLowerCase(),t[r]=t[r+"s"]=g(a[y]),i[r]=i[r+"s"]=v(r);t._ss=g("Second");for(var b=function(e){return function(t){return this._same?this._ss(arguments[0]):t||0===t?this.moveToNthOccurrence(t,e):(this._nth=e,2!==e||void 0!==t&&null!==t?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},w=0;w<c.length;w++)t[c[w]]=0===w?b(-1):b(w)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(n){var i=n.match(t);if(i)return[i[0],n.substring(i[0].length)];throw new e.Exception(n)}},token:function(){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(r){n.push(i[0]),t=i[1];continue}break}return[n,t]}},many:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(r){return[n,t]}n.push(i[0]),t=i[1]}return[n,t]}},optional:function(e){return function(t){var n=null;try{n=e.call(this,t)}catch(i){return[null,t]}return[n[0],n[1]]}},not:function(t){return function(n){try{t.call(this,n)}catch(i){return[null,n]}throw new e.Exception(n)}},ignore:function(e){return e?function(t){var n=null;return n=e.call(this,t),[null,n[1]]}:null},product:function(){for(var e=arguments[0],n=Array.prototype.slice.call(arguments,1),i=[],r=0;r<e.length;r++)i.push(t.each(e[r],n));return i},cache:function(t){var n={},i=null;return function(r){try{i=n[r]=n[r]||t.call(this,r)}catch(o){i=n[r]=o}if(i instanceof e.Exception)throw i;return i}},any:function(){var t=arguments;return function(n){for(var i=null,r=0;r<t.length;r++)if(null!=t[r]){try{i=t[r].call(this,n)}catch(o){i=null}if(i)return i}throw new e.Exception(n)}},each:function(){var t=arguments;return function(n){for(var i=[],r=null,o=0;o<t.length;o++)if(null!=t[o]){try{r=t[o].call(this,n)}catch(s){throw new e.Exception(n)}i.push(r[0]),n=r[1]}return[i,n]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(n,i,r){return i=i||t.rtoken(/^\s*/),r=r||null,1==n.length?n[0]:function(t){for(var o=null,s=null,a=[],l=0;l<n.length;l++){try{o=n[l].call(this,t)}catch(c){break}a.push(o[0]);try{s=i.call(this,o[1])}catch(u){s=null;break}t=s[1]}if(!o)throw new e.Exception(t);if(s)throw new e.Exception(s[1]);if(r)try{o=r.call(this,o[1])}catch(d){throw new e.Exception(o[1])}return[a,o?o[1]:t]}},between:function(e,n,i){i=i||e;var o=t.each(t.ignore(e),n,t.ignore(i));return function(e){var t=o.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,n,i){return n=n||t.rtoken(/^\s*/),i=i||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(n)),e.slice(-1),t.ignore(i)):t.each(t.many(t.each(e,t.ignore(n))),px,t.ignore(i))},set:function(n,i,r){return i=i||t.rtoken(/^\s*/),r=r||null,function(o){for(var s=null,a=null,l=null,c=null,u=[[],o],d=!1,h=0;h<n.length;h++){l=null,a=null,s=null,d=1==n.length;try{s=n[h].call(this,o)}catch(f){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!d)try{l=i.call(this,s[1])}catch(p){d=!0}else d=!0;if(d||0!==l[1].length||(d=!0),!d){for(var m=[],g=0;g<n.length;g++)h!=g&&m.push(n[g]);a=t.set(m,i).call(this,l[1]),a[0].length>0&&(c[0]=c[0].concat(a[0]),c[1]=a[1])}if(c[1].length<u[1].length&&(u=c),0===u[1].length)break}if(0===u[0].length)return u;if(r){try{l=r.call(this,u[1])}catch(v){throw new e.Exception(u[1])}u[1]=l[1]}return u}},forward:function(e,t){return function(n){return e[t].call(this,n)}},replace:function(e,t){return function(n){var i=e.call(this,n);return[t,i[1]]}},process:function(e,t){return function(n){var i=e.call(this,n);return[t.call(this,i[0]),i[1]]}},min:function(t,n){return function(i){var r=n.call(this,i);if(r[0].length<t)throw new e.Exception(i);return r}}},n=function(e){return function(){var t=null,n=[];if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),!t)return e.apply(null,arguments);for(var i=0,r=t.shift();i<r.length;i++)return t.unshift(r[i]),n.push(e.apply(null,t)),t.shift(),n}},i="optional not ignore cache".split(/\s/),o=0;o<i.length;o++)t[i[o]]=n(t[i[o]]);for(var s=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},a="each any all".split(/\s/),l=0;l<a.length;l++)t[a[l]]=s(t[a[l]])}(),function(){var e=Date,t=(e.prototype,e.CultureInfo),n=function(e){for(var t=[],i=0;i<e.length;i++)e[i]instanceof Array?t=t.concat(n(e[i])):e[i]&&t.push(e[i]);return t};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var n=Number(e);this.year=e.length>2?n:n+(n+2e3<t.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n++)t[n]&&t[n].call(this);var i=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=i.getDate()),this.year||(this.year=i.getFullYear()),this.month||0===this.month||(this.month=i.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(t){if(t=t instanceof Array?n(t):[t],0===t.length)return null;for(var i=0;i<t.length;i++)"function"==typeof t[i]&&t[i].call(this);var r=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(r=new Date);var o,s,a,l=!!(this.days&&null!==this.days||this.orient||this.operator);if(a="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||r.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,l=!0),!l&&this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),this.month||(this.month=c.getMonth()),this.year=c.getFullYear()}if(l&&this.weekday&&"month"!=this.unit&&(this.unit="day",o=e.getDayNumberFromName(this.weekday)-r.getDay(),s=7,this.days=o?(o+a*s)%s:a*s),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(r.set({day:1*this.value}),l||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,l=!0),l&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",o=this.month-r.getMonth(),s=12,this.months=o?(o+a*s)%s:a*s,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*a:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*a),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),c.getMonth()!==r.getMonth()&&(this.month=c.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(l&&this.timezone&&this.day&&this.days&&(this.day=this.days),l?r.add(this):r.set(this)):Date.today().setWeek(this.value)}};var i,r=e.Parsing.Operators,o=e.Grammar,s=e.Translator;o.datePartDelimiter=r.rtoken(/^([\s\-\.\,\/\x27]+)/),o.timePartDelimiter=r.stoken(":"),o.whiteSpace=r.rtoken(/^\s*/),o.generalDelimiter=r.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};o.ctoken=function(e){var n=a[e];if(!n){for(var i=t.regexPatterns,o=e.split(/\s+/),s=[],l=0;l<o.length;l++)s.push(r.replace(r.rtoken(i[o[l]]),o[l]));n=a[e]=r.any.apply(null,s)}return n},o.ctoken2=function(e){return r.rtoken(t.regexPatterns[e])},o.h=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),s.hour)),o.hh=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2])/),s.hour)),o.H=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),s.hour)),o.HH=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3])/),s.hour)),o.m=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),s.minute)),o.mm=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),s.minute)),o.s=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),s.second)),o.ss=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),s.second)),o.hms=r.cache(r.sequence([o.H,o.m,o.s],o.timePartDelimiter)),o.t=r.cache(r.process(o.ctoken2("shortMeridian"),s.meridian)),o.tt=r.cache(r.process(o.ctoken2("longMeridian"),s.meridian)),o.z=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),s.timezone)),o.zz=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),s.timezone)),o.zzz=r.cache(r.process(o.ctoken2("timezone"),s.timezone)),o.timeSuffix=r.each(r.ignore(o.whiteSpace),r.set([o.tt,o.zzz])),o.time=r.each(r.optional(r.ignore(r.stoken("T"))),o.hms,o.timeSuffix),o.d=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1]|\d)/),r.optional(o.ctoken2("ordinalSuffix"))),s.day)),o.dd=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1])/),r.optional(o.ctoken2("ordinalSuffix"))),s.day)),o.ddd=o.dddd=r.cache(r.process(o.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),o.M=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d|\d)/),s.month)),o.MM=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d)/),s.month)),o.MMM=o.MMMM=r.cache(r.process(o.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),s.month)),o.y=r.cache(r.process(r.rtoken(/^(\d\d?)/),s.year)),o.yy=r.cache(r.process(r.rtoken(/^(\d\d)/),s.year)),o.yyy=r.cache(r.process(r.rtoken(/^(\d\d?\d?\d?)/),s.year)),o.yyyy=r.cache(r.process(r.rtoken(/^(\d\d\d\d)/),s.year)),i=function(){return r.each(r.any.apply(null,arguments),r.not(o.ctoken2("timeContext")))},o.day=i(o.d,o.dd),o.month=i(o.M,o.MMM),o.year=i(o.yyyy,o.yy),o.orientation=r.process(o.ctoken("past future"),function(e){return function(){this.orient=e}}),o.operator=r.process(o.ctoken("add subtract"),function(e){return function(){this.operator=e}}),o.rday=r.process(o.ctoken("yesterday tomorrow today now"),s.rday),o.unit=r.process(o.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),o.value=r.process(r.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),o.expression=r.set([o.rday,o.operator,o.value,o.unit,o.orientation,o.ddd,o.MMM]),i=function(){return r.set(arguments,o.datePartDelimiter)},o.mdy=i(o.ddd,o.month,o.day,o.year),o.ymd=i(o.ddd,o.year,o.month,o.day),o.dmy=i(o.ddd,o.day,o.month,o.year),o.date=function(e){return(o[t.dateElementOrder]||o.mdy).call(this,e)},o.format=r.process(r.many(r.any(r.process(r.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(o[t])return o[t];throw e.Parsing.Exception(t)}),r.process(r.rtoken(/^[^dMyhHmstz]+/),function(e){return r.ignore(r.stoken(e))}))),function(e){return r.process(r.each.apply(null,e),s.finishExact)});var l={},c=function(e){return l[e]=l[e]||o.format(e)[0]};o.formats=function(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(c(e[n]));return r.any.apply(null,t)}return c(e)},o._formats=o.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),o._start=r.process(r.set([o.date,o.time,o.expression],o.generalDelimiter,o.whiteSpace),s.finish),o.start=function(e){try{var t=o._formats.call({},e);if(0===t[1].length)return t}catch(n){}return o._start.call({},e)},e._parse=e.parse,e.parse=function(t){var n=null;if(!t)return null;if(t instanceof Date)return t;try{n=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(i){return null}return 0===n[1].length?n[0]:null},e.getParseFunction=function(t){var n=e.Grammar.formats(t);return function(e){var t=null;try{t=n.call({},e)}catch(i){return null}return 0===t[1].length?t[0]:null}},e.parseExact=function(t,n){return e.getParseFunction(n)(t)}}()}).call(this),function(){!function(n){var i=function(e,t,i){var r,o="object"==typeof t;this.startDate=Date.today(),this.endDate=Date.today(),this.minDate=!1,this.maxDate=!1,this.changed=!1,this.cleared=!1,this.showDropdowns=!1,this.ranges={},this.dateLimit=!1,this.opens="right",this.cb=function(){},this.format="MM/dd/yyyy",this.separator=" - ",this.showWeekNumbers=!1,this.buttonClasses=["btn-success"],this.applyClass="btn btn-small btn-success",this.clearClass="btn btn-small",this.locale={applyLabel:"Apply",clearLabel:"Clear",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:Date.CultureInfo.shortestDayNames,monthNames:Date.CultureInfo.monthNames,firstDay:0},r=this.locale,this.leftCalendar={month:Date.today().set({day:1,month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),calendar:Array()},this.rightCalendar={month:Date.today().set({day:1,month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),calendar:Array()},this.element=n(e),this.element.hasClass("pull-right")&&(this.opens="left"),this.element.is("input")?this.element.on({click:n.proxy(this.show,this),focus:n.proxy(this.show,this)}):this.element.on("click",n.proxy(this.show,this)),o&&("object"==typeof t.locale&&n.each(r,function(e,n){r[e]=t.locale[e]||n}),t.applyClass&&(this.applyClass=t.applyClass),t.clearClass&&(this.clearClass=t.clearClass));var s='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input" style="float: left"><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input" style="float: left; padding-left: 11px"><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="'+this.applyClass+' applyBtn" disabled="disabled">'+this.locale.applyLabel+'</button>&nbsp;<button class="'+this.clearClass+' clearBtn">'+this.locale.clearLabel+"</button></div></div></div>";if(this.container=n(s).appendTo("body"),o){if("string"==typeof t.format&&(this.format=t.format),"string"==typeof t.separator&&(this.separator=t.separator),"string"==typeof t.startDate&&(this.startDate=Date.parseExact(t.startDate,this.format)),"string"==typeof t.endDate&&(this.endDate=Date.parseExact(t.endDate,this.format)),"string"==typeof t.minDate&&(this.minDate=Date.parseExact(t.minDate,this.format)),"string"==typeof t.maxDate&&(this.maxDate=Date.parseExact(t.maxDate,this.format)),"object"==typeof t.startDate&&(this.startDate=t.startDate),"object"==typeof t.endDate&&(this.endDate=t.endDate),"object"==typeof t.minDate&&(this.minDate=t.minDate),"object"==typeof t.maxDate&&(this.maxDate=t.maxDate),"object"==typeof t.ranges){for(var a in t.ranges){var l=t.ranges[a][0],c=t.ranges[a][1];"string"==typeof l&&(l=Date.parse(l)),"string"==typeof c&&(c=Date.parse(c)),this.minDate&&l<this.minDate&&(l=this.minDate),this.maxDate&&c>this.maxDate&&(c=this.maxDate),this.minDate&&c<this.minDate||this.maxDate&&l>this.maxDate||(this.ranges[a]=[l,c])}var u="<ul>";for(var a in this.ranges)u+="<li>"+a+"</li>";u+="<li>"+this.locale.customRangeLabel+"</li>",u+="</ul>",this.container.find(".ranges").prepend(u)}if("object"==typeof t.dateLimit&&(this.dateLimit=t.dateLimit),"object"==typeof t.locale&&"number"==typeof t.locale.firstDay){this.locale.firstDay=t.locale.firstDay;for(var d=t.locale.firstDay;d>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),d--}"string"==typeof t.opens&&(this.opens=t.opens),"boolean"==typeof t.showWeekNumbers&&(this.showWeekNumbers=t.showWeekNumbers),"string"==typeof t.buttonClasses&&(this.buttonClasses=[t.buttonClasses]),"object"==typeof t.buttonClasses&&(this.buttonClasses=t.buttonClasses),"boolean"==typeof t.showDropdowns&&(this.showDropdowns=t.showDropdowns)}var h=this.container;if(n.each(this.buttonClasses,function(e,t){h.find("button").addClass(t)}),"right"==this.opens){var f=this.container.find(".calendar.left"),p=this.container.find(".calendar.right");f.removeClass("left").addClass("right"),p.removeClass("right").addClass("left")}if(("undefined"==typeof t||"undefined"==typeof t.ranges)&&this.container.find(".calendar").show(),"function"==typeof i&&(this.cb=i),this.container.addClass("opens"+this.opens),(!o||"undefined"==typeof t.startDate&&"undefined"==typeof t.endDate)&&n(this.element).is("input[type=text]")){var m=n(this.element).val(),g=m.split(this.separator);2==g.length&&(this.startDate=Date.parseExact(g[0],this.format),this.endDate=Date.parseExact(g[1],this.format))}this.container.on("mousedown",n.proxy(this.mousedown,this)),this.container.find(".calendar").on("click",".prev",n.proxy(this.clickPrev,this)),this.container.find(".calendar").on("click",".next",n.proxy(this.clickNext,this)),this.container.find(".ranges").on("click","button.applyBtn",n.proxy(this.clickApply,this)),this.container.find(".ranges").on("click","button.clearBtn",n.proxy(this.clickClear,this)),this.container.find(".calendar").on("click","td.available",n.proxy(this.clickDate,this)),this.container.find(".calendar").on("mouseenter","td.available",n.proxy(this.enterDate,this)),this.container.find(".calendar").on("mouseleave","td.available",n.proxy(this.updateView,this)),this.container.find(".ranges").on("click","li",n.proxy(this.clickRange,this)),this.container.find(".ranges").on("mouseenter","li",n.proxy(this.enterRange,this)),this.container.find(".ranges").on("mouseleave","li",n.proxy(this.updateView,this)),this.container.find(".calendar").on("change","select.yearselect",n.proxy(this.updateYear,this)),this.container.find(".calendar").on("change","select.monthselect",n.proxy(this.updateMonth,this)),this.element.on("keyup",n.proxy(this.updateFromControl,this)),this.updateView(),this.updateCalendars()};i.prototype={constructor:i,mousedown:function(e){e.stopPropagation(),(!this.showDropdowns||n(e.target).not("select").length)&&e.preventDefault()},updateView:function(){this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.container.find("input[name=daterangepicker_start]").val(this.startDate.toString(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.toString(this.format)),this.startDate.equals(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")){var e=this.element.val().split(this.separator),t=Date.parseExact(e[0],this.format),n=Date.parseExact(e[1],this.format);null!=t&&null!=n&&(n.isBefore(t)||(this.startDate=t,this.endDate=n,this.updateView(),this.cb(this.startDate,this.endDate),this.updateCalendars()))}},notify:function(){this.cleared||this.updateView(),this.element.is("input")&&this.element.val(this.cleared?"":this.startDate.toString(this.format)+this.separator+this.endDate.toString(this.format));var e=this.cleared?null:this.startDate,t=this.cleared?null:this.endDate;this.cleared=!1,this.cb(e,t)},move:function(){"left"==this.opens?this.container.css({top:this.element.offset().top+this.element.outerHeight(),right:n(window).width()-this.element.offset().left-this.element.outerWidth(),left:"auto"}):this.container.css({top:this.element.offset().top+this.element.outerHeight(),left:this.element.offset().left,right:"auto"})},show:function(e){this.container.show(),this.move(),e&&(e.stopPropagation(),e.preventDefault()),this.changed=!1,this.element.trigger("shown",{target:e.target,picker:this}),n(document).on("mousedown",n.proxy(this.hide,this))},hide:function(){this.container.hide(),n(document).off("mousedown",this.hide),this.changed&&(this.changed=!1,this.notify())},enterRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var n=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(n[0].toString(this.format)),this.container.find("input[name=daterangepicker_end]").val(n[1].toString(this.format))}},clickRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.container.find(".calendar").show();else{var n=this.ranges[t];this.startDate=n[0],this.endDate=n[1],this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.updateCalendars(),this.changed=!0,this.container.find(".calendar").hide(),this.hide()}},clickPrev:function(e){var t=n(e.target).parents(".calendar");t.hasClass("left")?this.leftCalendar.month.add({months:-1}):this.rightCalendar.month.add({months:-1}),this.updateCalendars()},clickNext:function(e){var t=n(e.target).parents(".calendar");t.hasClass("left")?this.leftCalendar.month.add({months:1}):this.rightCalendar.month.add({months:1}),this.updateCalendars()},enterDate:function(e){var t=n(e.target).attr("title"),i=t.substr(1,1),r=t.substr(3,1),o=n(e.target).parents(".calendar");o.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[i][r].toString(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[i][r].toString(this.format))},clickDate:function(i){var r=n(i.target).attr("title"),o=r.substr(1,1),s=r.substr(3,1),a=n(i.target).parents(".calendar");if(a.hasClass("left")){if(e=this.leftCalendar.calendar[o][s],t=this.endDate,"object"==typeof this.dateLimit){var l=new Date(e).add(this.dateLimit);t.isAfter(l)&&(t=l)}this.element.trigger("clicked",{dir:"left",picker:this})}else{if(e=this.startDate,t=this.rightCalendar.calendar[o][s],"object"==typeof this.dateLimit){var c={days:0-this.dateLimit.days,months:0-this.dateLimit.months,years:0-this.dateLimit.years},u=new Date(t).add(c);e.isBefore(u)&&(e=u)}this.element.trigger("clicked",{dir:"right",picker:this})}a.find("td").removeClass("active"),e.equals(t)||e.isBefore(t)?(n(i.target).addClass("active"),e.equals(this.startDate)&&t.equals(this.endDate)||(this.changed=!0),this.startDate=e,this.endDate=t):e.isAfter(t)&&(n(i.target).addClass("active"),this.changed=!0,this.startDate=e,this.endDate=e.clone().add(1).days()),this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.updateCalendars()},clickApply:function(){this.hide()},clickClear:function(){this.changed=!0,this.cleared=!0,this.hide()},updateYear:function(e){var t=parseInt(n(e.target).val()),i=n(e.target).closest(".calendar").hasClass("left");i?this.leftCalendar.month.set({month:this.startDate.getMonth(),year:t}):this.rightCalendar.month.set({month:this.endDate.getMonth(),year:t}),this.updateCalendars()},updateMonth:function(e){var t=parseInt(n(e.target).val()),i=n(e.target).closest(".calendar").hasClass("left");i?this.leftCalendar.month.set({month:t,year:this.startDate.getFullYear()}):this.rightCalendar.month.set({month:t,year:this.endDate.getFullYear()}),this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.getMonth(),this.leftCalendar.month.getFullYear()),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.getMonth(),this.rightCalendar.month.getFullYear()),this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var e=!0,t=0;for(var n in this.ranges)this.startDate.equals(this.ranges[n][0])&&this.endDate.equals(this.ranges[n][1])&&(e=!1,this.container.find(".ranges li:eq("+t+")").addClass("active")),t++;e&&this.container.find(".ranges li:last").addClass("active"),this.element.trigger("updated",this)},buildCalendar:function(e,t){for(var n=Date.today().set({day:1,month:e,year:t}),i=n.clone().add(-1).day().getMonth(),r=n.clone().add(-1).day().getFullYear(),o=(Date.getDaysInMonth(t,e),Date.getDaysInMonth(r,i)),s=n.getDay(),a=Array(),l=0;6>l;l++)a[l]=Array();var c=o-s+this.locale.firstDay+1;c>o&&(c-=7),s==this.locale.firstDay&&(c=o-6);for(var u=Date.today().set({day:c,month:i,year:r}),l=0,d=0,h=0;42>l;l++,d++,u=u.clone().add(1).day())l>0&&d%7==0&&(d=0,h++),a[h][d]=u;return a},renderDropdowns:function(e,t,n){for(var i=e.getMonth(),r='<select class="monthselect">',o=!1,s=!1,a=0;12>a;a++)(!o||a>=t.getMonth())&&(!s||a<=n.getMonth())&&(r+="<option value='"+a+"'"+(a===i?" selected='selected'":"")+">"+this.locale.monthNames[a]+"</option>");r+="</select>";for(var l=e.getFullYear(),c=n&&n.getFullYear()||l+5,u=t&&t.getFullYear()||l-50,d='<select class="yearselect">',h=u;c>=h;h++)d+='<option value="'+h+'"'+(h===l?' selected="selected"':"")+">"+h+"</option>";return d+="</select>",r+d},renderCalendar:function(e,t,i,r){var o='<table class="table-condensed">';o+="<thead>",o+="<tr>",this.showWeekNumbers&&(o+="<th></th>"),o+=!i||i<e[1][1]?'<th class="prev available"><i class="icon-arrow-left"></i></th>':"<th></th>";var s=this.locale.monthNames[e[1][1].getMonth()]+e[1][1].toString(" yyyy");this.showDropdowns&&(s=this.renderDropdowns(e[1][1],i,r)),o+='<th colspan="5" style="width: auto">'+s+"</th>",o+=!r||r>e[1][1]?'<th class="next available"><i class="icon-arrow-right"></i></th>':"<th></th>",o+="</tr>",o+="<tr>",this.showWeekNumbers&&(o+='<th class="week">'+this.locale.weekLabel+"</th>"),n.each(this.locale.daysOfWeek,function(e,t){o+="<th>"+t+"</th>"}),o+="</tr>",o+="</thead>",o+="<tbody>";for(var a=0;6>a;a++){o+="<tr>",this.showWeekNumbers&&(o+='<td class="week">'+e[a][0].getWeek()+"</td>");for(var l=0;7>l;l++){var c="available ";c+=e[a][l].getMonth()==e[1][1].getMonth()?"":"off",t.setHours(0,0,0,0),i&&e[a][l]<i||r&&e[a][l]>r?c=" off disabled ":e[a][l].equals(t)?(c+=" active ",e[a][l].equals(this.startDate)&&(c+=" start-date "),e[a][l].equals(this.endDate)&&(c+=" end-date ")):e[a][l]>=this.startDate&&e[a][l]<=this.endDate&&(c+=" in-range ",e[a][l].equals(this.startDate)&&(c+=" start-date "),e[a][l].equals(this.endDate)&&(c+=" end-date "));var u="r"+a+"c"+l;o+='<td class="'+c.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" title="'+u+'">'+e[a][l].getDate()+"</td>"}o+="</tr>"}return o+="</tbody>",o+="</table>"}},n.fn.daterangepicker=function(e,t){return this.each(function(){var r=n(this);r.data("daterangepicker")||r.data("daterangepicker",new i(r,e,t))}),this}}(window.jQuery)}.call(this),"undefined"==typeof Package&&(Package={}),Package["bootstrap-daterangepicker"]={}}(),function(){var e,t,n=Package.meteor.Meteor,i=Package.handlebars.Handlebars,r=Package.templating.Template,o=Package.spark.Spark;(function(){r.__define__("_inputAutocomplete",Package.handlebars.Handlebars.json_ast_to_func(['<input type="text" ',["!",[[0,"attributes"]]],">\n    ",["#",[[0,"with"],[0,"ac"]],[[">","_autocompleteContainer"]]]])),r.__define__("_textareaAutocomplete",Package.handlebars.Handlebars.json_ast_to_func(["<textarea ",["!",[[0,"attributes"]]],">\n        ",["!",[[0,"text"]]],"\n    </textarea>\n    ",["#",[[0,"with"],[0,"ac"]],[[">","_autocompleteContainer"]]]])),r.__define__("_autocompleteContainer",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"shown"]],["\n    <div class='-autocomplete-container' style='position: absolute;'>\n        <ul class='-autocomplete-list'>\n            ","\n            ",["#",[[0,"isolate"]],["\n            ",["#",[[0,"each"],[0,"items"]],['\n            <li class="-autocomplete-item ',["{",[[0,"selected"]]],'">\n                ',["{",[[0,"itemTemplate"],[1]]],"\n            </li>\n            "]],"\n            "]],"\n        </ul>\n    </div>\n    "]]]))}).call(this),function(){$(function(){var t={primaryStyles:["fontFamily","fontSize","fontWeight","fontVariant","fontStyle","paddingLeft","paddingTop","paddingBottom","paddingRight","marginLeft","marginTop","marginBottom","marginRight","borderLeftColor","borderTopColor","borderBottomColor","borderRightColor","borderLeftStyle","borderTopStyle","borderBottomStyle","borderRightStyle","borderLeftWidth","borderTopWidth","borderBottomWidth","borderRightWidth","line-height","outline","text-align"],specificStyle:{"word-wrap":"break-word","overflow-x":"hidden","overflow-y":"auto"},simulator:$('<div id="textarea_simulator"/>').css({position:"absolute",top:0,left:0,visibility:"hidden"}).appendTo(document.body),toHtml:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").split(" ").join('<span style="white-space:prev-wrap">&nbsp;</span>')
},getCaretPosition:function(e){var n=t,i=this,r=i[0],o=i.offset(),s="top"===e,a=parseInt(i.getComputedStyle("fontSize"));if($.browser.msie&&$.browser.version<=9){r.focus();var l=document.selection.createRange();return $("#hskeywords").val(r.scrollTop),{left:l.boundingLeft-o.left,top:parseInt(l.boundingTop)-o.top+r.scrollTop+document.documentElement.scrollTop+(s?0:a)}}n.simulator.empty(),$.each(n.primaryStyles,function(e,t){i.cloneStyle(n.simulator,t)}),n.simulator.css($.extend({width:i.width(),height:i.height()},n.specificStyle));var c=i.val()||i.text(),u=i.getCursorPosition(),d=c.substring(0,u),h=c.substring(u),f=$('<span class="before"/>').html(n.toHtml(d)),p=$('<span class="focus"/>'),m=$('<span class="after"/>').html(n.toHtml(h));n.simulator.append(f).append(p).append(m);var g,v=p.offset(),y=n.simulator.offset();return g=$.browser.mozilla?s?-a:0:s?0:a,{top:v.top-y.top-r.scrollTop+g,left:p[0].offsetLeft-n.simulator[0].offsetLeft-r.scrollLeft}}};$.fn.extend({setCursorPosition:function(e){return 0==this.length?this:$(this).setSelection(e,e)},setSelection:function(t,n){if(0==this.length)return this;if(e=this[0],e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i.select()}else if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else{var r=this.get(0),i=document.createRange();i.collapse(!0),i.setStart(r.childNodes[0],t),i.setEnd(r.childNodes[0],n);var o=window.getSelection();o.removeAllRanges(),o.addRange(i)}return this},getComputedStyle:function(e){if(0!=this.length){var t=this[0],n=this.css(e);return n=n||($.browser.msie?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null)[e])}},cloneStyle:function(e,t){var n=this.getComputedStyle(t);n&&$(e).css(t,n)},cloneAllStyle:function(e){var t=this[0];for(var n in t.style){var i=t.style[n];"string"==typeof i||"number"==typeof i?this.cloneStyle(e,n):0/0}},getCursorPosition:function(){var t=e=this[0],n=e.value||e.innerText;this.data("lastCursorPosition")||this.data("lastCursorPosition",0);var i=this.data("lastCursorPosition");if(document.selection){e.focus();var r=document.selection.createRange(),o=document.selection.createRange().text.length;r.moveStart("character",-n.length),i=r.text.length-o}else{if(e.selectionStart||"0"==e.selectionStart)return e.selectionStart;if("undefined"!=typeof window.getSelection&&window.getSelection().rangeCount>0)try{var s=window.getSelection(),a=s.getRangeAt(0),l=a.cloneRange();l.selectNodeContents(t),l.setEnd(a.endContainer,a.endOffset),i=l.toString().length}catch(c){i=this.data("lastCursorPosition")}else if("undefined"!=typeof document.selection&&"Control"!=document.selection.type){var u=document.selection.createRange(),d=document.body.createTextRange();d.moveToElementText(t),d.setEndPoint("EndToEnd",u),i=d.text.length}}return this.data("lastCursorPosition",i),i},getCaretPosition:t.getCaretPosition})})}.call(this),function(){t="object"==typeof t?t:{};var e=function(e,t){return function(){return e.apply(t,arguments)}};this.AutoComplete=function(){function t(t){this.onItemClick=e(this.onItemClick,this),this.onKeyDown=e(this.onKeyDown,this);var n;this.limit=t.limit||5,this.position=t.position||"bottom",this.rules=t.rules,this.expressions=function(){var e,t,i,r;for(i=this.rules,r=[],e=0,t=i.length;t>e;e++)n=i[e],r.push(new RegExp("(^|\\b|\\s)"+n.token+"([\\w.]*)$"));return r}.call(this),this.matched=-1,this.ruleDep=new Deps.Dependency,this.filterDep=new Deps.Dependency,Session.set("-autocomplete-id",null)}return t.KEYS=[40,38,13,27,9],t.prototype.onKeyUp=function(){var e,t,n,i,r,o;for(i=this.$element.getCursorPosition(),r=this.getText().substring(0,i),t=0,e=!1,o=[];t<this.expressions.length&&(n=r.match(this.expressions[t]),n||this.matched!==t||(this.matched=-1,this.ruleDep.changed(),e=!0),n&&-1===this.matched&&(this.matched=t,this.ruleDep.changed(),e=!0),n&&this.filter!==n[2]&&(this.filter=n[2],this.filterDep.changed(),e=!0),!e);)o.push(t++);return o},t.prototype.onKeyDown=function(e){if(!(-1===this.matched||this.constructor.KEYS.indexOf(e.keyCode)<0)){switch(e.keyCode){case 9:case 13:this.select()&&e.stopPropagation();break;case 40:this.next();break;case 38:this.prev();break;case 27:this.hideList()}return e.preventDefault()}},t.prototype.onFocus=function(){return this.onKeyUp()},t.prototype.onBlur=function(){var e=this;return n.setTimeout(function(){return e.hideList()},500)},t.prototype.onItemClick=function(e){return this.replace(e[this.rules[this.matched].field]),this.hideList()},t.prototype.onItemHover=function(e){return Session.set("-autocomplete-id",e._id)},t.prototype.select=function(){var e,t;return(e=Deps.nonreactive(function(){return Session.get("-autocomplete-id")}))?(t=this.rules[this.matched],this.replace(t.collection.findOne(e)[t.field]),this.hideList(),!0):!1},t.prototype.next=function(){var e,t,n;return(e=this.tmplInst.find(".-autocomplete-item.selected"))?(t=$(e).next(),n=t.length?o.getDataContext(t[0])._id:o.getDataContext(this.tmplInst.find(".-autocomplete-item:first-child"))._id,Session.set("-autocomplete-id",n)):void 0},t.prototype.prev=function(){var e,t,n;return(e=this.tmplInst.find(".-autocomplete-item.selected"))?(t=$(e).prev(),n=t.length?o.getDataContext(t[0])._id:o.getDataContext(this.tmplInst.find(".-autocomplete-item:last-child"))._id,Session.set("-autocomplete-id",n)):void 0},t.prototype.replace=function(e){var t,n,i,r,o,s;return o=this.$element.getCursorPosition(),n=this.getText(),s=n.substring(0,o),s=s.replace(this.expressions[this.matched],"$1"+this.rules[this.matched].token+e),i=n.substring(o,n.length),r=i.match(/^\s/)?"":" ",t=s+r+i,this.setText(t),this.$element.setCursorPosition(s.length+1)},t.prototype.hideList=function(){return this.matched=-1,this.ruleDep.changed()},t.prototype.getText=function(){return this.$element.val()||this.$element.text()},t.prototype.setText=function(e){return this.$element.is("input,textarea")?this.$element.val(e):this.$element.html(e)},t.prototype.ruleMatched=function(){return this.ruleDep.depend(),this.matched>=0},t.prototype.filteredList=function(){var e,t;return this.filterDep.depend(),-1===this.matched?null:(t=this.rules[this.matched],e={},e[t.field]={$regex:this.filter,$options:"i"},t.collection.find(e,{limit:this.limit}))},t.prototype.currentTemplate=function(){return this.rules[this.matched].template},t.prototype.getMenuPositioning=function(){var e,t;return t=this.$element.position(),e=this.$element.getCaretPosition(this.position),"top"===this.position?{left:t.left+e.left,bottom:this.$element.offsetParent().height()-t.top+this.$element.height()-e.top}:{left:t.left+e.left,top:t.top+e.top}},t}()}.call(this),function(){t="object"==typeof t?t:{};var e,n,s,a={}.hasOwnProperty;e=function(e){var t,n,i;t=[];for(n in e)a.call(e,n)&&(i=e[n],t.push(n),t.push('="'),t.push(i),t.push('" '));return t.join("")},i.registerHelper("inputAutocomplete",function(t,n){return new i.SafeString(r._inputAutocomplete({attributes:e(n.hash),ac:new AutoComplete(t)}))}),i.registerHelper("textareaAutocomplete",function(t,n){return new i.SafeString(r._textareaAutocomplete({attributes:e(n.hash),text:n.fn(this),ac:new AutoComplete(t)}))}),n={keydown:function(e,t){return t.data.ac.onKeyDown(e)},keyup:function(e,t){return t.data.ac.onKeyUp(e)},focus:function(e,t){return t.data.ac.onFocus(e)},blur:function(e,t){return t.data.ac.onBlur(e)}},r._inputAutocomplete.events=n,r._textareaAutocomplete.events=n,s=function(){return this.data.ac.element=this.firstNode,this.data.ac.$element=$(this.firstNode),this.data.ac.tmplInst=this},r._inputAutocomplete.rendered=s,r._textareaAutocomplete.rendered=s,r._autocompleteContainer.rendered=function(){var e,t,n,i;return i=this.data.ruleMatched(),i&&!this.showing?($(this.find(".-autocomplete-container")).css(this.data.getMenuPositioning()),e=this.find(".-autocomplete-item"),e&&Session.set("-autocomplete-id",o.getDataContext(e)._id)):i&&(n=this.find(".-autocomplete-item.selected"),n||(t=this.find(".-autocomplete-item"),t?Session.set("-autocomplete-id",o.getDataContext(t)._id):Session.set("-autocomplete-id",null))),this.showing=i},r._autocompleteContainer.destroyed=function(){return Session.set("-autocomplete-id","")},r._autocompleteContainer.events={"click .-autocomplete-item":function(e,t){return t.data.onItemClick(this,e)},"mouseenter .-autocomplete-item":function(e,t){return t.data.onItemHover(this,e)}},r._autocompleteContainer.shown=function(){return this.ruleMatched()},r._autocompleteContainer.items=function(){return this.filteredList()},r._autocompleteContainer.selected=function(){return Session.equals("-autocomplete-id",this._id)?"selected":""},r._autocompleteContainer.itemTemplate=function(e){return new i.SafeString(e.currentTemplate()(this))}}.call(this),"undefined"==typeof Package&&(Package={}),Package.autocomplete={}}(),function(){Package.meteor.Meteor;(function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css",e.appendChild(t)}).call(this),"undefined"==typeof Package&&(Package={}),Package["font-awesome"]={}}(),function(){{var e;Package.meteor.Meteor}(function(){e=e||function(e,t){var n={},i=n.lib={},r=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=i.WordArray=r.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;r>o;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else if(n.length>65535)for(var o=0;r>o;o+=4)t[i+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;t>i;i+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},a=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;n>r;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(n,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;n>r;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(n,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,s=this.blockSize,a=4*s,l=r/a;l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0);var c=l*s,u=e.min(4*c,r);if(c){for(var d=0;c>d;d+=s)this._doProcessBlock(i,d);var h=i.splice(0,c);n.sigBytes-=u}return new o.init(h,u)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),n.algo={});return n}(Math)}).call(this),"undefined"==typeof Package&&(Package={}),Package["crypto-base"]={CryptoJS:e}}(),function(){var e=(Package.meteor.Meteor,Package["crypto-base"].CryptoJS);(function(){!function(t){function n(e,t,n,i,r,o,s){var a=e+(t&n|~t&i)+r+s;return(a<<o|a>>>32-o)+t}function i(e,t,n,i,r,o,s){var a=e+(t&i|n&~i)+r+s;return(a<<o|a>>>32-o)+t}function r(e,t,n,i,r,o,s){var a=e+(t^n^i)+r+s;return(a<<o|a>>>32-o)+t}function o(e,t,n,i,r,o,s){var a=e+(n^(t|~i))+r+s;return(a<<o|a>>>32-o)+t}var s=e,a=s.lib,l=a.WordArray,c=a.Hasher,u=s.algo,d=[];!function(){for(var e=0;64>e;e++)d[e]=4294967296*t.abs(t.sin(e+1))|0}();var h=u.MD5=c.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var s=0;16>s;s++){var a=t+s,l=e[a];e[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var c=this._hash.words,u=e[t+0],h=e[t+1],f=e[t+2],p=e[t+3],m=e[t+4],g=e[t+5],v=e[t+6],y=e[t+7],b=e[t+8],w=e[t+9],_=e[t+10],C=e[t+11],k=e[t+12],x=e[t+13],S=e[t+14],T=e[t+15],E=c[0],D=c[1],N=c[2],A=c[3];E=n(E,D,N,A,u,7,d[0]),A=n(A,E,D,N,h,12,d[1]),N=n(N,A,E,D,f,17,d[2]),D=n(D,N,A,E,p,22,d[3]),E=n(E,D,N,A,m,7,d[4]),A=n(A,E,D,N,g,12,d[5]),N=n(N,A,E,D,v,17,d[6]),D=n(D,N,A,E,y,22,d[7]),E=n(E,D,N,A,b,7,d[8]),A=n(A,E,D,N,w,12,d[9]),N=n(N,A,E,D,_,17,d[10]),D=n(D,N,A,E,C,22,d[11]),E=n(E,D,N,A,k,7,d[12]),A=n(A,E,D,N,x,12,d[13]),N=n(N,A,E,D,S,17,d[14]),D=n(D,N,A,E,T,22,d[15]),E=i(E,D,N,A,h,5,d[16]),A=i(A,E,D,N,v,9,d[17]),N=i(N,A,E,D,C,14,d[18]),D=i(D,N,A,E,u,20,d[19]),E=i(E,D,N,A,g,5,d[20]),A=i(A,E,D,N,_,9,d[21]),N=i(N,A,E,D,T,14,d[22]),D=i(D,N,A,E,m,20,d[23]),E=i(E,D,N,A,w,5,d[24]),A=i(A,E,D,N,S,9,d[25]),N=i(N,A,E,D,p,14,d[26]),D=i(D,N,A,E,b,20,d[27]),E=i(E,D,N,A,x,5,d[28]),A=i(A,E,D,N,f,9,d[29]),N=i(N,A,E,D,y,14,d[30]),D=i(D,N,A,E,k,20,d[31]),E=r(E,D,N,A,g,4,d[32]),A=r(A,E,D,N,b,11,d[33]),N=r(N,A,E,D,C,16,d[34]),D=r(D,N,A,E,S,23,d[35]),E=r(E,D,N,A,h,4,d[36]),A=r(A,E,D,N,m,11,d[37]),N=r(N,A,E,D,y,16,d[38]),D=r(D,N,A,E,_,23,d[39]),E=r(E,D,N,A,x,4,d[40]),A=r(A,E,D,N,u,11,d[41]),N=r(N,A,E,D,p,16,d[42]),D=r(D,N,A,E,v,23,d[43]),E=r(E,D,N,A,w,4,d[44]),A=r(A,E,D,N,k,11,d[45]),N=r(N,A,E,D,T,16,d[46]),D=r(D,N,A,E,f,23,d[47]),E=o(E,D,N,A,u,6,d[48]),A=o(A,E,D,N,y,10,d[49]),N=o(N,A,E,D,S,15,d[50]),D=o(D,N,A,E,g,21,d[51]),E=o(E,D,N,A,k,6,d[52]),A=o(A,E,D,N,p,10,d[53]),N=o(N,A,E,D,_,15,d[54]),D=o(D,N,A,E,h,21,d[55]),E=o(E,D,N,A,b,6,d[56]),A=o(A,E,D,N,T,10,d[57]),N=o(N,A,E,D,v,15,d[58]),D=o(D,N,A,E,x,21,d[59]),E=o(E,D,N,A,m,6,d[60]),A=o(A,E,D,N,C,10,d[61]),N=o(N,A,E,D,f,15,d[62]),D=o(D,N,A,E,w,21,d[63]),c[0]=c[0]+E|0,c[1]=c[1]+D|0,c[2]=c[2]+N|0,c[3]=c[3]+A|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var o=t.floor(i/4294967296),s=i;n[(r+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[(r+64>>>9<<4)+14]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,l=a.words,c=0;4>c;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});s.MD5=c._createHelper(h),s.HmacMD5=c._createHmacHelper(h)}(Math)}).call(this),"undefined"==typeof Package&&(Package={}),Package["crypto-md5"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.email={}}(),function(){{var e,t=(Package.meteor.Meteor,Package.underscore._,Package["reactive-dict"].ReactiveDict);Package.ejson.EJSON}(function(){var n={};if(Package.reload){var i=Package.reload.Reload._migrationData("session");i&&i.keys&&(n=i.keys)}e=new t(n),Package.reload&&Package.reload.Reload._onMigrate("session",function(){return[!0,{keys:e.keys}]})}).call(this),"undefined"==typeof Package&&(Package={}),Package.session={Session:e}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.stylus={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.session.Session,i=Package.handlebars.Handlebars,r=Package["accounts-base"].Accounts,o=Package.underscore._,s=Package.templating.Template,a=Package.spark.Spark;(function(){r.ui||(r.ui={}),r.ui._options||(r.ui._options={requestPermissions:{}}),r.ui.config=function(e){var t=["passwordSignupFields","requestPermissions"];if(o.each(o.keys(e),function(e){if(!o.contains(t,e))throw new Error("Accounts.ui.config: Invalid key: "+e)}),e.passwordSignupFields){if(!o.contains(["USERNAME_AND_EMAIL_CONFIRM","USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY","EMAIL_ONLY"],e.passwordSignupFields))throw new Error("Accounts.ui.config: Invalid option for `passwordSignupFields`: "+e.passwordSignupFields);if(r.ui._options.passwordSignupFields)throw new Error("Accounts.ui.config: Can't set `passwordSignupFields` more than once");r.ui._options.passwordSignupFields=e.passwordSignupFields}e.requestPermissions&&o.each(e.requestPermissions,function(e,t){if(r.ui._options.requestPermissions[t])throw new Error("Accounts.ui.config: Can't set `requestPermissions` more than once for "+t);if(!(e instanceof Array))throw new Error("Accounts.ui.config: Value for `requestPermissions` must be an array");r.ui._options.requestPermissions[t]=e})},r.ui._passwordSignupFields=function(){return r.ui._options.passwordSignupFields||"EMAIL_ONLY"}}).call(this),function(){s.__define__("_loginButtons",Package.handlebars.Handlebars.json_ast_to_func(['<div id="login-buttons" class="login-buttons-dropdown-align-',["{",[[0,"align"]]],'"></div>\n  ',["#",[[0,"if"],[0,"currentUser"]],["\n    ",["#",[[0,"if"],[0,"loggingIn"]],["\n      ","\n      ",["#",[[0,"if"],[0,"dropdown"]],["\n        ",[">","_loginButtonsLoggingIn"],"\n      "],['\n        <div class="login-buttons-with-only-one-button">\n          ',[">","_loginButtonsLoggingInSingleLoginButton"],"\n        </div>\n      "]],"\n    "],["\n      ",[">","_loginButtonsLoggedIn"],"\n    "]],"\n  "],["\n    ",[">","_loginButtonsLoggedOut"],"\n  "]]])),s.__define__("_loginButtonsLoggedIn",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"dropdown"]],["\n    ",[">","_loginButtonsLoggedInDropdown"],"\n  "],['\n    <div class="login-buttons-with-only-one-button">\n      ',[">","_loginButtonsLoggedInSingleLogoutButton"],"\n    </div>\n  "]]])),s.__define__("_loginButtonsLoggedOut",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"services"]],[" ","\n    ",["#",[[0,"if"],[0,"configurationLoaded"]],["\n      ",["#",[[0,"if"],[0,"dropdown"]],[" ","\n        ",[">","_loginButtonsLoggedOutDropdown"],"\n      "],["\n        ",["#",[[0,"with"],[0,"singleService"]],[" ",'\n          <div class="login-buttons-with-only-one-button">\n            ',["#",[[0,"if"],[0,"loggingIn"]],["\n              ",[">","_loginButtonsLoggingInSingleLoginButton"],"\n            "],["\n              ",[">","_loginButtonsLoggedOutSingleLoginButton"],"\n            "]],"\n          </div>\n        "]],"\n      "]],"\n    "]],"\n  "],['\n    <div class="no-services">No login services configured</div>\n  ']]])),s.__define__("_loginButtonsMessages",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"errorMessage"]],['\n    <div class="alert alert-danger">',["{",[[0,"errorMessage"]]],"</div>\n  "]],"\n  ",["#",[[0,"if"],[0,"infoMessage"]],['\n    <div class="alert alert-success no-margin">',["{",[[0,"infoMessage"]]],"</div>\n  "]]])),s.__define__("_loginButtonsLoggingIn",Package.handlebars.Handlebars.json_ast_to_func([[">","_loginButtonsLoggingInPadding"],'\n  <div class="loading">&nbsp;</div>\n  ',[">","_loginButtonsLoggingInPadding"]])),s.__define__("_loginButtonsLoggingInPadding",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"unless"],[0,"dropdown"]],["\n    ",'\n    <div class="login-buttons-padding">\n      <div class="login-button single-login-button" style="visibility: hidden;" id="login-buttons-logout">&nbsp;</div>\n    </div>\n  '],["\n    ",'\n    <div class="login-buttons-padding"></div>\n  ']]]))}.call(this),function(){s.__define__("_loginButtonsLoggedOutSingleLoginButton",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    <div class="login-button single-login-button col-sm-12 ',["#",[[0,"if"],[0,"configured"]],["btn btn-info "],["configure-button btn btn-danger"]],'" id="login-buttons-',["{",[[0,"name"]]],'">\n      <div class="login-image" id="login-buttons-image-',["{",[[0,"name"]]],'"></div>\n      ',["#",[[0,"if"],[0,"configured"]],['\n        <span class="text-besides-image sign-in-text-',["{",[[0,"name"]]],'">Sign in with ',["{",[[0,"capitalizedName"]]],"</span>\n      "],['\n        <span class="text-besides-image configure-text-',["{",[[0,"name"]]],'">Configure ',["{",[[0,"capitalizedName"]]]," Login</span>\n      "]],"\n    </div>\n  </div>"])),s.__define__("_loginButtonsLoggingInSingleLoginButton",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    ',[">","_loginButtonsLoggingIn"],"\n  </div>"])),s.__define__("_loginButtonsLoggedInSingleLogoutButton",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    <div class="login-display-name">\n      ',["{",[[0,"displayName"]]],'\n    </div>\n    <div class="login-button single-login-button" id="login-buttons-logout">Sign Out</div>\n  </div>']))}.call(this),function(){s.__define__("_loginButtonsLoggedInDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<li id="login-dropdown-list" class="dropdown">\n    <a class="dropdown-toggle"  data-toggle="dropdown">\n      ',["{",[[0,"displayName"]]],'\n      <b class="caret"></b>\n    </a>\n    <div class="dropdown-menu col-sm-3">\n      ',["#",[[0,"if"],[0,"inMessageOnlyFlow"]],["\n        ",[">","_loginButtonsMessages"],"\n      "],["\n        ",["#",[[0,"if"],[0,"inChangePasswordFlow"]],["\n          ",[">","_loginButtonsChangePassword"],"\n        "],["\n          ",[">","_loginButtonsLoggedInDropdownActions"],"\n        "]],"\n      "]],"\n    </div>\n  </li>"])),s.__define__("_loginButtonsLoggedInDropdownActions",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"allowChangingPassword"]],['\n    <button class="btn btn-default btn-block" id="login-buttons-open-change-password">Change password</button>\n  ']],'\n  <button class="btn btn-block btn-primary" id="login-buttons-logout">Sign out</button>'])),s.__define__("_loginButtonsLoggedOutDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<li id="login-dropdown-list" class="dropdown">\n    <a class="dropdown-toggle"  data-toggle="dropdown">\n      Sign In',["#",[[0,"unless"],[0,"forbidClientAccountCreation"]],[" / Up"]],'\n      <b class="caret"></b>\n    </a>\n    <div class="dropdown-menu">\n      ',[">","_loginButtonsLoggedOutAllServices"],"\n    </div>\n  </li>"])),s.__define__("_loginButtonsLoggedOutAllServices",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"services"]],["\n  ",["#",[[0,"unless"],[0,"hasPasswordService"]],["\n    ",[">","_loginButtonsMessages"],"\n  "]],"\n    ",["#",[[0,"if"],[0,"isPasswordService"]],["\n      ",["#",[[0,"if"],[0,"hasOtherServices"]],[" ","\n        ",[">","_loginButtonsLoggedOutPasswordServiceSeparator"],"\n      "]],"\n      ",[">","_loginButtonsLoggedOutPasswordService"],"\n    "],["\n      ",[">","_loginButtonsLoggedOutSingleLoginButton"],"\n    "]],"\n  "]]])),s.__define__("_loginButtonsLoggedOutPasswordServiceSeparator",Package.handlebars.Handlebars.json_ast_to_func(['<div class="or">\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n    <span class="or-text">or</span>\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n  </div>'])),s.__define__("_loginButtonsLoggedOutPasswordService",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inForgotPasswordFlow"]],["\n    ",[">","_forgotPasswordForm"],"\n  "],["\n    ",[">","_loginButtonsMessages"],"\n    ",["#",[[0,"each"],[0,"fields"]],["\n      ",[">","_loginButtonsFormField"],"\n    "]],'\n    <button class="btn btn-primary col-sm-12" id="login-buttons-password" type="button">\n      ',["#",[[0,"if"],[0,"inSignupFlow"]],["\n        Create\n      "],["\n        Sign in\n      "]],"\n    </button>\n    ",["#",[[0,"if"],[0,"inLoginFlow"]],['\n      <div id="login-other-options">\n      ',["#",[[0,"if"],[0,"showForgotPasswordLink"]],['\n        <a id="forgot-password-link" class="pull-left" >Forgot password?</a>\n      ']],"\n      ",["#",[[0,"if"],[0,"showCreateAccountLink"]],['\n        <a id="signup-link" class="pull-right" >Create account</a>\n      ']],"\n      </div>\n    "]],"\n    ",["#",[[0,"if"],[0,"inSignupFlow"]],["\n      ",[">","_loginButtonsBackToLoginLink"],"\n    "]],"\n  "]]])),s.__define__("_forgotPasswordForm",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-form">\n    ',[">","_loginButtonsMessages"],'\n    <div id="forgot-password-email-label-and-input"> ','\n      <input id="forgot-password-email" type="email" placeholder="E-mail" class="form-control" />\n    </div>\n    <button class="btn btn-primary login-button-form-submit col-sm-12" id="login-buttons-forgot-password">Reset password</button>\n    ',[">","_loginButtonsBackToLoginLink"],"\n  </div>"])),s.__define__("_loginButtonsBackToLoginLink",Package.handlebars.Handlebars.json_ast_to_func(['<button id="back-to-login-link" class="btn btn-default col-sm-12">Cancel</button>'])),s.__define__("_loginButtonsFormField",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <input id="login-',["{",[[0,"fieldName"]]],'" type="',["{",[[0,"inputType"]]],'" placeholder="',["{",[[0,"fieldLabel"]]],'" class="form-control" />\n  ']]])),s.__define__("_loginButtonsChangePassword",Package.handlebars.Handlebars.json_ast_to_func([[">","_loginButtonsMessages"],"\n  ",["#",[[0,"each"],[0,"fields"]],["\n    ",[">","_loginButtonsFormField"],"\n  "]],'\n  <button class="btn btn-primary" id="login-buttons-do-change-password">Change password</button>\n  <button class="btn btn-default login-close">Close</button>']))}.call(this),function(){t.startup(function(){document.body.appendChild(a.render(s.__define__(null,Package.handlebars.Handlebars.json_ast_to_func([[">","_resetPasswordDialog"],"\n  ",[">","_enrollAccountDialog"],"\n  ",[">","_justVerifiedEmailDialog"],"\n  ",[">","_configureLoginServiceDialog"],"\n\n  <!-- if we're not showing a dropdown, we need some other place to show messages -->\n  ",[">","_loginButtonsMessagesDialog"]]))))}),s.__define__("_resetPasswordDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inResetPasswordFlow"]],['\n    <div class="modal" id="login-buttons-reset-password-modal">\n      <div class="modal-dialog">\n        <div class="modal-content">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h4 class="modal-title">Reset your password</h4>\n          </div>\n          <div class="modal-body">\n            <input id="reset-password-new-password" class="form-control" type="password" placeholder="New Password"/>\n            ',[">","_loginButtonsMessages"],'\n          </div>\n          <div class="modal-footer">\n            <a class="btn btn-default" id="login-buttons-cancel-reset-password">Close</a>\n            <button class="btn btn-primary" id="login-buttons-reset-password-button">\n              Set password\n            </button>\n          </div>\n        </div><!-- /.modal-content -->\n      </div><!-- /.modal-dalog -->\n    </div><!-- /.modal -->\n  ']]])),s.__define__("_enrollAccountDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inEnrollAccountFlow"]],['\n    <div class="modal" id="login-buttons-enroll-account-modal">\n      <div class="modal-dialog">\n        <div class="modal-content">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h4 class="modal-title">Choose a password</h4>\n          </div>\n          <div class="modal-body">\n            <input id="enroll-account-password" class="form-control" type="password" placeholder="New Password" />\n            ',[">","_loginButtonsMessages"],'\n          </div>\n          <div class="modal-footer">\n            <a class="btn btn-default" id="login-buttons-cancel-enroll-account-button">Close</a>\n            <button class="btn btn-primary" id="login-buttons-enroll-account-button">\n              Set password\n            </button>\n          </div>\n        </div><!-- /.modal-content -->\n      </div><!-- /.modal-dalog -->\n    </div><!-- /.modal -->\n  ']]])),s.__define__("_justVerifiedEmailDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div class="accounts-dialog accounts-centered-dialog">\n      Email verified\n      <div class="login-button" id="just-verified-dismiss-button">Dismiss</div>\n    </div>\n  ']]])),s.__define__("_configureLoginServiceDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n  <div class="modal-dialog" id="configure-login-service-dialog-modal">\n      <div class="modal-content">\n          <div class="modal-header">\n              <h4 class="modal-title">Configure Service</h4>\n          </div>\n          <div class="modal-body">\n            <div id="configure-login-service-dialog" class="accounts-dialog accounts-centered-dialog">\n              ',["!",[[0,"configurationSteps"]]],'\n              <p>\n                Now, copy over some details.\n              </p>\n              <p>\n                <table>\n                  <colgroup>\n                    <col span="1" class="configuration_labels">\n                    <col span="1" class="configuration_inputs">\n                  </colgroup>\n                  ',["#",[[0,"each"],[0,"configurationFields"]],['\n                    <tr>\n                      <td>\n                        <label for="configure-login-service-dialog-',["{",[[0,"property"]]],'">',["{",[[0,"label"]]],'</label>\n                      </td>\n                      <td>\n                        <input id="configure-login-service-dialog-',["{",[[0,"property"]]],'" type="text" />\n                      </td>\n                    </tr>\n                  ']],'\n                </table>\n              </p>\n            </div>\n          </div>\n          <div class="modal-footer new-section">\n                <div class="login-button btn btn-danger configure-login-service-dismiss-button">\n                  I\'ll do this later\n                </div>\n                ',["#",[[0,"isolate"]],['\n                  <div class="login-button login-button-configure btn btn-success ',["#",[[0,"if"],[0,"saveDisabled"]],["login-button-disabled"]],'"\n                     id="configure-login-service-dialog-save-configuration">\n                    Save Configuration\n                  </div>\n                ']],'\n              </div>\n      </div>\n  </div>\n  <div class="modal-backdrop  in"></div>\n  ']]])),s.__define__("_loginButtonsMessagesDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div class="accounts-dialog accounts-centered-dialog" id="login-buttons-message-dialog">\n      ',[">","_loginButtonsMessages"],'\n      <div class="login-button" id="messages-dialog-dismiss-button">Dismiss</div>\n    </div>\n  ']]]))}.call(this),function(){!function(){var e=["dropdownVisible","inSignupFlow","inForgotPasswordFlow","inChangePasswordFlow","inMessageOnlyFlow","errorMessage","infoMessage","resetPasswordToken","enrollAccountToken","justVerifiedEmail","configureLoginServiceDialogVisible","configureLoginServiceDialogServiceName","configureLoginServiceDialogSaveDisabled"],t=function(t){if(!o.contains(e,t))throw new Error("Invalid key in loginButtonsSession: "+t)
},i="Meteor.loginButtons.";r._loginButtonsSession={set:function(e,n){if(t(e),o.contains(["errorMessage","infoMessage"],e))throw new Error("Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().");this._set(e,n)},_set:function(e,t){n.set(i+e,t)},get:function(e){return t(e),n.get(i+e)},closeDropdown:function(){this.set("inSignupFlow",!1),this.set("inForgotPasswordFlow",!1),this.set("inChangePasswordFlow",!1),this.set("inMessageOnlyFlow",!1),this.set("dropdownVisible",!1),this.resetMessages()},infoMessage:function(e){this._set("errorMessage",null),this._set("infoMessage",e),this.ensureMessageVisible()},errorMessage:function(e){this._set("errorMessage",e),this._set("infoMessage",null),this.ensureMessageVisible()},isMessageDialogVisible:function(){return this.get("resetPasswordToken")||this.get("enrollAccountToken")||this.get("justVerifiedEmail")},ensureMessageVisible:function(){this.isMessageDialogVisible()||this.set("dropdownVisible",!0)},resetMessages:function(){this._set("errorMessage",null),this._set("infoMessage",null)},configureService:function(e){this.set("configureLoginServiceDialogVisible",!0),this.set("configureLoginServiceDialogServiceName",e),this.set("configureLoginServiceDialogSaveDisabled",!0)}}}()}.call(this),function(){!function(){r._loginButtons||(r._loginButtons={});var e=r._loginButtonsSession;i.registerHelper("loginButtons",function(e){return"left"===e.hash.align?new i.SafeString(s._loginButtons({align:"left"})):new i.SafeString(s._loginButtons({align:"right"}))}),s._loginButtons.events({"click #login-buttons-logout":function(){t.logout(function(){e.closeDropdown()})}}),s._loginButtons.preserve({"input[id]":a._labelFromIdOrName}),s._loginButtonsLoggedOut.dropdown=function(){return r._loginButtons.dropdown()},s._loginButtonsLoggedOut.services=function(){return r._loginButtons.getLoginServices()},s._loginButtonsLoggedOut.singleService=function(){var e=r._loginButtons.getLoginServices();if(1!==e.length)throw new Error("Shouldn't be rendering this template with more than one configured service");return e[0]},s._loginButtonsLoggedOut.configurationLoaded=function(){return r.loginServicesConfigured()},s._loginButtonsLoggedIn.dropdown=function(){return r._loginButtons.dropdown()},s._loginButtonsLoggedIn.displayName=function(){return r._loginButtons.displayName()},s._loginButtonsMessages.errorMessage=function(){return e.get("errorMessage")},s._loginButtonsMessages.infoMessage=function(){return e.get("infoMessage")},s._loginButtonsLoggingInPadding.dropdown=function(){return r._loginButtons.dropdown()},r._loginButtons.displayName=function(){var e=t.user();return e?e.profile&&e.profile.name?e.profile.name:e.username?e.username:e.emails&&e.emails[0]&&e.emails[0].address?e.emails[0].address:"":""},r._loginButtons.getLoginServices=function(){var e=Package["accounts-oauth"]?r.oauth.serviceNames():[];return e.sort(),this.hasPasswordService()&&e.push("password"),o.map(e,function(e){return{name:e}})},r._loginButtons.hasPasswordService=function(){return!!Package["accounts-password"]},r._loginButtons.dropdown=function(){return this.hasPasswordService()||getLoginServices().length>1},r._loginButtons.validateUsername=function(t){return t.length>=3?!0:(e.errorMessage("Username must be at least 3 characters long"),!1)},r._loginButtons.validateEmail=function(t){if("USERNAME_AND_OPTIONAL_EMAIL"===r.ui._passwordSignupFields()&&""===t)return!0;var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(t)?!0:(e.errorMessage("Invalid email"),!1)},r._loginButtons.validatePassword=function(t){return t.length>=6?!0:(e.errorMessage("Password must be at least 6 characters long"),!1)}}()}.call(this),function(){!function(){var e=r._loginButtonsSession;s._loginButtonsLoggedOutSingleLoginButton.events({"click .login-button":function(){var i=this.name;e.resetMessages();var o=function(t){t?t instanceof r.LoginCancelledError||(t instanceof r.ConfigError?e.configureService(i):e.errorMessage(t.reason||"Unknown error")):e.closeDropdown()},s=t["loginWith"+n(i)],a={};r.ui._options.requestPermissions[i]&&(a.requestPermissions=r.ui._options.requestPermissions[i]),s(a,o)}}),s._loginButtonsLoggedOutSingleLoginButton.configured=function(){return!!r.loginServiceConfiguration.findOne({service:this.name})},s._loginButtonsLoggedOutSingleLoginButton.capitalizedName=function(){return"github"===this.name?"GitHub":n(this.name)};var n=function(e){return e=null==e?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)}}()}.call(this),function(){!function(){var e=r._loginButtonsSession;s._loginButtons.events({"click input, click label, click button, click .dropdown-menu, click .alert":function(e){e.stopPropagation()},"click #login-name-link, click #login-sign-in-link":function(){event.stopPropagation(),e.set("dropdownVisible",!0),t.flush()},"click .login-close":function(){e.closeDropdown()}}),s._loginButtonsLoggedInDropdown.events({"click #login-buttons-open-change-password":function(n){n.stopPropagation(),e.resetMessages(),e.set("inChangePasswordFlow",!0),t.flush(),c()}}),s._loginButtonsLoggedInDropdown.displayName=function(){return r._loginButtons.displayName()},s._loginButtonsLoggedInDropdown.inChangePasswordFlow=function(){return e.get("inChangePasswordFlow")},s._loginButtonsLoggedInDropdown.inMessageOnlyFlow=function(){return e.get("inMessageOnlyFlow")},s._loginButtonsLoggedInDropdown.dropdownVisible=function(){return e.get("dropdownVisible")},s._loginButtonsLoggedInDropdownActions.allowChangingPassword=function(){var e=t.user();return e.username||e.emails&&e.emails[0]&&e.emails[0].address},s._loginButtonsLoggedOutDropdown.events({"click #login-buttons-password":function(){a()},"keypress #forgot-password-email":function(e){13===e.keyCode&&d()},"click #login-buttons-forgot-password":function(e){e.stopPropagation(),d()},"click #signup-link":function(r){r.stopPropagation(),e.resetMessages();{var o=i("login-username"),s=i("login-email"),a=i("login-username-or-email");n("login-password")}e.set("inSignupFlow",!0),e.set("inForgotPasswordFlow",!1),t.flush(),null!==o?document.getElementById("login-username").value=o:null!==s?document.getElementById("login-email").value=s:null!==a&&(-1===a.indexOf("@")?document.getElementById("login-username").value=a:document.getElementById("login-email").value=a)},"click #forgot-password-link":function(n){n.stopPropagation(),e.resetMessages();var r=i("login-email"),o=i("login-username-or-email");e.set("inSignupFlow",!1),e.set("inForgotPasswordFlow",!0),t.flush(),null!==r?document.getElementById("forgot-password-email").value=r:null!==o&&-1!==o.indexOf("@")&&(document.getElementById("forgot-password-email").value=o)},"click #back-to-login-link":function(){e.resetMessages();var n=i("login-username"),r=i("login-email")||i("forgot-password-email");e.set("inSignupFlow",!1),e.set("inForgotPasswordFlow",!1),t.flush(),document.getElementById("login-username")&&(document.getElementById("login-username").value=n),document.getElementById("login-email")&&(document.getElementById("login-email").value=r),document.getElementById("login-username-or-email")&&(document.getElementById("login-username-or-email").value=r||n)},"keypress #login-username, keypress #login-email, keypress #login-username-or-email, keypress #login-password, keypress #login-password-again":function(e){13===e.keyCode&&a()}}),s._loginButtonsLoggedOutDropdown.additionalClasses=function(){return r.password?e.get("inSignupFlow")?"login-form-create-account":e.get("inForgotPasswordFlow")?"login-form-forgot-password":"login-form-sign-in":!1},s._loginButtonsLoggedOutDropdown.dropdownVisible=function(){return e.get("dropdownVisible")},s._loginButtonsLoggedOutDropdown.hasPasswordService=function(){return r._loginButtons.hasPasswordService()},s._loginButtonsLoggedOutDropdown.forbidClientAccountCreation=function(){return r._options.forbidClientAccountCreation},s._loginButtonsLoggedOutAllServices.services=function(){return r._loginButtons.getLoginServices()},s._loginButtonsLoggedOutAllServices.isPasswordService=function(){return"password"===this.name},s._loginButtonsLoggedOutAllServices.hasOtherServices=function(){return r._loginButtons.getLoginServices().length>1},s._loginButtonsLoggedOutAllServices.hasPasswordService=function(){return r._loginButtons.hasPasswordService()},s._loginButtonsLoggedOutPasswordService.fields=function(){var t=[{fieldName:"username-or-email",fieldLabel:"Username or Email",visible:function(){return o.contains(["USERNAME_AND_EMAIL_CONFIRM","USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL"],r.ui._passwordSignupFields())}},{fieldName:"username",fieldLabel:"Username",visible:function(){return"USERNAME_ONLY"===r.ui._passwordSignupFields()}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return"EMAIL_ONLY"===r.ui._passwordSignupFields()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}}],n=[{fieldName:"username",fieldLabel:"Username",visible:function(){return o.contains(["USERNAME_AND_EMAIL_CONFIRM","USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],r.ui._passwordSignupFields())}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return o.contains(["USERNAME_AND_EMAIL_CONFIRM","USERNAME_AND_EMAIL","EMAIL_ONLY"],r.ui._passwordSignupFields())}},{fieldName:"email",fieldLabel:"Email (optional)",inputType:"email",visible:function(){return"USERNAME_AND_OPTIONAL_EMAIL"===r.ui._passwordSignupFields()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"Password (again)",inputType:"password",visible:function(){return o.contains(["USERNAME_AND_EMAIL_CONFIRM","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],r.ui._passwordSignupFields())}}];return e.get("inSignupFlow")?n:t},s._loginButtonsLoggedOutPasswordService.inForgotPasswordFlow=function(){return e.get("inForgotPasswordFlow")},s._loginButtonsLoggedOutPasswordService.inLoginFlow=function(){return!e.get("inSignupFlow")&&!e.get("inForgotPasswordFlow")},s._loginButtonsLoggedOutPasswordService.inSignupFlow=function(){return e.get("inSignupFlow")},s._loginButtonsLoggedOutPasswordService.showForgotPasswordLink=function(){return o.contains(["USERNAME_AND_EMAIL_CONFIRM","USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","EMAIL_ONLY"],r.ui._passwordSignupFields())},s._loginButtonsLoggedOutPasswordService.showCreateAccountLink=function(){return!r._options.forbidClientAccountCreation},s._loginButtonsFormField.inputType=function(){return this.inputType||"text"},s._loginButtonsChangePassword.events({"keypress #login-old-password, keypress #login-password, keypress #login-password-again":function(e){13===e.keyCode&&h()},"click #login-buttons-do-change-password":function(e){e.stopPropagation(),h()}}),s._loginButtonsChangePassword.fields=function(){return[{fieldName:"old-password",fieldLabel:"Current Password",inputType:"password",visible:function(){return!0}},{fieldName:"password",fieldLabel:"New Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"New Password (again)",inputType:"password",visible:function(){return o.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],r.ui._passwordSignupFields())}}]};var n=function(e){var t=document.getElementById(e);return t?t.value:null},i=function(e){var t=document.getElementById(e);return t?t.value.replace(/^\s*|\s*$/g,""):null},a=function(){e.get("inSignupFlow")?u():l()},l=function(){e.resetMessages();var o,s=i("login-username"),a=i("login-email"),l=i("login-username-or-email"),c=n("login-password");if(null!==s){if(!r._loginButtons.validateUsername(s))return;o={username:s}}else if(null!==a){if(!r._loginButtons.validateEmail(a))return;o={email:a}}else{if(null===l)throw new Error("Unexpected -- no element to use as a login user selector");if(!r._loginButtons.validateUsername(l))return;o=l}t.loginWithPassword(o,c,function(t){t?e.errorMessage(t.reason||"Unknown error"):e.closeDropdown()})},c=function(){$("#login-dropdown-list .dropdown-menu").dropdown("toggle")},u=function(){e.resetMessages();var t={},o=i("login-username");if(null!==o){if(!r._loginButtons.validateUsername(o))return;t.username=o}var s=i("login-email");if(null!==s){if(!r._loginButtons.validateEmail(s))return;t.email=s}var a=n("login-password");r._loginButtons.validatePassword(a)&&(t.password=a,f()&&r.createUser(t,function(t){t?e.errorMessage(t.reason||"Unknown error"):e.closeDropdown()}))},d=function(){e.resetMessages();var t=i("forgot-password-email");-1!==t.indexOf("@")?r.forgotPassword({email:t},function(t){t?e.errorMessage(t.reason||"Unknown error"):e.infoMessage("Email sent")}):e.infoMessage("Email sent")},h=function(){e.resetMessages();var i=n("login-old-password"),o=n("login-password");r._loginButtons.validatePassword(o)&&f()&&r.changePassword(i,o,function(n){n?e.errorMessage(n.reason||"Unknown error"):(e.infoMessage("Password changed"),t.setTimeout(function(){e.resetMessages()},3e3))})},f=function(){var t=n("login-password-again");if(null!==t){var i=n("login-password");if(i!==t)return e.errorMessage("Passwords don't match"),!1}return!0}}()}.call(this),function(){!function(){var n=r._loginButtonsSession;r._resetPasswordToken&&n.set("resetPasswordToken",r._resetPasswordToken),r._enrollAccountToken&&n.set("enrollAccountToken",r._enrollAccountToken),t.startup(function(){r._verifyEmailToken&&r.verifyEmail(r._verifyEmailToken,function(e){r._enableAutoLogin(),e||n.set("justVerifiedEmail",!0)})}),s._resetPasswordDialog.rendered=function(){var e=$(this.find("#login-buttons-reset-password-modal"));e.modal()},s._resetPasswordDialog.events({"click #login-buttons-reset-password-button":function(){i()},"keypress #reset-password-new-password":function(e){13===e.keyCode&&i()},"click #login-buttons-cancel-reset-password":function(){n.set("resetPasswordToken",null),r._enableAutoLogin(),$("#login-buttons-reset-password-modal").modal("hide")}});var i=function(){n.resetMessages();var e=document.getElementById("reset-password-new-password").value;r._loginButtons.validatePassword(e)&&r.resetPassword(n.get("resetPasswordToken"),e,function(e){e?n.errorMessage(e.reason||"Unknown error"):(n.set("resetPasswordToken",null),r._enableAutoLogin(),$("#login-buttons-reset-password-modal").modal("hide"))})};s._resetPasswordDialog.inResetPasswordFlow=function(){return n.get("resetPasswordToken")},s._enrollAccountDialog.events({"click #login-buttons-enroll-account-button":function(){a()},"keypress #enroll-account-password":function(e){13===e.keyCode&&a()},"click #login-buttons-cancel-enroll-account-button":function(){n.set("enrollAccountToken",null),r._enableAutoLogin(),e.modal("hide")}}),s._enrollAccountDialog.rendered=function(){e=$(this.find("#login-buttons-enroll-account-modal")),e.modal()};var a=function(){n.resetMessages();var t=document.getElementById("enroll-account-password").value;r._loginButtons.validatePassword(t)&&r.resetPassword(n.get("enrollAccountToken"),t,function(t){t?n.errorMessage(t.reason||"Unknown error"):(n.set("enrollAccountToken",null),r._enableAutoLogin(),e.modal("hide"))})};s._enrollAccountDialog.inEnrollAccountFlow=function(){return n.get("enrollAccountToken")},s._justVerifiedEmailDialog.events({"click #just-verified-dismiss-button":function(){n.set("justVerifiedEmail",!1)}}),s._justVerifiedEmailDialog.visible=function(){return n.get("justVerifiedEmail")},s._loginButtonsMessagesDialog.events({"click #messages-dialog-dismiss-button":function(){n.resetMessages()}}),s._loginButtonsMessagesDialog.visible=function(){var e=n.get("infoMessage")||n.get("errorMessage");return!r._loginButtons.dropdown()&&e},s._configureLoginServiceDialog.events({"click .configure-login-service-dismiss-button":function(){n.set("configureLoginServiceDialogVisible",!1)},"click #configure-login-service-dialog-save-configuration":function(){if(n.get("configureLoginServiceDialogVisible")&&!n.get("configureLoginServiceDialogSaveDisabled")){var e=n.get("configureLoginServiceDialogServiceName"),i={service:e};o.each(u(),function(e){i[e.property]=document.getElementById("configure-login-service-dialog-"+e.property).value.replace(/^\s*|\s*$/g,"")}),t.call("configureLoginService",i,function(i){i?t._debug("Error configuring login service "+e,i):n.set("configureLoginServiceDialogVisible",!1)})}},"input, keyup input":function(e){0===e.target.id.indexOf("configure-login-service-dialog")&&l()}});var l=function(){var e=o.any(u(),function(e){return""===document.getElementById("configure-login-service-dialog-"+e.property).value});n.set("configureLoginServiceDialogSaveDisabled",e)},c=function(){var e=n.get("configureLoginServiceDialogServiceName");return s["configureLoginServiceDialogFor"+d(e)]},u=function(){var e=c();return e.fields()};s._configureLoginServiceDialog.configurationFields=function(){return u()},s._configureLoginServiceDialog.visible=function(){return n.get("configureLoginServiceDialogVisible")},s._configureLoginServiceDialog.configurationSteps=function(){return c()()},s._configureLoginServiceDialog.saveDisabled=function(){return n.get("configureLoginServiceDialogSaveDisabled")};var d=function(e){return e=null==e?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)}}()}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-ui-bootstrap-3"]={}}(),function(){{var e=(Package.meteor.Meteor,Package.templating.Template),t=Package.handlebars.Handlebars;Package.spark.Spark}(function(){e.__define__("_dropzone",Package.handlebars.Handlebars.json_ast_to_func(["<form action='",["{",[[0,"action"]]],"' id=\"",["{",[[0,"_id"]]],"\" class='dropzone'>\n    <div class='fallback'>\n      <input name='file' type='file' multiple />\n    </div>\n  </form>"]))}).call(this),function(){t.registerHelper("dropzone",function(n,i){return new t.SafeString(e._dropzone({action:n,_id:i}))}),e._dropzone.rendered=function(){window.Dropzone.discover()}}.call(this),function(){!function(){function e(t,n,i){var r=e.resolve(t);if(null==r){i=i||t,n=n||"root";var o=new Error('Failed to require "'+i+'" from "'+n+'"');throw o.path=i,o.parent=n,o.require=!0,o}var s=e.modules[r];return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s.exports,e.relative(r),s)),s.exports}e.modules={},e.aliases={},e.resolve=function(t){"/"===t.charAt(0)&&(t=t.slice(1));for(var n=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"],i=0;i<n.length;i++){var t=n[i];if(e.modules.hasOwnProperty(t))return t;if(e.aliases.hasOwnProperty(t))return e.aliases[t]}},e.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var i=0;i<t.length;++i)".."==t[i]?e.pop():"."!=t[i]&&""!=t[i]&&n.push(t[i]);return e.concat(n).join("/")},e.register=function(t,n){e.modules[t]=n},e.alias=function(t,n){if(!e.modules.hasOwnProperty(t))throw new Error('Failed to alias "'+t+'", it does not exist');e.aliases[n]=t},e.relative=function(t){function n(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function i(n){var r=i.resolve(n);return e(r,t,n)}var r=e.normalize(t,"..");return i.resolve=function(i){var o=i.charAt(0);if("/"==o)return i.slice(1);if("."==o)return e.normalize(r,i);var s=t.split("/"),a=n(s,"deps")+1;return a||(a=0),i=s.slice(0,a+1).join("/")+"/deps/"+i},i.exists=function(t){return e.modules.hasOwnProperty(i.resolve(t))},i},e.register("component-emitter/index.js",function(e,t,n){function i(e){return e?r(e):void 0}function r(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}n.exports=i,i.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},t._off=n,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var i=n.indexOf(t._off||t);return~i&&n.splice(i,1),this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),e.register("dropzone/index.js",function(e,t,n){n.exports=t("./lib/dropzone.js")}),e.register("dropzone/lib/dropzone.js",function(e,t,n){(function(){var e,i,r,o,s,a,l={}.hasOwnProperty,c=function(e,t){function n(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u=[].slice;i="undefined"!=typeof Emitter&&null!==Emitter?Emitter:t("emitter"),s=function(){},e=function(e){function t(e,i){var r,o,s;if(this.element=e,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(this),e.dropzone=this,r=null!=(s=t.optionsForElement(this.element))?s:{},this.options=n({},this.defaultOptions,r,null!=i?i:{}),this.options.forceFallback||!t.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.previewsContainer=this.options.previewsContainer?t.getElement(this.options.previewsContainer,"previewsContainer"):this.element,this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:t.getElements(this.options.clickable,"clickable")),this.init()}var n;return c(t,e),t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","selectedfiles","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded"],t.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can only upload {{maxFiles}} files.",accept:function(e,t){return t()},init:function(){return s},forceFallback:!1,fallback:function(){var e,n,i,r,o,s;for(this.element.className=""+this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),r=0,o=s.length;o>r;r++)e=s[r],/(^| )dz-message($| )/.test(e.className)&&(n=e,e.className="dz-message");return n||(n=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),i=n.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,i;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,i=this.options.thumbnailWidth/this.options.thumbnailHeight,e.height<this.options.thumbnailHeight||e.width<this.options.thumbnailWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>i?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*i):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/i),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:s,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},selectedfiles:function(){return this.element===this.previewsContainer?this.element.classList.add("dz-started"):void 0},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var n=this;return e.previewElement=t.createElement(this.options.previewTemplate),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),e.previewElement.querySelector("[data-dz-name]").textContent=e.name,e.previewElement.querySelector("[data-dz-size]").innerHTML=this.filesize(e.size),this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;">'+this.options.dictRemoveFile+"</a>"),e._removeLink.addEventListener("click",function(i){return i.preventDefault(),i.stopPropagation(),e.status===t.UPLOADING?t.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(e)}):n.options.dictRemoveFileConfirmation?t.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(e)}):n.removeFile(e)}),e.previewElement.appendChild(e._removeLink)),this._updateMaxFilesReachedClass()},removedfile:function(e){var t;return null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n;return e.previewElement.classList.remove("dz-file-preview"),e.previewElement.classList.add("dz-image-preview"),n=e.previewElement.querySelector("[data-dz-thumbnail]"),n.alt=e.name,n.src=t},error:function(e,t){return e.previewElement.classList.add("dz-error"),e.previewElement.querySelector("[data-dz-errormessage]").textContent=t},errormultiple:s,processing:function(e){return e.previewElement.classList.add("dz-processing"),e._removeLink?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:s,uploadprogress:function(e,t){return e.previewElement.querySelector("[data-dz-uploadprogress]").style.width=""+t+"%"},totaluploadprogress:s,sending:s,sendingmultiple:s,success:function(e){return e.previewElement.classList.add("dz-success")},successmultiple:s,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:s,complete:function(e){return e._removeLink?e._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:s,maxfilesexceeded:s,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span></span></div>\n  <div class="dz-error-mark"><span></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},n=function(){var e,t,n,i,r,o,s;for(i=arguments[0],n=2<=arguments.length?u.call(arguments,1):[],o=0,s=n.length;s>o;o++){t=n[o];for(e in t)r=t[e],i[e]=r}return i},t.prototype.getAcceptedFiles=function(){var e,t,n,i,r;for(i=this.files,r=[],t=0,n=i.length;n>t;t++)e=i[t],e.accepted&&r.push(e);return r},t.prototype.getRejectedFiles=function(){var e,t,n,i,r;for(i=this.files,r=[],t=0,n=i.length;n>t;t++)e=i[t],e.accepted||r.push(e);return r},t.prototype.getQueuedFiles=function(){var e,n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;i>n;n++)e=r[n],e.status===t.QUEUED&&o.push(e);return o},t.prototype.getUploadingFiles=function(){var e,n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;i>n;n++)e=r[n],e.status===t.UPLOADING&&o.push(e);return o},t.prototype.init=function(){var e,n,i,r,o,s,a,l=this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(){return l.hiddenFileInput&&document.body.removeChild(l.hiddenFileInput),l.hiddenFileInput=document.createElement("input"),l.hiddenFileInput.setAttribute("type","file"),l.hiddenFileInput.setAttribute("multiple","multiple"),null!=l.options.acceptedFiles&&l.hiddenFileInput.setAttribute("accept",l.options.acceptedFiles),l.hiddenFileInput.style.visibility="hidden",l.hiddenFileInput.style.position="absolute",l.hiddenFileInput.style.top="0",l.hiddenFileInput.style.left="0",l.hiddenFileInput.style.height="0",l.hiddenFileInput.style.width="0",document.body.appendChild(l.hiddenFileInput),l.hiddenFileInput.addEventListener("change",function(){var e;return e=l.hiddenFileInput.files,e.length&&(l.emit("selectedfiles",e),l.handleFiles(e)),i()})},i()),this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,r=0,o=a.length;o>r;r++)e=a[r],this.on(e,this.options[e]);return this.on("uploadprogress",function(){return l.updateTotalUploadProgress()}),this.on("removedfile",function(){return l.updateTotalUploadProgress()}),this.on("canceled",function(e){return l.emit("complete",e)}),n=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return l.emit("dragstart",e)},dragenter:function(e){return n(e),l.emit("dragenter",e)},dragover:function(e){return n(e),l.emit("dragover",e)},dragleave:function(e){return l.emit("dragleave",e)},drop:function(e){return n(e),l.drop(e)},dragend:function(e){return l.emit("dragend",e)}}}],this.clickableElements.forEach(function(e){return l.listeners.push({element:e,events:{click:function(n){return e!==l.element||n.target===l.element||t.elementInside(n.target,l.element.querySelector(".dz-message"))?l.hiddenFileInput.click():void 0}}})}),this.enable(),this.options.init.call(this)},t.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone},t.prototype.updateTotalUploadProgress=function(){var e,t,n,i,r,o,s,a;if(i=0,n=0,e=this.getAcceptedFiles(),e.length){for(a=this.getAcceptedFiles(),o=0,s=a.length;s>o;o++)t=a[o],i+=t.upload.bytesSent,n+=t.upload.total;r=100*i/n}else r=100;return this.emit("totaluploadprogress",r,n,i)},t.prototype.getFallbackForm=function(){var e,n,i,r;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><button type="submit">Upload!</button></div>',n=t.createElement(i),"FORM"!==this.element.tagName?(r=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:n)
},t.prototype.getExistingFallback=function(){var e,t,n,i,r,o;for(t=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},o=["div","form"],i=0,r=o.length;r>i;i++)if(n=o[i],e=t(this.element.getElementsByTagName(n)))return e},t.prototype.setupEventListeners=function(){var e,t,n,i,r,o,s;for(o=this.listeners,s=[],i=0,r=o.length;r>i;i++)e=o[i],s.push(function(){var i,r;i=e.events,r=[];for(t in i)n=i[t],r.push(e.element.addEventListener(t,n,!1));return r}());return s},t.prototype.removeEventListeners=function(){var e,t,n,i,r,o,s;for(o=this.listeners,s=[],i=0,r=o.length;r>i;i++)e=o[i],s.push(function(){var i,r;i=e.events,r=[];for(t in i)n=i[t],r.push(e.element.removeEventListener(t,n,!1));return r}());return s},t.prototype.disable=function(){var e,t,n,i,r;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(this.cancelUpload(e));return r},t.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},t.prototype.filesize=function(e){var t;return e>=1e11?(e/=1e11,t="TB"):e>=1e8?(e/=1e8,t="GB"):e>=1e5?(e/=1e5,t="MB"):e>=100?(e/=100,t="KB"):(e=10*e,t="b"),"<strong>"+Math.round(e)/10+"</strong> "+t},t.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?this.element.classList.add("dz-max-files-reached"):this.element.classList.remove("dz-max-files-reached")},t.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("selectedfiles",t),t.length&&(n=e.dataTransfer.items,n&&n.length&&(null!=n[0].webkitGetAsEntry||null!=n[0].getAsEntry)?this.handleItems(n):this.handleFiles(t)))},t.prototype.handleFiles=function(e){var t,n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(this.addFile(t));return r},t.prototype.handleItems=function(e){var t,n,i,r;for(i=0,r=e.length;r>i;i++)n=e[i],null!=n.webkitGetAsEntry?(t=n.webkitGetAsEntry(),t.isFile?this.addFile(n.getAsFile()):t.isDirectory&&this.addDirectory(t,t.name)):this.addFile(n.getAsFile())},t.prototype.accept=function(e,n){return e.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,n):n(this.options.dictInvalidFileType)},t.prototype.addFile=function(e){var n=this;return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024&&this.createThumbnail(e),this.accept(e,function(t){return t?(e.accepted=!1,n._errorProcessing([e],t)):n.enqueueFile(e)})},t.prototype.enqueueFiles=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=e[n],this.enqueueFile(t);return null},t.prototype.enqueueFile=function(e){var n=this;if(e.accepted=!0,e.status!==t.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=t.QUEUED,this.options.autoProcessQueue?setTimeout(function(){return n.processQueue()},1):void 0},t.prototype.addDirectory=function(e,t){var n,i,r=this;return n=e.createReader(),i=function(n){var i,o;for(i=0,o=n.length;o>i;i++)e=n[i],e.isFile?e.file(function(e){return r.options.ignoreHiddenFiles&&"."===e.name.substring(0,1)?void 0:(e.fullPath=""+t+"/"+e.name,r.addFile(e))}):e.isDirectory&&r.addDirectory(e,""+t+"/"+e.name)},n.readEntries(i,function(e){return"undefined"!=typeof console&&null!==console?"function"==typeof console.log?console.log(e):void 0:void 0})},t.prototype.removeFile=function(e){return e.status===t.UPLOADING&&this.cancelUpload(e),this.files=a(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},t.prototype.removeAllFiles=function(e){var n,i,r,o;for(null==e&&(e=!1),o=this.files.slice(),i=0,r=o.length;r>i;i++)n=o[i],(n.status!==t.UPLOADING||e)&&this.removeFile(n);return null},t.prototype.createThumbnail=function(e){var t,n=this;return t=new FileReader,t.onload=function(){var i;return i=new Image,i.onload=function(){var t,r,o,s,a,l,c,u;return e.width=i.width,e.height=i.height,o=n.options.resize.call(n,e),null==o.trgWidth&&(o.trgWidth=n.options.thumbnailWidth),null==o.trgHeight&&(o.trgHeight=n.options.thumbnailHeight),t=document.createElement("canvas"),r=t.getContext("2d"),t.width=o.trgWidth,t.height=o.trgHeight,r.drawImage(i,null!=(a=o.srcX)?a:0,null!=(l=o.srcY)?l:0,o.srcWidth,o.srcHeight,null!=(c=o.trgX)?c:0,null!=(u=o.trgY)?u:0,o.trgWidth,o.trgHeight),s=t.toDataURL("image/png"),n.emit("thumbnail",e,s)},i.src=t.result},t.readAsDataURL(e)},t.prototype.processQueue=function(){var e,t,n,i;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-n));for(;t>e;){if(!i.length)return;this.processFile(i.shift()),e++}}},t.prototype.processFile=function(e){return this.processFiles([e])},t.prototype.processFiles=function(e){var n,i,r;for(i=0,r=e.length;r>i;i++)n=e[i],n.processing=!0,n.status=t.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},t.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;i>n;n++)t=r[n],t.xhr===e&&o.push(t);return o}.call(this)},t.prototype.cancelUpload=function(e){var n,i,r,o,s,a,l;if(e.status===t.UPLOADING){for(i=this._getFilesWithXhr(e.xhr),r=0,s=i.length;s>r;r++)n=i[r],n.status=t.CANCELED;for(e.xhr.abort(),o=0,a=i.length;a>o;o++)n=i[o],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((l=e.status)===t.ADDED||l===t.QUEUED)&&(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},t.prototype.uploadFile=function(e){return this.uploadFiles([e])},t.prototype.uploadFiles=function(e){var i,r,o,s,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,C,k,x,S,T,E,D,N,A=this;for(v=new XMLHttpRequest,y=0,C=e.length;C>y;y++)i=e[y],i.xhr=v;v.open(this.options.method,this.options.url,!0),v.withCredentials=!!this.options.withCredentials,p=null,o=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(A._errorProcessing(e,p||A.options.dictResponseError.replace("{{statusCode}}",v.status),v));return r},m=function(t){var n,r,o,s,a,l,c,u,d;if(null!=t)for(r=100*t.loaded/t.total,o=0,l=e.length;l>o;o++)i=e[o],i.upload={progress:r,total:t.total,bytesSent:t.loaded};else{for(n=!0,r=100,s=0,c=e.length;c>s;s++)i=e[s],(100!==i.upload.progress||i.upload.bytesSent!==i.upload.total)&&(n=!1),i.upload.progress=r,i.upload.bytesSent=i.upload.total;if(n)return}for(d=[],a=0,u=e.length;u>a;a++)i=e[a],d.push(A.emit("uploadprogress",i,r,i.upload.bytesSent));return d},v.onload=function(n){var i;if(e[0].status!==t.CANCELED&&4===v.readyState){if(p=v.responseText,v.getResponseHeader("content-type")&&~v.getResponseHeader("content-type").indexOf("application/json"))try{p=JSON.parse(p)}catch(r){n=r,p="Invalid JSON response from server."}return m(),200<=(i=v.status)&&300>i?A._finished(e,p,n):o()}},v.onerror=function(){return e[0].status!==t.CANCELED?o():void 0},f=null!=(T=v.upload)?T:v,f.onprogress=m,l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(l,this.options.headers);for(s in l)a=l[s],v.setRequestHeader(s,a);if(r=new FormData,this.options.params){E=this.options.params;for(h in E)g=E[h],r.append(h,g)}for(b=0,k=e.length;k>b;b++)i=e[b],this.emit("sending",i,v,r);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,v,r),"FORM"===this.element.tagName)for(D=this.element.querySelectorAll("input, textarea, select, button"),w=0,x=D.length;x>w;w++)c=D[w],u=c.getAttribute("name"),d=c.getAttribute("type"),(!d||"checkbox"!==(N=d.toLowerCase())&&"radio"!==N||c.checked)&&r.append(u,c.value);for(_=0,S=e.length;S>_;_++)i=e[_],r.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),i,i.name);return v.send(r)},t.prototype._finished=function(e,n,i){var r,o,s;for(o=0,s=e.length;s>o;o++)r=e[o],r.status=t.SUCCESS,this.emit("success",r,n,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("successmultiple",e,n,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},t.prototype._errorProcessing=function(e,n,i){var r,o,s;for(o=0,s=e.length;s>o;o++)r=e[o],r.status=t.ERROR,this.emit("error",r,n,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("errormultiple",e,n,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},t}(i),e.version="3.7.1",e.options={},e.optionsForElement=function(t){return t.id?e.options[r(t.id)]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!1,e.discover=function(){var t,n,i,r,o,s;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],t=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;r>n;n++)t=e[n],/(^| )dropzone($| )/.test(t.className)?o.push(i.push(t)):o.push(void 0);return o},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),s=[],r=0,o=i.length;o>r;r++)n=i[r],e.optionsForElement(n)!==!1?s.push(new e(n)):s.push(void 0);return s},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,i,r,o;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=e.blacklistedBrowsers,i=0,r=o.length;r>i;i++)n=o[i],n.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},a=function(e,t){var n,i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],n!==t&&o.push(n);return o},r=function(e){return e.replace(/[\-_](\w)/g,function(e){return e[1].toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(e,t){var n,i,r,o,s,a,l,c;if(e instanceof Array){r=[];try{for(o=0,a=e.length;a>o;o++)i=e[o],r.push(this.getElement(i,t))}catch(u){n=u,r=null}}else if("string"==typeof e)for(r=[],c=document.querySelectorAll(e),s=0,l=c.length;l>s;s++)i=c[s],r.push(i);else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},e.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},e.isValidFile=function(e,t){var n,i,r,o,s;if(!t)return!0;for(t=t.split(","),i=e.type,n=i.replace(/\/.*$/,""),o=0,s=t.length;s>o;o++)if(r=t[o],r=r.trim(),"."===r.charAt(0)){if(-1!==e.name.indexOf(r,e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof n&&null!==n?n.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",o=function(e,t){var n,i,r,o,s,a,l,c,u;if(r=!1,u=!0,i=e.document,c=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",o=function(n){return"readystatechange"!==n.type||"complete"===i.readyState?(("load"===n.type?e:i)[l](a+n.type,o,!1),!r&&(r=!0)?t.call(e,n.type||n):void 0):void 0},s=function(){var e;try{c.doScroll("left")}catch(t){return e=t,setTimeout(s,50),void 0}return o("poll")},"complete"!==i.readyState){if(i.createEventObject&&c.doScroll){try{u=!e.frameElement}catch(d){}u&&s()}return i[n](a+"DOMContentLoaded",o,!1),i[n](a+"readystatechange",o,!1),e[n](a+"load",o,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},o(window,e._autoDiscoverFunction)}).call(this)}),e.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),e.alias("component-emitter/index.js","emitter/index.js"),"object"==typeof exports?module.exports=e("dropzone"):"function"==typeof define&&define.amd?define(function(){return e("dropzone")}):this.Dropzone=e("dropzone")}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.Dropzonejs={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._;(function(){function t(){var e=this,t={};e.emit=function(e){var n=Array.prototype.slice.call(arguments,1);if(t[e])for(var i=0;i<t[e].length;i++){var r=t[e][i];r.apply(this,n)}},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){e.on(t,function i(){n.apply(this,arguments),e.removeListener(t,i)})},e.removeListener=function(e,n){if(t[e]){var i=t[e].indexOf(n);t[e].splice(i,1)}},e.removeAllListeners=function(e){t[e]=void 0}}e=t}).call(this),function(){t.Stream=function(n,i){e.call(this);var r,o,s=this,a="stream-"+n,l=new t.Collection(a),c=!1,u=[];s._emit=s.emit,l.find({}).observe({added:function(e){if("subscriptionId"==e.type)o=e._id,c=!0,u.forEach(function(e){s.emit.apply(s,e)}),u=[];else{var t={};t.subscriptionId=e.subscriptionId,t.userId=e.userId,s._emit.apply(t,e.args)}}}),r=t.subscribe(a,i),s.emit=function(){c?t.call(a,o,arguments):u.push(arguments)},s.close=function(){r.stop()}},n.extend(t.Stream.prototype,e.prototype)}.call(this),"undefined"==typeof Package&&(Package={}),Package.streams={}}(),function(){{var e=(Package.meteor.Meteor,Package.templating.Template);Package.spark.Spark}(function(){!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var r=["opacity",t,~~(100*e),n,i].join("-"),o=.01+n/i*100,s=Math.max(1-(1-e)/t*(100-o),e),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[r]||(h.insertRule("@"+l+"keyframes "+r+"{0%{opacity:"+s+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+s+"}}",h.cssRules.length),d[r]=1),r}function i(e,t){var n,i,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<u.length;i++)if(n=u[i]+t,void 0!==r[n])return n}function r(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function s(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function a(e){return"undefined"==typeof this?new a(e):(this.opts=o(e||{},a.defaults,f),void 0)}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}h.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,i){function o(){return r(n("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function s(e,s,a){t(d,t(r(o(),{rotation:360/i.lines*e+"deg",left:~~s}),t(r(n("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),n("fill",{color:i.color,opacity:i.opacity}),n("stroke",{opacity:0}))))}var a,l=i.length+i.width,c=2*l,u=2*-(i.width+i.length)+"px",d=r(o(),{position:"absolute",top:u,left:u});if(i.shadow)for(a=1;a<=i.lines;a++)s(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=i.lines;a++)s(a);return t(e,d)},a.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0,r&&t+i<r.childNodes.length&&(r=r.childNodes[t+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}}var c,u=["webkit","Moz","ms","O"],d={},h=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},o(a.prototype,{spin:function(t){this.stop();var n,i,o=this,a=o.opts,l=o.el=r(e(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),u=a.radius+a.length+a.width;if(t&&(t.insertBefore(l,t.firstChild||null),i=s(t),n=s(l),r(l,{left:("auto"==a.left?i.x-n.x+(t.offsetWidth>>1):parseInt(a.left,10)+u)+"px",top:("auto"==a.top?i.y-n.y+(t.offsetHeight>>1):parseInt(a.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),o.lines(l,o.opts),!c){var d,h=0,f=(a.lines-1)*(1-a.direction)/2,p=a.fps,m=p/a.speed,g=(1-a.opacity)/(m*a.trail/100),v=m/a.lines;!function y(){h++;for(var e=0;e<a.lines;e++)d=Math.max(1-(h+(a.lines-e)*v)%m*g,a.opacity),o.opacity(l,e*a.direction+f,d,a);o.timeout=o.el&&setTimeout(y,~~(1e3/p))}()}return o},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,o){function s(t,n){return r(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var a,l=0,u=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)a=r(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:c&&n(o.opacity,o.trail,u+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(a,r(s("#000","0 0 4px #000"),{top:"2px"})),t(i,t(a,s(o.color,"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var p=r(e("group"),{behavior:"url(#default#VML)"});return!i(p,"transform")&&p.adj?l():c=i(p,"animation"),a})}).call(this),function(){e.__define__("spinner",Package.handlebars.Handlebars.json_ast_to_func(['<div id="spinner"></div>']))}.call(this),function(){e.spinner.rendered=function(){{var e={lines:13,length:8,width:3,radius:12,corners:1,rotate:0,direction:1,color:"#000",speed:1.2,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},t=document.getElementById("spinner");new Spinner(e).spin(t)}}}.call(this),"undefined"==typeof Package&&(Package={}),Package.spin={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=Package.ejson.EJSON,r=(Package.minimongo.LocalCollection,Package.deps.Deps);(function(){function i(){var e;if(t.isClient&&r.nonreactive(function(){e=t.userId&&t.userId()}),t.isServer){try{e=t.userId&&t.userId()}catch(n){}e||(e=o)}return e}var o,s={},a=t.Collection;e={},e.extendCollectionInstance=function(e){n.each(["before","after"],function(i){n.each(s,function(n,r){t._ensure(e,i,r),t._ensure(e,"_aspects",r),e._aspects[r][i]=[],e[i][r]=function(t){var n=e._aspects[r][i].push(t);return{replace:function(t){e._aspects[r][i].splice(n-1,1,t)},remove:function(){e._aspects[r][i].splice(n-1,1)}}}})}),n.each(s,function(r,o){var s=t.isClient?e[o]:e._collection[o];(t.isClient?e:e._collection)[o]=function(){return r.call(this,i(),s,e._aspects[o]||{},function(t){return n.isFunction(e._transform)?function(n){return e._transform(n||t)}:function(e){return e||t}},n.toArray(arguments))}})},e.defineAdvice=function(e,t){s[e]=t},e.getDocs=function(e,t,n){var i={transform:null,reactive:!1};return n&&(n.multi||(i.limit=1)),e.find(t,i)},t.Collection=function(){var t=a.apply(this,arguments);return e.extendCollectionInstance(this),t},t.Collection.prototype=Object.create(a.prototype);for(var l in a)a.hasOwnProperty(l)&&(t.Collection[l]=a[l]);if(t.isServer){var c=t.publish;t.publish=function(e,t){return c.call(this,e,function(){o=this&&this.userId;var e=t.apply(this,arguments);return o=void 0,e})}}}).call(this),function(){e.defineAdvice("insert",function(e,t,r,o,s){function a(t,a){var l=s[0];t&&(l=i.clone(s[0]),l._id=t);var c=n.extend({transform:o(l),_id:t,err:a},d);return n.each(r.after,function(t){t.call(c,e,l)}),t}var l,c,u=this,d={context:u,_super:t,args:s},h=n.isFunction(n.last(s));return n.each(r.before,function(t){var i=t.call(n.extend({transform:o(s[0])},d),e,s[0]);i===!1&&(l=!0)}),l?!1:h?t.call(u,s[0],function(e,t){return a(t&&t[0]&&t[0]._id||t,e),s[1].apply(this,arguments)}):(c=t.apply(u,s),a(c&&c[0]&&c[0]._id||c))})}.call(this),function(){e.defineAdvice("update",function(r,o,s,a,l){function c(i,o){var c=t(l[1]),u=e.getDocs.call(f,v,l[0],l[2]).fetch();n.each(s.after,function(e){n.each(u,function(t){e.call(n.extend({transform:a(t),previous:g.docs[t._id],affected:i,err:o},p),r,t,c,g.mutator,g.options)})})}var u,d,h,f=this,p={context:f,_super:o,args:l},m=n.isFunction(n.last(l)),g={},v=n.has(f,"_collection")?f._collection:f;if(n.isFunction(l[2])&&(l[3]=l[2],l[2]={}),d=t(l[1]),u=e.getDocs.call(f,v,l[0],l[2]).fetch(),s.after&&(g.mutator=i.clone(l[1]),g.options=i.clone(l[2]),g.docs={},n.each(u,function(e){g.docs[e._id]=i.clone(e)})),n.each(s.before,function(e){n.each(u,function(t){var i=e.call(n.extend({transform:a(t)},p),r,t,d,l[1],l[2]);i===!1&&(h=!0)})}),h)return!1;if(m)return o.call(f,l[0],l[1],l[2],function(e,t){return c(t,e),l[3].apply(this,arguments)});var y=o.apply(f,l);return c(y),y});var t=function(e){var t=[];return n.each(e,function(e){n.each(n.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),n.contains(t,e)||t.push(e)})}),t},t=function(e){var t=[];return n.each(e,function(e,i){n.contains(["$set","$unset","$inc","$push","$pull","$pop","$rename","$pullAll","$addToSet","$bit"],i)?n.each(n.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),n.contains(t,e)||t.push(e)}):t.push(i)}),t}}.call(this),function(){e.defineAdvice("remove",function(t,r,o,s,a){function l(e){n.each(o.after,function(i){n.each(p,function(r){i.call(n.extend({transform:s(r),err:e},h),t,r)})})}var c,u,d=this,h={context:d,_super:r,args:a},f=n.isFunction(n.last(a)),p=[],m=n.has(d,"_collection")?d._collection:d,c=e.getDocs.call(d,m,a[0]).fetch();if(o.after&&n.each(c,function(e){p.push(i.clone(e))}),n.each(o.before,function(e){n.each(c,function(i){var r=e.call(n.extend({transform:s(i)},h),t,i);r===!1&&(u=!0)})}),u)return!1;if(f)return r.call(d,a[0],function(e){return l(e),a[1].apply(this,arguments)});var g=r.apply(d,a);return l(),g})}.call(this),function(){e.defineAdvice("find",function(e,t,i,r,o){function s(t){n.each(i.after,function(n){n.call(u,e,o[0],o[1],t)})}var a,l,c=this,u={context:c,_super:t,args:o};return n.each(i.before,function(t){var n=t.call(u,e,o[0],o[1]);n===!1&&(l=!0)}),l?!1:(a=t.apply(c,o),s(a),a)})}.call(this),function(){e.defineAdvice("findOne",function(e,t,i,r,o){function s(t){n.each(i.after,function(n){n.call(u,e,o[0],o[1],t)})}var a,l,c=this,u={context:c,_super:t,args:o};return n.each(i.before,function(t){var n=t.call(u,e,o[0],o[1]);n===!1&&(l=!0)}),l?!1:(a=t.apply(c,o),s(a),a)})}.call(this),function(){t.users&&e.extendCollectionInstance(t.users)}.call(this),"undefined"==typeof Package&&(Package={}),Package["collection-hooks"]={CollectionHooks:e}}(),function(){var e,t,n,i,r,o,s=Package.meteor.Meteor,a=Package.deps.Deps,l=Package.underscore._,c=(Package.check.check,Package.check.Match);(function(){!function(){"use strict";function e(e){this.s=null!==e&&void 0!==e?"string"==typeof e?e:e.toString():e,this.orig=e,null!==e&&void 0!==e?this.__defineGetter__?this.__defineGetter__("length",function(){return this.s.length}):this.length=e.length:this.length=-1}function t(){for(var e in u)!function(e){var t=u[e];c.hasOwnProperty(e)||(d.push(e),c[e]=function(){return String.prototype.s=this,t.apply(this,arguments)})}(e)}function n(){for(var e=0;e<d.length;++e)delete String.prototype[d[e]];d.length=0}function i(){for(var e=r(),t={},n=0;n<e.length;++n){var i=e[n],o=c[i];try{var s=typeof o.apply("teststring",[]);t[i]=s}catch(a){}}return t}function r(){var e=[];if(Object.getOwnPropertyNames)return e=Object.getOwnPropertyNames(c),e.splice(e.indexOf("valueOf"),1),e.splice(e.indexOf("toString"),1),e;var t={};for(var n in String.prototype)t[n]=n;for(var n in Object.prototype)delete t[n];for(var n in t)e.push(n);return e}function o(t){return new e(t)}function s(e,t){var n,i=[];for(n=0;n<e.length;n++)i.push(e[n]),t&&t.call(e,e[n],n);return i}var a="1.5.0",l={},c=String.prototype,u=e.prototype={between:function(t,n){var i=this.s,r=i.indexOf(t),o=i.indexOf(n),s=r+t.length;return new e(o>r?i.slice(s,o):"")},camelize:function(){var t=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""});return new e(t)},capitalize:function(){return new e(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(e){return this.s.charAt(e)},chompLeft:function(t){var n=this.s;return 0===n.indexOf(t)?(n=n.slice(t.length),new e(n)):this},chompRight:function(t){if(this.endsWith(t)){var n=this.s;return n=n.slice(0,n.length-t.length),new e(n)}return this},collapseWhitespace:function(){var t=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new e(t)},contains:function(e){return this.s.indexOf(e)>=0},count:function(e){for(var t=0,n=this.s.indexOf(e);n>=0;)t+=1,n=this.s.indexOf(e,n+1);return t},dasherize:function(){var t=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new e(t)},decodeHtmlEntities:function(){var t=this.s;return t=t.replace(/&#(\d+);?/g,function(e,t){return String.fromCharCode(t)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/&([^;\W]+;?)/g,function(e,t){var n=t.replace(/;$/,""),i=l[t]||t.match(/;$/)&&l[n];return"number"==typeof i?String.fromCharCode(i):"string"==typeof i?i:e}),new e(t)},endsWith:function(e){var t=this.s.length-e.length;return t>=0&&this.s.indexOf(e,t)===t},escapeHTML:function(){return new e(this.s.replace(/[&<>"']/g,function(e){return"&"+m[e]+";"}))},ensureLeft:function(t){var n=this.s;return 0===n.indexOf(t)?this:new e(t+n)},ensureRight:function(t){var n=this.s;return this.endsWith(t)?this:new e(n+t)},humanize:function(){if(null===this.s||void 0===this.s)return new e("");var t=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new e(t)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(t){if(t>=0){var n=this.s.substr(0,t);return new e(n)}return this.right(-t)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(t,n){if(n=n||" ",this.s.length>=t)return new e(this.s);t-=this.s.length;var i=Array(Math.ceil(t/2)+1).join(n),r=Array(Math.floor(t/2)+1).join(n);return new e(i+this.s+r)},padLeft:function(t,n){return n=n||" ",this.s.length>=t?new e(this.s):new e(Array(t-this.s.length+1).join(n)+this.s)},padRight:function(t,n){return n=n||" ",this.s.length>=t?new e(this.s):new e(this.s+Array(t-this.s.length+1).join(n))},parseCSV:function(e,t,n,i){e=e||",",n=n||"\\","undefined"==typeof t&&(t='"');var r=0,o=[],s=[],a=this.s.length,l=!1,c=this,u=function(e){return c.s.charAt(e)};if("undefined"!=typeof i)var d=[];for(t||(l=!0);a>r;){var h=u(r);switch(h){case n:if(l&&(n!==t||u(r+1)===t)){r+=1,o.push(u(r));break}if(n!==t)break;case t:l=!l;break;case e:l&&t?o.push(h):(s.push(o.join("")),o.length=0);break;case i:l?o.push(h):d&&(s.push(o.join("")),d.push(s),s=[],o.length=0);break;default:l&&o.push(h)}r+=1}return s.push(o.join("")),d?(d.push(s),d):s},replaceAll:function(t,n){var i=this.s.split(t).join(n);return new e(i)},right:function(t){if(t>=0){var n=this.s.substr(this.s.length-t,t);return new e(n)}return this.left(-t)},slugify:function(){var t=new e(this.s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===t.charAt(0)&&(t=t.substr(1)),new e(t)},startsWith:function(e){return 0===this.s.lastIndexOf(e,0)},stripPunctuation:function(){return new e(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var t=this.s,n=arguments.length>0?arguments:[""];return s(n,function(e){t=t.replace(RegExp("</?"+e+"[^<>]*>","gi"),"")}),new e(t)},template:function(t,n,i){var r=this.s,n=n||o.TMPL_OPEN,i=i||o.TMPL_CLOSE,s=new RegExp(n+"(.+?)"+i,"g"),a=r.match(s)||[];return a.forEach(function(e){var o=e.substring(n.length,e.length-i.length);t[o]&&(r=r.replace(e,t[o]))}),new e(r)},times:function(t){return new e(new Array(t+1).join(this.s))},toBoolean:function(){if("string"==typeof this.orig){var e=this.s.toLowerCase();return"true"===e||"yes"===e||"on"===e}return this.orig===!0||1===this.orig},toFloat:function(e){var t=parseFloat(this.s);return e?parseFloat(t.toFixed(e)):t},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var t;return t="undefined"==typeof c.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new e(t)},trimLeft:function(){var t;return t=c.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new e(t)},trimRight:function(){var t;return t=c.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new e(t)},truncate:function(t,n){var i=this.s;if(t=~~t,n=n||"...",i.length<=t)return new e(i);var r=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},o=i.slice(0,t+1).replace(/.(?=\W*\w*$)/g,r);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):new e(o.slice(0,o.length-1)).trimRight().s,(o+n).length>i.length?new e(i):new e(i.slice(0,o.length)+n)},toCSV:function(){function t(e){return null!==e&&""!==e}var n=",",i='"',r="\\",o=!0,s=!1,a=[];if("object"==typeof arguments[0]?(n=arguments[0].delimiter||n,n=arguments[0].separator||n,i=arguments[0].qualifier||i,o=!!arguments[0].encloseNumbers,r=arguments[0].escape||r,s=!!arguments[0].keys):"string"==typeof arguments[0]&&(n=arguments[0]),"string"==typeof arguments[1]&&(i=arguments[1]),null===arguments[1]&&(i=null),this.orig instanceof Array)a=this.orig;else for(var l in this.orig)this.orig.hasOwnProperty(l)&&(s?a.push(l):a.push(this.orig[l]));for(var c=r+i,u=[],d=0;d<a.length;++d){var h=t(i);if("number"==typeof a[d]&&(h&=o),h&&u.push(i),null!==a[d]&&void 0!==a[d]){var f=new e(a[d]).replaceAll(i,c).s;u.push(f)}else u.push("");h&&u.push(i),n&&u.push(n)}return u.length=u.length-1,new e(u.join(""))},toString:function(){return this.s},underscore:function(){var t=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new e(this.s.charAt(0)).isUpper()&&(t="_"+t),new e(t)},unescapeHTML:function(){return new e(this.s.replace(/\&([^;]+);/g,function(e,t){var n;
return t in p?p[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))},valueOf:function(){return this.s.valueOf()}},d=[],h=i();for(var f in h)!function(t){var n=c[t];"function"==typeof n&&(u[t]||(u[t]="string"===h[t]?function(){return new e(n.apply(this,arguments))}:n))}(f);u.repeat=u.times,u.include=u.contains,u.toInteger=u.toInt,u.toBool=u.toBoolean,u.decodeHTMLEntities=u.decodeHtmlEntities,o.extendPrototype=t,o.restorePrototype=n,o.VERSION=a,o.TMPL_OPEN="{{",o.TMPL_CLOSE="}}",o.ENTITIES=l,"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=o:"function"==typeof define&&define.amd?define([],function(){return o}):window.S=o;var p={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},m={};for(var g in p)m[p[g]]=g;l={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this)}).call(this),function(){n=function(t){function s(e,t,n,c,u){!c&&n&&"$"===n.substring(0,1)&&(c=n,n=null),n&&(u||"$push"!==c&&"$addToSet"!==c&&"$pull"!==c&&"$pop"!==c||(i(e)&&"$each"in e?(e=e.$each,t+="[$each]"):n+=".0",u=!0),!t||i(e)&&!l.isEmpty(e)||l.isArray(e)&&!l.isEmpty(e)||(a._affectedKeys[t]=n,a._genericAffectedKeys[t]=r(n))),l.isArray(e)?l.each(e,function(e,i){s(e,t?t+"["+i+"]":i,n+"."+i,c,u)}):i(e)&&l.each(e,function(e,i){"$slice"!==i&&s(e,t?t+"["+i+"]":i,o(n,i),c,u)})}var a=this;a._obj=t,a._affectedKeys={},a._genericAffectedKeys={},s(t),a.forEachNode=function(e){if("function"!=typeof e)throw new Error("filter requires a loop function");l.each(a._affectedKeys,function(t,n){e.call({updateValue:function(e){a.setValueForPosition(n,e)},remove:function(){a.removeValueForPosition(n)}},a.getValueForPosition(n),n,t,a._genericAffectedKeys[n])})},a.getValueForPosition=function(t){for(var n,r=t.split("["),o=a._obj,s=0,l=r.length;l>s;s++)if(n=r[s],"]"===n.slice(-1)&&(n=n.slice(0,-1)),o=o[n],!e(o)&&!i(o)&&l-1>s)return;return o},a.setValueForPosition=function(t,n){for(var r,o,s=t.split("["),l=a._obj,c=0,u=s.length;u>c;c++)if(o=s[c],"]"===o.slice(-1)&&(o=o.slice(0,-1)),c===u-1)l[o]=n,void 0===n&&delete l[o];else if(void 0===l[o]&&(r=s[c+1],r=parseInt(r,10),l[o]=isNaN(r)?{}:[]),l=l[o],!e(l)&&!i(l)&&u-1>c)return},a.removeValueForPosition=function(e){for(var t in a._genericAffectedKeys)a._genericAffectedKeys.hasOwnProperty(t)&&e.slice(0,t.length)===t&&(delete a._genericAffectedKeys[t],delete a._affectedKeys[t]);a.rebuildObject()},a.getArrayInfoForKey=function(t){t+=".$";var n,i,r;for(var o in a._genericAffectedKeys)if(a._genericAffectedKeys.hasOwnProperty(o)&&a._genericAffectedKeys[o]===t&&(n=o.slice(0,o.lastIndexOf("[")),i=o.slice(0,o.indexOf("[")),r=a.getValueForPosition(n),e(r)))return{value:r,operator:"$"===i.substring(0,1)?i:null}},a.getValueForKey=function(e){for(var t in a._affectedKeys)if(a._affectedKeys.hasOwnProperty(t)&&a._affectedKeys[t]===e)return a.getValueForPosition(t)},a.getInfoForKey=function(e){for(var t in a._affectedKeys)if(a._affectedKeys.hasOwnProperty(t)&&a._affectedKeys[t]===e){var n=t.slice(0,t.indexOf("["));return{value:a.getValueForPosition(t),operator:"$"===n.substring(0,1)?n:null}}},a.addKey=function(e,t,n){var i,o;if("string"==typeof n)i=n+"["+e+"]";else{o=e.split(".");for(var s=0,l=o.length;l>s;s++)0===s?i=o[s]:i+="["+o[s]+"]"}a.setValueForPosition(i,t),a._affectedKeys[i]=e,a._genericAffectedKeys[i]=r(e)},a.removeGenericKey=function(e){for(var t in a._genericAffectedKeys)a._genericAffectedKeys.hasOwnProperty(t)&&a._genericAffectedKeys[t]===e&&a.removeValueForPosition(t)},a.removeKey=function(e){for(var t in a._affectedKeys)a._affectedKeys.hasOwnProperty(t)&&a._affectedKeys[t]===e&&a.removeValueForPosition(t)},a.removeKeys=function(e){for(var t=0,n=e.length;n>t;t++)a.removeKey(e[t])},a.filterGenericKeys=function(e){var t,n=[];for(var i in a._genericAffectedKeys)a._genericAffectedKeys.hasOwnProperty(i)&&(t=a._genericAffectedKeys[i],l.contains(n,t)||(n.push(t),t&&!e(t)&&a.removeGenericKey(t)))},a.setValueForKey=function(e,t){for(var n in a._affectedKeys)a._affectedKeys.hasOwnProperty(n)&&a._affectedKeys[n]===e&&a.setValueForPosition(n,t)},a.setValueForGenericKey=function(e,t){for(var n in a._genericAffectedKeys)a._genericAffectedKeys.hasOwnProperty(n)&&a._genericAffectedKeys[n]===e&&a.setValueForPosition(n,t)},a.getObject=function(){return a._obj},a.rebuildObject=function(){var e={};l.each(a._affectedKeys,function(t,i){n.expandKey(a.getValueForPosition(i),i,e)}),a._obj=e},a.getFlatObject=function(){var e={};return l.each(a._affectedKeys,function(t,n){"string"==typeof t&&(e[t]=a.getValueForPosition(n))}),e},a.affectsKey=function(e){for(var t in a._affectedKeys)if(a._affectedKeys.hasOwnProperty(t)&&a._affectedKeys[t]===e)return!0;return!1},a.affectsGenericKey=function(e){for(var t in a._genericAffectedKeys)if(a._genericAffectedKeys.hasOwnProperty(t)&&a._genericAffectedKeys[t]===e)return!0;return!1},a.affectsGenericKeyImplicit=function(e){for(var t in a._genericAffectedKeys)if(a._genericAffectedKeys.hasOwnProperty(t)){var n=a._genericAffectedKeys[t];if(n===e)return!0;if(n.substring(0,e.length+1)===e+".")return!0;var i=e.slice(-2);if(".$"===i&&e.slice(0,-2)===n)return!0}return!1}},n.expandKey=function(e,t,n){for(var i,r,o=t.split("["),s=n,a=0,l=o.length;l>a;a++)r=o[a],"]"===r.slice(-1)&&(r=r.slice(0,-1)),a===l-1?(s[r]=e,void 0===e&&delete s[r]):(i=o[a+1],i=parseInt(i,10),s[r]||(s[r]=isNaN(i)?{}:[])),s=s[r]};var e=Array.isArray||function(e){return"[object Array]"===e.toString()},t=function(e){return e===Object(e)};"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype});var i=function(e){return t(e)&&Object.getPrototypeOf(e)===Object.prototype},r=function(e){return"string"!=typeof e?null:e.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+/g,".$")},o=function(e,t){return"$each"===t?e:e?e+"."+t:t}}.call(this),function(){s.isServer&&(i=Npm.require("string")),s.isClient&&(i=window.S),t={Email:/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/,Url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i};var a={required:"[label] is required",minString:"[label] must be at least [min] characters",maxString:"[label] cannot exceed [max] characters",minNumber:"[label] must be at least [min]",maxNumber:"[label] cannot exceed [max]",minDate:"[label] must be on or before [min]",maxDate:"[label] cannot be after [max]",minCount:"You must specify at least [minCount] values",maxCount:"You cannot specify more than [maxCount] values",noDecimal:"[label] must be an integer",notAllowed:"[value] is not an allowed value",expectedString:"[label] must be a string",expectedNumber:"[label] must be a number",expectedBoolean:"[label] must be a boolean",expectedArray:"[label] must be an array",expectedObject:"[label] must be an object",expectedConstructor:"[label] must be a [type]",regEx:"[label] failed regular expression validation",keyNotInSchema:"[label] is not allowed by the schema"},u={};e=function(e,t){var n,i=this,r=[],o=[],s=[],d=[],h=[];t=t||{},e=v(m(p(e))),i._schema=e||{},i._schemaKeys=[],i._validators=[],i._messages=a;var f={type:c.Any,label:c.Optional(String),optional:c.Optional(Boolean),min:c.Optional(c.OneOf(Number,Date,Function)),max:c.Optional(c.OneOf(Number,Date,Function)),minCount:c.Optional(Number),maxCount:c.Optional(Number),allowedValues:c.Optional([c.Any]),valueIsAllowed:c.Optional(Function),decimal:c.Optional(Boolean),regEx:c.Optional(c.OneOf(RegExp,[RegExp]))};"object"==typeof t.additionalKeyPatterns&&l.extend(f,t.additionalKeyPatterns),l.extend(f,u),l.each(e,function(e,t){if(!c.test(e,f))throw new Error("Invalid definition for "+t+" field.");n=t.split(".")[0],i._schemaKeys.push(t),l.contains(o,n)||(o.push(n),e.optional||s.push(n),e.valueIsAllowed&&h.push(n)),e.optional||r.push(t),e.valueIsAllowed&&d.push(t)}),i._requiredSchemaKeys=r,i._firstLevelSchemaKeys=o,i._firstLevelRequiredSchemaKeys=s,i._requiredObjectKeys=g(e,r),i._valueIsAllowedSchemaKeys=d,i._firstLevelValueIsAllowedSchemaKeys=h,i._valueIsAllowedObjectKeys=g(e,d),i._validationContexts={}},e.extendOptions=function(e){l.extend(u,e)},e.prototype=new c.Where,e.prototype.condition=function(e){var t,n,i=this;if(l.each(e,function(e,i){"$"===i.substring(0,1)?t=!0:n=!0}),t&&n)throw new c.Error("Object cannot contain modifier operators alongside other keys");if(!i.newContext().validate(e,{modifier:t,filter:!1,autoConvert:!1}))throw new c.Error("One or more properties do not match the schema.");return!0},e.prototype.namedContext=function(e){var t=this;return"string"!=typeof e&&(e="default"),t._validationContexts[e]=t._validationContexts[e]||new o(t),t._validationContexts[e]},e.prototype.validator=function(e){this._validators.push(e)},e.prototype.clean=function(e,t){var i=this;if(t=l.extend({filter:!0,autoConvert:!0},t||{}),"$pushAll"in e){e.$push=e.$push||{};for(var r in e.$pushAll){e.$push[r]=e.$push[r]||{},e.$push[r].$each=e.$push[r].$each||[];for(var o=0,s=e.$pushAll[r].length;s>o;o++)e.$push[r].$each.push(e.$pushAll[r][o]);delete e.$pushAll}}var a=new n(e);return t.filter&&a.filterGenericKeys(function(e){return i.allowsKey(e)}),t.autoConvert&&a.forEachNode(function(e,t,n,r){if(r){var o=i._schema[r];o&&this.updateValue(d(e,o.type))}}),a.getObject()},e.prototype.schema=function(e){var t=this;return e?t._schema[e]:t._schema},e.prototype.messages=function(e){this._messages=a,l.extend(this._messages,e)},e.prototype.labels=function(e){var t=this;l.each(e,function(e,n){"string"==typeof e&&n in t._schema&&(t._schema[n].label=e)})},e.prototype.messageForError=function(e,t,n,i){var r,o,s=this,a=e+" "+t,l=e.indexOf(".");-1!==l&&(r=e.substring(0,l),o=r+" "+t);var c=s._messages[a]||s._messages[e];if(!c&&r&&(c=s._messages[o]||s._messages[r]),!c)return"Unknown validation error";n=n||s._schema[t]||{},c=c.replace("[label]",n.label||t),"undefined"!=typeof n.minCount&&(c=c.replace("[minCount]",n.minCount)),"undefined"!=typeof n.maxCount&&(c=c.replace("[maxCount]",n.maxCount)),void 0!==i&&null!==i&&(c=c.replace("[value]",i.toString()));var u=n.min,d=n.max;return"function"==typeof u&&(u=u()),"function"==typeof d&&(d=d()),n.type===Date||n.type===[Date]?("undefined"!=typeof u&&(c=c.replace("[min]",f(u))),"undefined"!=typeof d&&(c=c.replace("[max]",f(d)))):("undefined"!=typeof u&&(c=c.replace("[min]",u)),"undefined"!=typeof d&&(c=c.replace("[max]",d))),n.type instanceof Function&&(c=c.replace("[type]",n.type.name)),c},e.prototype.allowsKey=function(e){for(var t,n=this,i=n._schemaKeys,r=!1,o=0,s=i.length;s>o;o++){if(t=i[o],t===e){r=!0;break}if(t.substring(0,e.length+1)===e+"."){r=!0;break}var a=e.slice(-2);if(".$"===a&&e.slice(0,-2)===t){r=!0;break}}return r},e.prototype.newContext=function(){return new o(this)},e.prototype.requiredObjectKeys=function(e){var t=this;return e?t._requiredObjectKeys[e+"."]||[]:t._firstLevelRequiredSchemaKeys},e.prototype.requiredSchemaKeys=function(){return this._requiredSchemaKeys},e.prototype.firstLevelSchemaKeys=function(){return this._firstLevelSchemaKeys},e.prototype.valueIsAllowedObjectKeys=function(e){var t=this;return e?t._valueIsAllowedObjectKeys[e+"."]||[]:t._firstLevelValueIsAllowedSchemaKeys},e.prototype.valueIsAllowedSchemaKeys=function(){return this._valueIsAllowedSchemaKeys};var d=function(e,t){if(t===String)return"undefined"!=typeof e&&null!==e&&"string"!=typeof e?e.toString():e;if(t===Number){if("string"==typeof e){var n=parseFloat(e);return isNaN(n)?e:n}return e}return e},h=function(e){return l.isObject(e)&&Object.getPrototypeOf(e)===Object.prototype};r=function(e){for(var t in e)if(e.hasOwnProperty(t)&&"$"===t.substring(0,1))return!0;return!1};var f=function(e){var t=e.getUTCMonth()+1;10>t&&(t="0"+t);var n=e.getUTCDate();return 10>n&&(n="0"+n),e.getUTCFullYear()+"-"+t+"-"+n},p=function(t){if(l.isArray(t)){var n={};l.each(t,function(t){t=c.test(t,e)?t._schema:t,h(t)&&l.extend(n,t)}),t=n}return l.each(t,function(n,i){var r,o;if(c.test(n.type,e))r=".",o=n.type,n.type=Object;else{if(!c.test(n.type,[e]))return;r=".$.",o=n.type[0],n.type=[Object]}l.each(o._schema,function(e,n){var o=i+r+n;o in t||(t[o]=e)})}),t},m=function(e){var t,n,i,r=[],o=[];l.each(e,function(e,n){for(var s=n.indexOf(".");-1!==s;)t=n.substring(0,s),i=n.substring(s,s+3),".$"!==t.substring(t.length-2)&&(".$."===i?r.push(t):o.push(t)),s=n.indexOf(".",s+3)});for(var s=0,a=r.length;a>s;s++)n=r[s],n in e||(e[n]={type:[Object],optional:!0});for(var s=0,a=o.length;a>s;s++)n=o[s],n in e||(e[n]={type:Object,optional:!0});l.each(e,function(t,n){if(l.isArray(t.type)){var i=n+".$";i in e||(e[i]={}),e[i].type=t.type[0],t.label&&(e[i].label=t.label),e[i].optional=!0,"undefined"!=typeof t.min&&(e[i].min=t.min),"undefined"!=typeof t.max&&(e[i].max=t.max),"undefined"!=typeof t.allowedValues&&(e[i].allowedValues=t.allowedValues),"undefined"!=typeof t.valueIsAllowed&&(e[i].valueIsAllowed=t.valueIsAllowed),"undefined"!=typeof t.decimal&&(e[i].decimal=t.decimal),"undefined"!=typeof t.regEx&&(e[i].regEx=t.regEx),t.type=Array,l.each(["min","max","allowedValues","valueIsAllowed","decimal","regEx"],function(e){y(t,e)})}});for(var s=0,a=r.length;a>s;s++)n=r[s],n in e||(e[n]={type:[Object],optional:!0});for(var s=0,a=o.length;a>s;s++)n=o[s],n in e||(e[n]={type:Object,optional:!0});return e},g=function(e,t){var n,r,o,s={};return l.each(e,function(e,a){e.type===Object&&(n=a+".",o=[],l.each(t,function(e){i(e).startsWith(n)&&(r=e.substring(n.length),-1===r.indexOf(".")&&o.push(r))}),s[n]=o)}),s},v=function(e){if(!l.isObject(e))return e;var t={};return l.each(e,function(e,n){if("string"==typeof e.label)return t[n]=e,void 0;var r=n,o=r.lastIndexOf(".");if(-1!==o&&(r=r.substring(o+1),"$"===r)){var s=n.split(".");r=s[s.length-2]}e.label=i(r).humanize().s,t[n]=e}),t},y=function(e,t){t in e&&delete e[t]}}.call(this),function(){o=function(e){var t=this;t._simpleSchema=e,t._schema=e.schema(),t._schemaKeys=l.keys(t._schema),t._invalidKeys=[],t._deps={},t._depsAny=new a.Dependency,l.each(t._schemaKeys,function(e){t._deps[e]=new a.Dependency})},o.prototype.validate=function(t,n){var i=this;n=l.extend({modifier:!1,upsert:!1},n||{}),t=i._simpleSchema.clean(t,n);var r=e(t,n.modifier,n.upsert,null,i._simpleSchema),o=l.pluck(i._invalidKeys,"name");i._invalidKeys=r;var s=l.pluck(i._invalidKeys,"name"),a=l.union(s,o);return l.each(a,function(e){var t=p(e);t in i._deps&&i._deps[t].changed()}),a.length&&i._depsAny.changed(),0===i._invalidKeys.length},o.prototype.validateOne=function(t,n,i){var r=this;i=l.extend({modifier:!1},i||{}),t=r._simpleSchema.clean(t,i);for(var o,s=e(t,i.modifier,i.upsert,n,r._simpleSchema),a=[],c=0,u=r._invalidKeys.length;u>c;c++)o=r._invalidKeys[c],o.name!==n&&a.push(o);r._invalidKeys=a;for(var o,c=0,u=s.length;u>c;c++)o=s[c],r._invalidKeys.push(o);var d=p(n);return d in r._deps&&r._deps[d].changed(),r._depsAny.changed(),!r._keyIsInvalid(n)},o.prototype.resetValidation=function(){var e=this,t=l.pluck(e._invalidKeys,"name");e._invalidKeys=[],l.each(t,function(t){var n=p(t);n in e._deps&&e._deps[n].changed()})},o.prototype.isValid=function(){var e=this;return e._depsAny.depend(),!e._invalidKeys.length},o.prototype.invalidKeys=function(){var e=this;return e._depsAny.depend(),e._invalidKeys},o.prototype._keyIsInvalid=function(e,t){var n=this;t=t||p(e);var i=!!l.findWhere(n._invalidKeys,{name:e}),r=t!==e?!!l.findWhere(n._invalidKeys,{name:t}):!1;return i||r},o.prototype.keyIsInvalid=function(e){var t=this,n=p(e);return t._deps[n].depend(),t._keyIsInvalid(e,n)},o.prototype.keyErrorMessage=function(e){var t=this,n=p(e);t._deps[n].depend();var i=l.findWhere(t._invalidKeys,{name:e});return i||(i=l.findWhere(t._invalidKeys,{name:n})),i?i.message:""};var e=function(e,o,s,a,h){function m(n,i,r,o,s){if(!o)return y.push(u("keyNotInSchema",i,n,o,h)),void 0;if(!o.optional&&("$unset"===s||"$rename"===s||c(n)))return y.push(u("required",i,null,o,h)),void 0;if("$rename"===s&&"string"==typeof n&&!h.allowsKey(n))return y.push(u("keyNotInSchema",n,null,null,h)),void 0;if(!l.contains(["$unset","$rename","$pull","$pullAll","$pop"],s)){if(f(n)){var a=t(o,n,s);if(a)return y.push(u(a,i,n,o,h)),void 0;if(o.allowedValues&&!l.contains(o.allowedValues,n))return y.push(u("notAllowed",i,n,o,h)),void 0}if(o.valueIsAllowed&&!o.valueIsAllowed(n,e,s))return y.push(u("notAllowed",i,n,o,h)),void 0}l.every(h._validators,function(e){var t=e(r,n,o,s);return"string"==typeof t?(y.push(u(t,i,n,o,h)),!1):!0})}function g(e,t,r,c){var u,f;if(!r&&t&&"$"===t.substring(0,1)&&(r=t,t=null),t&&(c||"$push"!==r&&"$addToSet"!==r||(d(e)&&"$each"in e?e=e.$each:t+=".0",c=!0),u=p(t),f=h.schema(u),a&&a!==t&&a!==u||m(e,t,u,f,r)),e||f&&f.type!==Object||(e={}),l.isArray(e))l.each(e,function(e,n){g(e,t+"."+n,r,c)});else if(d(e)){var v,y,b=l.keys(e);(!o||s&&"$set"===r||u&&".$"===u.slice(-2))&&(v=h.requiredObjectKeys(u),v=l.filter(v,function(e){return!l.some(b,function(t){return t.slice(0,e.length+1)===e+"."})})),(!o||"$set"===r||u&&".$"===u.slice(-2))&&(y=h.valueIsAllowedObjectKeys(u));var w=l.union(b,v||[],y||[]);l.each(w,function(o){i(o)&&g(e[o],n(t,o),r,c)})}}if(!l.isObject(e))throw new Error("The first argument of validate() or validateOne() must be an object");if(o){if(l.isEmpty(e))throw new Error("When the modifier option is true, validation object must have at least one operator");var v=l.every(e,function(e,t){return"$"===t.substring(0,1)});if(!v)throw new Error("When the modifier option is true, all validation object keys must be operators")}else if(r(e))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");"$setOnInsert"in e&&(s&&(e.$set=e.$set||{},e.$set=l.extend(e.$set,e.$setOnInsert)),delete e.$setOnInsert);var y=[];g(e);var b=[];return y=l.filter(y,function(e){return l.contains(b,e.name)?!1:(b.push(e.name),!0)})},t=function(e,t,n){var i=e.type,r=e.min,o=e.max;if("function"==typeof r&&(r=r()),"function"==typeof o&&(o=o()),i===String){if("string"!=typeof t)return"expectedString";if(null!==o&&o<t.length)return"maxString";if(null!==r&&r>t.length)return"minString";if(e.regEx instanceof RegExp&&!e.regEx.test(t))return"regEx";if(l.isArray(e.regEx)){var s;if(l.every(e.regEx,function(e,n){return e.test(t)?!0:(s="regEx."+n,!1)}),s)return s}}else if(i===Number){if("number"!=typeof t)return"expectedNumber";if("$inc"!==n&&null!==o&&t>o)return"maxNumber";if("$inc"!==n&&null!==r&&r>t)return"minNumber";if(!e.decimal&&t.toString().indexOf(".")>-1)return"noDecimal"}else if(i===Boolean){if("boolean"!=typeof t)return"expectedBoolean"}else if(i===Object){if(!d(t))return"expectedObject"}else if(i===Array){if(!l.isArray(t))return"expectedArray";if(null!==e.minCount&&t.length<e.minCount)return"minCount";if(null!==e.maxCount&&t.length>e.maxCount)return"maxCount"}else if(i instanceof Function||h(i)){if(!(t instanceof i))return"expectedConstructor";if(i===Date){if(l.isDate(r)&&r.getTime()>t.getTime())return"minDate";if(l.isDate(o)&&o.getTime()<t.getTime())return"maxDate"}}},n=function(e,t){return"$each"===t?e:e?e+"."+t:t},i=function(e){if("$pushAll"===e)throw new Error("$pushAll is not supported; use $push + $each");return!l.contains(["$pull","$pullAll","$pop","$slice"],e)},s=function(e){return"string"!=typeof e?!1:/^\s*$/.test(e)},c=function(e){return void 0===e||null===e||s(e)},u=function(e,t,n,i,r){return{name:t,type:e,message:r.messageForError(e,t,i,n)}},d=function(e){return l.isObject(e)&&Object.getPrototypeOf(e)===Object.prototype},h=function(e){return"undefined"!=typeof Uint8Array&&e===Uint8Array||"undefined"!=typeof Uint16Array&&e===Uint16Array||"undefined"!=typeof Uint32Array&&e===Uint32Array||"undefined"!=typeof Uint8ClampedArray&&e===Uint8ClampedArray},f=function(e){return void 0!==e&&null!==e},p=function(e){return"string"!=typeof e?null:e.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+/g,".$")}}.call(this),"undefined"==typeof Package&&(Package={}),Package["simple-schema"]={SimpleSchema:e,SchemaRegEx:t,MongoObject:n}}(),function(){var e=Package.meteor.Meteor,t=Package["simple-schema"].SimpleSchema,n=(Package["simple-schema"].SchemaRegEx,Package["simple-schema"].MongoObject),i=Package.underscore._,r=Package.deps.Deps,o=(Package.check.check,Package.check.Match);(function(){t.extendOptions({unique:o.Optional(Boolean),autoValue:o.Optional(Function),denyInsert:o.Optional(Boolean),denyUpdate:o.Optional(Boolean)}),e.Collection2=function(n,o){var a,l,c=this;if(!(c instanceof e.Collection2))throw new Error('use "new" to construct a Meteor.Collection2');if(o=o||{},!("schema"in o))throw new Error("Meteor.Collection2 options must define a schema");if(c._simpleSchema=o.schema instanceof t?o.schema:new t(o.schema),delete o.schema,c._virtualFields=o.virtualFields,"virtualFields"in o&&delete o.virtualFields,c._autoValues={},i.each(c._simpleSchema.schema(),function(e,t){"autoValue"in e&&(c._autoValues[t]=e.autoValue)}),n instanceof e.Collection||"SmartCollection"in e&&n instanceof e.SmartCollection||"object"==typeof Offline&&"Collection"in Offline&&n instanceof Offline.Collection)l=n,c._virtualFields&&(a=l._transform,o.transform=function(e){return i.each(c._virtualFields,function(t,n){e[n]=t(e)}),a?a(e):e},l._transform=r._makeNonreactive(o.transform)),c._name=l._name,c._collection=l;else{c._virtualFields&&(a=o.transform,o.transform=function(e){return i.each(c._virtualFields,function(t,n){e[n]=t(e)}),a?a(e):e}),c._name=n;var u;"smart"in o&&(u=o.smart,delete o.smart),c._collection=u===!0&&"SmartCollection"in e?new e.SmartCollection(n,o):new e.Collection(n,o)}c._collection.deny({insert:function(e,t){var n=s.call(c,t,"insert");i.extend(t,n),i.each(t,function(e,i){i in n||delete t[i]});var r=i.clone(t);"_id"in r&&!c._simpleSchema.allowsKey("_id")&&delete r._id,c._virtualFields&&i.each(c._virtualFields,function(e,t){t in r&&delete r[t]});var o=c._simpleSchema.newContext();return!o.validate(r)},update:function(e,t,n,r){i.extend(r,s.call(c,r,"update"));var o=s.call(c,r,"update");i.extend(r,o),i.each(r,function(e,t){t in o||delete r[t]});var a=c._simpleSchema.newContext(),l=a.validate(r,{modifier:!0}),u=a.invalidKeys();return!l&&i.where(u,{type:"notUnique"}).length!==u.length},fetch:[],transform:null}),"object"==typeof Package&&Package.insecure&&c._collection.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0},fetch:[],transform:null}),c._simpleSchema.validator(function(e,t,n,i){var r,o,s,a;return n.denyInsert&&void 0!==t&&!i?"insertNotAllowed":n.denyUpdate&&i&&("$set"!==i||"$set"===i&&void 0!==t)?"updateNotAllowed":void 0!==t&&null!==t||!n.optional?n.unique?(r={},r[e]=t,i?c._selector?(o=c._collection.find(r).count(),0===o?!0:(a=c._selector,"string"==typeof a&&(a={_id:a}),e in a&&a[e]!==t?s=0:(a[e]=t,s=c._collection.find(a).count()),o>s?"notUnique":!0)):!0:c._collection.findOne(r)?"notUnique":!0):!0:!0})},e.Collection2.prototype._insertOrUpdate=function(t,n){var r,o,a,l,c,u=this,d=u._collection,h=u._simpleSchema;if(!n.length)throw new Error(t+" requires an argument");if(u._selector=null,"insert"===t)r=n[0],l=n[1],o=n[2];else{if("update"!==t&&"upsert"!==t)throw new Error("invalid type argument");u._selector=n[0],r=n[1],l=n[2],o=n[3]}o||"function"!=typeof l||(o=l,l={}),l=l||{},c="upsert"===t||"update"===t&&l.upsert===!0,"insert"===t&&void 0!==n[1]&&"function"!=typeof n[1]&&n.splice(1,1),e.isClient&&!o&&(o=function(n){n&&e._debug(t+" failed: "+(n.reason||n.stack))}),r=h.clean(r),e.isServer&&(r=s.call(u,r,c?"upsert":t));var f=i.clone(r);if(e.isServer&&c&&i.isObject(u._selector)){var p=f.$set||{};f.$set=i.clone(u._selector),i.extend(f.$set,p)}e.isClient&&(f=s.call(u,f,c?"upsert":t));var m=h.namedContext(l.validationContext).validate(f,{modifier:"update"===t||"upsert"===t,upsert:c,filter:!1,autoConvert:!1});if(u._selector=null,!m){if(a=new Error("failed validation"),o)return o(a),null;throw a}return"insert"===t?(n[0]=r,d.insert.apply(d,n)):"update"===t?(n[1]=r,d.update.apply(d,n)):"upsert"===t?(n[1]=r,d.upsert.apply(d,n)):void 0},e.Collection2.prototype.insert=function(){var e=i.toArray(arguments);return this._insertOrUpdate("insert",e)},e.Collection2.prototype.update=function(){var e=i.toArray(arguments);return this._insertOrUpdate("update",e)},e.Collection2.prototype.upsert=function(){if(!this._collection.upsert)throw new Error("Meteor 0.6.6 or higher is required to do an upsert");var e=i.toArray(arguments);return this._insertOrUpdate("upsert",e)},e.Collection2.prototype.simpleSchema=function(){return this._simpleSchema},e.Collection2.prototype.namedContext=function(e){return this._simpleSchema.namedContext(e)},e.Collection2.prototype.validate=function(e,t){return t=t||{},this._simpleSchema.namedContext(t.validationContext).validate(e,t)},e.Collection2.prototype.validateOne=function(e,t,n){return n=n||{},this._simpleSchema.namedContext(n.validationContext).validateOne(e,t,n)},e.Collection2.prototype.remove=function(){var e=this,t=e._collection;return t.remove.apply(t,arguments)},e.Collection2.prototype.allow=function(){var e=this,t=e._collection;return t.allow.apply(t,arguments)},e.Collection2.prototype.deny=function(){var e=this,t=e._collection;return t.deny.apply(t,arguments)},e.Collection2.prototype.find=function(){var e=this,t=e._collection;return t.find.apply(t,arguments)},e.Collection2.prototype.findOne=function(){var e=this,t=e._collection;return t.findOne.apply(t,arguments)};var s=function(e,t){var r=this,o=new n(e);return i.each(r._autoValues,function(n,r){var s=o.getArrayInfoForKey(r)||o.getInfoForKey(r)||{},a=!1,l=n.call({isInsert:"insert"===t,isUpdate:"update"===t,isUpsert:"upsert"===t,isSet:o.affectsGenericKey(r),unset:function(){a=!0},value:s.value,operator:s.operator,field:function(e){var t=o.getArrayInfoForKey(e)||o.getInfoForKey(e)||{};return{isSet:void 0!==t.value,value:t.value,operator:t.operator}}},e);if(void 0===l)return a&&o.removeKey(r),void 0;var c=-1!==r.indexOf(".$"),u=l,d=null;if(i.isObject(l))for(var h in l)if(l.hasOwnProperty(h)&&"$"===h.substring(0,1)){if(c)throw new Error("The return value of an autoValue function may not be an object with update operators when the field name contains a dollar sign");d=h,u=l[h];break}null===d&&"insert"!==t&&(d="$set"),c?o.setValueForGenericKey(r,u):(o.removeKey(r),o.addKey(r,u,d))}),o.getObject()}}).call(this),"undefined"==typeof Package&&(Package={}),Package.collection2={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.webapp={}}(),moment=Package.moment.moment,_=Package.underscore._,Async=Package.npm.Async,GAnalytics=Package.GAnalytics.GAnalytics,RouteController=Package["iron-router"].RouteController,Route=Package["iron-router"].Route,Router=Package["iron-router"].Router,IronLocation=Package["iron-router"].IronLocation,IronRouterProgress=Package["iron-router-progress"].IronRouterProgress,CollectionHooks=Package["collection-hooks"].CollectionHooks,Meteor=Package.meteor.Meteor,Log=Package.logging.Log,Deps=Package.deps.Deps,Session=Package.session.Session,DDP=Package.livedata.DDP,Template=Package.templating.Template,Handlebars=Package.handlebars.Handlebars,check=Package.check.check,Match=Package.check.Match,Random=Package.random.Random,EJSON=Package.ejson.EJSON,Accounts=Package["accounts-base"].Accounts,CryptoJS=Package["crypto-base"].CryptoJS,SimpleSchema=Package["simple-schema"].SimpleSchema,SchemaRegEx=Package["simple-schema"].SchemaRegEx,MongoObject=Package["simple-schema"].MongoObject,Spark=Package.spark.Spark,function(){Template.__define__("categoryBar",Package.handlebars.Handlebars.json_ast_to_func(['<ul class="nav nav-pills nav-stacked no-radius m-t-sm">\n        <li class="padder dk text-sm l-h-2x">\n            <p>Categories\n                <a href="#" data-toggle="dropdown"  class="category-new"><i\n                        class="fa fa-plus-square-o pull-right m-t-xs"></i></a>\n                ',[">","categoryAddDropdown"],"\n\n            </p>\n        </li>\n\n        ",["#",[[0,"each"],[0,"categories"]],["\n        ",[">","categoryBarRow"],"\n        "]],"\n    </ul>"])),Template.__define__("categoryBarRow",Package.handlebars.Handlebars.json_ast_to_func(['<li class="filter-row" id="',["{",[[0,"_id"]]],'">\n\n        <div><label class="checkbox-custom">\n            <input type="checkbox" name="checkboxC"> <i class="fa fa-square-o"></i> <span class="category-row-title">',["{",[[0,"title"]]],'</span>\n        </label>\n            <a class="filter-edit" href="#" data-toggle="dropdown"> <i\n                    class="fa fa-circle pull-right m-t-xs"\n                    style="color:',["{",[[0,"color"]]],'"></i></a>\n            ',[">","categoryEditDropdown"],"\n        </div>\n\n\n\n    </li>"])),Template.__define__("categoryAddDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<section id="categoryAddDropdown" class="dropdown-menu m-l-sm pull-left animated fadeInRight">\n        <div class="arrow left"></div>\n        <section class="panel bg-white">\n            <header class="panel-heading">\n                Add category\n            </header>\n            <div class="list-group">\n                <div class="list-group-item form-group">\n\n                    <div class="col-sm-12">\n                        <div class="m-b">\n\n                            <div class="col-sm-12"><input id="new-category-name" type="text" class="form-control"\n                                                          placeholder="Category name"></div>\n                        </div>\n\n                    </div>\n                    <div class="clearfix"></div>\n                </div>\n\n                <div class="list-group-item form-group">\n                    <div class="m-b">\n                    <div class="col-sm-12">\n                        <div class="colorpalette"></div>\n                    </div>\n                        </div>\n                    <div class="clearfix"></div>\n\n                </div>\n            </div>\n            <footer class="panel-footer text-sm">\n                <div class="pull-right"><a href="#addCategory"\n                                           class="btn btn-sm btn-success category-add">\n                    <i class="fa"></i> Add Category</a></div>\n                <div class="clearfix"></div>\n            </footer>\n        </section>\n    </section>'])),Template.__define__("categoryEditDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<section  class="dropdown-menu m-l-sm pull-left animated fadeInRight category-edit">\n        <div class="arrow left"></div>\n        <section class="panel bg-white">\n            <header class="panel-heading">\n                <a href="#" class="filter-name-edit" data-type="text"\n                   data-title="Enter Category name">',["{",[[0,"title"]]],'</a>\n            </header>\n            <div class="list-group">\n                <div class="colorpalette"></div>\n            </div>\n            <footer class="panel-footer text-sm">\n                <div class="pull-right"><a href="#removeCategory" class="btn btn-sm btn-danger filter-remove"><i\n                        class="fa"></i> Remove Category</a></div>\n                <div class="clearfix"></div>\n            </footer>\n        </section>\n    </section>']))
}(),function(){Template.__define__("groupBar",Package.handlebars.Handlebars.json_ast_to_func(['<ul class="nav nav-pills nav-stacked no-radius m-t-sm">\n        <li class="padder dk text-sm l-h-2x">\n            <div>\n                Assigned to\n                <a href="#" class="project-dropdown group-new" data-toggle="dropdown"><i\n                        class="fa fa-plus-square-o pull-right m-t-xs"></i></a>\n                ',[">","newGroupDropdown"],"\n\n            </div>\n        </li>\n\n        ",["#",[[0,"each"],[0,"groups"]],["\n        ",[">","groupBarRow"],"\n        "]],"\n    </ul>"])),Template.__define__("groupBarRow",Package.handlebars.Handlebars.json_ast_to_func(['<li class="filter-row group-filter-row" id="',["{",[[0,"_id"]]],'">\n        <div>\n            <label class="checkbox-custom">\n                <input type="checkbox" name="checkboxM"> <i class="fa fa-square-o"></i> <span class="group-row-title">',["{",[[0,"title"]]],'</span>\n            </label>\n            <a class="group-edit" href="#" data-toggle="dropdown"> <i\n                    class="fa fa-circle pull-right m-t-xs"\n                    ></i></a>\n            ',[">","groupEditDropdown"],"\n\n        </div>\n    </li>\n\n    ",["#",[[0,"each"],[0,"users"]],['\n    <li class="filter-row user-filter-row" id="',["{",[[0,"_id"]]],'">\n        <div>\n            <label class="checkbox-custom">\n                <input type="checkbox" name="checkboxM"> <i class="fa fa-square-o"></i> <span class="group-row-title">',["{",[[0,"userName"]]],'</span>\n            </label>\n            <a class="  member-edit" href="#" data-toggle="dropdown" data-target="#">\n                <img class="thumb-xs pull-right  img-circle" src="',["{",[[0,"avatar"]]],'" >\n            </a>\n        </div>\n    </li>\n    ']]])),Template.__define__("newGroupDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<section id="newGroupDropdown" class="dropdown-menu m-l-sm pull-left animated fadeInRight">\n        <div class="arrow left"></div>\n        <section class="panel bg-white">\n            <header class="panel-heading">\n                Add group to workspace\n            </header>\n            <div class="list-group">\n                <div class="list-group-item form-group">\n\n                    <div class="col-sm-12"><input id="new-group-name" type="text" class="form-control"\n                                                  placeholder="Group name"></div>\n                    <div class="clearfix"></div>\n                </div>\n            </div>\n            <footer class="panel-footer text-sm">\n                <div class="pull-right"><a href="#addGroup"\n                                           class="btn btn-sm btn-success group-add">\n                    <i class="fa"></i> Add Group</a></div>\n                <div class="clearfix"></div>\n            </footer>\n        </section>\n    </section>'])),Template.__define__("groupEditDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<section class="dropdown-menu m-l-sm pull-left animated fadeInRight">\n        <div class="arrow left"></div>\n        <section class="panel bg-white">\n            <header class="panel-heading">\n            Add user to group\n            </header>\n            <div class="list-group">\n                <div class="list-group-item form-group">\n\n                    <div class="col-sm-12">\n                        <div class="m-b">\n                            <select id="members-group-select" style="width:260px">\n                              ',["#",[[0,"each"],[0,"notUsers"]],['\n                               <option value="',["{",[[0,"_id"]]],'">',["{",[[0,"userName"]]],"</option>\n                                "]],'\n                            </select>\n                        </div>\n\n                    </div>\n                    <div class="clearfix"></div>\n                </div>\n            </div>\n            <footer class="panel-footer text-sm">\n                <div class="pull-right"><a href="#addUserToGroup"\n                                           class="btn btn-sm btn-success user-group-add">\n                    <i class="fa"></i> Add User to group</a></div>\n                <div class="clearfix"></div>\n            </footer>\n        </section>\n    </section>']))}(),function(){Template.__define__("projectBar",Package.handlebars.Handlebars.json_ast_to_func(['<ul class="nav nav-pills nav-stacked no-radius m-t-sm">\n        <li class="padder dk text-sm l-h-2x">\n            <p>Projects\n                <a href="#" data-toggle="dropdown" class="project-new"><i\n                        class="fa fa-plus-square-o pull-right m-t-xs"></i></a>\n                ',[">","projectAddDropdown"],"\n\n            </p>\n        </li>\n\n        ",["#",[[0,"each"],[0,"projects"]],["\n            ",[">","projectBarRow"],"\n        "]],"\n    </ul>"])),Template.__define__("projectBarRow",Package.handlebars.Handlebars.json_ast_to_func(['<li class="filter-row" id="',["{",[[0,"_id"]]],'">\n\n        <div><label class="checkbox-custom">\n            <input type="checkbox" name="checkboxP"> <i class="fa fa-square-o"></i> <span\n                class="project-row-title">',["{",[[0,"title"]]],'</span>\n        </label>\n            <a class="filter-edit" href="#" data-toggle="dropdown">\n                <i class="fa fa-circle pull-right m-t-xs" style="color:',["{",[[0,"color"]]],'"></i></a>\n            ',[">","projectEditDropdown"],"\n        </div>\n\n    </li>"])),Template.__define__("projectAddDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<section id="projectAddDropdown" class="dropdown-menu m-l-sm pull-left animated fadeInRight">\n        <div class="arrow left"></div>\n        <section class="panel bg-white">\n            <header class="panel-heading">\n                Add project\n            </header>\n            <div class="list-group">\n                <div class="list-group-item form-group">\n\n                    <div class="col-sm-12">\n                        <div class="m-b">\n\n                            <div class="col-sm-12"><input id="new-project-name" type="text" class="form-control"\n                                                          placeholder="Project name"></div>\n                        </div>\n\n                    </div>\n                    <div class="clearfix"></div>\n                </div>\n\n                <div class="list-group-item form-group">\n                    <div class="m-b">\n                        <div class="col-sm-12">\n                            <div class="colorpalette"></div>\n                        </div>\n                    </div>\n                    <div class="clearfix"></div>\n\n                </div>\n            </div>\n            <footer class="panel-footer text-sm">\n                <div class="pull-right"><a href="#addProject"\n                                           class="btn btn-sm btn-success project-add">\n                    <i class="fa"></i> Add Project</a></div>\n                <div class="clearfix"></div>\n            </footer>\n        </section>\n    </section>'])),Template.__define__("projectEditDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<section  class="dropdown-menu m-l-sm pull-left animated fadeInRight project-edit">\n        <div class="arrow left"></div>\n        <section class="panel bg-white">\n            <header class="panel-heading">\n                <a href="#" class="filter-name-edit" data-type="text"\n                   data-title="Enter Project name">',["{",[[0,"title"]]],'</a>\n            </header>\n            <div class="list-group">\n                <div class="colorpalette"></div>\n            </div>\n            <footer class="panel-footer text-sm">\n                <div class="pull-right"><a href="#removeProject" class="btn btn-sm btn-danger filter-remove"><i\n                        class="fa"></i> Remove Project</a></div>\n                <div class="clearfix"></div>\n            </footer>\n        </section>\n    </section>']))}(),function(){Template.__define__("taskBar",Package.handlebars.Handlebars.json_ast_to_func(['<!-- .aside -->\n    <aside class="aside aside-md bg-dark">\n        <section class="vbox">\n            <header class="dk header">\n            ',[">","workspaceBar"],'\n            </header>\n            <section>\n                <section>\n                    <section id="mail-nav" class="hidden-xs">\n                        <ul class="nav nav-pills nav-stacked no-radius">\n                            <li>\n                                <a href="#"> <span class="badge badge-hollow pull-right">4</span> <i class="fa fa-fw fa-bookmark-o"></i> All </a>\n                            </li>\n                            <li>\n                                <a href="#"> <span class="badge badge-hollow pull-right">4</span> <i class="fa fa-fw fa-bookmark-o"></i> Important </a>\n                            </li>\n\n                            <li>\n                                <a href="#"> <span class="badge badge-hollow pull-right">4</span> <i class="fa fa-fw fa-bookmark-o"></i> I Author </a>\n                            </li>\n                        </ul>\n                        ',[">","projectBar"],"\n                        ",[">","categoryBar"],"\n                        ",[">","groupBar"],'\n\n                    </section>\n                </section>\n            </section>\n            <footer class="dk footer text-center">\n                <button class="btn btn-sm btn-info" data-toggle="class:layout-box" data-target="html">Toggle box\n                    layout\n                </button>\n            </footer>\n        </section>\n    </aside>\n    <!-- /.aside -->'])),Template.__define__("memberSelectOption",Package.handlebars.Handlebars.json_ast_to_func(['<option value="',["{",[[0,"_id"]]],'">dfg',["{",[[0,"user_name"]]],"</option>"]))}(),function(){Template.__define__("workspaceBar",Package.handlebars.Handlebars.json_ast_to_func(['<button class="btn btn-icon btn-default btn-sm  pull-right" data-toggle="dropdown"><i\n            class="fa fa-desktop"></i></button>\n    <button class="btn btn-icon btn-default btn-sm pull-right visible-xs m-r-xs" data-toggle="class:show"\n            data-target="#mail-nav"><i class="fa fa-bars"></i></button>\n    <p class="h4">',["{",[[0,"currentWorkspace","title"]]],'</p>\n    <section class="dropdown-menu m-l-sm pull-left animated fadeInRight">\n        <div class="arrow left"></div>\n        <section class="panel bg-white">\n            <header class="panel-heading">\n                <strong>',["{",[[0,"currentWorkspace","title"]]],' workspace</strong>\n            </header>\n            <div class="list-group">\n                ',["#",[[0,"each"],[0,"userWorkspaces"]],['\n                <a href="#" class="media list-group-item">\n                    <span class="media-body block m-b-none">',["{",[[0,"title"]]],"</span>\n                </a>\n                "]],'\n            </div>\n            <footer class="panel-footer text-sm">\n                <div class="pull-right"><a href="#workspaceNew" class="btn btn-sm btn-info"\n                                           id="workspace-new"><i class="fa fa-css3"></i> New workspace</a>\n                </div>\n                <div class="clearfix"></div>\n            </footer>\n        </section>\n    </section>']))}(),function(){Template.__define__("layout",Package.handlebars.Handlebars.json_ast_to_func([[">","errors"],'\n    <section class="hbox stretch ">\n        ',[">","aside"],'\n        <section id="content">\n        ',["{",[[0,"yield"]]],'\n\n            <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a>\n\n        </section>\n   </section>']))}(),function(){Template.__define__("dashboardLayout",Package.handlebars.Handlebars.json_ast_to_func(['<!-- .aside -->\n<aside class="aside aside-lg b-r">\n    <section class="vbox">\n        <header class="header text-center">\n            <p class="h4">Project name</p>\n        </header>\n        <section class="wrapper">\n            <div class="text-center clearfix">\n                <a href="#" class="btn btn-success m-b-lg"><i class="fa fa-plus"></i> Create project</a>\n            </div>\n            <div id="calendar" class="m-t-lg">\n\n            </div>\n            <div class="list-group bg-white">\n                <a href="#" class="list-group-item text-ellipsis">\n                    <span class="badge bg-danger">7:30</span>\n                    Meet a friend\n                </a>\n                <a href="#" class="list-group-item text-ellipsis">\n                    <span class="badge bg-success">9:30</span>\n                    Have a kick off meeting with .inc company\n                </a>\n                <a href="#" class="list-group-item text-ellipsis">\n                    <span class="badge bg-light">19:30</span>\n                    Milestone release\n                </a>\n            </div>\n        </section>\n    </section>\n</aside>\n<!-- /.aside -->\n<!-- .aside -->\n<aside class="">\n    <section class="vbox">\n        <header class="header bg-white pos-rlt navbar navbar-default show">\n            <span class="arrow left"></span>\n            <div class="collapse navbar-collapse pull-in">\n                <ul class="nav navbar-nav">\n                    <li><a href="#">Tasks</a></li>\n                    <li class="font-bold"><a href="#l">Stream</a></li>\n                    <li><a href="#l">Team</a></li>\n                    <li class="dropdown">\n                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Files <b class="caret"></b></a>\n                        <ul class="dropdown-menu">\n                            <li><a href="#">Documents</a></li>\n                            <li><a href="#">Media</a></li>\n                            <li><a href="#">Upload one</a></li>\n                        </ul>\n                    </li>\n                    <li><a href="#l">About</a></li>\n                </ul>\n                <ul class="nav navbar-nav navbar-right">\n                    <li class="hidden-xs">\n                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n                            <i class="fa fa-bell-o"></i>\n                            <span class="badge up bg-success m-l-n-sm">2</span>\n                        </a>\n                        <section class="dropdown-menu animated fadeInUp input-s-lg">\n                            <section class="panel bg-white">\n                                <header class="panel-heading">\n                                    <strong>You have <span class="count-n">2</span> notifications</strong>\n                                </header>\n                                <div class="list-group">\n                                    <a href="#" class="media list-group-item">\n                            <span class="pull-left thumb-sm">\n                              <img src="images/avatar.jpg" alt="John said" class="img-circle">\n                            </span>\n                            <span class="media-body block m-b-none">\n                              Use awesome animate.css<br>\n                              <small class="text-muted">28 Aug 13</small>\n                            </span>\n                                    </a>\n                                    <a href="#" class="media list-group-item">\n                            <span class="media-body block m-b-none">\n                              1.0 initial released<br>\n                              <small class="text-muted">27 Aug 13</small>\n                            </span>\n                                    </a>\n                                </div>\n                                <footer class="panel-footer text-sm">\n                                    <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>\n                                    <a href="#">See all the notifications</a>\n                                </footer>\n                            </section>\n                        </section>\n                    </li>\n                </ul>\n            </div>\n        </header>\n        <section>\n            <section class="hbox stretch">\n                <aside>\n                    <section class="vbox">\n                        <section class="scrollable wrapper">\n                            <div class="clearfix">\n                                <section class="panel panel-info col-lg-6 no-padder">\n                                    <form>\n                                        <textarea class="form-control no-border" rows="2" placeholder="Share something..."></textarea>\n                                    </form>\n                                    <footer class="panel-footer bg-light lter">\n                                        <button class="btn btn-info pull-right btn-sm font-bold">SHARE</button>\n                                        <ul class="nav nav-pills nav-sm">\n                                            <li><a href="#"><i class="fa fa-camera text-muted"></i></a></li>\n                                            <li><a href="#"><i class="fa fa-video-camera text-muted"></i></a></li>\n                                        </ul>\n                                    </footer>\n                                </section>\n                            </div>\n                            <div class="btn-group m-b" data-toggle="buttons">\n                                <label class="btn btn-sm btn-white active">\n                                    <input type="radio" name="options" id="option1"> Timeline\n                                </label>\n                                <label class="btn btn-sm btn-white">\n                                    <input type="radio" name="options" id="option2"> Activity\n                                </label>\n                            </div>\n                            <section class="comment-list block">\n                                <article id="comment-id-1" class="comment-item">\n                          <span class="fa-stack pull-left m-l-xs">\n                            <i class="fa fa-circle text-info fa-stack-2x"></i>\n                            <i class="fa fa-film fa-stack-1x text-white"></i>\n                          </span>\n                                    <section class="comment-body m-b-lg">\n                                        <header>\n                                            <a href="#"><strong>John smith</strong></a> shared a <a href="#" class="text-info">video</a> to you\n                              <span class="text-muted text-xs">\n                                24 minutes ago\n                              </span>\n                                        </header>\n                                        <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id neque quam.</div>\n                                    </section>\n                                </article>\n                                <!-- .comment-reply -->\n                                <article id="comment-id-2" class="comment-reply">\n                                    <article class="comment-item">\n                                        <a class="pull-left thumb-sm">\n                                            <img src="images/avatar_default.jpg" class="img-circle">\n                                        </a>\n                                        <section class="comment-body m-b-lg">\n                                            <header>\n                                                <a href="#"><strong>John smith</strong></a>\n                                <span class="text-muted text-xs">\n                                  26 minutes ago\n                                </span>\n                                            </header>\n                                            <div> Morbi id neque quam. Aliquam.</div>\n                                        </section>\n                                    </article>\n                                    <article class="comment-item">\n                                        <a class="pull-left thumb-sm">\n                                            <img src="images/avatar.jpg" class="img-circle">\n                                        </a>\n                                        <section class="comment-body m-b-lg">\n                                            <header>\n                                                <a href="#"><strong>Mike</strong></a>\n                                <span class="text-muted text-xs">\n                                  26 minutes ago\n                                </span>\n                                            </header>\n                                            <div>Good idea.</div>\n                                        </section>\n                                    </article>\n                                </article>\n                                <!-- / .comment-reply -->\n                                <article id="comment-id-2" class="comment-item">\n                          <span class="fa-stack pull-left m-l-xs">\n                            <i class="fa fa-circle text-success fa-stack-2x"></i>\n                            <i class="fa fa-file-text-o text-white fa-stack-1x"></i>\n                          </span>\n                                    <section class="comment-body m-b-lg">\n                                        <header>\n                                            <a href="#"><strong>John Doe</strong></a>\n                              <span class="text-muted text-xs">\n                                1 hour ago\n                              </span>\n                                        </header>\n                                        <div>Lorem ipsum dolor sit amet, consecteter adipiscing elit.</div>\n                                    </section>\n                                </article>\n                                <article id="comment-id-2" class="comment-item">\n                          <span class="fa-stack pull-left m-l-xs">\n                            <i class="fa fa-circle text-danger fa-stack-2x"></i>\n                            <i class="fa fa-check fa-stack-1x text-white"></i>\n                          </span>\n                                    <section class="comment-body m-b-lg">\n                                        <header>\n                                            <a href="#"><strong>Jonathan</strong></a> completed a task\n                              <span class="text-muted text-xs">\n                                1 hour ago\n                              </span>\n                                        </header>\n                                        <div>Consecteter adipiscing elit.</div>\n                                    </section>\n                                </article>\n                            </section>\n                            <a href="#" class="btn btn-white btn-sm"><i class="fa fa-plus icon-muted"></i> more</a>\n                        </section>\n                    </section>\n                </aside>\n            </section>\n        </section>\n    </section>\n</aside>\n<!-- /.aside -->']))}(),function(){Template.__define__("accessDenied",Package.handlebars.Handlebars.json_ast_to_func(['<div class="alert alert-error">You can\'t get here! Please log in</div>\n    ',["{",[[0,"loginButtons"]]]]))}(),function(){Template.__define__("aside",Package.handlebars.Handlebars.json_ast_to_func(['<aside class="bg-black aside-sm nav-vertical " id="nav">\n        <section class="vbox">\n            <header class="bg-danger dker nav-bar">\n                <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen" data-target="#nav">\n                    <i class="fa fa-bars"></i>\n                </a>\n                <a href="#" class="nav-brand" data-toggle="fullscreen">kvazar</a>\n                <a class="btn btn-link visible-xs" data-toggle="class:show" data-target=".nav-user">\n                    <i class="fa fa-comment-o"></i>\n                </a>\n            </header>\n            <section>\n                <!-- user -->\n                <div class="lt nav-user hidden-xs pos-rlt">\n                    <div class="nav-avatar pos-rlt">\n                        <a href="#" class="thumb-sm avatar animated rollIn" data-toggle="dropdown">\n                            <img src="',["{",[[0,"userAvatar"]]],'" alt="" class="">\n                            <span class="caret caret-white"></span>\n                        </a>\n                        <ul class="dropdown-menu m-t-sm animated fadeInLeft">\n                            <span class="arrow top"></span>\n\n                            <li>\n                                <a href="/profile">Profile</a>\n                            </li>\n                            <li>\n                                <a href="#">\n                                    <span class="badge bg-danger pull-right">3</span>\n                                    Notifications\n                                </a>\n                            </li>\n                            <li class="divider"></li>\n                            <li>\n                                <a href="/docs">Help</a>\n                            </li>\n                            <li>\n                                <a class="logout" href="#">Logout</a>\n                            </li>\n                        </ul>\n                        <div class="visible-xs m-t m-b">\n                            <a href="#" class="h3">John.Smith</a>\n\n                            <p><i class="fa fa-map-marker"></i> London, UK</p>\n                        </div>\n                    </div>\n                    <div class="nav-msg">\n                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n                            <b class="badge badge-white count-n">2</b>\n                        </a>\n                        <section class="dropdown-menu m-l-sm pull-left animated fadeInRight">\n                            <div class="arrow left"></div>\n                            <section class="panel bg-white">\n                                <header class="panel-heading">\n                                    <strong>You have <span class="count-n">2</span> notifications</strong>\n                                </header>\n                                <div class="list-group">\n                                    <a href="#" class="media list-group-item">\n                      <span class="pull-left thumb-sm">\n                        <img src="images/avatar.jpg" alt="John said" class="img-circle">\n                      </span>\n                      <span class="media-body block m-b-none">\n                        Use awesome animate.css<br>\n                        <small class="text-muted">28 Aug 13</small>\n                      </span>\n                                    </a>\n                                    <a href="#" class="media list-group-item">\n                      <span class="media-body block m-b-none">\n                        1.0 initial released<br>\n                        <small class="text-muted">27 Aug 13</small>\n                      </span>\n                                    </a>\n                                </div>\n                                <footer class="panel-footer text-sm">\n                                    <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>\n                                    <a href="#">See all the notifications</a>\n                                </footer>\n                            </section>\n                        </section>\n                    </div>\n                </div>\n                <!-- / user -->\n                <!-- nav -->\n                <nav class="nav-primary hidden-xs">\n                    <ul class="nav">\n                        <li class="',["{",[[0,"activeRouteClass"],"home","dashboard"]],'">\n                            <a href="/">\n                                <i class="fa fa-tachometer"></i>\n                                <span>Dashboard</span>\n                            </a>\n                        </li>\n                        <li class="',["{",[[0,"activeRouteClass"],"myWork"]],'">\n                            <a href="/myWork">\n                                <i class="fa fa-clock-o "></i>\n                                <span>My Work</span>\n                            </a>\n                        </li>\n                        <li class="',["{",[[0,"activeRouteClass"],"focus"]],'">\n                            <a href="/focus">\n                                <i class="fa fa-eye"></i>\n                                <span>Focus</span>\n                            </a>\n                        </li>\n\n                        <li class="',["{",[[0,"activeRouteClass"],"tracker"]],'">\n                            <a href="/tracker">\n                                <i class="fa fa-tasks"></i>\n                                <span>Backlog</span>\n                            </a>\n                        </li>\n\n                        <li class="',["{",[[0,"activeRouteClass"],"roadmap"]],'">\n                            <a href="/roadmap">\n                                <i class="fa fa-calendar"></i>\n                                <span>Roadmap</span>\n                            </a>\n                        </li>\n\n\n                        <li class="',["{",[[0,"activeRouteClass"],"reports"]],'">\n                            <a href="/reports">\n                                <i class="fa fa-bar-chart-o"></i>\n                                <span>Reports</span>\n                            </a>\n                        </li>\n\n                        <li class="',["{",[[0,"activeRouteClass"],"users"]],'">\n                            <a href="/users">\n                                <i class="fa fa-users"></i>\n                                <span>Users</span>\n                            </a>\n                        </li>\n                    </ul>\n                </nav>\n                <!-- / nav -->\n            </section>\n            <footer class="footer bg-gradient hidden-xs text-center">\n                <a href="modal.lockme.html" data-toggle="ajaxModal" class="btn btn-sm btn-link hide">\n                    <i class="fa fa-power-off"></i>\n                </a>\n                <a href="#nav" id="toggle-nav" data-toggle="class:nav-vertical" class="btn btn-sm btn-link">\n                    <i class="fa fa-bars"></i>\n                </a>\n            </footer>\n        </section>\n    </aside>']))}(),function(){Template.__define__("errors",Package.handlebars.Handlebars.json_ast_to_func(['<div class="errors row-fluid">    \n    ',["#",[[0,"each"],[0,"errors"]],["\n      ",[">","error"],"\n    "]],"\n  </div>"])),Template.__define__("error",Package.handlebars.Handlebars.json_ast_to_func(['<div class="alert alert-error">\n    <button type="button" class="close" data-dismiss="alert">&times;</button>\n    ',["{",[[0,"message"]]],"\n  </div>"]))}(),function(){Template.__define__("header",Package.handlebars.Handlebars.json_ast_to_func(['<nav class="navbar navbar-default" role="navigation">\n        <!-- Brand and toggle get grouped for better mobile display -->\n        <div class="navbar-header">\n            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\n                <span class="sr-only">Toggle navigation</span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>\n            <a class="navbar-brand" href="#">Kvazar</a>\n        </div>\n\n        <!-- Collect the nav links, forms, and other content for toggling -->\n        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n            <ul class="nav navbar-nav">\n                <li class="active"><a href="#">Dashboard</a></li>\n                <li><a href="#">Backlog</a></li>\n                <li><a href="#">Focus</a></li>\n                <li><a href="#">Reports</a></li>\n     <!--           <li class="dropdown">\n                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>\n                    <ul class="dropdown-menu">\n                        <li><a href="#">Action</a></li>\n                        <li><a href="#">Another action</a></li>\n                        <li><a href="#">Something else here</a></li>\n                        <li class="divider"></li>\n                        <li><a href="#">Separated link</a></li>\n                        <li class="divider"></li>\n                        <li><a href="#">One more separated link</a></li>\n                    </ul>\n                </li>-->\n            </ul>\n            <form class="navbar-form navbar-left" role="search">\n                <div class="form-group">\n                    <input type="text" class="form-control" placeholder="Search">\n                </div>\n                <button type="submit" class="btn btn-default">Submit</button>\n            </form>\n            <ul class="nav navbar-nav navbar-right">\n                    ',["#",[[0,"if"],[0,"currentUser"]],['\n\n                    <li class="dropdown">\n                        ',[">","notifications"],"\n                    </li>\n                    "]],"\n\n                ",["{",[[0,"loginButtons"]]],"\n                </ul>\n\n\n        </div><!-- /.navbar-collapse -->\n    </nav>"]))
}(),function(){Template.__define__("loading",Package.handlebars.Handlebars.json_ast_to_func([[">","spinner"]]))}(),function(){Template.__define__("notifications",Package.handlebars.Handlebars.json_ast_to_func(['<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n    Notifications\n    ',["#",[[0,"if"],[0,"notificationCount"]],['\n      <span class="badge badge-inverse">',["{",[[0,"notificationCount"]]],"</span>\n    "]],'\n    <b class="caret"></b>\n  </a>\n  <ul class="notification dropdown-menu">\n    ',["#",[[0,"if"],[0,"notificationCount"]],["\n      ",["#",[[0,"each"],[0,"notifications"]],["\n        ",[">","notification"],"\n      "]],"\n    "],["\n      <li><span>No Notifications</span></li>\n    "]],"\n  </ul>"])),Template.__define__("notification",Package.handlebars.Handlebars.json_ast_to_func(['<li>\n    <a href="',["{",[[0,"notificationPostPath"]]],'">\n      <strong>',["{",[[0,"commenterName"]]],"</strong> commented on your post\n    </a>\n  </li>"]))}(),function(){Template.__define__("dashboard",Package.handlebars.Handlebars.json_ast_to_func(['<section class="hbox stretch">\n        ',[">","dashboardLayout"],"\n\n    </section>"]))}(),function(){Template.__define__("focus",Package.handlebars.Handlebars.json_ast_to_func(['<section class="hbox stretch">\n\n        ',[">","tasksList"],"\n\n        ",[">","taskDetail"],"\n\n    </section>"]))}(),function(){Template.__define__("landing",Package.handlebars.Handlebars.json_ast_to_func(['<!-- header -->\n<header id="header" class="navbar navbar-fixed-top bg-white" data-spy="affix" data-offset-top="1">\n    <div class="container">\n        <a class="navbar-brand" href="#">Kvazar</a>\n\n        <p class="navbar-text pull-left text-muted hidden-xs hidden-sm">\n            <small class="text-muted text-sm"><em>built whit Meteor</em></small>\n        </p>\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav">\n            <i class="fa fa-bars"></i>\n        </button>\n        <div class="collapse navbar-collapse" id="nav">\n            <ul class="nav navbar-nav navbar-right">\n                <li class="hide">\n                    <a href="#home">Home</a>\n                </li>\n                <li>\n                    <a href="#history"></a>\n                </li>\n                <li>\n                    <a href="#features"> </a>\n                </li>\n                <li>\n                    <a href="#ideas">  </a>\n                </li>\n\n                <li>\n                    <a href="#roadmap">Roadmap</a>\n                </li>\n\n\n                <li>\n                    <a href="#demo"></a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</header>\n<!-- / header -->\n<section id="content">\n<div>\n    <div class="text-center wrapper-lg">\n        <h4 class="font-thin">, , </h4>\n\n        <h1 class=" text-uc font-thin">Next generation <strong class="font-bold text-success">project management\n            app</strong></h1>\n    </div>\n    <div class="carousel carousel-fade slide auto  bg-black dker" id="c-slide">\n        <ol class="carousel-indicators">\n            <li data-target="#c-slide" data-slide-to="0" class="active"></li>\n            <li data-target="#c-slide" data-slide-to="1" class=""></li>\n            <li data-target="#c-slide" data-slide-to="2" class=""></li>\n        </ol>\n        <div class="carousel-inner">\n            <div class="item active row">\n                <div class="col-xs-6 text-right">\n                    <img src="images/macpro.png" class="animated fadeInDownBig m-r-lg">\n                </div>\n                <div class="col-xs-6">\n                    <h2 class="animated fadeInUp"><strong class="text-white">100%</strong> <span class="font-thin">  </span>\n                    </h2>\n\n                    <p class="animated fadeInDown hidden-xs">\n                        <strong>   Meteor js</strong> <strong></strong>\n                    </p>\n                </div>\n            </div>\n            <div class="item  row">\n                <div class="col-xs-6 text-right">\n                    <img src="images/iphone.png" class="animated fadeInUpBig m-r-lg">\n                </div>\n                <div class="col-sm-6">\n                    <h2 class="animated fadeInUp"><strong class="text-white">100</strong> <span class="h3">%</span> <br><span\n                            class="font-thin">  </span></h2>\n\n                    <p class="hidden-xs animated fadeInRight">\n                        <!--     <a href="index.html" target="_blank" class="btn btn-lg btn-info btn-rounded btn-s-lg">Live preview</a>-->\n                    </p>\n                </div>\n            </div>\n            <div class="item row">\n                <div class="col-xs-5 text-right">\n                    <h2 class="animated fadeInLeftBig"><strong class="text-white">100%</strong> <span class="font-thin"> </span>\n                    </h2>\n\n                    <p class="animated fadeInUpBig hidden-xs">\n                              . <br>  .\n                    </p>\n                </div>\n                <div class="col-xs-7">\n                    <img src="images/ipad.png" class="animated fadeInRightBig">\n                </div>\n            </div>\n\n        </div>\n        <a class="left carousel-control" href="#c-slide" data-slide="prev">\n            <i class="fa fa-angle-left"></i>\n        </a>\n        <a class="right carousel-control" href="#c-slide" data-slide="next">\n            <i class="fa fa-angle-right"></i>\n        </a>\n    </div>\n    <div class="bg-light dker">\n        <div class="container wrapper">\n            <div class="m-t-lg m-b-lg text-center">\n                  :\n                <a href="https://github.com/AristosGroup/kvazar" target="_blank"\n                   class="btn btn-lg btn-github m-r-sm m-l-sm m-b-sm m-t-sm"><i class="fa fa-github"></i> Github</a>\n                <a href="https://twitter.com/AkAristos" target="_blank"\n                   class="btn btn-lg btn-twitter m-r-sm m-l-sm m-b-sm m-t-sm">Twitter <i class="fa fa-twitter"></i></a>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="history">\n    <div class="container">\n        <div class="m-xl text-center wrapper">\n            <h2></h2>\n\n            <div >\n\n            <p>\n                    -    .<br/>\n                   ,    ,     ,  \n                 .<br/>\n                    : , , , ,     \n                 =)<br/>\n                    :  , , , .</p>\n\n            <p>\n                       ,       .</p>\n             ,        - ,  \n            .<br/><br/>\n              ,    .\n             , ,   ,  .\n                  ,   .<br/>\n                   todo-.\n              ,     , ,     , \n                 .<br/>\n            : wunderlist, asana, any.do  .\n            <br/><br/>\n\n                <img src="/images/asana.png" />\n                <br/><br/>\n             ,    ,     - \n                  .<br/>\n                 ,     -   ,  \n            .<br/>\n                ,     :    \n            ,       .<br/>\n            : redmine, jira.<br/><br/>\n                <img src="/images/redmine.png" />\n\n            <br/><br/>\n                ,   :<br/>\n            youtrack, pivotaltracker, targetprocess   .<br/>\n\n              : , ,         .\n            <br/><br/>\n\n                         .<br/>\n              -    ,        .\n             2 :  ,   .<br/>\n            2  ,         <a href="http://meteor.com"><strong>Meteor</strong></a>,\n                    .<br/>\n               ,         ,   \n            =)<br/><br/>\n\n              ,    ,      .   <br/>   <br/><br/>\n            <strong>      -      ,  \n             -,         ,    \n            .  </strong>  <br/><br/>\n                 ,     ,       \n                    .   <br/><br/>\n               ,     ,        \n            - .   <br/><br/>\n                   ,     .\n\n                <br/><br/>  <br/><br/>\n                  -   .\n\n                <h3>, KVAZAR</h3>\n            </div>\n        </div>\n\n    </div>\n</div>\n\n\n<div id="ideas" class="bg-light">\n    <div class="container">\n        <div class="m-xl text-center wrapper">\n            <h2>  </h2>\n            <!--  <p class="text-muted">Lightweight with rich components</p>-->\n        </div>\n        <div class="row bg-info">\n            <div class="col-sm-4 wrapper-xl lter" data-ride="animated" data-animation="fadeInLeft">\n                <p class="text-center">\n              <span class="fa fa-stack fa fa-2x">\n                <i class="fa fa-circle fa fa-stack-base text-white"></i>\n                <i class="fa fa-tasks text-info"></i>\n              </span>\n                </p>\n\n                <div>\n                    <h3 class="text-center">     </h3>\n\n                    <p>\n                               ,      \n                               .\n                                    \n                         ?<br/>\n                        Kvazar   ,           .</p>\n                </div>\n            </div>\n            <div class="col-sm-4 wrapper-xl" data-ride="animated" data-animation="fadeInUp" data-delay="250">\n                <p class="text-center">\n              <span class="fa fa-stack fa fa-2x">\n                <i class="fa fa-circle fa fa-stack-base text-white"></i>\n                <i class="fa fa-bolt text-info"></i>\n              </span>\n                </p>\n\n                <div>\n                    <h3 class="text-center">  </h3>\n\n                    <p>\n                            - ,     .<br/>\n                           ,         \n                        .<br/>\n                            -    !     \n                         .<br/>\n                    </p>\n                </div>\n            </div>\n            <div class="col-sm-4 wrapper-xl dker" data-ride="animated" data-animation="fadeInRight" data-delay="500">\n                <p class="text-center">\n              <span class="fa fa-stack fa fa-2x">\n                <i class="fa fa-circle fa fa-stack-base text-white"></i>\n                <i class="fa fa-desktop text-info"></i>\n              </span>\n                </p>\n\n                <div>\n                    <h3 class="text-center">   </h3>\n\n                    <p>\n                             .<br/>\n                               ,     \n                            .<br/>\n                            ,         .  \n                         " "!\n                        <br/><br/><br/><br/>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="container">\n        <div class="row">\n            <div class="col-sm-4 wrapper-xl dk" data-ride="animated" data-animation="fadeInRight" data-delay="500">\n                <p class="text-center">\n              <span class="fa fa-stack fa fa-2x">\n                <i class="fa fa-circle fa fa-stack-base text-white"></i>\n                <i class="fa fa-columns text-info"></i>\n              </span>\n                </p>\n\n                <div>\n                    <h3 class="text-center"> </h3>\n\n                    <p>\n                         Kvazar        .<br/>\n                          ,\n                        ,\n                        Roadmaps,\n                         ,\n                        ,\n                        , ,  ,\n                           ,\n                         Agile software development,\n                              ,    \n                         ,      . .\n                        <br/><br/><br/>\n                    </p>\n                </div>\n            </div>\n            <div class="col-sm-4 wrapper-xl" data-ride="animated" data-animation="fadeInDown" data-delay="750">\n                <p class="text-center">\n              <span class="fa fa-stack fa fa-2x">\n                <i class="fa fa-circle fa fa-stack-base text-white"></i>\n                <i class="fa fa-clock-o text-info"></i>\n              </span>\n                </p>\n\n                <div>\n                    <h3 class="text-center"> </h3>\n\n                    <p>\n                              .<br/>\n                           ,       , ?!\n                        -     -     ,     \n                        ,    ,       "" - !<br/>\n                          Kvazar   ,   .</p>\n                </div>\n            </div>\n            <div class="col-sm-4 wrapper-xl dker" data-ride="animated" data-animation="fadeInLeft" data-delay="1000">\n                <p class="text-center"><span class="fa fa-stack fa fa-2x">\n                <i class="fa fa-circle fa fa-stack-base text-white"></i>\n                <i class="fa fa-thumbs-up text-info"></i>\n              </span>\n                </p>\n\n                <div>\n                    <h3 class="text-center">  </h3>\n\n                    <p>\n                         API   <br/>\n                           100% <br/>\n                         .     <br/>\n                          . Dropbox, Google drive, google calendar  <br/>\n                             .\n                        <br/><br/><br/><br/><br/><br/>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="features" class="bg-white">\n    <div class="container">\n        <div class="m-xl text-center wrapper">\n            <h2> </h2>\n\n            <p class="text-muted">Coming soon...</p>\n        </div>\n\n    </div>\n\n</div>\n\n<div id="roadmap" class="bg-white clearfix">\n    <div class="m-xl text-center wrapper">\n        <h2>Roadmap</h2>\n\n        <p>Coming soon..</p>\n    </div>\n    <div class="container m-xl">\n        <div class="col-sm-4">\n            <section class="panel text-center" data-ride="animated" data-animation="fadeInLeftBig">\n                <header class="panel-heading bg-light lter">\n                    <h3 class="m-t-sm">First preview</h3>\n\n                    <p>     </p>\n                </header>\n                <ul class="list-group">\n                    <li class="list-group-item text-center bg-light lt">\n                        <span class="text-danger font-bold h1">1 april 2014</span>\n                    </li>\n                    <li class="list-group-item">\n                        Dashboard\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                </ul>\n                <footer class="panel-footer">\n                    <!--   <a href="#" class="btn btn-info"></a>-->\n                </footer>\n            </section>\n        </div>\n        <div class="col-sm-4">\n            <section class="panel text-center m-t-n" data-ride="animated" data-animation="fadeInDown" data-delay="400">\n                <header class="panel-heading bg-success no-border">\n                    <h3 class="m-t-sm">First release</h3>\n\n                    <p>   </p>\n                </header>\n                <ul class="list-group">\n                    <li class="list-group-item text-center bg-light lt">\n                        <div class="padder-v">\n                            <span class="text-danger font-bold h1"></span>\n                        </div>\n                    </li>\n                    <li class="list-group-item">\n                        roadmaps\n                    </li>\n                    <li class="list-group-item">\n                        reports\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                </ul>\n                <footer class="panel-footer">\n                    <!--<a href="#" class="btn btn-info"></a>-->\n                </footer>\n            </section>\n        </div>\n        <div class="col-sm-4">\n            <section class="panel text-center" data-ride="animated" data-animation="fadeInRightBig" data-delay="200">\n                <header class="panel-heading bg-light lter">\n                    <h3 class="m-t-sm">After first release</h3>\n\n                    <p></p>\n                </header>\n                <ul class="list-group">\n                    <li class="list-group-item text-center bg-light lt">\n                        <span class="text-danger font-bold h1"></span>\n                    </li>\n                    <li class="list-group-item">\n                        \n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                    <li class="list-group-item">\n\n                    </li>\n                </ul>\n                <footer class="panel-footer">\n                    <!-- <a href="#" class="btn btn-info"></a>-->\n                </footer>\n            </section>\n        </div>\n    </div>\n</div>\n\n\n<div id="demo" class="bg-light b-t b-b clearfix">\n    <div class="container text-center m-xl" data-ride="animated" data-animation="fadeIn">\n        <h2>Demo</h2>\n\n        <p>Coming soon...</p>\n        <!--        <form class="form-inline m-xl">\n                    <div class="form-group">\n                        <input class="form-control input-lg" placeholder="Your email">\n                    </div>\n                    <button type="submit" class="btn btn-white btn-lg">Subscribe</button>\n                </form>-->\n    </div>\n</div>\n</section>\n<div class="bg-white">\n    <div class="container wrapper">\n        <div class="m-t-lg m-b-lg text-center">\n              :\n            <a href="https://github.com/AristosGroup/kvazar" target="_blank"\n               class="btn btn-lg btn-github m-r-sm m-l-sm m-b-sm m-t-sm"><i class="fa fa-github"></i> Github</a>\n            <a href="https://twitter.com/AkAristos" target="_blank"\n               class="btn btn-lg btn-twitter m-r-sm m-l-sm m-b-sm m-t-sm">Twitter <i class="fa fa-twitter"></i></a>\n        </div>\n    </div>\n</div>']))}(),function(){Template.__define__("myWork",Package.handlebars.Handlebars.json_ast_to_func(['<section class="hbox stretch">\n        ',[">","taskBar"],"\n\n        ",[">","tasksList"],"\n\n        ",[">","taskDetail"],"\n\n    </section>"]))}(),function(){Template.__define__("userprofile",Package.handlebars.Handlebars.json_ast_to_func(['<section class="hbox stretch">\n        ',[">","taskBar"],"\n\n        ",[">","tasksList"],"\n\n        ",[">","taskDetail"],"\n\n    </section>"]))}(),function(){Template.__define__("roadmap",Package.handlebars.Handlebars.json_ast_to_func(['<section class="hbox stretch">\n        ',[">","taskBar"],"\n\n        ",[">","tasksList"],"\n\n        ",[">","taskDetail"],"\n\n    </section>"]))}(),function(){Template.__define__("markdownPreview",Package.handlebars.Handlebars.json_ast_to_func(["#This is a header\n** **\n** this is a paragraph **"]))}(),function(){Template.__define__("taskDetail",Package.handlebars.Handlebars.json_ast_to_func(['<aside class="bg-white hide col-lg-6 b-l  ',["{",[[0,"detailOpen"]]],'" id="task-detail">\n\n    ',["#",[[0,"with"],[0,"currentTask"]],['\n    <section class="vbox">\n\n        <section class="scrollable w-f">\n            <div class="wrapper b-b">\n                <a href="#" data-toggle="class" class="pull-left m-r-xs"><span class="label bg-primary">Task</span></a>\n\n                <div class="pull-right">\n                    <div class="m-b-sm ">\n                        <div class="btn-group">\n                            ',["#",[[0,"if"],[0,"nextStatus"]],['<button type="button" class="btn btn-sm btn-success change-status ',["{",[[0,"nextStatus","code"]]],'" data-next-status="',["{",[[0,"nextStatus","code"]]],'">',["{",[[0,"nextStatus","title"]]],"</button>"]],'\n                            <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown">\n                                <span class="caret"></span></button>\n                            <ul class="dropdown-menu pull-right">\n                                <li><a href="#">Action</a></li>\n                                <li><a href="#">Another action</a></li>\n                                <li><a href="#">Something else here</a></li>\n                                <li class="divider"></li>\n                                <li><a href="#">Pause</a></li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                <h4 class="m-n">',["{",[[0,"subject"]]],'</h4>\n            </div>\n\n            <div class="text-sm padder m-t">\n                <div class="block clearfix m-b">\n                    <div class="col-sm-8">\n                        <div class="form-group">\n                            <div class="controls controls-row select2-container">\n                                <a href="#" id="projects" data-type="select2"   data-title="Select project"></a>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-sm-2 col-sm-offset-2">     <div class="controls controls-row select2-container">\n                        <a href="#" id="categories" data-type="select2"   data-title="Select category "></a>\n                    </div></div>\n\n                    </div></div>\n                    <div class="line pull-in"></div>\n\n                    <div class="text-sm padder m-t">\n                <div class="block clearfix m-b">\n                    <a href="#" class="thumb-xs inline"><img src="/images/avatar.jpg" class="img-circle"></a>\n                  <span class="inline m-t-xs">Mika Sokeil\n                  &lt;mica_sokeil@gmail.com&gt; to me</span>\n\n                    <div class="pull-right inline">May 12 (<em>',["{",[[0,"createdAtfromNow"]]],'</em>)\n                        <div class="btn-group">\n                            <button class="btn btn-white btn-xs" data-toggle="tooltip" data-title="Reply"><i\n                                    class="fa fa-reply"></i></button>\n                            <button class="btn btn-white btn-xs dropdown-toggle" data-toggle="dropdown"><span\n                                    class="caret"></span></button>\n                            <ul class="dropdown-menu pull-right">\n                                <li><a href="#"><i class="fa fa-reply"></i> Reply</a></li>\n                                <li><a href="#"><i class="fa fa-signout"></i> Forward</a></li>\n                                <li><a href="#">Add Mika Sokeil to contact list</a></li>\n                                <li><a href="#">Mark as unread</a></li>\n                                <li class="divider"></li>\n                                <li><a href="#">Delete this message</a></li>\n                                <li><a href="#">Report spam</a></li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                <div class="line pull-in"></div>\n                <p>Mr. Soe</p>\n\n                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id neque quam. Aliquam sollicitudin\n                    venenatis ipsum ac feugiat. Vestibulum ullamcorper sodales nisi nec condimentum. Mauris convallis\n                    mauris at pellentesque volutpat. Phasellus at ultricies neque, quis malesuada augue. Donec eleifend\n                    condimentum nisl eu consectetur. Integer eleifend, nisl venenatis consequat iaculis, lectus arcu\n                    malesuada sem, dapibus porta quam lacus eu neque.</p>\n                <blockquote>\n                    <em>Morbi nec nunc condimentum, egestas dui nec, fermentum diam. Vivamus vel tincidunt libero, vitae\n                        elementum ligula. Nunc placerat purus quam, ac adipiscing arcu rutrum eu. Vestibulum adipiscing\n                        ut augue ut auctor. Vestibulum nec lorem imperdiet nibh mollis gravida ut a justo.<br><br>Vestibulum\n                        ullamcorper sodales nisi nec condimentum. Mauris convallis mauris at pellentesque volutpat.\n                        Phasellus at ultricies neque, quis malesuada augue. Donec eleifend condimentum nisl eu\n                        consectetur. Integer eleifend, nisl venenatis consequat iaculis</em>\n                </blockquote>\n                <div class="show">\n                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id neque quam. Aliquam\n                        sollicitudin venenatis ipsum ac feugiat. Vestibulum ullamcorper sodales nisi nec condimentum.\n                        Mauris convallis mauris at pellentesque volutpat. Phasellus at ultricies neque, quis malesuada\n                        augue. Donec eleifend condimentum nisl eu consectetur. Integer eleifend, nisl venenatis\n                        consequat iaculis, lectus arcu malesuada sem, dapibus porta quam lacus eu neque.</p>\n\n                    <p>Duis non malesuada est, quis congue nibh. Pellentesque habitant morbi tristique senectus et netus\n                        et malesuada fames ac turpis egestas.</p>\n\n                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id neque quam. Aliquam\n                        sollicitudin venenatis ipsum ac feugiat. Vestibulum ullamcorper sodales nisi nec condimentum.\n                        Mauris convallis mauris at pellentesque volutpat. Phasellus at ultricies neque, quis malesuada\n                        augue. Donec eleifend condimentum nisl eu consectetur. Integer eleifend, nisl venenatis\n                        consequat iaculis, lectus arcu malesuada sem, dapibus porta quam lacus eu neque.</p>\n\n                    <p>Duis non malesuada est, quis congue nibh. Pellentesque habitant morbi tristique senectus et netus\n                        et malesuada fames ac turpis egestas.</p>\n\n                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id neque quam. Aliquam\n                        sollicitudin venenatis ipsum ac feugiat. Vestibulum ullamcorper sodales nisi nec condimentum.\n                        Mauris convallis mauris at pellentesque volutpat. Phasellus at ultricies neque, quis malesuada\n                        augue. Donec eleifend</p>\n                </div>\n                <p>Best Regards<br>Mical</p>\n            </div>\n            <div class="padder">\n                <div class="panel text-sm bg-light">\n                    <div class="panel-body">\n                        Click here to <a href="#">Reply</a> or <a href="#">Forward</a>\n                    </div>\n                </div>\n            </div>\n        </section>\n\n        <footer class="footer b-t bg-white-only">\n            <form class="m-t-sm">\n                <div class="input-group">\n                <span>Assigned to </span>  Owner <span></span> <span>Followers</span>\n                </div>\n            </form>\n        </footer>\n    </section>\n    ']],"\n    </aside>"]))
}(),function(){Template.__define__("tasksList",Package.handlebars.Handlebars.json_ast_to_func(['<aside class="bg-light lter">\n        <section class="vbox">\n            <header class="bg-light dker header clearfix">\n                <div class="btn-group pull-right">\n                    <div class="m-b-sm">\n                        <div class="btn-group" data-toggle="buttons">\n                            <label class="btn btn-sm btn-white">\n                                <input type="radio" name="options" id="option1"><i class="fa fa-trello"></i>\n                            </label>\n                            <label class="btn btn-sm btn-white">\n                                <input type="radio" name="options" id="option2"><i class="fa fa-columns"></i>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class="btn-toolbar">\n                    <div class="btn-group select">\n                        <button class="btn btn-white btn-sm dropdown-toggle" data-toggle="dropdown">\n                            <span class="dropdown-label" style="width: 65px;">Filter</span>\n                            <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu text-left text-sm">\n                            <li><a href="#">Read</a></li>\n                            <li><a href="#">Unread</a></li>\n                            <li><a href="#">Starred</a></li>\n                            <li><a href="#">Unstarred</a></li>\n                        </ul>\n                    </div>\n                    <div class="btn-group">\n                        <button class="btn btn-sm btn-white" data-toggle="tooltip" data-placement="bottom"\n                                data-title="Refresh"><i\n                                class="fa fa-refresh"></i></button>\n                    </div>\n                </div>\n            </header>\n            <section class="scrollable">\n                <ul class="list-group no-radius m-b-none m-t-n-xxs list-group-alt list-group-lg sortable">\n                    ',["#",[[0,"each"],[0,"tasksListAll"]],["\n                    ",[">","taskListItem"],"\n                    "]],"\n                </ul>\n            </section>\n            ",["#",[[0,"constant"]],['\n            <footer class="footer b-t bg-white-only">\n                <form class="m-t-sm">\n                    <div class="input-group">\n                        <input id="new-simple-task" type="text" class="input-sm form-control input-s-sm"\n                               placeholder="Add new task">\n\n                        <div class="input-group-btn">\n                            <button class="btn btn-sm btn-success"><i class="fa fa-ticket"></i></button>\n                        </div>\n                    </div>\n                </form>\n            </footer>\n            ']],"\n        </section>\n    </aside>"])),Template.__define__("taskListItem",Package.handlebars.Handlebars.json_ast_to_func(['<li class="list-group-item ',["{",[[0,"isActive"]]],'" style="border-right-color: ',["{",[[0,"categoryColor"]]],';" id="',["{",[[0,"_id"]]],'">\n        <a href="#" class="thumb-xs pull-left m-r-sm">\n            <img src="/images/avatar_default.jpg" class="img-circle">\n        </a>\n        <a href="#" class="clear">\n            <strong>Drew Wllon</strong> <span class="label label-sm bg-primary text-uc">work</span>\n            <span>',["{",[[0,"subject"]]],' </span>\n            <small class="pull-right">',["{",[[0,"createdAt"]]],"</small>\n        </a>\n    </li>"]))}(),function(){!function(e){function t(){o=!1;for(var t=0;t<i.length;t++){var r=e(i[t]).filter(function(){return e(this).is(":appeared")});if(r.trigger("appear",[r]),n){var s=n.not(r);s.trigger("disappear",[s])}n=r}}var n,i=[],r=!1,o=!1,s={interval:250,force_process:!1},a=e(window);e.expr[":"].appeared=function(t){var n=e(t);if(!n.is(":visible"))return!1;var i=a.scrollLeft(),r=a.scrollTop(),o=n.offset(),s=o.left,l=o.top;return l+n.height()>=r&&l-(n.data("appear-top-offset")||0)<=r+a.height()&&s+n.width()>=i&&s-(n.data("appear-left-offset")||0)<=i+a.width()?!0:!1},e.fn.extend({appear:function(n){var a=e.extend({},s,n||{}),l=this.selector||this;if(!r){var c=function(){o||(o=!0,setTimeout(t,a.interval))};e(window).scroll(c).resize(c),r=!0}return a.force_process&&setTimeout(t,a.interval),i.push(l),e(l)}}),e.extend({force_appear:function(){return r?(t(),!0):!1}})}(jQuery)}(),function(){function e(){if(document.body){var e=document.body,t=document.documentElement,n=window.innerHeight,r=e.scrollHeight;if(S=document.compatMode.indexOf("CSS")>=0?t:e,h=e,k=!0,top!=self)_=!0;else if(r>n&&(e.offsetHeight<=n||t.offsetHeight<=n)&&(S.style.height="auto",S.offsetHeight<=n)){var o=document.createElement("div");o.style.clear="both",e.appendChild(o)}x||(e.style.backgroundAttachment="scroll",t.style.backgroundAttachment="scroll"),b&&a("keydown",i)}}function t(e,t,n,i){if(i||(i=1e3),c(t,n),E.push({x:t,y:n,lastX:0>t?.99:-.99,lastY:0>n?.99:-.99,start:+new Date}),!D){var r=function(){for(var o=+new Date,s=0,a=0,l=0;l<E.length;l++){var c=E[l],u=o-c.start,h=u>=p,m=h?1:u/p;g&&(m=d(m));var v=c.x*m-c.lastX>>0,y=c.y*m-c.lastY>>0;s+=v,a+=y,c.lastX+=v,c.lastY+=y,h&&(E.splice(l,1),l--)}if(t){var b=e.scrollLeft;e.scrollLeft+=s,s&&e.scrollLeft===b&&(t=0)}if(n){var w=e.scrollTop;e.scrollTop+=a,a&&e.scrollTop===w&&(n=0)}t||n||(E=[]),E.length?setTimeout(r,i/f+1):D=!1};setTimeout(r,0),D=!0}}function n(n){k||e();var i=n.target,r=s(i);if(!r||n.defaultPrevented||l(h,"embed")||l(i,"embed")&&/\.pdf/i.test(i.src))return!0;var o=n.wheelDeltaX||0,a=n.wheelDeltaY||0;o||a||(a=n.wheelDelta||0),Math.abs(o)>1.2&&(o*=m/120),Math.abs(a)>1.2&&(a*=m/120),t(r,-o,-a),n.preventDefault()}function i(e){var n=e.target,i=e.ctrlKey||e.altKey||e.metaKey;if(/input|textarea|embed/i.test(n.nodeName)||n.isContentEditable||e.defaultPrevented||i)return!0;if(l(n,"button")&&e.keyCode===T.spacebar)return!0;var r,o=0,a=0,c=s(h),u=c.clientHeight;switch(c==document.body&&(u=window.innerHeight),e.keyCode){case T.up:a=-w;break;case T.down:a=w;break;case T.spacebar:r=e.shiftKey?1:-1,a=-r*u*.9;break;case T.pageup:a=.9*-u;break;case T.pagedown:a=.9*u;break;case T.home:a=-c.scrollTop;break;case T.end:var d=c.scrollHeight-c.scrollTop-u;a=d>0?d+10:0;break;case T.left:o=-w;break;case T.right:o=w;break;default:return!0}t(c,o,a),e.preventDefault()}function r(e){h=e.target}function o(e,t){for(var n=e.length;n--;)N[A(e[n])]=t;return t}function s(e){var t=[],n=S.scrollHeight;do{var i=N[A(e)];if(i)return o(t,i);if(t.push(e),n===e.scrollHeight){if(!_||S.clientHeight+10<n)return o(t,document.body)}else if(e.clientHeight+10<e.scrollHeight&&(overflow=getComputedStyle(e,"").getPropertyValue("overflow"),"scroll"===overflow||"auto"===overflow))return o(t,e)}while(e=e.parentNode)}function a(e,t,n){window.addEventListener(e,t,n||!1)}function l(e,t){return e.nodeName.toLowerCase()===t.toLowerCase()}function c(e,t){e=e>0?1:-1,t=t>0?1:-1,(C.x!==e||C.y!==t)&&(C.x=e,C.y=t,E=[])}function u(e){var t,n,i;return e*=v,1>e?t=e-(1-Math.exp(-e)):(n=Math.exp(-1),e-=1,i=1-Math.exp(-e),t=n+i*(1-n)),t*y}function d(e){return e>=1?1:0>=e?0:(1==y&&(y/=u(1)),u(e))}var h,f=150,p=500,m=150,g=!0,v=6,y=1,b=!0,w=50,_=!1,C={x:0,y:0},k=!1,x=!0,S=document.documentElement,T={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36},E=[],D=!1,N={};setInterval(function(){N={}},1e4);var A=function(){var e=0;return function(t){return t.ssc_uniqueID||(t.ssc_uniqueID=e++)}}(),O=/chrome/.test(navigator.userAgent.toLowerCase());O&&(a("mousedown",r),a("mousewheel",n),a("load",e))}(),function(){!function(e){"use strict";var t=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],n=function(t,n){t.addClass("bootstrap-colorpalette");var i=[];e.each(n,function(t,n){i.push("<div>"),e.each(n,function(e,t){var n=['<button type="button" class="btn-color" style="background-color:',t,'" data-value="',t,'" title="',t,'"></button>'].join("");i.push(n)}),i.push("</div>")}),t.html(i.join(""))},i=function(t){t.element.on("click",function(n){var i=e(n.target),r=i.closest(".btn-color");if(r[0]){var o=r.attr("data-value");t.value=o,t.element.trigger({type:"selectColor",color:o,element:t.element})}})},r=function(e,r){this.element=e,n(e,r&&r.colors||t),i(this)};e.fn.extend({colorPalette:function(t){return this.each(function(){var n=e(this),i=n.data("colorpalette");i||n.data("colorpalette",new r(n,t))}),this}})}(jQuery)}(),function(){+function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.checkbox.defaults,n),this.$label=this.$element.parent(),this.$icon=this.$label.find("i"),this.$chk=this.$label.find("input[type=checkbox]"),this.setState(this.$chk),this.$chk.on("change",e.proxy(this.itemchecked,this))};t.prototype={constructor:t,setState:function(e){var t=e.is(":checked"),n=e.is(":disabled");this.$icon.removeClass("checked").removeClass("disabled"),t===!0&&this.$icon.addClass("checked"),n===!0&&this.$icon.addClass("disabled")},enable:function(){this.$chk.attr("disabled",!1),this.$icon.removeClass("disabled")},disable:function(){this.$chk.attr("disabled",!0),this.$icon.addClass("disabled")},toggle:function(){this.$chk.click()},itemchecked:function(t){var n=e(t.target);this.setState(n)}},e.fn.checkbox=function(n,i){var r,o=this.each(function(){var o=e(this),s=o.data("checkbox"),a="object"==typeof n&&n;s||(s=new t(this,a),o.data("checkbox",s)),"string"==typeof n&&(r=s[n](i))});return void 0===r?o:r},e.fn.checkbox.defaults={},e.fn.checkbox.Constructor=t,e(function(){})}(window.jQuery),+function(e){"use strict";function t(t,n){return(t.textContent||t.innerText||e(t).text()||"").toLowerCase()===(n||"").toLowerCase()}e.expr[":"].fuelTextExactCI=e.expr.createPseudo?e.expr.createPseudo(function(e){return function(n){return t(n,e)}}):function(e,n,i){return t(e,i[3])}}(window.jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.combobox.defaults,n),this.$element.on("click","a",e.proxy(this.itemclicked,this)),this.$element.on("change","input",e.proxy(this.inputchanged,this)),this.$input=this.$element.find("input"),this.$button=this.$element.find(".btn"),this.setDefaultSelection()};t.prototype={constructor:t,selectedItem:function(){var t=this.$selectedItem,n={};if(t){var i=this.$selectedItem.text();n=e.extend({text:i},this.$selectedItem.data())}else n={text:this.$input.val()};return n},selectByText:function(e){var t="li:fuelTextExactCI("+e+")";this.selectBySelector(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);"undefined"!=typeof t[0]?(this.$selectedItem=t,this.$input.val(this.$selectedItem.text())):this.$selectedItem=null},setDefaultSelection:function(){var e="li[data-selected=true]:first",t=this.$element.find(e);t.length>0&&(this.selectBySelector(e),t.removeData("selected"),t.removeAttr("data-selected"))},enable:function(){this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$input.attr("disabled",!0),this.$button.addClass("disabled")},itemclicked:function(t){this.$selectedItem=e(t.target).parent(),this.$input.val(this.$selectedItem.text()).trigger("change",{synthetic:!0});var n=this.selectedItem();this.$element.trigger("changed",n),t.preventDefault()},inputchanged:function(t,n){if(!n||!n.synthetic){var i=e(t.target).val();this.selectByText(i);var r=this.selectedItem();0===r.text.length&&(r={text:i}),this.$element.trigger("changed",r)}}},e.fn.combobox=function(n,i){var r,o=this.each(function(){var o=e(this),s=o.data("combobox"),a="object"==typeof n&&n;s||o.data("combobox",s=new t(this,a)),"string"==typeof n&&(r=s[n](i))});return void 0===r?o:r},e.fn.combobox.defaults={},e.fn.combobox.Constructor=t,e(function(){e(window).on("load",function(){e(".combobox").each(function(){var t=e(this);t.data("combobox")||t.combobox(t.data())})}),e("body").on("mousedown.combobox.data-api",".combobox",function(){var t=e(this);t.data("combobox")||t.combobox(t.data())})})}(window.jQuery),+function(e){"use strict";var t=22,n=function(t,n){this.$element=e(t),this.$thead=this.$element.find("thead"),this.$tfoot=this.$element.find("tfoot"),this.$footer=this.$element.find("tfoot th"),this.$footerchildren=this.$footer.children().show().css("visibility","hidden"),this.$topheader=this.$element.find("thead th"),this.$searchcontrol=this.$element.find(".datagrid-search"),this.$filtercontrol=this.$element.find(".filter"),this.$pagesize=this.$element.find(".grid-pagesize"),this.$pageinput=this.$element.find(".grid-pager input"),this.$pagedropdown=this.$element.find(".grid-pager .dropdown-menu"),this.$prevpagebtn=this.$element.find(".grid-prevpage"),this.$nextpagebtn=this.$element.find(".grid-nextpage"),this.$pageslabel=this.$element.find(".grid-pages"),this.$countlabel=this.$element.find(".grid-count"),this.$startlabel=this.$element.find(".grid-start"),this.$endlabel=this.$element.find(".grid-end"),this.$tbody=e("<tbody>").insertAfter(this.$thead),this.$colheader=e("<tr>").appendTo(this.$thead),this.options=e.extend(!0,{},e.fn.datagrid.defaults,n),this.options.dataOptions.pageSize=this.$pagesize.hasClass("select")?parseInt(this.$pagesize.select("selectedItem").value,10):parseInt(this.$pagesize.val(),10),this.$searchcontrol.length<=0&&(this.$searchcontrol=this.$element.find(".search")),this.columns=this.options.dataSource.columns(),this.$nextpagebtn.on("click",e.proxy(this.next,this)),this.$prevpagebtn.on("click",e.proxy(this.previous,this)),this.$searchcontrol.on("searched cleared",e.proxy(this.searchChanged,this)),this.$filtercontrol.on("changed",e.proxy(this.filterChanged,this)),this.$colheader.on("click","th",e.proxy(this.headerClicked,this)),this.$pagesize.hasClass("select")?this.$pagesize.on("changed",e.proxy(this.pagesizeChanged,this)):this.$pagesize.on("change",e.proxy(this.pagesizeChanged,this)),this.$pageinput.on("change",e.proxy(this.pageChanged,this)),this.renderColumns(),this.options.stretchHeight&&this.initStretchHeight(),this.renderData()};n.prototype={constructor:n,renderColumns:function(){var t=this;this.$footer.attr("colspan",this.columns.length),this.$topheader.attr("colspan",this.columns.length);var n="";e.each(this.columns,function(e,t){n+='<th data-property="'+t.property+'"',t.sortable&&(n+=' class="sortable"'),n+=">"+t.label+"</th>"}),t.$colheader.append(n)},updateColumns:function(e,t){this._updateColumns(this.$colheader,e,t),this.$sizingHeader&&this._updateColumns(this.$sizingHeader,this.$sizingHeader.find("th").eq(e.index()),t)},_updateColumns:function(t,n,i){var r="asc"===i?"icon-chevron-up":"icon-chevron-down";t.find("i.datagrid-sort").remove(),t.find("th").removeClass("sorted"),e("<i>").addClass(r+" datagrid-sort").appendTo(n),n.addClass("sorted")},updatePageDropdown:function(e){for(var t="",n=1;n<=e.pages;n++)t+="<li><a>"+n+"</a></li>";this.$pagedropdown.html(t)},updatePageButtons:function(e){1===e.page?this.$prevpagebtn.attr("disabled","disabled"):this.$prevpagebtn.removeAttr("disabled"),e.page===e.pages?this.$nextpagebtn.attr("disabled","disabled"):this.$nextpagebtn.removeAttr("disabled")},renderData:function(){var t=this;this.$tbody.html(this.placeholderRowHTML(this.options.loadingHTML)),this.options.dataSource.data(this.options.dataOptions,function(n){var i=1===n.count?t.options.itemText:t.options.itemsText,r="";t.$footerchildren.css("visibility",function(){return n.count>0?"visible":"hidden"}),t.$pageinput.val(n.page),t.$pageslabel.text(n.pages),t.$countlabel.text(n.count+" "+i),t.$startlabel.text(n.start),t.$endlabel.text(n.end),t.updatePageDropdown(n),t.updatePageButtons(n),e.each(n.data,function(n,i){r+="<tr>",e.each(t.columns,function(e,t){r+="<td>"+i[t.property]+"</td>"}),r+="</tr>"}),r||(r=t.placeholderRowHTML("0 "+t.options.itemsText)),t.$tbody.html(r),t.stretchHeight(),t.$element.trigger("loaded")})},placeholderRowHTML:function(e){return'<tr><td style="text-align:center;padding:20px;border-bottom:none;" colspan="'+this.columns.length+'">'+e+"</td></tr>"},headerClicked:function(t){var n=e(t.target);if(n.hasClass("sortable")){var i=this.options.dataOptions.sortDirection,r=this.options.dataOptions.sortProperty,o=n.data("property");r===o?this.options.dataOptions.sortDirection="asc"===i?"desc":"asc":(this.options.dataOptions.sortDirection="asc",this.options.dataOptions.sortProperty=o),this.options.dataOptions.pageIndex=0,this.updateColumns(n,this.options.dataOptions.sortDirection),this.renderData()}},pagesizeChanged:function(t,n){this.options.dataOptions.pageSize=n?parseInt(n.value,10):parseInt(e(t.target).val(),10),this.options.dataOptions.pageIndex=0,this.renderData()},pageChanged:function(t){var n=parseInt(e(t.target).val(),10);n=isNaN(n)?1:n;var i=this.$pageslabel.text();this.options.dataOptions.pageIndex=n>i?i-1:n-1,this.renderData()},searchChanged:function(e,t){this.options.dataOptions.search=t,this.options.dataOptions.pageIndex=0,this.renderData()},filterChanged:function(e,t){this.options.dataOptions.filter=t,this.options.dataOptions.pageIndex=0,this.renderData()},previous:function(){this.options.dataOptions.pageIndex--,this.renderData()},next:function(){this.options.dataOptions.pageIndex++,this.renderData()},reload:function(){this.options.dataOptions.pageIndex=0,this.renderData()},initStretchHeight:function(){this.$gridContainer=this.$element.parent(),this.$element.wrap('<div class="datagrid-stretch-wrapper">'),this.$stretchWrapper=this.$element.parent(),this.$headerTable=e("<table>").attr("class",this.$element.attr("class")),this.$footerTable=this.$headerTable.clone(),this.$headerTable.prependTo(this.$gridContainer).addClass("datagrid-stretch-header"),this.$thead.detach().appendTo(this.$headerTable),this.$sizingHeader=this.$thead.clone(),this.$sizingHeader.find("tr:first").remove(),this.$footerTable.appendTo(this.$gridContainer).addClass("datagrid-stretch-footer"),this.$tfoot.detach().appendTo(this.$footerTable)},stretchHeight:function(){if(this.$gridContainer){this.setColumnWidths();var e=this.$gridContainer.height(),t=this.$headerTable.outerHeight(),n=this.$footerTable.outerHeight(),i=t+n;this.$stretchWrapper.height(e-i)}},setColumnWidths:function(){function n(n,o){if(n!==r-1){var s=e(o),a=i.eq(n),l=a.width();a.hasClass("sorted")&&"TD"===s.prop("tagName")&&(l+=t),s.width(l)}}if(this.$sizingHeader){this.$element.prepend(this.$sizingHeader);var i=this.$sizingHeader.find("th"),r=i.length;this.$colheader.find("th").each(n),this.$tbody.find("tr:first > td").each(n),this.$sizingHeader.detach()}}},e.fn.datagrid=function(t){return this.each(function(){var i=e(this),r=i.data("datagrid"),o="object"==typeof t&&t;r||i.data("datagrid",r=new n(this,o)),"string"==typeof t&&r[t]()})},e.fn.datagrid.defaults={dataOptions:{pageIndex:0,pageSize:10},loadingHTML:'<div class="progress progress-striped active" style="width:50%;margin:auto;"><div class="bar" style="width:100%;"></div></div>',itemsText:"items",itemText:"item"},e.fn.datagrid.Constructor=n}(window.jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.pillbox.defaults,n),this.$element.on("click","li",e.proxy(this.itemclicked,this))};t.prototype={constructor:t,items:function(){return this.$element.find("li").map(function(){var t=e(this);return e.extend({text:t.text()},t.data())}).get()},itemclicked:function(t){e(t.currentTarget).remove(),t.preventDefault()}},e.fn.pillbox=function(n){var i,r=this.each(function(){var r=e(this),o=r.data("pillbox"),s="object"==typeof n&&n;o||r.data("pillbox",o=new t(this,s)),"string"==typeof n&&(i=o[n]())});return void 0===i?r:i},e.fn.pillbox.defaults={},e.fn.pillbox.Constructor=t,e(function(){e("body").on("mousedown.pillbox.data-api",".pillbox",function(){var t=e(this);t.data("pillbox")||t.pillbox(t.data())})})}(window.jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.radio.defaults,n),this.$label=this.$element.parent(),this.$icon=this.$label.find("i"),this.$radio=this.$label.find("input[type=radio]"),this.groupName=this.$radio.attr("name"),this.setState(this.$radio),this.$radio.on("change",e.proxy(this.itemchecked,this))};t.prototype={constructor:t,setState:function(e){var t=e.is(":checked"),n=e.is(":disabled");t===!0&&this.$icon.addClass("checked"),n===!0&&this.$icon.addClass("disabled")},resetGroup:function(){e("input[name="+this.groupName+"]").next().removeClass("checked")},enable:function(){this.$radio.attr("disabled",!1),this.$icon.removeClass("disabled")},disable:function(){this.$radio.attr("disabled",!0),this.$icon.addClass("disabled")},itemchecked:function(t){var n=e(t.target);this.resetGroup(),this.setState(n)}},e.fn.radio=function(n,i){var r,o=this.each(function(){var o=e(this),s=o.data("radio"),a="object"==typeof n&&n;s||o.data("radio",s=new t(this,a)),"string"==typeof n&&(r=s[n](i))});return void 0===r?o:r},e.fn.radio.defaults={},e.fn.radio.Constructor=t,e(function(){e(window).on("load",function(){e(".radio-custom > input[type=radio]").each(function(){var t=e(this);t.data("radio")||t.radio(t.data())})})})}(window.jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.search.defaults,n),this.$button=this.$element.find("button").on("click",e.proxy(this.buttonclicked,this)),this.$input=this.$element.find("input").on("keydown",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keypressed,this)),this.$icon=this.$element.find("i"),this.activeSearch=""};t.prototype={constructor:t,search:function(e){this.$icon.attr("class","icon-remove"),this.activeSearch=e,this.$element.trigger("searched",e)},clear:function(){this.$icon.attr("class","icon-search"),this.activeSearch="",this.$input.val(""),this.$element.trigger("cleared")},action:function(){var e=this.$input.val(),t=""===e||e===this.activeSearch;this.activeSearch&&t?this.clear():e&&this.search(e)},buttonclicked:function(t){t.preventDefault(),e(t.currentTarget).is(".disabled, :disabled")||this.action()},keypress:function(e){13===e.which&&e.preventDefault()},keypressed:function(e){var t,n;13===e.which?(e.preventDefault(),this.action()):(t=this.$input.val(),n=t&&t===this.activeSearch,this.$icon.attr("class",n?"icon-remove":"icon-search"))},disable:function(){this.$input.attr("disabled","disabled"),this.$button.addClass("disabled")},enable:function(){this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")}},e.fn.search=function(n){return this.each(function(){var i=e(this),r=i.data("search"),o="object"==typeof n&&n;r||i.data("search",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.search.defaults={},e.fn.search.Constructor=t,e(function(){e("body").on("mousedown.search.data-api",".search",function(){var t=e(this);t.data("search")||t.search(t.data())})})}(window.jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.spinner.defaults,n),this.$input=this.$element.find(".spinner-input"),this.$element.on("keyup",this.$input,e.proxy(this.change,this)),this.options.hold?(this.$element.on("mousedown",".spinner-up",e.proxy(function(){this.startSpin(!0)},this)),this.$element.on("mouseup",".spinner-up, .spinner-down",e.proxy(this.stopSpin,this)),this.$element.on("mouseout",".spinner-up, .spinner-down",e.proxy(this.stopSpin,this)),this.$element.on("mousedown",".spinner-down",e.proxy(function(){this.startSpin(!1)},this))):(this.$element.on("click",".spinner-up",e.proxy(function(){this.step(!0)},this)),this.$element.on("click",".spinner-down",e.proxy(function(){this.step(!1)},this))),this.switches={count:1,enabled:!0},this.switches.speed="medium"===this.options.speed?300:"fast"===this.options.speed?100:500,this.lastValue=null,this.render(),this.options.disabled&&this.disable()};t.prototype={constructor:t,render:function(){this.$input.val(this.options.value),this.$input.attr("maxlength",(this.options.max+"").split("").length)},change:function(){var e=this.$input.val();e/1?this.options.value=e/1:(e=e.replace(/[^0-9]/g,""),this.$input.val(e),this.options.value=e/1),this.triggerChangedEvent()},stopSpin:function(){clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent()},triggerChangedEvent:function(){var e=this.value();e!==this.lastValue&&(this.lastValue=e,this.$element.trigger("changed",e),this.$element.trigger("change"))},startSpin:function(t){if(!this.options.disabled){var n=this.switches.count;1===n?(this.step(t),n=1):n=3>n?1.5:8>n?2.5:4,this.switches.timeout=setTimeout(e.proxy(function(){this.iterator(t)},this),this.switches.speed/n),this.switches.count++}},iterator:function(e){this.step(e),this.startSpin(e)},step:function(e){var t=this.options.value,n=e?this.options.max:this.options.min;if(e?n>t:t>n){var i=t+(e?1:-1)*this.options.step;(e?i>n:n>i)?this.value(n):this.value(i)}},value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)?(e=parseFloat(e),this.options.value=e,this.$input.val(e),this):this.options.value},disable:function(){this.options.disabled=!0,this.$input.attr("disabled",""),this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1,this.$input.removeAttr("disabled"),this.$element.find("button").removeClass("disabled")}},e.fn.spinner=function(n,i){var r,o=this.each(function(){var o=e(this),s=o.data("spinner"),a="object"==typeof n&&n;s||o.data("spinner",s=new t(this,a)),"string"==typeof n&&(r=s[n](i))});return void 0===r?o:r},e.fn.spinner.defaults={value:1,min:1,max:999,step:1,hold:!0,speed:"medium",disabled:!1},e.fn.spinner.Constructor=t,e(function(){e("body").on("mousedown.spinner.data-api",".spinner",function(){var t=e(this);t.data("spinner")||t.spinner(t.data())})})}(window.jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.select.defaults,n),this.$element.on("click","a",e.proxy(this.itemclicked,this)),this.$button=this.$element.find(".btn"),this.$label=this.$element.find(".dropdown-label"),this.setDefaultSelection(),"auto"===n.resize&&this.resize()};t.prototype={constructor:t,itemclicked:function(t){this.$selectedItem=e(t.target).parent(),this.$label.text(this.$selectedItem.text());var n=this.selectedItem();this.$element.trigger("changed",n),t.preventDefault()},resize:function(){var t=e("#selectTextSize")[0];t||e("<div/>").attr({id:"selectTextSize"}).appendTo("body");var n=0,i=0;this.$element.find("a").each(function(){var t=e(this),r=t.text(),o=e("#selectTextSize");o.text(r),i=o.outerWidth(),i>n&&(n=i)}),this.$label.width(n)},selectedItem:function(){var t=this.$selectedItem.text();return e.extend({text:t},this.$selectedItem.data())},selectByText:function(e){var t="li a:fuelTextExactCI("+e+")";this.selectBySelector(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.$selectedItem=t,this.$label.text(this.$selectedItem.text())},setDefaultSelection:function(){var e="li[data-selected=true]:first",t=this.$element.find(e);0===t.length?this.selectByIndex(0):(this.selectBySelector(e),t.removeData("selected"),t.removeAttr("data-selected"))},enable:function(){this.$button.removeClass("disabled")},disable:function(){this.$button.addClass("disabled")}},e.fn.select=function(n,i){var r,o=this.each(function(){var o=e(this),s=o.data("select"),a="object"==typeof n&&n;s||o.data("select",s=new t(this,a)),"string"==typeof n&&(r=s[n](i))});return void 0===r?o:r},e.fn.select.defaults={},e.fn.select.Constructor=t,e(function(){e(window).on("load",function(){e(".select").each(function(){var t=e(this);t.data("select")||t.select(t.data())})}),e("body").on("mousedown.select.data-api",".select",function(){var t=e(this);t.data("select")||t.select(t.data())})})}(window.jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.tree.defaults,n),this.$element.on("click",".tree-item",e.proxy(function(e){this.selectItem(e.currentTarget)},this)),this.$element.on("click",".tree-folder-header",e.proxy(function(e){this.selectFolder(e.currentTarget)},this)),this.render()};t.prototype={constructor:t,render:function(){this.populate(this.$element)},populate:function(t){var n=this,i=t.parent().find(".tree-loader:eq(0)");i.show(),this.options.dataSource.data(t.data(),function(r){i.hide(),e.each(r.data,function(e,i){var r;"folder"===i.type?(r=n.$element.find(".tree-folder:eq(0)").clone().show(),r.find(".tree-folder-name").html(i.name),r.find(".tree-loader").html(n.options.loadingHTML),r.find(".tree-folder-header").data(i)):"item"===i.type&&(r=n.$element.find(".tree-item:eq(0)").clone().show(),r.find(".tree-item-name").html(i.name),r.data(i)),t.hasClass("tree-folder-header")?t.parent().find(".tree-folder-content:eq(0)").append(r):t.append(r)}),n.$element.trigger("loaded")})},selectItem:function(t){var n=e(t),i=this.$element.find(".tree-selected"),r=[];this.options.multiSelect?e.each(i,function(t,i){var o=e(i);o[0]!==n[0]&&r.push(e(i).data())}):i[0]!==n[0]&&(i.removeClass("tree-selected").find("i").removeClass("icon-ok").addClass("tree-dot"),r.push(n.data())),n.hasClass("tree-selected")?(n.removeClass("tree-selected"),n.find("i").removeClass("icon-ok").addClass("tree-dot")):(n.addClass("tree-selected"),n.find("i").removeClass("tree-dot").addClass("icon-ok"),this.options.multiSelect&&r.push(n.data())),r.length&&this.$element.trigger("selected",{info:r})},selectFolder:function(t){var n=e(t),i=n.parent();n.find(".icon-folder-close").length?(i.find(".tree-folder-content").children().length?i.find(".tree-folder-content:eq(0)").show():this.populate(n),i.find(".icon-folder-close:eq(0)").removeClass("icon-folder-close").addClass("icon-folder-open"),this.$element.trigger("opened",n.data())):(this.options.cacheItems?i.find(".tree-folder-content:eq(0)").hide():i.find(".tree-folder-content:eq(0)").empty(),i.find(".icon-folder-open:eq(0)").removeClass("icon-folder-open").addClass("icon-folder-close"),this.$element.trigger("closed",n.data()))},selectedItems:function(){var t=this.$element.find(".tree-selected"),n=[];return e.each(t,function(t,i){n.push(e(i).data())}),n}},e.fn.tree=function(n,i){var r,o=this.each(function(){var o=e(this),s=o.data("tree"),a="object"==typeof n&&n;s||o.data("tree",s=new t(this,a)),"string"==typeof n&&(r=s[n](i))});return void 0===r?o:r},e.fn.tree.defaults={multiSelect:!1,loadingHTML:"<div>Loading...</div>",cacheItems:!0},e.fn.tree.Constructor=t}(window.jQuery),+function(e){"use strict";var t=function(t,n){var i;this.$element=e(t),this.options=e.extend({},e.fn.wizard.defaults,n),this.currentStep=1,this.numSteps=this.$element.find("li").length,this.$prevBtn=this.$element.find("button.btn-prev"),this.$nextBtn=this.$element.find("button.btn-next"),i=this.$nextBtn.children().detach(),this.nextText=e.trim(this.$nextBtn.text()),this.$nextBtn.append(i),this.$prevBtn.on("click",e.proxy(this.previous,this)),this.$nextBtn.on("click",e.proxy(this.next,this)),this.$element.on("click","li.complete",e.proxy(this.stepclicked,this))};t.prototype={constructor:t,setState:function(){var t=this.currentStep>1,n=1===this.currentStep,i=this.currentStep===this.numSteps;this.$prevBtn.attr("disabled",n===!0||t===!1);var r=this.$nextBtn.data();
if(r&&r.last&&(this.lastText=r.last,"undefined"!=typeof this.lastText)){var o=i!==!0?this.nextText:this.lastText,s=this.$nextBtn.children().detach();this.$nextBtn.text(o).append(s)}var a=this.$element.find("li");a.removeClass("active").removeClass("complete"),a.find("span.badge").removeClass("badge-info").removeClass("badge-success");var l="li:lt("+(this.currentStep-1)+")",c=this.$element.find(l);c.addClass("complete"),c.find("span.badge").addClass("badge-success");var u="li:eq("+(this.currentStep-1)+")",d=this.$element.find(u);d.addClass("active"),d.find("span.badge").addClass("badge-info");var h=d.data().target;e(".step-pane",e(h).parent()).removeClass("active"),e(h).addClass("active"),this.$element.trigger("changed")},stepclicked:function(t){var n=e(t.currentTarget),i=n.parent().find("li").index(n),r=e.Event("stepclick");this.$element.trigger(r,{step:i+1}),r.isDefaultPrevented()||(this.currentStep=i+1,this.setState())},previous:function(){var t=this.currentStep>1;if(t){var n=e.Event("change");if(this.$element.trigger(n,{step:this.currentStep,direction:"previous"}),n.isDefaultPrevented())return;this.currentStep-=1,this.setState()}},next:function(){var t=this.currentStep+1<=this.numSteps,n=this.currentStep===this.numSteps;if(t){var i=e.Event("change");if(this.$element.trigger(i,{step:this.currentStep,direction:"next"}),i.isDefaultPrevented())return;this.currentStep+=1,this.setState()}else n&&this.$element.trigger("finished")},selectedItem:function(){return{step:this.currentStep}}},e.fn.wizard=function(n,i){var r,o=this.each(function(){var o=e(this),s=o.data("wizard"),a="object"==typeof n&&n;s||o.data("wizard",s=new t(this,a)),"string"==typeof n&&(r=s[n](i))});return void 0===r?o:r},e.fn.wizard.defaults={},e.fn.wizard.Constructor=t,e(function(){e("body").on("mousedown.wizard.data-api",".wizard",function(){var t=e(this);t.data("wizard")||t.wizard(t.data())})})}(window.jQuery)}(),function(){!function(e){var t,n=e();e.fn.sortable=function(i){var r=String(i);return i=e.extend({connectWith:!1},i),this.each(function(){if(/^enable|disable|destroy$/.test(r)){var o=e(this).children(e(this).data("items")).attr("draggable","enable"==r);return"destroy"==r&&o.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),void 0}var s,a,o=e(this).children(i.items),l=e("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');i.placeholderContents&&l.append(i.placeholderContents),o.find(i.handle).mousedown(function(){s=!0}).mouseup(function(){s=!1}),e(this).data("items",i.items),n=n.add(l),i.connectWith&&e(i.connectWith).add(this).data("connectWith",i.connectWith),o.attr("draggable","true").on("dragstart.h5s",function(r){if(i.handle&&!s)return!1;s=!1;var o=r.originalEvent.dataTransfer;o.effectAllowed="move",o.setData("Text","dummy"),a=(t=e(this)).addClass("sortable-dragging").index(),i.forcePlaceholderSize&&n.height(t.height())}).on("dragend.h5s",function(){t&&(t.removeClass("sortable-dragging").show(),n.detach(),a!=t.index()&&t.parent().trigger("sortupdate",{item:t,oldIndex:a,newIndex:t.index()}),t=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,l]).on("dragover.h5s dragenter.h5s drop.h5s",function(r){return o.is(t)||i.connectWith===e(t).parent().data("connectWith")?"drop"==r.type?(r.stopPropagation(),n.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(r.preventDefault(),r.originalEvent.dataTransfer.dropEffect="move",o.is(this)?(t.hide(),e(this)[l.index()<e(this).index()?"after":"before"](l),n.not(l).detach()):n.is(this)||e(this).children(i.items).length||(n.detach(),e(this).append(l)),!1):!0})})}}(jQuery)}(),function(){!function(e,t,n){function i(e){var t={},i=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!i.test(n.name)&&(t[n.name]=n.value)}),t}function r(e,i){var r=this,o=n(r);if(r.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),e===!0)return o[0].value=i;o.focus()}else r.value="",o.removeClass("placeholder"),r==t.activeElement&&r.select()}function o(){var e,t=this,o=n(t),s=this.id;if(""==t.value){if("password"==t.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(a){e=n("<input>").attr(n.extend(i(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":s}).bind("focus.placeholder",r),o.data({"placeholder-textinput":e,"placeholder-id":s}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",s).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}var s,a,l="placeholder"in t.createElement("input"),c="placeholder"in t.createElement("textarea"),u=n.fn,d=n.valHooks,h=n.propHooks;l&&c?(a=u.placeholder=function(){return this},a.input=a.textarea=!0):(a=u.placeholder=function(){var e=this;return e.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},a.input=l,a.textarea=c,s={get:function(e){var t=n(e),i=t.data("placeholder-password");return i?i[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,i){var s=n(e),a=s.data("placeholder-password");return a?a[0].value=i:s.data("placeholder-enabled")?(""==i?(e.value=i,e!=t.activeElement&&o.call(e)):s.hasClass("placeholder")?r.call(e,!0,i)||(e.value=i):e.value=i,s):e.value=i}},l||(d.input=s,h.value=s),c||(d.textarea=s,h.value=s),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(r);setTimeout(function(){e.each(o)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery)}(),function(){!function(e,t){"use strict";var n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var e,n,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"]],r=0,o=i.length,s={};o>r;r++)if(e=i[r],e&&e[1]in t){for(r=0,n=e.length;n>r;r++)s[i[0][r]]=e[r];return s}return!1}(),r={request:function(e){var r=i.requestFullscreen;e=e||t.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[r]():e[r](n&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){t[i.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:i};return i?(Object.defineProperties(r,{isFullscreen:{get:function(){return!!t[i.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!t[i.fullscreenEnabled]}}}),t.addEventListener(i.fullscreenchange,function(e){r.onchange.call(r,e)}),t.addEventListener(i.fullscreenerror,function(e){r.onerror.call(r,e)}),e.screenfull=r,void 0):e.screenfull=!1}(window,document)}(),function(){ownsDocument=function(e,t){return t&&t.userId===e}}(),function(){Router.configure({layoutTemplate:"layout",loadingTemplate:"loading",waitOn:function(){return[Meteor.subscribe("notifications"),Meteor.subscribe("users"),Meteor.subscribe("statuses"),Meteor.subscribe("workflows")]}}),TasksListController=RouteController.extend({template:"myWork",findOptions:function(){return{}},waitOn:function(){return[Meteor.subscribe("workspaces"),Meteor.subscribe("projects"),Meteor.subscribe("categories"),Meteor.subscribe("groups"),Meteor.subscribe("tasks",this.findOptions())]},data:function(){return{tasks:Tasks.find({},this.findOptions())}}}),FocusController=TasksListController.extend({template:"focus"}),Mywork=TasksListController.extend({template:"myWork"}),Dashboard=TasksListController.extend({template:"myWork"}),Roadmap=TasksListController.extend({template:"roadmap"}),Router.map(function(){this.route("dashboard",{path:"/",controller:Dashboard,layoutTemplate:"landing"}),this.route("myWork",{path:"/myWork",controller:TasksListController}),this.route("focus",{path:"/focus",controller:FocusController}),this.route("tracker",{path:"/tracker",controller:TasksListController}),this.route("roadmap",{path:"/roadmap",controller:TasksListController}),this.route("reports",{path:"/reports",controller:TasksListController}),this.route("users",{path:"/users",controller:TasksListController}),this.route("task",{path:"/tasks/:_id",template:"focus",load:function(){Session.set("currentTaskId",this.params._id),Session.set("markdown_data","")}})});var e=function(){Meteor.user()||(Meteor.loggingIn()?this.render(this.loadingTemplate):this.render("accessDenied"),this.stop())};Router.before(e),Router.before(function(){clearErrors()})}(),function(){Session.set("categoryNewColor",null),Template.categoryBar.helpers({categories:function(){var e=CurrentWorkspace(),t=WorkspaceManager.allCategories(e);return t}}),Template.categoryBar.events({}),Template.categoryBarRow.events({"click a.filter-edit":function(){Session.set("categoryEditId",this._id)}}),Template.categoryBarRow.rendered=function(){},Template.categoryAddDropdown.rendered=function(){$(this.find(".dropdown-menu")).on("click",function(e){e.stopPropagation()});var e={colors:[General.backgroundColors]};$(this.find("div.colorpalette")).colorPalette(e).on("selectColor",function(e){Session.set("categoryNewColor",e.color)})},Template.categoryAddDropdown.events({"click a.category-add":function(e){e.preventDefault();var t=CurrentWorkspace(),n={workspaceId:t._id,color:Session.get("categoryNewColor"),title:$("#new-category-name").val()};Meteor.call("createCategory",n,function(e){return e?alert(e.reason):void 0}),$("#categoryAddDropdown").parent().removeClass("open")}}),Template.categoryEditDropdown.rendered=function(){var e={colors:[General.backgroundColors]};$(this.find("div.colorpalette")).colorPalette(e).on("selectColor",function(e){var t=Session.get("categoryEditId");Meteor.call("updateCategory",t,{color:e.color},function(e){return e?alert(e.reason):void 0})}),$(this.find("a.filter-name-edit")).editable({type:"text",title:"Enter category name",success:function(e,t){var n=Session.get("categoryEditId");Meteor.call("updateCategory",n,{title:t},function(e){return e?alert(e.reason):void 0})}})},Template.categoryEditDropdown.events({"click .filter-remove":function(e){e.preventDefault(),Meteor.call("deleteCategory",Session.get("categoryEditId"),function(e){return e?alert(e.reason):void 0}),Session.set("categoryEditId",null)}}),Template.categoryEditDropdown.helpers({title:function(){return this.title}})}(),function(){Session.set("groupEditId",null),Template.groupBar.helpers({groups:function(){var e=CurrentWorkspace();return WorkspaceManager.allGroups(e)}}),Template.groupBarRow.helpers({userName:function(){return UsersManager.userName(this)},avatar:function(){return UsersManager.getGravatar(this)},users:function(){return GroupsManager.allUsers(Groups.findOne(this._id))}}),Template.groupBarRow.events({"click a.group-edit":function(){Session.set("groupEditId",this._id),Session.set("filterEditType","Group")}}),Template.newGroupDropdown.events({"click a.group-add":function(e){e.preventDefault();var t=CurrentWorkspace(),n={workspaceId:t._id,title:$("#new-group-name").val()};Meteor.call("createNewGroup",n,function(e){return e?alert(e.reason):void 0})}}),Template.newGroupDropdown.rendered=function(){$(this.find(".dropdown-menu")).on("click",function(e){e.stopPropagation()})},Template.groupEditDropdown.helpers({notUsers:function(){var e=Session.get("groupEditId");return e?GroupsManager.notUsers(Groups.findOne(e)):[]},userName:function(){return UsersManager.userName(this)},avatar:function(){return UsersManager.getGravatar(this)}}),Template.groupEditDropdown.rendered=function(){$(this.find(".dropdown-menu")).on("click",function(e){e.stopPropagation()});var e=function(e){var t=Meteor.users.findOne(e.id);return"<img class='thumb-xs img-circle' src='"+UsersManager.getGravatar(t)+"'/> "+UsersManager.userName(t)};$("#members-group-select").select2({formatResult:e,formatSelection:e,escapeMarkup:function(e){return e}})},Template.groupEditDropdown.events({"click a.user-group-add":function(e){e.preventDefault();var t=$("#members-group-select").select2("val"),n=Meteor.users.findOne(t),i=Groups.findOne(this._id);Meteor.call("addUserToGroup",i,n,function(e){return e?alert(e.reason):void 0})}})}(),function(){Session.set("projectNewColor",null),Template.projectBar.helpers({projects:function(){var e=CurrentWorkspace(),t=WorkspaceManager.allProjects(e);return t}}),Template.projectBar.events({}),Template.projectBarRow.events({"click a.filter-edit":function(){Session.set("projectEditId",this._id)}}),Template.projectAddDropdown.rendered=function(){$(this.find(".dropdown-menu")).on("click",function(e){e.stopPropagation()});var e={colors:[General.backgroundColors]};$(this.find("div.colorpalette")).colorPalette(e).on("selectColor",function(e){Session.set("projectNewColor",e.color)})},Template.projectAddDropdown.events({"click a.project-add":function(e){e.preventDefault();var t=CurrentWorkspace(),n={workspaceId:t._id,color:Session.get("projectNewColor"),title:$("#new-project-name").val()};Meteor.call("createProject",n,function(e){return e?alert(e.reason):void 0}),$("#projectAddDropdown").parent().removeClass("open")}}),Template.projectEditDropdown.rendered=function(){var e={colors:[General.backgroundColors]};$(this.find("div.colorpalette")).colorPalette(e).on("selectColor",function(e){var t=Session.get("projectEditId");Meteor.call("updateProject",t,{color:e.color},function(e){return e?alert(e.reason):void 0})}),$(this.find("a.filter-name-edit")).editable({type:"text",success:function(e,t){var n=Session.get("projectEditId");Meteor.call("updateProject",n,{title:t},function(e){return e?alert(e.reason):void 0})}})},Template.projectEditDropdown.events({"click .filter-remove":function(e){e.preventDefault(),Meteor.call("deleteProject",Session.get("projectEditId"),function(e){return e?alert(e.reason):void 0}),Session.set("projectEditId",null)}}),Template.projectEditDropdown.helpers({title:function(){return this.title}})}(),function(){$.fn.editable.defaults.mode="inline",Template.taskBar.helpers({}),Template.memberSelectOption.helpers({user_name:function(){var e=Meteor.user();return UsersManager.userName(e)},avatar:function(){var e=Meteor.user();return UsersManager.getGravatar(e)}}),Template.taskBar.events({"click .dropdown-menu header":function(e){e.stopPropagation()}})}(),function(){Template.workspaceBar.helpers({currentWorkspace:function(){var e=Meteor.user();return e?CurrentWorkspace():void 0},userWorkspaces:function(){UsersManager.workspacesWhithoutCurrent(Meteor.user())}})}(),function(){Template.aside.helpers({userAvatar:function(){var e=Meteor.user();return UsersManager.getGravatar(e)},activeRouteClass:function(){var e=Array.prototype.slice.call(arguments,0);e.pop();var t=_.any(e,function(e){return Router.current().route.name===e});return t&&"active"}}),Template.aside.events({"click #toggle-nav":function(e){e.preventDefault(),$("#nav").toggleClass("nav-vertical")},"click a.logout":function(e){e.preventDefault(),Meteor.logout()}})}(),function(){Template.errors.helpers({errors:function(){return Errors.find()}}),Template.error.rendered=function(){var e=this.data;Meteor.defer(function(){Errors.update(e._id,{$set:{seen:!0}})})}}(),function(){Template.header.helpers({activeRouteClass:function(){var e=Array.prototype.slice.call(arguments,0);e.pop();var t=_.any(e,function(e){return Router.current().route.name===e});return t&&"active"}})}(),function(){Template.notifications.helpers({notifications:function(){return Notification.find({userId:Meteor.userId(),read:!1})},notificationCount:function(){return Notification.find({userId:Meteor.userId(),read:!1}).count()}}),Template.notification.helpers({notificationPostPath:function(){return Router.routes.postPage.path({_id:this.postId})}}),Template.notification.events({"click a":function(){Notification.update(this._id,{$set:{read:!0}})}})}(),function(){Template.landing.rendered=function(){$("body").data("spy","scroll").data("target","#header").addClass("landing").attr("id","home"),jQuery.extend(jQuery.easing,{def:"easeOutQuad",easeInOutExpo:function(e,t,n,i,r){return 0==t?n:t==r?n+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+n:i/2*(-Math.pow(2,-10*--t)+2)+n}}),$('[data-ride="animated"]').appear(),$("html").hasClass("ie no-ie10")||($('[data-ride="animated"]').addClass("appear"),$('[data-ride="animated"]').on("appear",function(){var e,t=$(this),n=t.data("animation")||"fadeIn";t.hasClass("animated")||(e=t.data("delay")||0,setTimeout(function(){t.removeClass("appear").addClass(n+" animated")},e))})),$(document).on("click.app",'[href^="#"]',function(e){e.preventDefault();var t=this.hash;$("html, body").stop().animate({scrollTop:$(t).offset().top},1e3,"easeInOutExpo",function(){window.location.hash=t})})}}(),function(){Template.taskDetail.helpers({currentTask:function(){return Tasks.findOne(Session.get("currentTaskDetailId"))},detailOpen:function(){return Session.get("currentTaskDetailId")?"show":""},markdown_data:function(){return Session.get("markdown_data")},followers:function(){},nextStatus:function(){var e=WorkflowsManager.nextStatuses(this.statusCode);return e?e[0]:!1},projects:function(){},assignedTo:function(){}}),Template.taskDetail.rendered=function(){var e=Tasks.findOne(Session.get("currentTaskDetailId"));e&&($("#projects").editable({value:e.projectsId,escape:!1,viewseparator:" ",source:WorkspaceManager.allProjects(CurrentWorkspace()).map(function(e){return e.text=e.title,e.id=e._id,e}),select2:{multiple:!0,formatResult:function(e){return'<span style="color: '+e.color+'">'+e.title+"</span>"},formatSelection:function(e){return'<span class="label btn-primary" style="background: '+e.color+'">'+e.title+"</span>"},escapeMarkup:function(e){return e}}}),$("#categories").editable({value:e.categoryId,escape:!1,viewseparator:" ",source:WorkspaceManager.allCategories(CurrentWorkspace()).map(function(e){return e.text=e.title,e.id=e._id,e}),select2:{formatResult:function(e){return'<span style="color: '+e.color+'">'+e.title+"</span>"},formatSelection:function(e){return'<span class="label btn-primary" style="background: '+e.color+'">'+e.title+"</span>"},escapeMarkup:function(e){return e}}}),$("#projects").on("save",function(t,n){Meteor.call("updateTask",e,{projectsId:n.newValue},function(e){return e?alert(e.reason):void 0})}),$("#categories").on("save",function(t,n){Meteor.call("updateTask",e,{categoryId:n.newValue},function(e){return e?alert(e.reason):void 0})}))},Template.taskDetail.events({"keypress, focus textarea.description":function(e){("focus"==e.type||13==e.keyCode)&&Session.set("markdown_data",e.target.value)},"click a.closeTaskDetail":function(e){e.preventDefault(),Session.set("currentTaskDetailId",null)},"click .change-status":function(e){var t=$(e.currentTarget).data("next-status");Meteor.call("changeTaskStatus",Session.get("currentTaskDetailId"),t,function(e){return e?alert(e.reason):void 0})}})}(),function(){Session.set("currentTaskDetailId",null),Template.tasksList.helpers({tasksListAll:function(){return this.tasks}}),Template.tasksList.events({"keydown #new-simple-task":function(e){if(jwerty.is("enter",e)){e.preventDefault();var t=$(e.currentTarget).val();Meteor.call("createTask",{subject:t},function(t,n){$(e.currentTarget).val(""),Session.set("currentTaskDetailId",n)})}},"keydown section.vbox":function(e){var t=$("#"+Session.get("currentTaskDetailId"));if(jwerty.is("",e)){var n=t.next().attr("id");n&&Session.set("currentTaskDetailId",n),e.preventDefault()}if(jwerty.is("",e)){var n=t.prev().attr("id");n&&Session.set("currentTaskDetailId",n),e.preventDefault()}jwerty.is("",e)&&e.preventDefault(),jwerty.is("",e)&&e.preventDefault()}}),Template.tasksList.rendered=function(){$("#new-simple-task").focus(),$(".sortable").sortable({}).bind("sortupdate",function(e,t){console.log(t.item),console.log(t.oldIndex),console.log(t.newIndex)})},Template.taskListItem.events({"click li.list-group-item a":function(e){e.preventDefault(),Session.set("currentTaskDetailId",this._id),$(e.currentTarget).focus(),$("#new-simple-task").blur()}}),Template.taskListItem.helpers({isActive:function(){return Session.equals("currentTaskDetailId",this._id)?"active":""},categoryColor:function(){return General.backgroundColors[Math.floor(Math.random()*General.backgroundColors.length)]},status:function(){},statusAction:function(){},projects:function(){},assignedTo:function(){},createdAt:function(){var e=moment.unix(this.createdAt/1e3);return moment(e,"YYYYMMDD").fromNow()}})}(),function(){!function(e){"use strict";var t=function(t){this.$element=e(t),this.$prev=this.$element.prev(),!this.$prev.length&&(this.$parent=this.$element.parent())};t.prototype={constructor:t,init:function(){var e=this.$element,t=e.data().toggle.split(":")[1],n=e.data("target");e.hasClass("in")||e[t](n).addClass("in")},reset:function(){this.$parent&&this.$parent.prepend(this.$element),!this.$parent&&this.$element.insertAfter(this.$prev),this.$element.removeClass("in")}},e.fn.shift=function(n){return this.each(function(){var i=e(this),r=i.data("shift");r||i.data("shift",r=new t(this)),"string"==typeof n&&r[n]()})},e.fn.shift.Constructor=t}(window.jQuery),Date.now=Date.now||function(){return+new Date},!function(e){e(function(){e(document).on("click","[data-toggle=fullscreen]",function(){screenfull.enabled&&screenfull.request()}),e("input[placeholder], textarea[placeholder]").placeholder(),e("[data-toggle=popover]").popover(),e(document).on("click",".popover-title .close",function(t){var n=e(t.target),i=n.closest(".popover").prev();i&&i.popover("hide")}),e('[data-toggle="ajaxModal"]').on("click",function(t){e("#ajaxModal").remove(),t.preventDefault();var n=e(this),i=n.data("remote")||n.attr("href"),r=e('<div class="modal" id="ajaxModal"><div class="modal-body"></div></div>');e("body").append(r),r.modal(),r.load(i)}),e.fn.dropdown.Constructor.prototype.change=function(t){t.preventDefault();var n,i,r,o=e(t.target),s=!1;!o.is("a")&&(o=o.closest("a")),i=o.closest(".dropdown-menu"),r=i.parent().find(".dropdown-label"),$labelHolder=r.text(),n=o.find("input"),s=n.is(":checked"),n.is(":disabled")||"radio"==n.attr("type")&&s||("radio"==n.attr("type")&&i.find("li").removeClass("active"),o.parent().removeClass("active"),!s&&o.parent().addClass("active"),n.prop("checked",!n.prop("checked")),$items=i.find("li > a > input:checked"),$items.length?($text=[],$items.each(function(){var t=e(this).parent().text();t&&$text.push(e.trim(t))}),$text=$text.length<4?$text.join(", "):$text.length+" selected",r.html($text)):r.html(r.data("placeholder")))},e(document).on("click.dropdown-menu",".dropdown-select > li > a",e.fn.dropdown.Constructor.prototype.change),e("[data-toggle=tooltip]").tooltip(),e(document).on("click",".panel-toggle",function(t){t&&t.preventDefault();var n,i=e(t.target),r="collapse";i.is("a")||(i=i.closest("a")),n=i.closest(".panel"),n.find(".panel-body").toggleClass(r),i.toggleClass("active")}),e(".carousel.auto").carousel(),e(document).on("click.button.data-api","[data-loading-text]",function(t){var n=e(t.target);n.is("i")&&(n=n.parent()),n.button("loading")});var t=function(){!location.hash&&setTimeout(function(){pageYOffset||window.scrollTo(0,0)},1e3)},n=e(window),i=function(n){return"reset"==n?(e('[data-toggle^="shift"]').shift("reset"),!0):(t(),e('[data-toggle^="shift"]').shift("init"),!0)};n.width()<768&&i();var r;n.resize(function(){clearTimeout(r),r=setTimeout(function(){n.width()<767&&i(),n.width()>=768&&i("reset")&&o()},500)});var o=function(){e(".vbox > footer").prev("section").addClass("w-f"),e(".ie11 .vbox").each(function(){e(this).height(e(this).parent().height())})};o(),e(document).on("click",'[data-ride^="collapse"] a',function(t){var n,i=e(t.target);i.is("a")||(i=i.closest("a")),e(".nav-vertical").length||(n=i.parent().siblings(".active"),n&&n.find("> a").toggleClass("active")&&n.toggleClass("active").find("> ul:visible").slideUp(200),i.hasClass("active")&&i.next().slideUp(200)||i.next().slideDown(200),i.toggleClass("active").parent().toggleClass("active"),i.next().is("ul")&&t.preventDefault())})})}(window.jQuery)}(),function(){window.bootbox=window.bootbox||function e(t,n){"use strict";function i(e){var t=v[m.locale];return t?t[e]:v.en[e]}function r(e,n,i){e.preventDefault();var r=t.isFunction(i)&&i(e)===!1;r||n.modal("hide")}function o(e){var t,n=0;for(t in e)n++;return n}function s(e,n){var i=0;t.each(e,function(e,t){n(e,t,i++)})}function a(e){var n,i;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},m,e),e.buttons||(e.buttons={}),e.backdrop=e.backdrop?"static":!1,n=e.buttons,i=o(n),s(n,function(e,r,o){if(t.isFunction(r)&&(r=n[e]={callback:r}),"object"!==t.type(r))throw new Error("button with key "+e+" must be an object");r.label||(r.label=e),r.className||(r.className=2>=i&&o===i-1?"btn-primary":"btn-default")}),e}function l(e,t){var n=e.length,i={};if(1>n||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(i[t[0]]=e[0],i[t[1]]=e[1]):i=e[0],i}function c(e,n,i){return t.extend(!0,{},e,l(n,i))}function u(e,t,n,i){var r={className:"bootbox-"+e,buttons:d.apply(null,t)};return h(c(r,i,n),t)}function d(){for(var e={},t=0,n=arguments.length;n>t;t++){var r=arguments[t],o=r.toLowerCase(),s=r.toUpperCase();e[o]={label:i(s)}}return e}function h(e,t){var i={};return s(t,function(e,t){i[t]=!0}),s(e.buttons,function(e){if(i[e]===n)throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}),e}var f={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>"}},p=t("body"),m={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0},g={};g.alert=function(){var e;if(e=u("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return t.isFunction(e.callback)?e.callback():!0},g.dialog(e)},g.confirm=function(){var e;if(e=u("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback(!1)},e.buttons.confirm.callback=function(){return e.callback(!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return g.dialog(e)},g.prompt=function(){var e,i,r,o,a,l,u;if(o=t(f.form),i={className:"bootbox-prompt",buttons:d("cancel","confirm"),value:"",inputType:"text"},e=h(c(i,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===n?!0:e.show,e.message=o,e.buttons.cancel.callback=e.onEscape=function(){return e.callback(null)},e.buttons.confirm.callback=function(){var n;switch(e.inputType){case"text":case"email":case"select":n=a.val();break;case"checkbox":var i=a.find("input:checked");n=[],s(i,function(e,i){n.push(t(i).val())})}return e.callback(n)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!f.inputs[e.inputType])throw new Error("invalid prompt type");switch(a=t(f.inputs[e.inputType]),e.inputType){case"text":case"email":a.val(e.value);break;case"select":var p={};if(u=e.inputOptions||[],!u.length)throw new Error("prompt with select requires options");s(u,function(e,i){var r=a;if(i.value===n||i.text===n)throw new Error("given options in wrong format");i.group&&(p[i.group]||(p[i.group]=t("<optgroup/>").attr("label",i.group)),r=p[i.group]),r.append("<option value='"+i.value+"'>"+i.text+"</option>")}),s(p,function(e,t){a.append(t)}),a.val(e.value);break;case"checkbox":var m=t.isArray(e.value)?e.value:[e.value];if(u=e.inputOptions||[],!u.length)throw new Error("prompt with checkbox requires options");if(!u[0].value||!u[0].text)throw new Error("given options in wrong format");a=t("<div/>"),s(u,function(n,i){var r=t(f.inputs[e.inputType]);r.find("input").attr("value",i.value),r.find("label").append(i.text),s(m,function(e,t){t===i.value&&r.find("input").prop("checked",!0)}),a.append(r)})}return e.placeholder&&a.attr("placeholder",e.placeholder),o.append(a),o.on("submit",function(e){e.preventDefault(),r.find(".btn-primary").click()}),r=g.dialog(e),r.off("shown.bs.modal"),r.on("shown.bs.modal",function(){a.focus()}),l===!0&&r.modal("show"),r},g.dialog=function(e){e=a(e);var n=t(f.dialog),i=n.find(".modal-body"),o=e.buttons,l="",c={onEscape:e.onEscape};if(s(o,function(e,t){l+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",c[e]=t.callback}),i.find(".bootbox-body").html(e.message),e.animate===!0&&n.addClass("fade"),e.className&&n.addClass(e.className),e.title&&i.before(f.header),e.closeButton){var u=t(f.closeButton);e.title?n.find(".modal-header").prepend(u):u.css("margin-top","-10px").prependTo(i)}return e.title&&n.find(".modal-title").html(e.title),l.length&&(i.after(f.footer),n.find(".modal-footer").html(l)),n.on("hidden.bs.modal",function(e){e.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),n.on("escape.close.bb",function(e){c.onEscape&&r(e,n,c.onEscape)}),n.on("click",".modal-footer button",function(e){var i=t(this).data("bb-handler");r(e,n,c[i])}),n.on("click",".bootbox-close-button",function(e){r(e,n,c.onEscape)}),n.on("keyup",function(e){27===e.which&&n.trigger("escape.close.bb")}),p.append(n),n.modal({backdrop:e.backdrop,keyboard:!1,show:!1}),e.show&&n.modal("show"),n},g.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(m,e)},g.hideAll=function(){t(".bootbox").modal("hide")};var v={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},zh_CN:{OK:"OK",CANCEL:"",CONFIRM:""},zh_TW:{OK:"OK",CANCEL:"",CONFIRM:""}};return g.init=function(n){window.bootbox=e(n||t)},g}(window.jQuery)}(),function(){Accounts.ui.config({passwordSignupFields:"EMAIL_ONLY"}),General={backgroundColors:["#b4e9e3","#19aeff","#0084c8","#005c94","#ff4141","#dc0000","#b50000","#ffff3e","#ff9900","#ff6600","#eccd84","#c7a194","#E6A410","#804d00","#ccff42","#9ade00","#009100","#f1caff","#d76cff","#594f8d","#bdcdd4","#9eabb0","#0e232e","#f3f5f9"]}
}(),function(){Errors=new Meteor.Collection(null),throwError=function(e){Errors.insert({message:e,seen:!1})},clearErrors=function(){Errors.remove({seen:!0})}}(),function(){ToggleClass=function(e){e.preventDefault();var t,n,i,r,o,s=$(e.target);!s.data("toggle")&&(s=s.closest('[data-toggle^="class"]')),t=s.data().toggle,n=s.data("target")||s.attr("href"),t&&(i=t.split(":")[1])&&(r=i.split(",")),n&&(o=n.split(",")),o&&o.length&&$.each(o,function(e){"#"!=o[e]&&$(o[e]).toggleClass(r[e])}),s.toggleClass("active")},Hide=function(e,t){e.removeClass("active"),t.removeClass("show")},Show=function(e,t){e.addClass("active"),t.addClass("show")},KMenu=function(e,t){e.preventDefault();var n=e.currentTarget;t.detach(),t.appendTo($(n).parent()),t.on("click",function(e){e.stopPropagation()}),$(n).dropdown()}}(),function(){$(document).on("click.fuelux.checkbox",function(){$(".checkbox-custom > input").each(function(){var e=$(this);e.data("checkbox")||e.checkbox(e.data())})})}(),function(){Categories=new Meteor.Collection2("categories",{schema:{title:{type:String,label:"Title"},userId:{type:String,label:"user Id"},workspaceId:{type:String,label:"user Id"},color:{type:String,label:"Color",optional:!0},members:{type:[String],label:"Members"},createdAt:{type:Date,autoValue:function(){return this.isInsert?new Date:this.isUpsert?{$setOnInsert:new Date}:(this.unset(),void 0)},denyUpdate:!0},updatedAt:{type:Date,autoValue:function(){return this.isUpdate?new Date:void 0},denyInsert:!0,optional:!0}}}),Meteor.methods({createCategory:function(e){var t=Meteor.user();e.userId=t._id,e.members=[t._id],e.title||(e.title="New category"),e.color||(e.color="#f3f5f9"),e.members=[t._id];var n=Categories.insert(e);return n},updateCategory:function(e,t){return Categories.update(e,{$set:t})},deleteCategory:function(e){return Tasks.update({categoryId:e},{$set:{categoryId:null}},!0),Categories.remove(e)}})}(),function(){Groups=new Meteor.Collection2("groups",{schema:{title:{type:String,label:"Title"},userId:{type:String,label:"user Id"},workspaceId:{type:String,label:"user Id"},workflowCode:{type:String,optional:!0},members:{type:[String],label:"Members"},users:{type:[String],label:"Members"},createdAt:{type:Date,autoValue:function(){return this.isInsert?new Date:this.isUpsert?{$setOnInsert:new Date}:(this.unset(),void 0)},denyUpdate:!0},updatedAt:{type:Date,autoValue:function(){return this.isUpdate?new Date:void 0},denyInsert:!0,optional:!0}}}),GroupsManager={allMembers:function(e){return e.members?Meteor.users.find({_id:{$in:e.members}}):[]},notMembers:function(e){return Meteor.users.find({_id:{$nin:e.members}})},allUsers:function(e){return e.users?Meteor.users.find({_id:{$in:e.users}}):[]},notUsers:function(e){return Meteor.users.find({_id:{$nin:e.members}})},userGroup:function(e){return Groups.findOne({$and:[{workspaceId:e.currentWorkspaceId},{members:e._id}]})},userGroupForWorkspace:function(e,t){return Groups.findOne({$and:{workspaceId:t,members:e._id}})}},Meteor.methods({createNewGroup:function(e){var t=Meteor.user();e.userId=t._id,e.members=[t._id],e.users=[],e.workflowCode="developer";var n=Groups.insert(e);return n},addUserToGroup:function(e,t){return Groups.update(e._id,{$addToSet:{members:t._id}}),Workspaces.update(e.workspaceId,{$addToSet:{members:t._id}}),Groups.update({users:t._id},{$pull:{users:t._id}},!0),Groups.update(e._id,{$addToSet:{users:t._id}})},addMembersToGroup:function(e,t){return Workspaces.update(e.workspaceId,{$addToSet:{members:t._id}}),Groups.update(e._id,{$addToSet:{members:t._id}})}})}(),function(){Notifications=new Meteor.Collection2("notifications",{schema:{}})}(),function(){Projects=new Meteor.Collection2("projects",{schema:{title:{type:String,label:"Title"},userId:{type:String,label:"user Id"},workspaceId:{type:String,label:"user Id"},color:{type:String,label:"Color",optional:!0},members:{type:[String],label:"Members"},createdAt:{type:Date,autoValue:function(){return this.isInsert?new Date:this.isUpsert?{$setOnInsert:new Date}:(this.unset(),void 0)},denyUpdate:!0},updatedAt:{type:Date,autoValue:function(){return this.isUpdate?new Date:void 0},denyInsert:!0,optional:!0}}}),Meteor.methods({createProject:function(e){var t=Meteor.user();e.userId=t._id,e.members=[t._id],e.title||(e.title="New project"),e.color||(e.color="#f3f5f9"),e.members=[t._id];var n=Projects.insert(e);return n},updateProject:function(e,t){return Projects.update(e,{$set:t})},deleteProject:function(e){return Tasks.update({projectsId:e},{$pull:{projectsId:e}},!0),Projects.remove(e)}})}(),function(){Statuses=new Meteor.Collection2("statuses",{schema:{title:{type:String,label:"Title"},code:{type:String},description:{type:String,optional:!0}}}),Meteor.methods({})}(),function(){Tags=new Meteor.Collection2("tags",{schema:{}}),Tags.allow({insert:function(){return!0},update:function(){return!0}}),Meteor.methods({tagsUpdate:function(e,t){var n=Meteor.user();if(!n)throw new Meteor.Error(401,"You need to login to post new stories");if(t&&Tags.update({title:t.id},{$inc:{count:-1}}),e){var i=Tags.find({title:e.id});if(i.count()>0)Tags.update({title:e.id},{$inc:{count:1}});else{var i={title:e.id,background:"rgb(60, 104, 187)",color:"rgb(182, 195, 219)",count:1};Tags.insert(i)}}return e}})}(),function(){Tasks=new Meteor.Collection2("tasks",{schema:{subject:{type:String,label:"Subject"},description:{type:String,label:"Description",optional:!0},statusCode:{type:String,optional:!0},order:{type:Number,optional:!0},projectsId:{type:[String],optional:!0},workspaceId:{type:String},categoryId:{type:String,optional:!0},assignedToId:{type:String,optional:!0},authorId:{type:String,optional:!0},ownerId:{type:String,optional:!0},followersId:{type:[String],optional:!0},createdAt:{type:Date,autoValue:function(){return this.isInsert?new Date:this.isUpsert?{$setOnInsert:new Date}:(this.unset(),void 0)},denyUpdate:!0},updatedAt:{type:Date,autoValue:function(){return this.isUpdate?new Date:void 0},denyInsert:!0,optional:!0},isDeleted:{type:Boolean,optional:!0}},virtualFields:{createdAtfromNow:function(e){var t=moment.unix(e.createdAt/1e3);return moment(t,"YYYYMMDD").fromNow()}}}),TasksManager={projectsByTask:function(e){return Projects.find({_id:e.projectsId})},categoryByTask:function(e){return Categories.findOne({_id:e.categoryId})}},Meteor.methods({createTask:function(e){var t=Meteor.user();if(!t)throw new Meteor.Error(401,"You need to login to post new stories");if(!e.subject)throw new Meteor.Error(422,"Please fill in a headline");e.workspaceId=t.currentWorkspaceId,e.statusCode=WorkflowsManager.userWorkflow(Meteor.user()).defaultStatus,e.authorId=t._id,e.ownerId=t._id;var n=Tasks.insert(e);return n},updateTask:function(e,t){var n=Meteor.user();if(!n)throw new Meteor.Error(401,"You need to login to post new stories");return Tasks.update(e._id,{$set:t})},changeTaskStatus:function(e,t){var n=Meteor.user();if(!n)throw new Meteor.Error(401,"You need to login to post new stories");return Tasks.update(e,{$set:{statusCode:t}})}})}(),function(){Meteor.users.allow({insert:function(){return!0},update:function(){return!0}}),UsersManager={email:function(e){return e.emails&&e.emails.length?e.emails[0].address:""},userName:function(e){var t,n,i;return n=UsersManager.email(e),i=n.split("@"),t=i[0],t.charAt(0).toUpperCase()+t.slice(1)},shortUserName:function(e){var t,n;return this.userName(e).indexOf(".")>0?(t=this.userName(e).split("."),n=t[0].charAt(0)+t[1].charAt(0),n.toUpperCase()):this.userName(e).charAt(0).toUpperCase()},getGravatar:function(e,t){if(!e)return"/images/avatar_default.jpg";this.email(e);if(e&&this.email(e)){var t=t||{},n=t.secure?"https":"http";delete t.secure;var i=CryptoJS.MD5(this.email(e)).toString(),r=n+"://www.gravatar.com/avatar/"+i,o=_.map(t,function(e,t){return t+"="+e}).join("&");return""!==o&&(r+="?"+o),r}},friendsWith:function(e,t){return _.contains(e.friendIds,t)},myFriend:function(e){return User.current().friendsWith(e._id)},currentWorkspaceForUser:function(e){return Workspaces.findOne({_id:e.currentWorkspaceId})},workspaces:function(e){return Workspaces.find({members:e._id})},workspacesWhithoutCurrent:function(e){return Workspaces.find({$and:[{members:e.id},{_id:{$ne:e.currentWorkspaceId}}]})}},CurrentWorkspace=function(){return UsersManager.currentWorkspaceForUser(Meteor.user())}}(),function(){WorkflowStatus=function(e){_.extend(this,e)},Workflows=new Meteor.Collection2("workflows",{schema:{title:{type:String,label:"Title"},code:{type:String},defaultStatus:{type:String},status:{type:WorkflowStatus,optional:!0},isDefault:{type:Number},createdAt:{type:Date,autoValue:function(){return this.isInsert?new Date:this.isUpsert?{$setOnInsert:new Date}:(this.unset(),void 0)},denyUpdate:!0},updatedAt:{type:Date,autoValue:function(){return this.isUpdate?new Date:void 0},denyInsert:!0,optional:!0}},virtualFields:{}}),WorkflowsManager={userWorkflow:function(){var e=Meteor.user(),t=GroupsManager.userGroup(e);return Workflows.findOne({code:t.workflowCode})},userWorkflowForWorkspace:function(e,t){var n=GroupsManager.userGroupForWorkspace(e,t);return Workflows.findOne({code:n.workflowCode})},nextStatuses:function(e){var t=WorkflowsManager.userWorkflow(Meteor.user()),n=t.status[e];return n?n.map(function(e){return Statuses.findOne({code:e})}):!1}}}(),function(){Workspaces=new Meteor.Collection2("workspaces",{schema:{title:{type:String,label:"Title"},userId:{type:String,label:"user Id"},color:{type:String,label:"Color",optional:!0},members:{type:[String],label:"Members"},createdAt:{type:Date,autoValue:function(){return this.isInsert?new Date:this.isUpsert?{$setOnInsert:new Date}:(this.unset(),void 0)},denyUpdate:!0},updatedAt:{type:Date,autoValue:function(){return this.isUpdate?new Date:void 0},denyInsert:!0,optional:!0}},virtualFields:{}}),WorkspaceManager={allProjects:function(e){return Projects.find({workspaceId:e._id})},allCategories:function(e){return Categories.find({workspaceId:e._id})},allMembers:function(e){return e.members?Meteor.users.find({_id:{$in:e.members}}):void 0},notMembers:function(e){return Meteor.users.find({_id:{$nin:e.members}})},allGroups:function(e){return Groups.find({workspaceId:e._id})}}}(),function(){Meteor.startup(function(){}),Meteor.isClient&&Meteor.startup(function(){Deps.autorun(function(){var e=Workflows.namedContext();e.isValid()||console.log(e.invalidKeys())})})}();